{"remainingRequest":"C:\\Users\\EDZ\\Desktop\\研发项目\\vue-project\\trunk\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\EDZ\\Desktop\\研发项目\\vue-project\\trunk\\src\\views\\market\\decorate\\store_decorate_edit.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\EDZ\\Desktop\\研发项目\\vue-project\\trunk\\src\\views\\market\\decorate\\store_decorate_edit.vue","mtime":1572415124534},{"path":"C:\\Users\\EDZ\\Desktop\\研发项目\\vue-project\\trunk\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1558492728398},{"path":"C:\\Users\\EDZ\\Desktop\\研发项目\\vue-project\\trunk\\node_modules\\babel-loader\\lib\\index.js","mtime":1558492720858},{"path":"C:\\Users\\EDZ\\Desktop\\研发项目\\vue-project\\trunk\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1558492728398},{"path":"C:\\Users\\EDZ\\Desktop\\研发项目\\vue-project\\trunk\\node_modules\\vue-loader\\lib\\index.js","mtime":1558492728890}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\r\n\r\nimport ElUploadImg from \"@/components/uploadImg/el_upload_img_multi\";\r\nimport draggable from 'vuedraggable';\r\n\r\nexport default {\r\n  data() {\r\n    return {\r\n      // 门店装修id\r\n      id:null,\r\n      id2:null,\r\n      // 当前栏目所在位置\r\n      activeName:'first',\r\n      // 上传图片路径\r\n      imgApi:this.api.market.picture_upload,\r\n      // 门店装修提交数据\r\n      store_decorate_obj: {\r\n        // 门店id\r\n        storeId:this.$route.query.storeId,\r\n        // 门店code\r\n        storeCode:this.$route.query.storeCode,\r\n        // 门店名称\r\n        name:this.$route.query.name,\r\n        // 门店故事标题\r\n        storeStoryTitle:'',\r\n        // 门店故事封面\r\n        storeStoryCover:[], \r\n        // 门店故事上传图片列表\r\n        storeStoryContent:[],\r\n        // 客户故事标题\r\n        customerStoryTitle:'',\r\n        // 客户故事封面\r\n        customerStoryCover:[], \r\n        // 客户故事上传图片列表\r\n        customerStoryContent:[]\r\n      },\r\n      // 门店故事描述\r\n      rules:{\r\n        // 门店故事标题校验\r\n        storeStoryTitle: [{ required: true, message: '请输入门店故事标题！', trigger: 'blur' }],\r\n        // 门店故事封面校验\r\n        storeStoryCover: [{ type: 'array', required: true, message: '至少上传一张门店故事封面图片！', trigger: 'blur' }],\r\n        // 门店故事上传图片列表校验\r\n        storeStoryContent: [{ type: 'array', required: true, message: '至少上传一张门店故事内容图片！', trigger: 'blur' }],\r\n        // 客户故事标题校验\r\n        customerStoryTitle: [{ required: true, message: '请输入客户故事标题！', trigger: 'blur' }],\r\n        // 客户故事封面校验\r\n        customerStoryCover: [{ type: 'array', required: true, message: '至少上传一张客户故事封面图片！', trigger: 'blur' }],\r\n        // 客户故事上传图片列表校验\r\n        customerStoryContent: [{ type: 'array', required: true, message: '至少上传一张客户故事内容图片！', trigger: 'blur' }],\r\n      }\r\n    };\r\n  },\r\n  created() {\r\n  },\r\n  mounted() {\r\n    // 获取门店故事\r\n    this.storeFitment_getByStoreIdAndType(0);\r\n    // 获取客户故事\r\n    this.storeFitment_getByStoreIdAndType(1);\r\n  },\r\n  computed: {\r\n    // 门店故事封面\r\n    storeStoryCover() {\r\n      return this.store_decorate_obj.storeStoryCover;\r\n    },\r\n    // 门店故事上传图片列表\r\n    storeStoryContent() {\r\n      return this.store_decorate_obj.storeStoryContent;\r\n    },\r\n    // 客户故事封面\r\n    customerStoryCover() {\r\n      return this.store_decorate_obj.customerStoryCover;\r\n    },\r\n    // 客户故事上传图片列表\r\n    customerStoryContent() {\r\n      return this.store_decorate_obj.customerStoryContent;\r\n    },\r\n  },\r\n  watch: {\r\n    /**\r\n     * 监听门店故事封面\r\n     */\r\n    storeStoryCover(value) {\r\n      if(value && value.length > 0) {\r\n        this.$refs.formName.clearValidate('storeStoryCover');\r\n      }else{\r\n        this.$refs.formName.validateField('storeStoryCover');\r\n      }\r\n    },\r\n    /**\r\n     * 监听门店故事上传图片列表\r\n     */\r\n    storeStoryContent(value) {\r\n      if(value && value.length > 0) {\r\n        this.$refs.formName.clearValidate('storeStoryContent');\r\n      }else{\r\n        this.$refs.formName.validateField('storeStoryContent');\r\n      }\r\n    },\r\n    /**\r\n     * 监听客户故事封面\r\n     */\r\n    customerStoryCover(value) {\r\n      if(value && value.length > 0) {\r\n        this.$refs.formName.clearValidate('customerStoryCover');\r\n      }else{\r\n        this.$refs.formName.validateField('customerStoryCover');\r\n      }\r\n    },\r\n    /**\r\n     * 监听客户故事上传图片列表\r\n     */\r\n    customerStoryContent(value) {\r\n      if(value && value.length > 0) {\r\n        this.$refs.formName.clearValidate('customerStoryContent');\r\n      }else{\r\n        this.$refs.formName.validateField('customerStoryContent');\r\n      }\r\n    },\r\n  },\r\n  methods: {\r\n    /**\r\n     * 获取门店信息\r\n     */\r\n    storeFitment_getByStoreIdAndType(type) {\r\n      this.request(\r\n          this.api.market.storeFitment_getByStoreIdAndType,\r\n          {\r\n            storeId:this.store_decorate_obj.storeId,\r\n            type\r\n          }     \r\n        ).then(res => {\r\n          if(res.storeFitment) {\r\n            if(type == 0) {\r\n              this.id = res.storeFitment.id;\r\n              this.store_decorate_obj.storeStoryTitle = res.storeFitment.title;\r\n              this.store_decorate_obj.storeStoryCover.push({url:res.storeFitment.cover});\r\n              res.storeFitmentPictureList.forEach((item, index) => {\r\n                this.store_decorate_obj.storeStoryContent.push({ url:item.picture });\r\n              });\r\n            }else{\r\n              this.id2 = res.storeFitment.id;\r\n              this.store_decorate_obj.customerStoryTitle = res.storeFitment.title;\r\n              this.store_decorate_obj.customerStoryCover.push({url:res.storeFitment.cover});\r\n              res.storeFitmentPictureList.forEach((item, index) => {\r\n                this.store_decorate_obj.customerStoryContent.push({ url:item.picture });\r\n              });\r\n            }\r\n          }\r\n        });\r\n    },\r\n     /**\r\n     * 新建门店装修\r\n     */\r\n    save() {\r\n      let that = this;\r\n    \r\n      this.$refs.formName.validate((valid) => {\r\n        if(valid) {\r\n          let data = {\r\n            storeFitment: {},\r\n            storeFitmentPictureList: []\r\n          };\r\n          let type = this.activeName == 'first' ? 0 : 1;\r\n\r\n          if(type == 0) {\r\n            data.storeFitment.id = this.id; \r\n            data.storeFitment.cover = this.store_decorate_obj.storeStoryCover[0].url; \r\n            data.storeFitment.storeId = this.store_decorate_obj.storeId;\r\n            data.storeFitment.title = this.store_decorate_obj.storeStoryTitle;\r\n            data.storeFitment.type = type;\r\n            this.store_decorate_obj.storeStoryContent.forEach((item, index) => {\r\n              data.storeFitmentPictureList.push({\r\n                \"picture\":item.url,\r\n                \"sort\":index,\r\n                \"storeId\":this.store_decorate_obj.storeId,\r\n                \"type\":type\r\n              })\r\n            });\r\n          }else{\r\n            data.storeFitment.id = this.id2; \r\n            data.storeFitment.cover = this.store_decorate_obj.customerStoryCover[0].url; \r\n            data.storeFitment.storeId = this.store_decorate_obj.storeId;\r\n            data.storeFitment.title = this.store_decorate_obj.customerStoryTitle;\r\n            data.storeFitment.type = type;\r\n            this.store_decorate_obj.customerStoryContent.forEach((item, index) => {\r\n              data.storeFitmentPictureList.push({\r\n                \"picture\":item.url,\r\n                \"sort\":index,\r\n                \"storeId\":this.store_decorate_obj.storeId,\r\n                \"type\":type\r\n              })\r\n            });\r\n          };\r\n          // console.log(data)\r\n          // return;\r\n          this.request(\r\n            this.api.market.storeFitment_save,\r\n            data    \r\n          ).then(res => {\r\n            this.warn('保存成功!');\r\n            this.href('market/decorate/store_decorate_list');\r\n          });\r\n        }else{\r\n           this.warn('门店装修信息未填写完整，请填写完整后重试！','warning');\r\n          return;\r\n        };\r\n      });\r\n    },\r\n    /**\r\n     * 提示\r\n     * @param { String } message 提示文案\r\n     * @param { String } type 提示类型\r\n     */\r\n    warn(message, type) {\r\n      this.$message({\r\n        message: message,\r\n        type: type || \"success\"\r\n      });\r\n    },\r\n    /**\r\n     * 跳转\r\n     * @param { String } routeName 路由跳转名字\r\n     */\r\n    href(routeName) {\r\n      this.$router.push({\r\n        path: `/${routeName}`\r\n      });\r\n    },\r\n    /**\r\n     * 点击页数\r\n     * @param { Number } pageIndex 当前页\r\n     */\r\n    handleCurrentChange(pageIndex) {\r\n      this.filtersData.pageIndex = pageIndex;\r\n      this.user_list();\r\n    },\r\n    /**\r\n     * 改变每页展示条目\r\n     * @param { Number } pageSize 每页展示条目\r\n     */\r\n    handleSizeChange(pageSize) {\r\n      this.filtersData.pageSize = pageSize;\r\n      this.user_list();\r\n    }\r\n  },\r\n  components: {\r\n    ElUploadImg,\r\n    draggable\r\n  }\r\n};\r\n",{"version":3,"sources":["store_decorate_edit.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAqFA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"store_decorate_edit.vue","sourceRoot":"src/views/market/decorate","sourcesContent":["<template>\r\n  <div class=\"store-decorate\">\r\n   <div class=\"box\">\r\n      <!-- 新增门店装修 -->\r\n      <el-form\r\n         :model=\"store_decorate_obj\"\r\n         label-width=\"120px\"\r\n         class=\"form-label\"\r\n         :rules=\"rules\"\r\n         ref=\"formName\">\r\n         <div>当前门店：{{ store_decorate_obj.name }}</div>\r\n         <el-tabs class=\"el-tabs\" v-model=\"activeName\" type=\"card\">\r\n            <!-- 1.门店故事 -->\r\n            <el-tab-pane label=\"门店故事\" name=\"first\">\r\n              <div v-if=\"activeName == 'first'\">\r\n                <el-form-item label=\"标题：\" prop=\"storeStoryTitle\">\r\n                  <el-input maxlength=\"22\" v-model=\"store_decorate_obj.storeStoryTitle\" placeholder=\"请输入内容\"></el-input>\r\n                </el-form-item>\r\n                <el-form-item label=\"封面图：\" prop=\"storeStoryCover\">\r\n                  <el-upload-img\r\n                    :imgApi=\"imgApi\"\r\n                    v-model=\"store_decorate_obj.storeStoryCover\"\r\n                    :EchoDisplayImages=\"store_decorate_obj.storeStoryCover\"\r\n                    CatalogName=\"fitment\"\r\n                    describe=\"图片大小不超过1M\"\r\n                    :LssUpimgLimit=\"1\"\r\n                  ></el-upload-img>\r\n                </el-form-item>\r\n                <el-form-item label=\"门店故事：\" prop=\"storeStoryContent\">\r\n                  <el-upload-img\r\n                    :imgApi=\"imgApi\"\r\n                    v-model=\"store_decorate_obj.storeStoryContent\"\r\n                    :EchoDisplayImages=\"store_decorate_obj.storeStoryContent\"\r\n                    CatalogName=\"fitment\"\r\n                    describe=\"最多允许上传20张图片，单张图片大小不超过1M\"\r\n                    :LssUpimgLimit=\"20\"\r\n                  ></el-upload-img>\r\n                </el-form-item>\r\n              </div>\r\n            </el-tab-pane>\r\n            <!-- 1.客户故事 -->\r\n            <el-tab-pane label=\"客户故事\" name=\"second\">\r\n              <div v-if=\"activeName == 'second'\">\r\n                <el-form-item label=\"标题：\" prop=\"customerStoryTitle\">\r\n                  <el-input maxlength=\"22\" v-model=\"store_decorate_obj.customerStoryTitle\" placeholder=\"请输入内容\"></el-input>\r\n                </el-form-item>\r\n                <el-form-item label=\"封面图：\" prop=\"customerStoryCover\">\r\n                  <el-upload-img\r\n                    :imgApi=\"imgApi\"\r\n                    v-model=\"store_decorate_obj.customerStoryCover\"\r\n                    :EchoDisplayImages=\"store_decorate_obj.customerStoryCover\"\r\n                    CatalogName=\"fitment\"\r\n                    describe=\"图片大小不超过1M\"\r\n                    :LssUpimgLimit=\"1\"\r\n                  ></el-upload-img>\r\n                </el-form-item>\r\n                <el-form-item label=\"客户故事：\" prop=\"customerStoryContent\">\r\n                  <el-upload-img\r\n                    :imgApi=\"imgApi\"\r\n                    v-model=\"store_decorate_obj.customerStoryContent\"\r\n                    :EchoDisplayImages=\"store_decorate_obj.customerStoryContent\"\r\n                    CatalogName=\"fitment\"\r\n                    describe=\"最多允许上传20张图片，单张图片大小不超过1M\"\r\n                    :LssUpimgLimit=\"20\"\r\n                  ></el-upload-img>\r\n                </el-form-item>\r\n              </div>\r\n            </el-tab-pane>\r\n         </el-tabs>\r\n        <el-form-item label=\"\">\r\n          <el-button type=\"primary\" @click=\"save\">保存</el-button>\r\n        </el-form-item>\r\n      </el-form>\r\n      <!-- 门店装修预览 -->\r\n      <div class=\"exhibition\" v-show=\"activeName == 'first'\">\r\n        <div v-for=\"(item, index) in store_decorate_obj.storeStoryContent\" :key=\"index\"><img :src=\"item.url\" alt=\"\"></div>\r\n      </div>\r\n      <div class=\"exhibition\" v-show=\"activeName == 'second'\">\r\n        <div v-for=\"(item, index) in store_decorate_obj.customerStoryContent\" :key=\"index\"><img :src=\"item.url\" alt=\"\"></div>\r\n      </div>\r\n   </div>\r\n  </div>\r\n</template>\r\n<script>\r\n\r\nimport ElUploadImg from \"@/components/uploadImg/el_upload_img_multi\";\r\nimport draggable from 'vuedraggable';\r\n\r\nexport default {\r\n  data() {\r\n    return {\r\n      // 门店装修id\r\n      id:null,\r\n      id2:null,\r\n      // 当前栏目所在位置\r\n      activeName:'first',\r\n      // 上传图片路径\r\n      imgApi:this.api.market.picture_upload,\r\n      // 门店装修提交数据\r\n      store_decorate_obj: {\r\n        // 门店id\r\n        storeId:this.$route.query.storeId,\r\n        // 门店code\r\n        storeCode:this.$route.query.storeCode,\r\n        // 门店名称\r\n        name:this.$route.query.name,\r\n        // 门店故事标题\r\n        storeStoryTitle:'',\r\n        // 门店故事封面\r\n        storeStoryCover:[], \r\n        // 门店故事上传图片列表\r\n        storeStoryContent:[],\r\n        // 客户故事标题\r\n        customerStoryTitle:'',\r\n        // 客户故事封面\r\n        customerStoryCover:[], \r\n        // 客户故事上传图片列表\r\n        customerStoryContent:[]\r\n      },\r\n      // 门店故事描述\r\n      rules:{\r\n        // 门店故事标题校验\r\n        storeStoryTitle: [{ required: true, message: '请输入门店故事标题！', trigger: 'blur' }],\r\n        // 门店故事封面校验\r\n        storeStoryCover: [{ type: 'array', required: true, message: '至少上传一张门店故事封面图片！', trigger: 'blur' }],\r\n        // 门店故事上传图片列表校验\r\n        storeStoryContent: [{ type: 'array', required: true, message: '至少上传一张门店故事内容图片！', trigger: 'blur' }],\r\n        // 客户故事标题校验\r\n        customerStoryTitle: [{ required: true, message: '请输入客户故事标题！', trigger: 'blur' }],\r\n        // 客户故事封面校验\r\n        customerStoryCover: [{ type: 'array', required: true, message: '至少上传一张客户故事封面图片！', trigger: 'blur' }],\r\n        // 客户故事上传图片列表校验\r\n        customerStoryContent: [{ type: 'array', required: true, message: '至少上传一张客户故事内容图片！', trigger: 'blur' }],\r\n      }\r\n    };\r\n  },\r\n  created() {\r\n  },\r\n  mounted() {\r\n    // 获取门店故事\r\n    this.storeFitment_getByStoreIdAndType(0);\r\n    // 获取客户故事\r\n    this.storeFitment_getByStoreIdAndType(1);\r\n  },\r\n  computed: {\r\n    // 门店故事封面\r\n    storeStoryCover() {\r\n      return this.store_decorate_obj.storeStoryCover;\r\n    },\r\n    // 门店故事上传图片列表\r\n    storeStoryContent() {\r\n      return this.store_decorate_obj.storeStoryContent;\r\n    },\r\n    // 客户故事封面\r\n    customerStoryCover() {\r\n      return this.store_decorate_obj.customerStoryCover;\r\n    },\r\n    // 客户故事上传图片列表\r\n    customerStoryContent() {\r\n      return this.store_decorate_obj.customerStoryContent;\r\n    },\r\n  },\r\n  watch: {\r\n    /**\r\n     * 监听门店故事封面\r\n     */\r\n    storeStoryCover(value) {\r\n      if(value && value.length > 0) {\r\n        this.$refs.formName.clearValidate('storeStoryCover');\r\n      }else{\r\n        this.$refs.formName.validateField('storeStoryCover');\r\n      }\r\n    },\r\n    /**\r\n     * 监听门店故事上传图片列表\r\n     */\r\n    storeStoryContent(value) {\r\n      if(value && value.length > 0) {\r\n        this.$refs.formName.clearValidate('storeStoryContent');\r\n      }else{\r\n        this.$refs.formName.validateField('storeStoryContent');\r\n      }\r\n    },\r\n    /**\r\n     * 监听客户故事封面\r\n     */\r\n    customerStoryCover(value) {\r\n      if(value && value.length > 0) {\r\n        this.$refs.formName.clearValidate('customerStoryCover');\r\n      }else{\r\n        this.$refs.formName.validateField('customerStoryCover');\r\n      }\r\n    },\r\n    /**\r\n     * 监听客户故事上传图片列表\r\n     */\r\n    customerStoryContent(value) {\r\n      if(value && value.length > 0) {\r\n        this.$refs.formName.clearValidate('customerStoryContent');\r\n      }else{\r\n        this.$refs.formName.validateField('customerStoryContent');\r\n      }\r\n    },\r\n  },\r\n  methods: {\r\n    /**\r\n     * 获取门店信息\r\n     */\r\n    storeFitment_getByStoreIdAndType(type) {\r\n      this.request(\r\n          this.api.market.storeFitment_getByStoreIdAndType,\r\n          {\r\n            storeId:this.store_decorate_obj.storeId,\r\n            type\r\n          }     \r\n        ).then(res => {\r\n          if(res.storeFitment) {\r\n            if(type == 0) {\r\n              this.id = res.storeFitment.id;\r\n              this.store_decorate_obj.storeStoryTitle = res.storeFitment.title;\r\n              this.store_decorate_obj.storeStoryCover.push({url:res.storeFitment.cover});\r\n              res.storeFitmentPictureList.forEach((item, index) => {\r\n                this.store_decorate_obj.storeStoryContent.push({ url:item.picture });\r\n              });\r\n            }else{\r\n              this.id2 = res.storeFitment.id;\r\n              this.store_decorate_obj.customerStoryTitle = res.storeFitment.title;\r\n              this.store_decorate_obj.customerStoryCover.push({url:res.storeFitment.cover});\r\n              res.storeFitmentPictureList.forEach((item, index) => {\r\n                this.store_decorate_obj.customerStoryContent.push({ url:item.picture });\r\n              });\r\n            }\r\n          }\r\n        });\r\n    },\r\n     /**\r\n     * 新建门店装修\r\n     */\r\n    save() {\r\n      let that = this;\r\n    \r\n      this.$refs.formName.validate((valid) => {\r\n        if(valid) {\r\n          let data = {\r\n            storeFitment: {},\r\n            storeFitmentPictureList: []\r\n          };\r\n          let type = this.activeName == 'first' ? 0 : 1;\r\n\r\n          if(type == 0) {\r\n            data.storeFitment.id = this.id; \r\n            data.storeFitment.cover = this.store_decorate_obj.storeStoryCover[0].url; \r\n            data.storeFitment.storeId = this.store_decorate_obj.storeId;\r\n            data.storeFitment.title = this.store_decorate_obj.storeStoryTitle;\r\n            data.storeFitment.type = type;\r\n            this.store_decorate_obj.storeStoryContent.forEach((item, index) => {\r\n              data.storeFitmentPictureList.push({\r\n                \"picture\":item.url,\r\n                \"sort\":index,\r\n                \"storeId\":this.store_decorate_obj.storeId,\r\n                \"type\":type\r\n              })\r\n            });\r\n          }else{\r\n            data.storeFitment.id = this.id2; \r\n            data.storeFitment.cover = this.store_decorate_obj.customerStoryCover[0].url; \r\n            data.storeFitment.storeId = this.store_decorate_obj.storeId;\r\n            data.storeFitment.title = this.store_decorate_obj.customerStoryTitle;\r\n            data.storeFitment.type = type;\r\n            this.store_decorate_obj.customerStoryContent.forEach((item, index) => {\r\n              data.storeFitmentPictureList.push({\r\n                \"picture\":item.url,\r\n                \"sort\":index,\r\n                \"storeId\":this.store_decorate_obj.storeId,\r\n                \"type\":type\r\n              })\r\n            });\r\n          };\r\n          // console.log(data)\r\n          // return;\r\n          this.request(\r\n            this.api.market.storeFitment_save,\r\n            data    \r\n          ).then(res => {\r\n            this.warn('保存成功!');\r\n            this.href('market/decorate/store_decorate_list');\r\n          });\r\n        }else{\r\n           this.warn('门店装修信息未填写完整，请填写完整后重试！','warning');\r\n          return;\r\n        };\r\n      });\r\n    },\r\n    /**\r\n     * 提示\r\n     * @param { String } message 提示文案\r\n     * @param { String } type 提示类型\r\n     */\r\n    warn(message, type) {\r\n      this.$message({\r\n        message: message,\r\n        type: type || \"success\"\r\n      });\r\n    },\r\n    /**\r\n     * 跳转\r\n     * @param { String } routeName 路由跳转名字\r\n     */\r\n    href(routeName) {\r\n      this.$router.push({\r\n        path: `/${routeName}`\r\n      });\r\n    },\r\n    /**\r\n     * 点击页数\r\n     * @param { Number } pageIndex 当前页\r\n     */\r\n    handleCurrentChange(pageIndex) {\r\n      this.filtersData.pageIndex = pageIndex;\r\n      this.user_list();\r\n    },\r\n    /**\r\n     * 改变每页展示条目\r\n     * @param { Number } pageSize 每页展示条目\r\n     */\r\n    handleSizeChange(pageSize) {\r\n      this.filtersData.pageSize = pageSize;\r\n      this.user_list();\r\n    }\r\n  },\r\n  components: {\r\n    ElUploadImg,\r\n    draggable\r\n  }\r\n};\r\n</script>\r\n<style  lang=\"less\" scoped>\r\n  .store-decorate{\r\n     background: #fff;\r\n     padding:  0 20px 20px 20px;\r\n     margin: 8px;\r\n  }\r\n  .form-label{\r\n     width: 50%;\r\n  }\r\n  .el-tabs{\r\n     margin-top: 20px;\r\n  }\r\n  .exhibition{\r\n     width: 450px;\r\n     height: 700px;\r\n     background: #f5f5f5;\r\n     margin-right: 15%;\r\n     box-shadow: #aaa 2px 10px 10px;\r\n     overflow-y: scroll;\r\n  }\r\n  .exhibition img{\r\n    width: 100%;\r\n  }\r\n  .box{\r\n     display: flex;\r\n     justify-content:space-between;\r\n  }\r\n  .form-label {\r\n    margin-top: 20px;\r\n    .el-input,\r\n    .el-select {\r\n      width: 370px;\r\n    }\r\n    .el-checkbox-group {\r\n      width: 650px;\r\n    }\r\n    .el-checkbox-group /deep/ .el-checkbox{\r\n      width: 100px;\r\n    }\r\n    .el-input-short {\r\n      width: 180px;\r\n    }\r\n    .video-upload {\r\n      border: 1px dashed #d9d9d9;\r\n      border-radius: 6px;\r\n      cursor: pointer;\r\n      position: relative;\r\n      overflow: hidden;\r\n      width: 80px;\r\n      height: 80px;\r\n      text-align: center;\r\n      line-height: 80px;\r\n      span {\r\n        font-size: 35px;\r\n        color: #d9d9d9;\r\n      }\r\n    }\r\n    .video-upload-p {\r\n      color: #666;\r\n      font-size: 12px;\r\n    }\r\n    .video-upload:hover {\r\n      border: 1px dashed #409eff;\r\n    }\r\n  }\r\n</style>\r\n\r\n"]}]}
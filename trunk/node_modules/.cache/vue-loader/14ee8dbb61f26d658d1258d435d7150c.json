{"remainingRequest":"C:\\Users\\EDZ\\Desktop\\研发项目\\vue-project\\trunk\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\EDZ\\Desktop\\研发项目\\vue-project\\trunk\\src\\components\\treePermission.vue?vue&type=style&index=0&id=48b4a8c6&scoped=true&lang=less&","dependencies":[{"path":"C:\\Users\\EDZ\\Desktop\\研发项目\\vue-project\\trunk\\src\\components\\treePermission.vue","mtime":1572415127970},{"path":"C:\\Users\\EDZ\\Desktop\\研发项目\\vue-project\\trunk\\node_modules\\css-loader\\index.js","mtime":1558492728478},{"path":"C:\\Users\\EDZ\\Desktop\\研发项目\\vue-project\\trunk\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":1558492728890},{"path":"C:\\Users\\EDZ\\Desktop\\研发项目\\vue-project\\trunk\\node_modules\\postcss-loader\\src\\index.js","mtime":1558492728823},{"path":"C:\\Users\\EDZ\\Desktop\\研发项目\\vue-project\\trunk\\node_modules\\less-loader\\dist\\cjs.js","mtime":1566193719488},{"path":"C:\\Users\\EDZ\\Desktop\\研发项目\\vue-project\\trunk\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1558492728398},{"path":"C:\\Users\\EDZ\\Desktop\\研发项目\\vue-project\\trunk\\node_modules\\vue-loader\\lib\\index.js","mtime":1558492728890}],"contextDependencies":[],"result":["\r\n.rebort_table_title,\r\n.rebort_table_list {\r\n  display: flex;\r\n  border: 1px solid #ccc;\r\n  border-right: none;\r\n  border-top: none;\r\n}\r\n\r\n.rebort_table_title li,\r\n.rebort_table_list li {\r\n  width: 25%;\r\n  min-height: 47px;\r\n  /*display: flex;*/\r\n  /*align-items: center;*/\r\n  border-right: 1px solid #ccc;\r\n  box-sizing: border-box;padding: 12px 20px 5px;\r\n  .el-checkbox{margin-bottom: 6px;}\r\n}\r\n.per_wrapper {\r\n  overflow-y: scroll;\r\n  max-height: 500px;\r\n}\r\n.span_menu {\r\n  margin-left: 5px;\r\n}\r\n.el-checkbox{\r\n  margin-right: 20px;\r\n}\r\n.shuang{\r\n  background:#f5f5f5;\r\n  }\r\n.dan{\r\n  background: #fff;\r\n}\r\n",{"version":3,"sources":["treePermission.vue"],"names":[],"mappings":";AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"treePermission.vue","sourceRoot":"src/components","sourcesContent":["<style scoped lang=\"less\">\r\n.rebort_table_title,\r\n.rebort_table_list {\r\n  display: flex;\r\n  border: 1px solid #ccc;\r\n  border-right: none;\r\n  border-top: none;\r\n}\r\n\r\n.rebort_table_title li,\r\n.rebort_table_list li {\r\n  width: 25%;\r\n  min-height: 47px;\r\n  /*display: flex;*/\r\n  /*align-items: center;*/\r\n  border-right: 1px solid #ccc;\r\n  box-sizing: border-box;padding: 12px 20px 5px;\r\n  .el-checkbox{margin-bottom: 6px;}\r\n}\r\n.per_wrapper {\r\n  overflow-y: scroll;\r\n  max-height: 500px;\r\n}\r\n.span_menu {\r\n  margin-left: 5px;\r\n}\r\n.el-checkbox{\r\n  margin-right: 20px;\r\n}\r\n.shuang{\r\n  background:#f5f5f5;\r\n  }\r\n.dan{\r\n  background: #fff;\r\n}\r\n</style>\r\n\r\n<template>\r\n  <div :class=\"{'per_wrapper' : curLevel == 1}\">\r\n    <div v-for=\"(item, index) in list\" :key=\"item.id\" >\r\n      <ul class=\"rebort_table_list\" :class=\"{shuang : index%2 === 0, dan : index%2 === 1}\">\r\n        <!--功能权限-->\r\n        <li :style=\"dyStyle(item)\">\r\n          <el-checkbox\r\n            v-if=\"item.type == 'application' || item.type == 'menu'\"\r\n            v-model=\"item.checked\"\r\n            @change=\"leftChange(item)\"\r\n          ></el-checkbox>\r\n          <i\r\n            v-if=\"!subIsAuth(item)\"\r\n            :class=\"[item.sublist.length > 0 ? item.display ? 'el-icon-minus' : 'el-icon-plus' : '']\"\r\n            @click=\"clickUl(item)\"\r\n          ></i>\r\n          <span class=\"span_menu\">{{ item.name }}</span>\r\n        </li>\r\n        <!--操作权限-->\r\n        <li>\r\n          <template v-if=\"subIsAuth(item)\">\r\n            <el-checkbox\r\n              v-for=\"(sub, _index) in item.sublist\"\r\n              :key=\"sub.id\"\r\n              v-model=\"sub.checked\"\r\n              @change=\"authChange(item, $event)\"\r\n            >{{ sub.name }}</el-checkbox>\r\n          </template>\r\n        </li>\r\n        <!--字段权限-->\r\n        <li>\r\n          <el-checkbox v-if=\"0\">{{ item.name }}</el-checkbox>\r\n        </li>\r\n        <!--数据权限-->\r\n        <li>\r\n          <template v-if=\"item._dataAuthList && item._dataAuthList.length\">\r\n            <el-radio-group v-model=\"item._dataAuthChecked\">\r\n              <el-radio :label=\"dataAuth.authType\" v-for=\"dataAuth in item._dataAuthList\" :key=\"dataAuth.id\">{{ dataAuth.name }}</el-radio>\r\n            </el-radio-group>\r\n          </template>\r\n        </li>\r\n      </ul>\r\n      <tree-permission\r\n        v-show=\"item.display\"\r\n        :data=\"item.sublist\"\r\n        :parent=\"item\"\r\n        v-if=\"item.sublist && !subIsAuth(item)\"\r\n        :level=\"curLevel + 1\"\r\n        @item-change=\"itemChange\"\r\n      ></tree-permission>\r\n    </div>\r\n  </div>\r\n</template>\r\n<script>\r\nexport default {\r\n  name: \"tree-permission\",\r\n  props: [\"data\", \"level\", \"parent\"],\r\n  data() {\r\n    return {\r\n      list: this.data,\r\n      curLevel: this.level || 1\r\n    };\r\n  },\r\n  mounted(){\r\n    this.$nextTick(()=>{\r\n\r\n    })\r\n  },\r\n  watch: {\r\n    data(val) {\r\n      this.list = val;\r\n    }\r\n  },\r\n  computed: {\r\n    notAuth() {\r\n      var list = this.list;\r\n      var isAuth =\r\n        list && list.length > 0 && list.findIndex(f => f.type == \"auth\") > -1;\r\n      return !isAuth;\r\n    }\r\n  },\r\n  methods: {\r\n    // 功能权限缩进计算\r\n    dyStyle(item) {\r\n      var ty = item.type;\r\n      if (ty == \"application\" || ty == \"menu\") {\r\n        var sty = {\r\n          paddingLeft: 23 * this.curLevel + \"px\"\r\n        };\r\n        return sty;\r\n      }\r\n    },\r\n    // 功能权限选中状态改变\r\n    leftChange(item, originAuth) {\r\n      this.$emit(\r\n        \"item-change\",\r\n        this.parent != undefined ? this.parent : item.checked\r\n      );\r\n      if (!originAuth) {\r\n        this.rightChange(item);\r\n      }\r\n    },\r\n    // 功能权限展开 收起\r\n    clickUl(item) {\r\n      if (item.display == undefined) {\r\n        this.$set(item, \"display\", true);\r\n      } else {\r\n        item.display = !item.display;\r\n      }\r\n    },\r\n    // 判断是否是操作权限\r\n    subIsAuth(item) {\r\n      var sublist = item.sublist;\r\n      return (\r\n        sublist.length > 0 && sublist.findIndex(f => f.type == \"auth\") > -1\r\n      );\r\n    },\r\n    // 操作权限改变时\r\n    authChange(parent) {\r\n      if (parent) {\r\n        var hasChecked = parent.sublist.findIndex(f => f.checked) > -1;\r\n        if (hasChecked) {\r\n          parent.checked = hasChecked;\r\n          this.leftChange(parent, 1);\r\n        }\r\n      }\r\n    },\r\n    // 除操作权限外的权限 全选全不选\r\n    rightChange(item) {\r\n      var self = this;\r\n      if (item.sublist && item.sublist.length > 0) {\r\n        item.sublist.forEach(f => {\r\n          f.checked = item.checked;\r\n          self.rightChange(f);\r\n        });\r\n      }\r\n      // if (!item.checked && item.sublist && item.sublist.length > 0) {\r\n      // }\r\n    },\r\n    //\r\n    itemChange(parent) {\r\n      this.authChange(parent);\r\n    }\r\n  }\r\n};\r\n</script>\r\n\r\n"]}]}
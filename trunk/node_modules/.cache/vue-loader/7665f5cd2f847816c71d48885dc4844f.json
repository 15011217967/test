{"remainingRequest":"C:\\Users\\EDZ\\Desktop\\研发项目\\vue-project\\trunk\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\EDZ\\Desktop\\研发项目\\vue-project\\trunk\\src\\views\\product\\commodity\\management.vue?vue&type=style&index=0&id=35b5041f&lang=less&scoped=true&","dependencies":[{"path":"C:\\Users\\EDZ\\Desktop\\研发项目\\vue-project\\trunk\\src\\views\\product\\commodity\\management.vue","mtime":1572415123905},{"path":"C:\\Users\\EDZ\\Desktop\\研发项目\\vue-project\\trunk\\node_modules\\css-loader\\index.js","mtime":1558492728478},{"path":"C:\\Users\\EDZ\\Desktop\\研发项目\\vue-project\\trunk\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":1558492728890},{"path":"C:\\Users\\EDZ\\Desktop\\研发项目\\vue-project\\trunk\\node_modules\\postcss-loader\\src\\index.js","mtime":1558492728823},{"path":"C:\\Users\\EDZ\\Desktop\\研发项目\\vue-project\\trunk\\node_modules\\less-loader\\dist\\cjs.js","mtime":1566193719488},{"path":"C:\\Users\\EDZ\\Desktop\\研发项目\\vue-project\\trunk\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1558492728398},{"path":"C:\\Users\\EDZ\\Desktop\\研发项目\\vue-project\\trunk\\node_modules\\vue-loader\\lib\\index.js","mtime":1558492728890}],"contextDependencies":[],"result":["\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\r\n.item-padding{\r\n  padding: 20px\r\n}\r\n",{"version":3,"sources":["management.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAuQA;AACA;AACA","file":"management.vue","sourceRoot":"src/views/product/commodity","sourcesContent":["<!--\r\n * @Description: 同步库存及隐藏接口调用\r\n * @Author: elephant\r\n * @Date: 2019-08-20 08:58:21\r\n * @LastEditTime: 2019-08-22 19:26:52\r\n * @LastEditors: Please set LastEditors\r\n -->\r\n<template>\r\n  <div class=\"bg-fff item-margin item-padding\">\r\n  <el-tabs v-model=\"activeName\">\r\n    <el-tab-pane label=\"自定义\" name=\"customize\">\r\n     <el-form\r\n      class=\"item-form\"\r\n      :rules=\"rules\"\r\n      :model=\"filtersData\"\r\n      label-width=\"100px\"\r\n      size=\"small\"\r\n      ref=\"filtersForm\"\r\n      inline\r\n    >\r\n      <el-row>\r\n        <el-col :span=\"24\">\r\n          <el-form-item prop=\"_service\" label=\"微服务：\">\r\n            <el-select placeholder=\"请选择\" class=\"input-w\" v-model=\"filtersData._service\">\r\n              <el-option\r\n                v-for=\"item in serviceOptions\"\r\n                :key=\"item.id\"\r\n                :label=\"item.name\"\r\n                :value=\"item.id\"\r\n              ></el-option>\r\n            </el-select>\r\n          </el-form-item>\r\n        </el-col>\r\n        <el-col :span=\"24\">\r\n          <el-form-item prop=\"_url\" label=\"url：\">\r\n            <el-input class=\"input-w\" placeholder=\"请输入内容\" v-model=\"filtersData._url\"></el-input>\r\n          </el-form-item>\r\n        </el-col>\r\n        <el-col :span=\"24\">\r\n          <el-form-item prop=\"_method\" label=\"请求方式：\">\r\n            <el-select placeholder=\"请选择\" class=\"input-w\" v-model=\"filtersData._method\">\r\n              <el-option\r\n                v-for=\"item in methodOptions\"\r\n                :key=\"item.name\"\r\n                :label=\"item.name\"\r\n                :value=\"item.name\"\r\n              ></el-option>\r\n            </el-select>\r\n          </el-form-item>\r\n        </el-col>\r\n        <el-col :span=\"24\">\r\n          <el-form-item prop=\"_form\" label=\"请求类型：\">\r\n            <el-select placeholder=\"请选择\" class=\"input-w\" v-model=\"filtersData._form\">\r\n              <el-option\r\n                v-for=\"item in formOptions\"\r\n                :key=\"item.id\"\r\n                :label=\"item.name\"\r\n                :value=\"item.id\"\r\n              ></el-option>\r\n            </el-select>\r\n          </el-form-item>\r\n        </el-col>\r\n        <el-col :span=\"24\" v-for=\"(item,index) in params\" :key=\"index\">\r\n          <el-form-item :label=\" index == 0 ? '请求参数：':'   '\">\r\n            <el-input class=\"ztree-w\" v-model.trim=\"item.name\" placeholder=\"请输入字段名称\"></el-input>\r\n          </el-form-item>\r\n          <el-form-item>\r\n            <el-input class=\"ztree-w\" v-model.trim=\"item.code\" placeholder=\"请输入参数\"></el-input>\r\n            <i\r\n              @click=\"removeDomain(item)\"\r\n              v-if=\"index != 0\"\r\n              v-show=\"!item.id\"\r\n              class=\"el-icon-error\"\r\n            ></i>\r\n          </el-form-item>\r\n        </el-col>\r\n        <el-col :span=\"24\">\r\n          <el-form-item label>\r\n            <el-button class=\"label-input-right\" @click=\"addContent\">新增参数</el-button>\r\n          </el-form-item>\r\n        </el-col>\r\n      </el-row>\r\n\r\n    <div class=\"item-footer\">\r\n      <el-button size=\"small\" @click=\"submitForm('filtersForm')\" type=\"primary\">发送请求</el-button>\r\n    </div>\r\n    </el-form>\r\n    </el-tab-pane>\r\n      <el-tab-pane label=\"同步库存\" name=\"aync\">\r\n          <el-form\r\n      class=\"item-form\"\r\n      :rules=\"rules\"\r\n      :model=\"ayncFormData\"\r\n      label-width=\"100px\"\r\n      size=\"small\"\r\n      ref=\"ayncForm\"\r\n      inline\r\n    >\r\n      <el-row>\r\n        <el-col :span=\"24\">\r\n          <el-form-item prop=\"goodsOwner\" label=\"货主：\">\r\n            <!-- <el-select placeholder=\"请选择\" class=\"input-w\" v-model=\"ayncFormData.goodsOwner\">\r\n              <el-option\r\n                v-for=\"item in goodsOwnerOptions\"\r\n                :key=\"item.code\"\r\n                :label=\"item.name\"\r\n                :value=\"item.code\"\r\n              ></el-option>\r\n            </el-select> -->\r\n             <el-input class=\"input-w\" disabled placeholder=\"请输入内容\" v-model=\"name\"></el-input>\r\n          </el-form-item>\r\n        </el-col>\r\n        <el-col :span=\"24\">\r\n          <el-form-item prop=\"warehouseCode\" label=\"仓库：\">\r\n            <el-select placeholder=\"请选择\" class=\"input-w\" v-model=\"ayncFormData.warehouseCode\">\r\n              <el-option\r\n                v-for=\"item in warehouseOptions\"\r\n                :key=\"item.code\"\r\n                :label=\"item.name\"\r\n                :value=\"item.code\"\r\n              ></el-option>\r\n            </el-select>\r\n          </el-form-item>\r\n        </el-col>\r\n        <el-col :span=\"24\">\r\n          <el-form-item prop=\"productGoodsCode\" label=\"货品编码：\">\r\n            <el-input class=\"input-w\" placeholder=\"请输入内容\" v-model=\"ayncFormData.productGoodsCode\"></el-input>\r\n          </el-form-item>\r\n        </el-col>\r\n       \r\n      </el-row>\r\n    </el-form>\r\n        <el-button size=\"small\" @click=\"ayncForm('ayncForm')\" type=\"primary\">同步库存</el-button>\r\n      </el-tab-pane>\r\n      </el-tabs>\r\n  </div>\r\n</template>\r\n<script>\r\n/**\r\n * { url: service + \"/xxxxxxx\", method: \"post\", form: true, auth: false }\r\n * url: \"\"\r\n * method: \"get\"   默认 post\r\n * form: true      默认 false\r\n * auth: true      默认 true\r\n * tip: true       默认 false\r\n */\r\nexport default {\r\n  data() {\r\n    return {\r\n      activeName:'customize',\r\n      rules: {},\r\n      filtersData: {\r\n        _url: \"\",\r\n        _service: \"\",\r\n        _method: \"post\",\r\n        _form: false\r\n      },\r\n      params: [{ name: \"\", code: \"\" }],\r\n      serviceOptions: [\r\n        { name: \"order\", id: \"order-service\" },\r\n        { name: \"collocation\", id: \"collocation-service\" },\r\n        { name: \"content\", id: \"content-service\" },\r\n        { name: \"system\", id: \"system-service\" },\r\n        { name: \"product\", id: \"product-service\" },\r\n        { name: \"retail-store\", id: \"retail-store-service\" },\r\n        { name: \"user\", id: \"user-service\" }\r\n      ],\r\n      methodOptions: [\r\n        { name: \"get\" },\r\n        { name: \"post\" },\r\n        { name: \"put\" },\r\n        { name: \"delete\" }\r\n      ],\r\n      formOptions: [{ name: \"form\", id: true }, { name: \"json\", id: false }],\r\n      ayncFormData:{\r\n        goodsOwner:null,\r\n        warehouseCode:null,\r\n        productGoodsCode:null\r\n      },\r\n      name:'',\r\n      goodsOwnerOptions:[],\r\n      warehouseOptions:[],\r\n    };\r\n  },\r\n  created() {\r\n    this.getGoodsOwner();\r\n    this.getWarehouse();\r\n  },\r\n  methods: {\r\n    addContent() {\r\n      this.params.push({\r\n        code: \"\",\r\n        name: \"\"\r\n      });\r\n    },\r\n    //删除新增内容\r\n    removeDomain(item) {\r\n      let index = this.params.indexOf(item);\r\n      if (index !== -1) {\r\n        this.params.splice(index, 1);\r\n      }\r\n    },\r\n    //发送请求\r\n    submitForm() {\r\n      let param = this.params;\r\n      let paramName, paramCode;\r\n      let filter = this.filtersData;\r\n      let obj = new Object();\r\n\r\n      for (let i = 0; i < param.length; i++) {\r\n        paramName = !!param[i].name ? param[i].name : '';\r\n        paramCode = !!param[i].code ? param[i].code : '';\r\n        if(!!paramName){\r\n            obj[paramName] = paramCode;\r\n        }\r\n      }\r\n      console.log(obj);\r\n      this.request({\r\n          url:filter._service + '/'+filter._url,\r\n          method:filter._method,\r\n          form:filter._form\r\n      }\r\n          , obj)\r\n      .then(res =>{\r\n         this.$message.success('成功')\r\n      })\r\n    },\r\n    //同步库存新增\r\n    //获取货主\r\n    getGoodsOwner(){\r\n       this.request(this.api.system.goodsOwner_getByUserId)\r\n       .then(res =>{\r\n          console.log(res);\r\n           // this.goodsOwnerOptions=res;\r\n           this.name=res.name;\r\n           this.ayncFormData.goodsOwner=res.code;\r\n\r\n       })\r\n    },\r\n    //获取仓库\r\n    getWarehouse(){\r\n       this.request(this.api.system.warehouse_getListByUser)\r\n       .then(res =>{\r\n          //console.log(res);\r\n          this.warehouseOptions=res;\r\n      })\r\n     \r\n    },\r\n    //同步库存\r\n    ayncForm(){\r\n      this.request(this.api.product.productGoodsStock_synchronousStock,this.ayncFormData)\r\n      .then(res =>{\r\n         this.$message.success('同步成功')\r\n      })\r\n      .catch(err=>{\r\n        this.$message.error('同步失败');\r\n      })\r\n    },\r\n\r\n  }\r\n};\r\n</script>\r\n<style lang=\"less\" scoped>\r\n.item-padding{\r\n  padding: 20px\r\n}\r\n</style>\r\n"]}]}
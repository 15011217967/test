{"remainingRequest":"C:\\Users\\EDZ\\Desktop\\研发项目\\vue-project\\trunk\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\EDZ\\Desktop\\研发项目\\vue-project\\trunk\\src\\views\\index.vue?vue&type=style&index=0&lang=css&","dependencies":[{"path":"C:\\Users\\EDZ\\Desktop\\研发项目\\vue-project\\trunk\\src\\views\\index.vue","mtime":1572415125431},{"path":"C:\\Users\\EDZ\\Desktop\\研发项目\\vue-project\\trunk\\node_modules\\css-loader\\index.js","mtime":1558492728478},{"path":"C:\\Users\\EDZ\\Desktop\\研发项目\\vue-project\\trunk\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":1558492728890},{"path":"C:\\Users\\EDZ\\Desktop\\研发项目\\vue-project\\trunk\\node_modules\\postcss-loader\\src\\index.js","mtime":1558492728823},{"path":"C:\\Users\\EDZ\\Desktop\\研发项目\\vue-project\\trunk\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1558492728398},{"path":"C:\\Users\\EDZ\\Desktop\\研发项目\\vue-project\\trunk\\node_modules\\vue-loader\\lib\\index.js","mtime":1558492728890}],"contextDependencies":[],"result":["\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\r\n.index-con {\r\n  height: 100%;\r\n  width: 100%;\r\n  box-sizing: border-box;\r\n}\r\n\r\n.aside {\r\n  width: 64px !important;\r\n  height: 100%;\r\n  background-color: #5c5e67;\r\n  margin: 0px;\r\n}\r\n.asideshow {\r\n  width: 200px !important;\r\n  min-height: calc(100% - 70px);\r\n  background-color: #5c5e67;\r\n  margin: -1px;\r\n}\r\n.el-aside {\r\n  position: relative;\r\n  z-index: 105;\r\n}\r\n\r\n.v-topBar {\r\n  display: flex;\r\n  justify-content: flex-start;\r\n  align-items: center;\r\n  height: 60px;\r\n  background-color: #ffffff;\r\n  margin-bottom: 8px;\r\n}\r\n.topbar-wrap i {\r\n  margin-right: 10px;\r\n  cursor: pointer;\r\n  font-size: 18px;\r\n  vertical-align: -2px;\r\n}\r\n",{"version":3,"sources":["index.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA0IA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"index.vue","sourceRoot":"src/views","sourcesContent":["<!--\r\n * @Description:公共页面\r\n * @Author: your name\r\n * @Date: 2019-07-01 15:20:22\r\n * @LastEditTime: 2019-08-20 17:20:41\r\n * @LastEditors: Please set LastEditors\r\n -->\r\n<template>\r\n  <el-container class=\"index-con\">\r\n    <el-header class=\"index-header\" height=\"60px;\">\r\n      <navcon @change-menu=\"changeMenu\" :allMenu=\"allMenu\" :menuId=\"menuId\"></navcon>\r\n    </el-header>\r\n    <el-container class=\"main-con\">\r\n      <el-aside class=\"asideshow\">\r\n        <leftnav :allMenu=\"subMenu\"></leftnav>\r\n      </el-aside>\r\n      <el-main class=\"index-main\">\r\n        <el-scrollbar>\r\n          <div class=\"v-topBar\">\r\n            <nav class=\"topbar-wrap\">\r\n              <i class=\"el-icon-back\" v-if=\"backBtn\" @click=\"routerback\"></i>\r\n              <i class=\"fa fa-home fa-lg\" v-else></i>\r\n              <span>{{topTitle}}</span>\r\n            </nav>\r\n          </div>\r\n          <router-view class=\"base-c\"></router-view>\r\n        </el-scrollbar>\r\n      </el-main>\r\n    </el-container>\r\n  </el-container>\r\n</template>\r\n<script>\r\n// 导入组件\r\nimport navcon from \"../components/navcon.vue\";\r\nimport leftnav from \"../components/leftnav.vue\";\r\n import {routeList} from '@/datas/menucode.js'\r\n\r\nexport default {\r\n  name: \"index\",\r\n  data() {\r\n    return {\r\n      menuId: \"\", //头部菜单选中项\r\n      allMenu: [],\r\n      subMenu: [],\r\n      topTitle: \"\",\r\n      topBar: null,\r\n      backBtn: null\r\n    };\r\n  },\r\n  // 注册组件\r\n  components: {\r\n    navcon,\r\n    leftnav\r\n  },\r\n  created() {\r\n    this.getMenu();\r\n  },\r\n  methods: {\r\n    routerback() {\r\n      // if(this.$router.history.current.name != 'index'){\r\n      this.$router.go(-1);\r\n      // }\r\n    },\r\n    changeMenu(menuId) {\r\n      this.menuId = menuId;\r\n      var allmenu = this.allMenu;\r\n      var curMenu = allmenu.find(f => f.id == menuId);\r\n    //  console.log(menuId);\r\n      \r\n      if (curMenu) {\r\n        let curSubMenu = curMenu.sublist;\r\n       // console.log(curSubMenu)\r\n        let _path = routeList,\r\n          _pathLen = _path.length;\r\n      //  console.time(\"用时\");\r\n        for (let k = 0; k < _pathLen; k++) {\r\n          let forFn = function(arr,elem) {\r\n            for (let i = 0, arrLen = arr.length; i < arrLen; i++) {\r\n              let item= arr[i];\r\n              if (item.id == elem.id) {\r\n                item.icon = !!elem.icon ? elem.icon : null;\r\n                break;\r\n              } else if (item.sublist.length > 0) {\r\n                forFn(item.sublist, elem);\r\n              }\r\n            }\r\n          };\r\n          forFn(curSubMenu, _path[k]);\r\n        }\r\n      //  console.log(curSubMenu);\r\n        \r\n        this.subMenu = curSubMenu;\r\n      //  console.timeEnd(\"用时\");\r\n      }\r\n    },\r\n\r\n    async getMenu() {\r\n      // try {\r\n      let appId = window.localStorage.getItem(\"appId\");\r\n      let allmenu = await this.request(\r\n        this.api.system.AUTH_MENU_LIST,\r\n        {\r\n          appId: appId\r\n        },\r\n        true\r\n      );\r\n      this.allMenu = allmenu;\r\n      if (allmenu) {\r\n        let _route= this.$route;\r\n         console.log(_route);\r\n        let currentid =_route.meta.currentid;\r\n        let path = _route.path;\r\n        let curRoute = routeList.find(f =>( f.path == path && f.id == currentid));\r\n        if (curRoute) {\r\n          this.menuId = curRoute.pid;\r\n        } else {\r\n          this.menuId = allmenu[0].id;\r\n        }\r\n        this.changeMenu(this.menuId);\r\n      }\r\n      // } catch (error) {\r\n      //   this.$router.push({ path: \"/home\" });\r\n      // }\r\n    }\r\n  },\r\n  mounted() {\r\n    this.topTitle = this.$route.meta.title;\r\n  },\r\n  watch: {\r\n    $route() {\r\n      this.topTitle = this.$route.meta.title;\r\n      this.topBar = this.$route.meta.topBar == false ? false : true;\r\n      this.backBtn = this.$route.meta.backBtn == false ? false : true;\r\n    }\r\n  }\r\n};\r\n</script>\r\n<style>\r\n.index-con {\r\n  height: 100%;\r\n  width: 100%;\r\n  box-sizing: border-box;\r\n}\r\n\r\n.aside {\r\n  width: 64px !important;\r\n  height: 100%;\r\n  background-color: #5c5e67;\r\n  margin: 0px;\r\n}\r\n.asideshow {\r\n  width: 200px !important;\r\n  min-height: calc(100% - 70px);\r\n  background-color: #5c5e67;\r\n  margin: -1px;\r\n}\r\n.el-aside {\r\n  position: relative;\r\n  z-index: 105;\r\n}\r\n\r\n.v-topBar {\r\n  display: flex;\r\n  justify-content: flex-start;\r\n  align-items: center;\r\n  height: 60px;\r\n  background-color: #ffffff;\r\n  margin-bottom: 8px;\r\n}\r\n.topbar-wrap i {\r\n  margin-right: 10px;\r\n  cursor: pointer;\r\n  font-size: 18px;\r\n  vertical-align: -2px;\r\n}\r\n</style>\r\n"]}]}
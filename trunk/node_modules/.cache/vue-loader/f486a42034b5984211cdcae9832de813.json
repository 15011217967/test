{"remainingRequest":"C:\\Users\\EDZ\\Desktop\\研发项目\\vue-project\\trunk\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\EDZ\\Desktop\\研发项目\\vue-project\\trunk\\src\\components\\uploadImg\\table_upload_img.vue?vue&type=style&index=0&id=7a575e93&lang=less&scoped=true&","dependencies":[{"path":"C:\\Users\\EDZ\\Desktop\\研发项目\\vue-project\\trunk\\src\\components\\uploadImg\\table_upload_img.vue","mtime":1572415127730},{"path":"C:\\Users\\EDZ\\Desktop\\研发项目\\vue-project\\trunk\\node_modules\\css-loader\\index.js","mtime":1558492728478},{"path":"C:\\Users\\EDZ\\Desktop\\研发项目\\vue-project\\trunk\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":1558492728890},{"path":"C:\\Users\\EDZ\\Desktop\\研发项目\\vue-project\\trunk\\node_modules\\postcss-loader\\src\\index.js","mtime":1558492728823},{"path":"C:\\Users\\EDZ\\Desktop\\研发项目\\vue-project\\trunk\\node_modules\\less-loader\\dist\\cjs.js","mtime":1566193719488},{"path":"C:\\Users\\EDZ\\Desktop\\研发项目\\vue-project\\trunk\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1558492728398},{"path":"C:\\Users\\EDZ\\Desktop\\研发项目\\vue-project\\trunk\\node_modules\\vue-loader\\lib\\index.js","mtime":1558492728890}],"contextDependencies":[],"result":["\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\r\n.img-wh{\r\n  margin: 10px 0;\r\n  text-align: center;\r\n  img{\r\n    height: 300px;\r\n    width: auto;\r\n    max-width: 460px;\r\n  }\r\n}\r\n .upload-img-footer{\r\n float: right\r\n}\r\n",{"version":3,"sources":["table_upload_img.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAgIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"table_upload_img.vue","sourceRoot":"src/components/uploadImg","sourcesContent":["<template>\r\n    <el-dialog\r\n    title=\"图片\"\r\n    :visible.sync=\"upLoadVisible\"\r\n    class=\"alarmPopup\"\r\n    width=\"500px\"\r\n    >\r\n    <div class=\"img-wh\">\r\n       <img width=\"100%\" :src=\"dialogImageUrl\" alt>\r\n    </div>\r\n    <div>\r\n      <el-upload\r\n        :action=\"action()\"\r\n        class=\"img-upload\"\r\n        ref=\"uploadImg\"\r\n        list-type=\"picture\"\r\n        accept=\"image/*\"\r\n        :limit=\"1\"\r\n        :headers=\"tokenHeaders\"\r\n        :file-list=\"productImgs\"\r\n        :multiple=\"isMultiple\"\r\n        :on-preview=\"handlePictureCardPreview\"\r\n        :on-remove=\"handleRemove\"\r\n        :on-success=\"handleAvatarSuccess\"\r\n        :data=\"uploadData\"\r\n        :before-upload=\"beforeAvatarUpload\"\r\n        :on-exceed=\"handleExceed\"\r\n        :on-error=\"imgUploadError\"\r\n        :auto-upload=\"false\"\r\n      >\r\n       <el-button size=\"small\" slot=\"trigger\">{{imgTxt}}</el-button>\r\n        <div class=\"upload-img-footer\">\r\n            <el-button  size=\"small\" @click=\"closeDialog()\" >取消修改</el-button>\r\n            <el-button  size=\"small\" @click=\"submitUpload\" type=\"success\" >确定修改</el-button>\r\n        </div>\r\n      </el-upload>\r\n    </div>\r\n\r\n  </el-dialog>\r\n</template>\r\n<script>\r\nimport { getToken } from \"@/utils/auth\";\r\nconst token = getToken();\r\nexport default {\r\n    name:'tp-upload-img',\r\n    data(){\r\n        return{\r\n            upLoadVisible:false,\r\n            editDisabled:true,//可编辑状态  除使用状态其他都不可编辑\r\n            showDisabled:true,//查看时 使用状态不可编辑\r\n            _type:'',\r\n            filtersData:{\r\n            },\r\n            imgTxt:'上传图片',\r\n             //单图上传\r\n            dialogImageUrl: \"\", //图片存的字符串\r\n            productImgs: [],\r\n            isMultiple: false,\r\n            imgLimit: 6,\r\n            tokenHeaders: { accessToken: token },\r\n            uploadData: { catalog: \"product\" },\r\n            listData:{}\r\n       }\r\n    },\r\n    created(){\r\n    },\r\n    methods:{\r\n        submitUpload() {\r\n          this.$refs.uploadImg.submit();\r\n        },\r\n        //初始化\r\n        uploadImgPopupInit(row){\r\n          this.productImgs=[];\r\n          this.imgTxt=row.image == ''?'上传图片':'修改图片';\r\n          this.dialogImageUrl=row.image;\r\n          this.listData=row;\r\n          this.upLoadVisible=true;\r\n        },\r\n        //颜色上传\r\n        action() {\r\n          return this.api.FN_ALLPATH(this.api.content.picture_upload);\r\n        },\r\n        handleRemove(file, fileList) {\r\n          //移除图片\r\n          this.dialogImageUrl=this.listData.image;\r\n        },\r\n        handlePictureCardPreview(file) {\r\n          //预览图片时调用\r\n          this.dialogImageUrl = file.url;\r\n        },\r\n        beforeAvatarUpload(file) {\r\n          //文件上传之前调用做一些拦截限制\r\n          this.uploadData = { catalog: \"content\", name: \"photo\" };\r\n          const isJPG = true;\r\n          const isLt2M = file.size / 1024 / 1024 < 2;\r\n          if (!isLt2M) {\r\n            this.$message.error(\"上传图片大小不能超过 2MB!\");\r\n          }\r\n          return isJPG && isLt2M;\r\n        },\r\n        handleAvatarSuccess(res, file, list) {\r\n          //图片上传成功 需修改 .data.imageUrl\r\n          this.dialogImageUrl = res.data.imageUrl;\r\n          this.listData.image = res.data.imageUrl;\r\n          this.$message.success('修改成功');\r\n          setTimeout(() => {\r\n            this.closeDialog();\r\n          }, 2000);\r\n          //this.imageUrl = URL.createObjectURL(file.raw);\r\n        },\r\n        handleExceed(files, fileList) {\r\n          //图片上传超过数量限制\r\n          this.$message.error(\"图片只能上传一张!\");\r\n        },\r\n        imgUploadError(err, file, fileList) {\r\n          //图片上传失败调用\r\n          this.$message.error(\"上传图片失败!\");\r\n        },\r\n        //关闭\r\n        closeDialog(){\r\n            this.dialogImageUrl='';\r\n            this.productImgs=[];\r\n            this.upLoadVisible=false;\r\n        },\r\n    }\r\n}\r\n</script>\r\n<style lang=\"less\" scoped>\r\n.img-wh{\r\n  margin: 10px 0;\r\n  text-align: center;\r\n  img{\r\n    height: 300px;\r\n    width: auto;\r\n    max-width: 460px;\r\n  }\r\n}\r\n .upload-img-footer{\r\n float: right\r\n}\r\n</style>\r\n"]}]}
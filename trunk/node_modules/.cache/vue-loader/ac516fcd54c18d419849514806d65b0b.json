{"remainingRequest":"C:\\Users\\EDZ\\Desktop\\研发项目\\vue-project\\trunk\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\EDZ\\Desktop\\研发项目\\vue-project\\trunk\\src\\views\\product\\components\\BtchReplaceImg.vue?vue&type=style&index=0&id=21505616&lang=less&scoped=true&","dependencies":[{"path":"C:\\Users\\EDZ\\Desktop\\研发项目\\vue-project\\trunk\\src\\views\\product\\components\\BtchReplaceImg.vue","mtime":1585053690054},{"path":"C:\\Users\\EDZ\\Desktop\\研发项目\\vue-project\\trunk\\node_modules\\css-loader\\index.js","mtime":1558492728478},{"path":"C:\\Users\\EDZ\\Desktop\\研发项目\\vue-project\\trunk\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":1558492728890},{"path":"C:\\Users\\EDZ\\Desktop\\研发项目\\vue-project\\trunk\\node_modules\\postcss-loader\\src\\index.js","mtime":1558492728823},{"path":"C:\\Users\\EDZ\\Desktop\\研发项目\\vue-project\\trunk\\node_modules\\less-loader\\dist\\cjs.js","mtime":1566193719488},{"path":"C:\\Users\\EDZ\\Desktop\\研发项目\\vue-project\\trunk\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1558492728398},{"path":"C:\\Users\\EDZ\\Desktop\\研发项目\\vue-project\\trunk\\node_modules\\vue-loader\\lib\\index.js","mtime":1558492728890}],"contextDependencies":[],"result":["\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\r\n.color-wrap {\r\n  display: flex;\r\n  align-items: flex-start;\r\n  > h5 {\r\n    width: 75px;\r\n    font-weight: 100;\r\n    min-width: 75px;\r\n  }\r\n  .color {\r\n    > li {\r\n      display: inline-block;\r\n      border: 1px solid #eeeeee;\r\n      border-radius: 4px;\r\n      padding: 2px 12px;\r\n      cursor: pointer;\r\n      margin: 0 10px 10px 0;\r\n    }\r\n    > li.active {\r\n      border-radius: 4px;\r\n      background-color: #2290e8;\r\n    }\r\n    > li.disabled {\r\n      cursor: not-allowed;\r\n      color: #e8e8e8;\r\n    }\r\n  }\r\n}\r\n.update-wrap{\r\n  display: flex;\r\n  align-items: flex-start;\r\n  > h5 {\r\n    width: 75px;\r\n    font-weight: 100;\r\n    min-width: 75px;\r\n  }\r\n}\r\n.hide /deep/ .el-upload--picture-card {\r\n    display: none;\r\n}\r\n",{"version":3,"sources":["BtchReplaceImg.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAsKA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"BtchReplaceImg.vue","sourceRoot":"src/views/product/components","sourcesContent":["<!--\r\n * @Author: elephant\r\n * @Date: 2020-02-12 10:01:50\r\n * @LastEditTime : 2020-02-14 09:45:42\r\n * @LastEditors  : Please set LastEditors\r\n * @Description: 批量修改图片\r\n * @custom_string_obkoro: 看看写点什么\r\n -->\r\n<template>\r\n  <div>\r\n    <el-dialog title=\"批量更新图片：\" :visible.sync=\"dialogVisible\" class=\"alarmPopup\" width=\"600px\">\r\n      <div>\r\n        <div class=\"color-wrap\">\r\n          <h5>选择颜色：</h5>\r\n          <ul class=\"color\">\r\n            <li\r\n              v-for=\"(item,index) in colorList\"\r\n              :key=\"index\"\r\n              @click=\"colorClick(item,index)\"\r\n              :class=\"{'active':item.isSelected}\"\r\n            >{{item.color}}</li>\r\n          </ul>\r\n        </div>\r\n        <div class=\"update-wrap\">\r\n          <h5>更新图片：</h5>\r\n          <div class=\"update\">\r\n          <el-upload\r\n            :class=\"{hide:hideUpload}\"\r\n            :action=\"action()\"\r\n            list-type=\"picture-card\"\r\n            accept=\"image/*\"\r\n            :limit=\"1\"\r\n            :headers=\"tokenHeaders\"\r\n            :file-list=\"productImgs\"\r\n            :on-preview=\"handlePictureCardPreview\"\r\n            :on-remove=\"handleRemove\"\r\n            :on-success=\"handleAvatarSuccess\"\r\n            :data=\"uploadData\"\r\n            :before-upload=\"beforeAvatarUpload\"\r\n            :on-exceed=\"handleExceed\"\r\n            :on-error=\"imgUploadError\"\r\n          >\r\n            <i class=\"el-icon-plus\" ></i>\r\n          </el-upload>\r\n          </div>\r\n        </div>\r\n      </div>\r\n      <div class=\"item-right mt-10\">\r\n        <el-button size=\"small\" @click=\"closeDialog\">取消</el-button>\r\n        <el-button size=\"small\" @click=\"submit()\" type=\"primary\">确认</el-button>\r\n      </div>\r\n    </el-dialog>\r\n     <el-dialog :visible.sync=\"imgDialogVisible\">\r\n      <img width=\"100%\" :src=\"dialogImageUrl\" alt />\r\n    </el-dialog>\r\n  </div>\r\n</template>\r\n<script>\r\nimport { getToken } from \"@/utils/auth\";\r\nlet token = getToken(); \r\nexport default {\r\n  data() {\r\n    return {\r\n      hideUpload: false,\r\n      filtersForm:{\r\n        colorCode:'',\r\n        color: \"\",\r\n        imgUrl:'',\r\n      },\r\n      dialogVisible: false,\r\n      colorList: [],\r\n      // 图片\r\n      imgDialogVisible:false,\r\n      dialogImageUrl: \"\",\r\n      productImgs: [],\r\n      isMultiple: false,\r\n      tokenHeaders: { accessToken: token },\r\n      uploadData: { catalog: \"product\" },\r\n    };\r\n  },\r\n  created() {},\r\n  methods: {\r\n    propInit(arr) {\r\n      for (let k = 0; k < arr.length; k++) {\r\n        arr[k].isSelected = false;\r\n      }\r\n      this.colorList = arr;\r\n      this.dialogVisible = true;\r\n    },\r\n    colorClick(item, index) {\r\n      item.isSelected = !item.isSelected;\r\n      this.filtersForm.color = item.isSelected ? item.color : \"\";\r\n      this.filtersForm.colorCode = item.isSelected ? item.colorCode : \"\";\r\n      this.noColorClick(item);\r\n    },\r\n    // 置灰其他未选\r\n    noColorClick(item) {\r\n      for (let i = 0; i < this.colorList.length; i++) {\r\n        if (item.colorCode != this.colorList[i].colorCode) {\r\n          this.colorList[i].isSelected = false;\r\n        }\r\n      }\r\n    },\r\n    action() {\r\n      return this.api.FN_ALLPATH(this.api.content.picture_upload);\r\n    },\r\n    handleRemove(file, fileList) {\r\n      //移除图片\r\n      console.log(file, fileList);\r\n      this.hideUpload=false;\r\n      //  this.request(\r\n      //     this.api.product.enterpriseArchivalInformation_logicDelete,\r\n      //     { id: file.uid },true\r\n      //   );\r\n    },\r\n    handlePictureCardPreview(file) {\r\n      //预览图片时调用\r\n      console.log(file);\r\n      this.dialogImageUrl = file.url;\r\n      this.imgDialogVisible = true;\r\n    },\r\n    beforeAvatarUpload(file) {\r\n      //文件上传之前调用做一些拦截限制\r\n      const isJPG = true;\r\n      const isLt1M = file.size / 1024 / 1024 < 1;\r\n      if (!isLt1M) {\r\n        this.$message.error(\"上传图片大小不能超过 1MB!\");\r\n      }\r\n      this.hideUpload=true;\r\n      return isJPG && isLt1M;\r\n    },\r\n    handleAvatarSuccess(res, file) {\r\n      //图片上传成功\r\n     // console.log(res.data.imageUrl);\r\n      this.filtersForm.imgUrl = res.data.imageUrl;\r\n      \r\n      // this.imageUrl = URL.createObjectURL(file.raw);\r\n    },\r\n    handleExceed(files, fileList) {\r\n      //图片上传超过数量限制\r\n      this.$message.error(\"logo只能上传一张!\");\r\n    },\r\n    imgUploadError(err, file, fileList) {\r\n      //图片上传失败调用\r\n      this.$message.error(\"上传图片失败!\");\r\n      this.hideUpload=true;\r\n    },\r\n    submit() {\r\n      if (!this.filtersForm.color) {\r\n        this.$message.error(\"请选择颜色！\");\r\n        return false;\r\n      }\r\n      if (!this.filtersForm.imgUrl) {\r\n        this.$message.error(\"请上传图片！\");\r\n        return false;\r\n      }\r\n      this.$emit('imgChange',this.filtersForm);\r\n      this.closeDialog();\r\n    },\r\n    closeDialog() {\r\n      this.dialogVisible = false;\r\n    }\r\n  }\r\n};\r\n</script>\r\n<style lang=\"less\" scoped>\r\n.color-wrap {\r\n  display: flex;\r\n  align-items: flex-start;\r\n  > h5 {\r\n    width: 75px;\r\n    font-weight: 100;\r\n    min-width: 75px;\r\n  }\r\n  .color {\r\n    > li {\r\n      display: inline-block;\r\n      border: 1px solid #eeeeee;\r\n      border-radius: 4px;\r\n      padding: 2px 12px;\r\n      cursor: pointer;\r\n      margin: 0 10px 10px 0;\r\n    }\r\n    > li.active {\r\n      border-radius: 4px;\r\n      background-color: #2290e8;\r\n    }\r\n    > li.disabled {\r\n      cursor: not-allowed;\r\n      color: #e8e8e8;\r\n    }\r\n  }\r\n}\r\n.update-wrap{\r\n  display: flex;\r\n  align-items: flex-start;\r\n  > h5 {\r\n    width: 75px;\r\n    font-weight: 100;\r\n    min-width: 75px;\r\n  }\r\n}\r\n.hide /deep/ .el-upload--picture-card {\r\n    display: none;\r\n}\r\n</style>\r\n"]}]}
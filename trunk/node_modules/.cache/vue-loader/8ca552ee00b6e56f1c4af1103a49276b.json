{"remainingRequest":"C:\\Users\\EDZ\\Desktop\\研发项目\\vue-project\\trunk\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\EDZ\\Desktop\\研发项目\\vue-project\\trunk\\src\\views\\product\\components\\CommondityBasicAndTag.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\EDZ\\Desktop\\研发项目\\vue-project\\trunk\\src\\views\\product\\components\\CommondityBasicAndTag.vue","mtime":1585053690051},{"path":"C:\\Users\\EDZ\\Desktop\\研发项目\\vue-project\\trunk\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1558492728398},{"path":"C:\\Users\\EDZ\\Desktop\\研发项目\\vue-project\\trunk\\node_modules\\babel-loader\\lib\\index.js","mtime":1558492720858},{"path":"C:\\Users\\EDZ\\Desktop\\研发项目\\vue-project\\trunk\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1558492728398},{"path":"C:\\Users\\EDZ\\Desktop\\研发项目\\vue-project\\trunk\\node_modules\\vue-loader\\lib\\index.js","mtime":1558492728890}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\r\nexport default {\r\n  name: \"basic-and-tag\",\r\n  props: {\r\n    productFormData: {\r\n      type: Object\r\n    },\r\n    editDisabled:{\r\n        type:Boolean,\r\n        default:false\r\n    },\r\n    showDisabled:{\r\n        type:Boolean,\r\n        default:false\r\n    },\r\n  },\r\n  data() {\r\n    return {\r\n      //商品状态集合\r\n      productStatus: {\r\n        brandActive: false,\r\n        brandLoading: true,\r\n        brandOwnerActive: false,\r\n        brandOwnerLoading: true,\r\n        DesignCompanyActive: false,\r\n        DesignCompanyLoading: true\r\n      },\r\n      activeName:\"tag\",\r\n      //标签切换默认\r\n      brandOptions: [], //品牌\r\n      brandOwnerOptions: [], //品牌商\r\n      designCompanyOptions: [], //设计商\r\n      ownerOptions: [],//货主\r\n    };\r\n  },\r\n  created() {\r\n    //获取货主\r\n    this.getOwnerOptions();\r\n  },\r\n  methods: {\r\n    //做延时加载下拉数据\r\n    handleVisibleChange(type, active, str) {\r\n      if (!!type) {\r\n        if (!active) {\r\n          switch (str) {\r\n            //品牌\r\n            case \"brand\":\r\n              this.productStatus.brandActive = true;\r\n              this.productStatus.brandLoading = false;\r\n              this.getBrandOption();\r\n              break;\r\n            //品牌商\r\n            case \"brandOwner\":\r\n              this.productStatus.brandOwnerActive = true;\r\n              this.productStatus.brandOwnerLoading = false;\r\n              this.getBrandOwnerOption();\r\n              break;\r\n            //设计商\r\n            case \"designCompany\":\r\n              this.productStatus.designCompanyActive = true;\r\n              this.productStatus.designCompanyLoading = false;\r\n              this.getDesignCompanyOption();\r\n              break;\r\n            default:\r\n              break;\r\n          }\r\n        }\r\n      }\r\n    },\r\n    //获取货主\r\n    getOwnerOptions(){\r\n       this.request(this.api.warehouse.warehouseBase_goodsOwner_list, {valid: true,orderBy:'create_time'},true).then(\r\n        res => {\r\n          this.ownerOptions = res.data;\r\n        }\r\n      );\r\n    },\r\n    //获取设计商\r\n    getDesignCompanyOption() {\r\n      this.request(\r\n        this.api.product.designCompany_list,\r\n        { valid: true },\r\n        true\r\n      ).then(data => {\r\n        let _data = data.data;\r\n        this.designCompanyOptions = _data;\r\n      });\r\n    },\r\n    //获取品牌商\r\n    getBrandOwnerOption() {\r\n      this.request(\r\n        this.api.product.productBrandOwner_list,\r\n        {\r\n          valid: true\r\n        },\r\n        true\r\n      ).then(data => {\r\n        let _data = data.data;\r\n        this.brandOwnerOptions = _data;\r\n      });\r\n    },\r\n    //试试获取封装属性\r\n    //品牌商ID改变时获取ID 同时赋值name\r\n    brandOwnerGet(val) {\r\n      let _obj = this.brandOwnerOptions.find(item => item.id == val);\r\n      this.productFormData.brandOwnerName = _obj.name;\r\n      this.productFormData.brandOwnerId= _obj.id;\r\n      this.productFormData.brandOwnerCode = _obj.code;\r\n      this.productFormData.brandOwnerAddress = _obj.address;\r\n      this.productFormData.postalCode = _obj.postalCode;\r\n    },\r\n    //获取品牌\r\n    getBrandOption() {\r\n      this.request(\r\n        this.api.product.productBrand_list,\r\n        { valid: true },\r\n        true\r\n      ).then(data => {\r\n        let _data = data.data;\r\n        this.brandOptions = _data;\r\n      });\r\n    },\r\n    //货主id \r\n    ownerGet(val){\r\n      let _obj = this.ownerOptions.find(item => item.code == val);\r\n      this.productFormData.ownerName = _obj.name;\r\n      this.productFormData.ownerCode = _obj.code;\r\n      this.productFormData.ownerId = _obj.code;\r\n\r\n    },\r\n    //品牌ID改变时获取ID 同时赋值name\r\n    brandIdGet(val) {\r\n      let _obj = this.brandOptions.find(item => item.id == val);\r\n      this.productFormData.brandName = _obj.name;\r\n      this.productFormData.brandCode = _obj.code;\r\n      this.productFormData.brandId = _obj.id;\r\n    },\r\n    tagBrandIdGet(val) {\r\n      let _obj = this.brandOptions.find(item => item.id == val);\r\n      this.productFormData.tagBrandName = _obj.name;\r\n      this.productFormData.tagBrandCode = _obj.code;\r\n      this.productFormData.tagBrandId =  _obj.id;\r\n    },\r\n    //设计商ID改变时获取ID 同时赋值name\r\n    designCompanyGet(val) {\r\n      let _obj = this.designCompanyOptions.find(item => item.id == val);\r\n      this.productFormData.designCompanyName = _obj.name;\r\n      this.productFormData.designCompanyCode = _obj.code;\r\n      this.productFormData.designCompanyId = _obj.id;\r\n\r\n    },\r\n    //季节波段\r\n    seasonalStyleGet(name) {\r\n      let seasonal = this.seasonalStyleOptions.find(item => item.name == name);\r\n      this.productFormData.seasonalStyleCode = seasonal.code;\r\n    },\r\n    //安全类别选择\r\n    handleSafetyGradeSelect(item){\r\n     // console.log(item);\r\n    },\r\n    //安全类别搜索\r\n    querySafetyGradeSearch(queryString,cb){\r\n      if(!!queryString){\r\n        this.request(\r\n          this.api.product.safetyGrade_list,\r\n          { searchWords: queryString },\r\n          true\r\n        ).then(res => {\r\n              cb(res.data)\r\n        });\r\n      }\r\n    },\r\n    //执行标准搜索\r\n    queryPerformanceStandardSearch(str,cb){\r\n      if(!!str){\r\n        this.request(\r\n          this.api.product.performanceStandard_list,\r\n          { searchWords: str },\r\n          true\r\n        ).then(res => {\r\n            cb(res.data)\r\n        });\r\n      }\r\n    },\r\n    //执行标准选择\r\n    handlePerformanceStandardSelect(item){\r\n    },\r\n    //基本信息存储默认值\r\n    basicSelectGet(vId) {\r\n      let obj = {};\r\n      let basicData = this.productFormData.productInfoAttrs,\r\n        basicLen = basicData.length;\r\n      for (let i = 0; i < basicLen; i++) {\r\n        obj = basicData[i]._children.find(item => {\r\n          //这里的userList就是上面遍历的数据源\r\n          return item.id === vId; //筛选出匹配数据\r\n        });\r\n        if (obj) {\r\n          break;\r\n        }\r\n      }\r\n      //找到匹配数组的下标\r\n      let index = this.productFormData.productInfoAttrs.findIndex(\r\n        elem => elem.infoAttrId == vId\r\n      );\r\n      //补充数组数据\r\n      this.productFormData.productInfoAttrs[index].infoAttrName = obj.name;\r\n    },\r\n  },\r\n  computed: {\r\n    //季节波段\r\n    seasonalStyleOptions() {\r\n      let codeSet = this.$store.getters.codeData;\r\n      if (codeSet.PRO001) {\r\n        return codeSet.PRO001.codeItemList;\r\n      }\r\n    }, //执行标准\r\n    // performanceStandardOptions() {\r\n    //   let codeSet = this.$store.getters.codeData;\r\n    //   if (codeSet.PRO002) {\r\n    //     return codeSet.PRO002.codeItemList;\r\n    //   }\r\n    // },\r\n  }\r\n};\r\n",{"version":3,"sources":["CommondityBasicAndTag.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAkTA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"CommondityBasicAndTag.vue","sourceRoot":"src/views/product/components","sourcesContent":["<!--\r\n * @Author:elephant\r\n * @Date: 2019-11-08 16:51:02\r\n * @LastEditTime : 2020-01-17 16:12:02\r\n * @LastEditors  : Please set LastEditors\r\n * @Description: 商品中心 商品详情 基本信息和吊牌信息详情\r\n -->\r\n<template>\r\n\r\n    <el-tabs v-model=\"activeName\" class=\"basic-wrap pt-20\" type=\"card\">\r\n      <el-tab-pane label=\"基本信息\" name=\"basic\">\r\n        <h5 class=\"info\">\r\n          基本信息\r\n          <!-- <span>上次更新时间2019-02-01</span> -->\r\n        </h5>\r\n        <!-- 基本信息根据款式不同 所属的切换也不同 -->\r\n        <el-form-item\r\n          v-for=\"(item,index) in productFormData.productInfoAttrs\"\r\n          :prop=\"'productInfoAttrs.' + index + '.infoAttrId'\"\r\n          :label=\"item.infoName+ '：'\"\r\n          :key=\"index\"\r\n          :rules=\"{required: item.required, message: '请选择内容', trigger: 'change'}\"\r\n        >\r\n          <el-select\r\n            :disabled=\"showDisabled\"\r\n            placeholder=\"请选择\"\r\n            @change=\"basicSelectGet\"\r\n            class=\"input-w\"\r\n            v-model=\"item.infoAttrId\"\r\n          >\r\n            <el-option\r\n              v-for=\"list in item._children\"\r\n              :key=\"list.id\"\r\n              :label=\"list.name\"\r\n              :value=\"list.id\"\r\n            ></el-option>\r\n          </el-select>\r\n        </el-form-item>\r\n        <!-- 基本信息 END -->\r\n      </el-tab-pane>\r\n      <el-tab-pane label=\"吊牌信息\" name=\"tag\">\r\n        <h5 class=\"info\">\r\n          档案归属\r\n          <span></span>\r\n        </h5>\r\n         <el-form-item\r\n          prop=\"ownerId\"\r\n          :rules=\"{required: true, message: '请选择货主', trigger: 'change'}\"\r\n          label=\"归属货主：\"\r\n          value-key=\"code\"\r\n        >\r\n          <el-select\r\n            filterable\r\n            :disabled=\"editDisabled\"\r\n            @change=\"ownerGet\"\r\n            class=\"input-w\"\r\n            placeholder=\"请选择\"\r\n            v-model=\"productFormData.ownerName\"\r\n          >\r\n            <el-option\r\n              v-for=\"(item,index) in ownerOptions\"\r\n              :key=\"index.id\"\r\n              :label=\"item.name\"\r\n              :value=\"item.code\"\r\n            ></el-option>\r\n          </el-select>\r\n        </el-form-item>\r\n        <h5 class=\"info\">\r\n          吊牌信息\r\n          <span></span>\r\n        </h5>\r\n        <el-form-item\r\n          prop=\"name\"\r\n          :rules=\"{required: true, message: '请输入品名', trigger: 'blur'}\"\r\n          label=\"品名：\"\r\n        >\r\n          <el-input\r\n            class=\"input-w\"\r\n            :disabled=\"showDisabled\"\r\n            placeholder=\"请输入内容\"\r\n            v-model=\"productFormData.name\"\r\n          ></el-input>\r\n        </el-form-item>\r\n        <el-form-item\r\n          prop=\"brandName\"\r\n          :rules=\"{required: true, message: '请选择品牌', trigger: 'change'}\"\r\n          label=\"品牌：\"\r\n        >\r\n          <el-select\r\n            :loading=\"productStatus.brandLoading\"\r\n            @visible-change=\"handleVisibleChange($event,productStatus.brandActive,'brand')\"\r\n            filterable\r\n             value-key=\"id\"\r\n            :disabled=\"editDisabled\"\r\n            @change=\"brandIdGet\"\r\n            class=\"input-w\"\r\n            placeholder=\"请选择\"\r\n            v-model=\"productFormData.brandName\"\r\n          >\r\n            <el-option\r\n              v-for=\"(item,index) in brandOptions\"\r\n              :key=\"index.id\"\r\n              :label=\"item.name\"\r\n              :value=\"item.id\"\r\n            ></el-option>\r\n          </el-select>\r\n        </el-form-item>\r\n        <el-form-item\r\n          prop=\"tagBrandName\"\r\n          :rules=\"{required: true, message: '请选择打印品牌：', trigger: 'change'}\"\r\n          label=\"打印品牌：\"\r\n        >\r\n          <el-select\r\n            :loading=\"productStatus.brandLoading\"\r\n            @visible-change=\"handleVisibleChange($event,productStatus.brandActive,'brand')\"\r\n            filterable\r\n            value-key=\"id\"\r\n            :disabled=\"showDisabled\"\r\n            @change=\"tagBrandIdGet\"\r\n            class=\"input-w\"\r\n            placeholder=\"请选择\"\r\n            v-model=\"productFormData.tagBrandName\"\r\n          >\r\n            <el-option\r\n              v-for=\"(item,index) in brandOptions\"\r\n              :key=\"index.id\"\r\n              :label=\"item.name\"\r\n              :value=\"item.id\"\r\n            ></el-option>\r\n          </el-select>\r\n        </el-form-item>\r\n        <el-form-item\r\n          prop=\"originalCode\"\r\n          :rules=\"{required: true, message: '请输入原始款号', trigger: 'blur'}\"\r\n          label=\"原始款号：\"\r\n        >\r\n          <el-input\r\n            v-model=\"productFormData.originalCode\"\r\n            :disabled=\"editDisabled\"\r\n            class=\"input-w\"\r\n            placeholder=\"请输入原始款号\"\r\n          ></el-input>\r\n        </el-form-item>\r\n        <el-form-item\r\n          prop=\"seasonalStyle\"\r\n          :rules=\"{required: true, message: '请选择季节波段', trigger: 'change'}\"\r\n          label=\"季节波段：\"\r\n        >\r\n          <el-select\r\n            :disabled=\"editDisabled\"\r\n            class=\"input-w\"\r\n            @change=\"seasonalStyleGet\"\r\n            placeholder=\"请选择\"\r\n            v-model=\"productFormData.seasonalStyle\"\r\n          >\r\n            <el-option\r\n              v-for=\"(item,index) in seasonalStyleOptions\"\r\n              :key=\"index.code\"\r\n              :label=\"item.name\"\r\n              :value=\"item.name\"\r\n            ></el-option>\r\n          </el-select>\r\n        </el-form-item>\r\n        <el-form-item prop=\"popularYear\" label=\"年份：\">\r\n          <el-date-picker\r\n            :disabled=\"showDisabled\"\r\n            class=\"input-w\"\r\n            v-model=\"productFormData.popularYear\"\r\n            type=\"year\"\r\n            value-format=\"yyyy\"\r\n            placeholder=\"选择年\"\r\n          ></el-date-picker>\r\n        </el-form-item>\r\n        <el-form-item prop=\"designCompanyName\" label=\"设计商：\">\r\n          <el-select\r\n            :disabled=\"showDisabled\"\r\n            @change=\"designCompanyGet\"\r\n            class=\"input-w\"\r\n            placeholder=\"请选择\"\r\n            :loading=\"productStatus.designCompanyLoading\"\r\n            @visible-change=\"handleVisibleChange($event,productStatus.designCompanyActive,'designCompany')\"\r\n            filterable\r\n            value-key=\"id\"\r\n            v-model=\"productFormData.designCompanyName\"\r\n          >\r\n            <el-option\r\n              v-for=\"(item,index) in designCompanyOptions\"\r\n              :key=\"index.id\"\r\n              :label=\"item.name\"\r\n              :value=\"item.id\"\r\n            ></el-option>\r\n          </el-select>\r\n        </el-form-item>\r\n        <el-form-item prop=\"brandOwnerName\" label=\"品牌商：\">\r\n          <el-select\r\n            :disabled=\"showDisabled\"\r\n            @change=\"brandOwnerGet\"\r\n            value-key=\"id\"\r\n            :loading=\"productStatus.brandOwnerLoading\"\r\n            @visible-change=\"handleVisibleChange($event,productStatus.brandOwnerActive,'brandOwner')\"\r\n            filterable\r\n            class=\"input-w\"\r\n            placeholder=\"请选择\"\r\n            v-model=\"productFormData.brandOwnerName\"\r\n          >\r\n            <el-option\r\n              v-for=\"(item,index) in brandOwnerOptions\"\r\n              :key=\"index.id\"\r\n              :label=\"item.name\"\r\n              :value=\"item.id\"\r\n            ></el-option>\r\n          </el-select>\r\n        </el-form-item>\r\n        <el-form-item prop=\"performanceStandard\" label=\"执行标准：\">\r\n           <el-autocomplete\r\n            class=\"input-w\"\r\n            :debounce=\"500\"\r\n            value-key=\"name\"\r\n            v-model=\"productFormData.performanceStandard\"\r\n            :fetch-suggestions=\"queryPerformanceStandardSearch\"\r\n            placeholder=\"请输入内容\"\r\n            @select=\"handlePerformanceStandardSelect\"\r\n          ></el-autocomplete>\r\n        </el-form-item>\r\n        <el-form-item prop=\"qualityInspector\" label=\"检验员：\">\r\n          <el-input\r\n            :disabled=\"showDisabled\"\r\n            class=\"input-w\"\r\n            placeholder=\"请输入内容\"\r\n            v-model=\"productFormData.qualityInspector\"\r\n          ></el-input>\r\n        </el-form-item>\r\n        <el-form-item prop=\"lining\" label=\"里料：\">\r\n          <el-input\r\n            class=\"input-w\"\r\n            :disabled=\"showDisabled\"\r\n            placeholder=\"请输入内容\"\r\n            v-model=\"productFormData.lining\"\r\n          ></el-input>\r\n        </el-form-item>\r\n        <el-form-item prop=\"ingredients\" label=\"配料：\">\r\n          <el-input\r\n            class=\"input-w\"\r\n            :disabled=\"showDisabled\"\r\n            placeholder=\"请输入内容\"\r\n            v-model=\"productFormData.ingredients\"\r\n          ></el-input>\r\n        </el-form-item>\r\n        <el-form-item prop=\"filler\" label=\"填充物：\">\r\n          <el-input\r\n            class=\"input-w\"\r\n            :disabled=\"showDisabled\"\r\n            placeholder=\"请输入内容\"\r\n            v-model=\"productFormData.filler\"\r\n          ></el-input>\r\n        </el-form-item>\r\n        <el-form-item prop=\"fabric\" label=\"面料：\">\r\n          <el-input\r\n            class=\"input-w\"\r\n            :disabled=\"showDisabled\"\r\n            placeholder=\"请输入内容\"\r\n            v-model=\"productFormData.fabric\"\r\n          ></el-input>\r\n        </el-form-item>\r\n        <el-form-item prop=\"level\" label=\"等级：\">\r\n          <el-input\r\n            class=\"input-w\"\r\n            :disabled=\"showDisabled\"\r\n            placeholder=\"请输入内容\"\r\n            v-model=\"productFormData.level\"\r\n          ></el-input>\r\n        </el-form-item>\r\n        <el-form-item prop=\"postalCode\" label=\"邮编：\">\r\n          <el-input\r\n            class=\"input-w\"\r\n            :disabled=\"showDisabled\"\r\n            placeholder=\"请输入内容\"\r\n            v-model=\"productFormData.postalCode\"\r\n          ></el-input>\r\n        </el-form-item>\r\n        <el-form-item prop=\"safetyGrade\" label=\"安全类别：\">\r\n          <el-autocomplete\r\n            class=\"input-w\"\r\n            :debounce=\"500\"\r\n            value-key=\"name\"\r\n            v-model=\"productFormData.safetyGrade\"\r\n            :fetch-suggestions=\"querySafetyGradeSearch\"\r\n            placeholder=\"请输入内容\"\r\n            @select=\"handleSafetyGradeSelect\"\r\n          ></el-autocomplete>\r\n        </el-form-item>\r\n        <el-form-item prop=\"brandOwnerAddress\" label=\"地址：\">\r\n          <el-input\r\n            type=\"textarea\"\r\n            class=\"input-w-2\"\r\n            :disabled=\"showDisabled\"\r\n            :autosize=\"{ minRows: 2, maxRows: 4}\"\r\n            placeholder=\"请输入内容\"\r\n            v-model=\"productFormData.brandOwnerAddress\"\r\n          ></el-input>\r\n        </el-form-item>\r\n      </el-tab-pane>\r\n    </el-tabs>\r\n  \r\n</template>\r\n<script>\r\nexport default {\r\n  name: \"basic-and-tag\",\r\n  props: {\r\n    productFormData: {\r\n      type: Object\r\n    },\r\n    editDisabled:{\r\n        type:Boolean,\r\n        default:false\r\n    },\r\n    showDisabled:{\r\n        type:Boolean,\r\n        default:false\r\n    },\r\n  },\r\n  data() {\r\n    return {\r\n      //商品状态集合\r\n      productStatus: {\r\n        brandActive: false,\r\n        brandLoading: true,\r\n        brandOwnerActive: false,\r\n        brandOwnerLoading: true,\r\n        DesignCompanyActive: false,\r\n        DesignCompanyLoading: true\r\n      },\r\n      activeName:\"tag\",\r\n      //标签切换默认\r\n      brandOptions: [], //品牌\r\n      brandOwnerOptions: [], //品牌商\r\n      designCompanyOptions: [], //设计商\r\n      ownerOptions: [],//货主\r\n    };\r\n  },\r\n  created() {\r\n    //获取货主\r\n    this.getOwnerOptions();\r\n  },\r\n  methods: {\r\n    //做延时加载下拉数据\r\n    handleVisibleChange(type, active, str) {\r\n      if (!!type) {\r\n        if (!active) {\r\n          switch (str) {\r\n            //品牌\r\n            case \"brand\":\r\n              this.productStatus.brandActive = true;\r\n              this.productStatus.brandLoading = false;\r\n              this.getBrandOption();\r\n              break;\r\n            //品牌商\r\n            case \"brandOwner\":\r\n              this.productStatus.brandOwnerActive = true;\r\n              this.productStatus.brandOwnerLoading = false;\r\n              this.getBrandOwnerOption();\r\n              break;\r\n            //设计商\r\n            case \"designCompany\":\r\n              this.productStatus.designCompanyActive = true;\r\n              this.productStatus.designCompanyLoading = false;\r\n              this.getDesignCompanyOption();\r\n              break;\r\n            default:\r\n              break;\r\n          }\r\n        }\r\n      }\r\n    },\r\n    //获取货主\r\n    getOwnerOptions(){\r\n       this.request(this.api.warehouse.warehouseBase_goodsOwner_list, {valid: true,orderBy:'create_time'},true).then(\r\n        res => {\r\n          this.ownerOptions = res.data;\r\n        }\r\n      );\r\n    },\r\n    //获取设计商\r\n    getDesignCompanyOption() {\r\n      this.request(\r\n        this.api.product.designCompany_list,\r\n        { valid: true },\r\n        true\r\n      ).then(data => {\r\n        let _data = data.data;\r\n        this.designCompanyOptions = _data;\r\n      });\r\n    },\r\n    //获取品牌商\r\n    getBrandOwnerOption() {\r\n      this.request(\r\n        this.api.product.productBrandOwner_list,\r\n        {\r\n          valid: true\r\n        },\r\n        true\r\n      ).then(data => {\r\n        let _data = data.data;\r\n        this.brandOwnerOptions = _data;\r\n      });\r\n    },\r\n    //试试获取封装属性\r\n    //品牌商ID改变时获取ID 同时赋值name\r\n    brandOwnerGet(val) {\r\n      let _obj = this.brandOwnerOptions.find(item => item.id == val);\r\n      this.productFormData.brandOwnerName = _obj.name;\r\n      this.productFormData.brandOwnerId= _obj.id;\r\n      this.productFormData.brandOwnerCode = _obj.code;\r\n      this.productFormData.brandOwnerAddress = _obj.address;\r\n      this.productFormData.postalCode = _obj.postalCode;\r\n    },\r\n    //获取品牌\r\n    getBrandOption() {\r\n      this.request(\r\n        this.api.product.productBrand_list,\r\n        { valid: true },\r\n        true\r\n      ).then(data => {\r\n        let _data = data.data;\r\n        this.brandOptions = _data;\r\n      });\r\n    },\r\n    //货主id \r\n    ownerGet(val){\r\n      let _obj = this.ownerOptions.find(item => item.code == val);\r\n      this.productFormData.ownerName = _obj.name;\r\n      this.productFormData.ownerCode = _obj.code;\r\n      this.productFormData.ownerId = _obj.code;\r\n\r\n    },\r\n    //品牌ID改变时获取ID 同时赋值name\r\n    brandIdGet(val) {\r\n      let _obj = this.brandOptions.find(item => item.id == val);\r\n      this.productFormData.brandName = _obj.name;\r\n      this.productFormData.brandCode = _obj.code;\r\n      this.productFormData.brandId = _obj.id;\r\n    },\r\n    tagBrandIdGet(val) {\r\n      let _obj = this.brandOptions.find(item => item.id == val);\r\n      this.productFormData.tagBrandName = _obj.name;\r\n      this.productFormData.tagBrandCode = _obj.code;\r\n      this.productFormData.tagBrandId =  _obj.id;\r\n    },\r\n    //设计商ID改变时获取ID 同时赋值name\r\n    designCompanyGet(val) {\r\n      let _obj = this.designCompanyOptions.find(item => item.id == val);\r\n      this.productFormData.designCompanyName = _obj.name;\r\n      this.productFormData.designCompanyCode = _obj.code;\r\n      this.productFormData.designCompanyId = _obj.id;\r\n\r\n    },\r\n    //季节波段\r\n    seasonalStyleGet(name) {\r\n      let seasonal = this.seasonalStyleOptions.find(item => item.name == name);\r\n      this.productFormData.seasonalStyleCode = seasonal.code;\r\n    },\r\n    //安全类别选择\r\n    handleSafetyGradeSelect(item){\r\n     // console.log(item);\r\n    },\r\n    //安全类别搜索\r\n    querySafetyGradeSearch(queryString,cb){\r\n      if(!!queryString){\r\n        this.request(\r\n          this.api.product.safetyGrade_list,\r\n          { searchWords: queryString },\r\n          true\r\n        ).then(res => {\r\n              cb(res.data)\r\n        });\r\n      }\r\n    },\r\n    //执行标准搜索\r\n    queryPerformanceStandardSearch(str,cb){\r\n      if(!!str){\r\n        this.request(\r\n          this.api.product.performanceStandard_list,\r\n          { searchWords: str },\r\n          true\r\n        ).then(res => {\r\n            cb(res.data)\r\n        });\r\n      }\r\n    },\r\n    //执行标准选择\r\n    handlePerformanceStandardSelect(item){\r\n    },\r\n    //基本信息存储默认值\r\n    basicSelectGet(vId) {\r\n      let obj = {};\r\n      let basicData = this.productFormData.productInfoAttrs,\r\n        basicLen = basicData.length;\r\n      for (let i = 0; i < basicLen; i++) {\r\n        obj = basicData[i]._children.find(item => {\r\n          //这里的userList就是上面遍历的数据源\r\n          return item.id === vId; //筛选出匹配数据\r\n        });\r\n        if (obj) {\r\n          break;\r\n        }\r\n      }\r\n      //找到匹配数组的下标\r\n      let index = this.productFormData.productInfoAttrs.findIndex(\r\n        elem => elem.infoAttrId == vId\r\n      );\r\n      //补充数组数据\r\n      this.productFormData.productInfoAttrs[index].infoAttrName = obj.name;\r\n    },\r\n  },\r\n  computed: {\r\n    //季节波段\r\n    seasonalStyleOptions() {\r\n      let codeSet = this.$store.getters.codeData;\r\n      if (codeSet.PRO001) {\r\n        return codeSet.PRO001.codeItemList;\r\n      }\r\n    }, //执行标准\r\n    // performanceStandardOptions() {\r\n    //   let codeSet = this.$store.getters.codeData;\r\n    //   if (codeSet.PRO002) {\r\n    //     return codeSet.PRO002.codeItemList;\r\n    //   }\r\n    // },\r\n  }\r\n};\r\n</script>\r\n<style lang=\"less\" scoped>\r\n</style>"]}]}
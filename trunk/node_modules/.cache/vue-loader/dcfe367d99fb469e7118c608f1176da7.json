{"remainingRequest":"C:\\Users\\EDZ\\Desktop\\研发项目\\vue-project\\trunk\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\EDZ\\Desktop\\研发项目\\vue-project\\trunk\\src\\views\\crm\\customer\\customer_details.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\EDZ\\Desktop\\研发项目\\vue-project\\trunk\\src\\views\\crm\\customer\\customer_details.vue","mtime":1572415124483},{"path":"C:\\Users\\EDZ\\Desktop\\研发项目\\vue-project\\trunk\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1558492728398},{"path":"C:\\Users\\EDZ\\Desktop\\研发项目\\vue-project\\trunk\\node_modules\\babel-loader\\lib\\index.js","mtime":1558492720858},{"path":"C:\\Users\\EDZ\\Desktop\\研发项目\\vue-project\\trunk\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1558492728398},{"path":"C:\\Users\\EDZ\\Desktop\\研发项目\\vue-project\\trunk\\node_modules\\vue-loader\\lib\\index.js","mtime":1558492728890}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\r\nexport default {\r\n  data() {\r\n    return {\r\n      filtersData: {\r\n        name: \"\",\r\n        birthday: \"\",\r\n        gender: '',\r\n      },\r\n      mainUserData: {\r\n        id: \"\"\r\n      },\r\n      activeName: \"netBody\",\r\n      showDisabled: false,\r\n      editDisabled: false,\r\n      _type: \"\",\r\n      _id: \"\",\r\n      _uid: \"\",\r\n      roleNameOptions: [],\r\n      preMeasureTime: \"\",\r\n      rules: {\r\n        //规则验证\r\n        phone: [\r\n          { required: false, message: \"请输入电话号码\", trigger: \"blur\" },\r\n          {\r\n            pattern: /^1[345789]\\d{9}$/,\r\n            message: \"请输入正确的手机号\",\r\n            trigger: \"blur\"\r\n          }\r\n        ]\r\n      },\r\n      bodyDataList: [],\r\n      netBodyList: [],\r\n      bodyList: []\r\n    };\r\n  },\r\n  created() {\r\n    //获取上页面传参\r\n    this.getQueryparams();\r\n  },\r\n  methods: {\r\n    handleClick() {},\r\n    //新增\r\n    submitForm() {\r\n    //  TODO\r\n      console.log(this.filtersData);\r\n      this.request(this.api.user.crm_userCustomer_update,this.filtersData)\r\n      .then(res => {\r\n        this.$message.success(\"修改成功\");\r\n            setTimeout(() => {\r\n              this.routerback();\r\n            }, 500)\r\n      });\r\n    },\r\n    getQueryparams() {\r\n      //console.log(this.$route.query.id);\r\n      this._type = this.$route.query.type;\r\n      this._id = this.$route.query.id;\r\n      this._uid = this.$route.query._uid;\r\n      let itemStatus = this._type;\r\n      switch (itemStatus.toString()) {\r\n        case \"add\": //新增\r\n          this.editDisabled = false;\r\n          this.showDisabled = false;\r\n          break;\r\n        case \"edit\": //修改\r\n          this.editDisabled = true;\r\n          this.showDisabled = false;\r\n          this.getData();\r\n          break;\r\n        case \"show\": //查看\r\n          this.editDisabled = true;\r\n          this.showDisabled = true;\r\n          this.getData();\r\n          break;\r\n      }\r\n      this.getRoleNameOptions();\r\n      this.getBodyData();\r\n    },\r\n    getRoleNameOptions() {\r\n      //获取下拉角色\r\n      this.request(this.api.user.crm_userRecord_getUserRecordByUserId, {\r\n        mainUserId: this._uid\r\n      }).then(res => {\r\n        this.roleNameOptions = res;\r\n      });\r\n    },\r\n    getData() {\r\n      //获取回显数据\r\n      this.request(this.api.user.crm_userCustomer_get, { id: this._id }).then(\r\n        res => {\r\n          console.log(res);\r\n\r\n          this.filtersData = res;\r\n        }\r\n      );\r\n    },\r\n    //下拉角色发生改变\r\n    roleNameGet(_id) {\r\n      let obj = this.roleNameOptions.find(item => item.id == _id);\r\n      this.preMeasureTime = obj.preMeasureTime;\r\n      if (obj.tag == \"主档案\") {\r\n        this.HandleBodyData(true);\r\n      } else {\r\n        this.HandleBodyData(false, _id);\r\n      }\r\n    },\r\n    //获取净体等数据\r\n    getBodyData() {\r\n      this.request(this.api.user.crm_userMeasurement_list, {\r\n        mainUserId: this._uid\r\n      }).then(res => {\r\n        this.bodyDataList = res.data;\r\n        this.HandleBodyData(true);\r\n      });\r\n    },\r\n    //获取净体等数据后处理\r\n    HandleBodyData(self, _id) {\r\n      let _data = this.bodyDataList,\r\n        _dataLen = _data.length;\r\n      let bodyList = [],\r\n        netBodyList = [];\r\n      for (let i = 0; i < _dataLen; i++) {\r\n        if (self) {\r\n          if (_data[i].recordId == \"\" || _data[i].recordId == null) {\r\n            if (_data[i].type == 1) {\r\n              bodyList.push(_data[i]);\r\n            } else if (_data[i].type == 0) {\r\n              netBodyList.push(_data[i]);\r\n            }\r\n          }\r\n        } else {\r\n          if (_data[i].recordId == _id) {\r\n            if (_data[i].type == 1) {\r\n              bodyList.push(_data[i]);\r\n            } else if (_data[i].type == 0) {\r\n              netBodyList.push(_data[i]);\r\n            }\r\n          }\r\n        }\r\n      }\r\n      this.netBodyList = netBodyList;\r\n      this.bodyList = bodyList;\r\n    },\r\n    //后退\r\n    routerback() {\r\n      this.$router.go(-1);\r\n    }\r\n  }\r\n};\r\n",{"version":3,"sources":["customer_details.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAuGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"customer_details.vue","sourceRoot":"src/views/crm/customer","sourcesContent":["<template>\r\n  <el-form\r\n    label-width=\"110px\"\r\n    :rules=\"rules\"\r\n    :model=\"filtersData\"\r\n    size=\"small\"\r\n    ref=\"filtersForm\"\r\n    inline\r\n  >\r\n    <div class=\"tlogy-item\">\r\n      <h5 class=\"tlogy-title\">基本信息</h5>\r\n      <el-row>\r\n        <el-col :span=\"12\">\r\n          <el-col :span=\"24\">\r\n            <el-form-item label=\"姓名：\">\r\n              <el-input v-model=\"filtersData.name\" class=\"input-w-2\" placeholder=\"请输入内容\"></el-input>\r\n            </el-form-item>\r\n          </el-col>\r\n          <el-col :span=\"24\">\r\n            <el-form-item prop=\"valid\" label=\"性别：\">\r\n              <el-radio v-model=\"filtersData.gender\" :disabled=\"showDisabled\" label=\"0\">男</el-radio>\r\n              <el-radio v-model=\"filtersData.gender\" :disabled=\"showDisabled\" label=\"1\">女</el-radio>\r\n            </el-form-item>\r\n          </el-col>\r\n          <el-col :span=\"24\">\r\n            <el-form-item prop=\"phone\" label=\"电话：\">\r\n              <el-input\r\n                v-model=\"filtersData.phone\"\r\n                :disabled=\"editDisabled\"\r\n                class=\"input-w-2\"\r\n                placeholder=\"电话\"\r\n              ></el-input>\r\n            </el-form-item>\r\n          </el-col>\r\n        </el-col>\r\n        <el-col :span=\"12\">\r\n          <el-col :span=\"24\">\r\n            <el-form-item label=\"地址：\">\r\n              <el-input\r\n                v-model=\"filtersData.address\"\r\n                :disabled=\"editDisabled\"\r\n                class=\"input-w-2\"\r\n                placeholder=\"地址\"\r\n              ></el-input>\r\n            </el-form-item>\r\n          </el-col>\r\n          <el-col :span=\"24\">\r\n            <el-form-item label=\"出生日期：\">\r\n              <el-date-picker\r\n                class=\"input-w-2\"\r\n                v-model=\"filtersData.birthday\"\r\n                type=\"date\"\r\n                placeholder=\"选择出生日期\"\r\n              ></el-date-picker>\r\n            </el-form-item>\r\n          </el-col>\r\n        </el-col>\r\n      </el-row>\r\n      <!-- 身体数据 -->\r\n      <h5 class=\"tlogy-title\">身体数据</h5>\r\n      <el-form-item label=\"角色姓名：\">\r\n        <el-select\r\n          class=\"input-w-2\"\r\n          placeholder=\"请选择\"\r\n          :disabled=\"showDisabled\"\r\n          v-model=\"mainUserData.id\"\r\n          @change=\"roleNameGet\"\r\n        >\r\n          <el-option\r\n            v-for=\"item in roleNameOptions\"\r\n            :key=\"item.id\"\r\n            :label=\"item.name\"\r\n            :value=\"item.id\"\r\n          ></el-option>\r\n        </el-select>\r\n        <p class=\"p-txt\">上次更新时间 {{preMeasureTime}}</p>\r\n      </el-form-item>\r\n      <el-tabs v-model=\"activeName\" type=\"card\" @tab-click=\"handleClick\">\r\n        <el-tab-pane label=\"净体测量\" name=\"netBody\">\r\n          <el-form-item v-for=\"(item,index) in netBodyList\" :key=\"index\" :label=\"item.name+'：'\">\r\n            <el-input v-model=\"item.value\" disabled class=\"input-w\" placeholder=\"请输入内容\"></el-input>\r\n          </el-form-item>\r\n        </el-tab-pane>\r\n        <el-tab-pane label=\"成衣数据\" name=\"readyMade\"></el-tab-pane>\r\n        <el-tab-pane label=\"体型特征\" name=\"shape\">\r\n          <el-form-item v-for=\"(item,index) in bodyList\" :key=\"index\" :label=\"item.name+'：'\">\r\n            <el-input v-model=\"item.value\" disabled class=\"input-w\" placeholder=\"请输入内容\"></el-input>\r\n          </el-form-item>\r\n        </el-tab-pane>\r\n      </el-tabs>\r\n      <div class=\"item-footer\">\r\n        <el-button\r\n          v-if=\"_type == 'edit'\"\r\n          size=\"small\"\r\n          @click=\"submitForm('filtersForm')\"\r\n          type=\"primary\"\r\n        >修改</el-button>\r\n        <el-button size=\"small\" @click=\"routerback('filtersForm')\">取消</el-button>\r\n      </div>\r\n    </div>\r\n  </el-form>\r\n</template>\r\n<script>\r\nexport default {\r\n  data() {\r\n    return {\r\n      filtersData: {\r\n        name: \"\",\r\n        birthday: \"\",\r\n        gender: '',\r\n      },\r\n      mainUserData: {\r\n        id: \"\"\r\n      },\r\n      activeName: \"netBody\",\r\n      showDisabled: false,\r\n      editDisabled: false,\r\n      _type: \"\",\r\n      _id: \"\",\r\n      _uid: \"\",\r\n      roleNameOptions: [],\r\n      preMeasureTime: \"\",\r\n      rules: {\r\n        //规则验证\r\n        phone: [\r\n          { required: false, message: \"请输入电话号码\", trigger: \"blur\" },\r\n          {\r\n            pattern: /^1[345789]\\d{9}$/,\r\n            message: \"请输入正确的手机号\",\r\n            trigger: \"blur\"\r\n          }\r\n        ]\r\n      },\r\n      bodyDataList: [],\r\n      netBodyList: [],\r\n      bodyList: []\r\n    };\r\n  },\r\n  created() {\r\n    //获取上页面传参\r\n    this.getQueryparams();\r\n  },\r\n  methods: {\r\n    handleClick() {},\r\n    //新增\r\n    submitForm() {\r\n    //  TODO\r\n      console.log(this.filtersData);\r\n      this.request(this.api.user.crm_userCustomer_update,this.filtersData)\r\n      .then(res => {\r\n        this.$message.success(\"修改成功\");\r\n            setTimeout(() => {\r\n              this.routerback();\r\n            }, 500)\r\n      });\r\n    },\r\n    getQueryparams() {\r\n      //console.log(this.$route.query.id);\r\n      this._type = this.$route.query.type;\r\n      this._id = this.$route.query.id;\r\n      this._uid = this.$route.query._uid;\r\n      let itemStatus = this._type;\r\n      switch (itemStatus.toString()) {\r\n        case \"add\": //新增\r\n          this.editDisabled = false;\r\n          this.showDisabled = false;\r\n          break;\r\n        case \"edit\": //修改\r\n          this.editDisabled = true;\r\n          this.showDisabled = false;\r\n          this.getData();\r\n          break;\r\n        case \"show\": //查看\r\n          this.editDisabled = true;\r\n          this.showDisabled = true;\r\n          this.getData();\r\n          break;\r\n      }\r\n      this.getRoleNameOptions();\r\n      this.getBodyData();\r\n    },\r\n    getRoleNameOptions() {\r\n      //获取下拉角色\r\n      this.request(this.api.user.crm_userRecord_getUserRecordByUserId, {\r\n        mainUserId: this._uid\r\n      }).then(res => {\r\n        this.roleNameOptions = res;\r\n      });\r\n    },\r\n    getData() {\r\n      //获取回显数据\r\n      this.request(this.api.user.crm_userCustomer_get, { id: this._id }).then(\r\n        res => {\r\n          console.log(res);\r\n\r\n          this.filtersData = res;\r\n        }\r\n      );\r\n    },\r\n    //下拉角色发生改变\r\n    roleNameGet(_id) {\r\n      let obj = this.roleNameOptions.find(item => item.id == _id);\r\n      this.preMeasureTime = obj.preMeasureTime;\r\n      if (obj.tag == \"主档案\") {\r\n        this.HandleBodyData(true);\r\n      } else {\r\n        this.HandleBodyData(false, _id);\r\n      }\r\n    },\r\n    //获取净体等数据\r\n    getBodyData() {\r\n      this.request(this.api.user.crm_userMeasurement_list, {\r\n        mainUserId: this._uid\r\n      }).then(res => {\r\n        this.bodyDataList = res.data;\r\n        this.HandleBodyData(true);\r\n      });\r\n    },\r\n    //获取净体等数据后处理\r\n    HandleBodyData(self, _id) {\r\n      let _data = this.bodyDataList,\r\n        _dataLen = _data.length;\r\n      let bodyList = [],\r\n        netBodyList = [];\r\n      for (let i = 0; i < _dataLen; i++) {\r\n        if (self) {\r\n          if (_data[i].recordId == \"\" || _data[i].recordId == null) {\r\n            if (_data[i].type == 1) {\r\n              bodyList.push(_data[i]);\r\n            } else if (_data[i].type == 0) {\r\n              netBodyList.push(_data[i]);\r\n            }\r\n          }\r\n        } else {\r\n          if (_data[i].recordId == _id) {\r\n            if (_data[i].type == 1) {\r\n              bodyList.push(_data[i]);\r\n            } else if (_data[i].type == 0) {\r\n              netBodyList.push(_data[i]);\r\n            }\r\n          }\r\n        }\r\n      }\r\n      this.netBodyList = netBodyList;\r\n      this.bodyList = bodyList;\r\n    },\r\n    //后退\r\n    routerback() {\r\n      this.$router.go(-1);\r\n    }\r\n  }\r\n};\r\n</script>\r\n<style lang=\"less\" scoped>\r\n.tlogy-item {\r\n  background-color: #ffffff;\r\n  margin: 10px;\r\n  padding: 10px;\r\n}\r\n.tlogy-footer {\r\n  background-color: #ffffff;\r\n  margin: 0 10px 10px;\r\n  padding: 10px;\r\n}\r\n.tlogy-title {\r\n  font-size: 22px;\r\n  height: 50px;\r\n  line-height: 50px;\r\n  text-indent: 40px;\r\n  border-bottom: 1px solid #eeeeee;\r\n  margin-bottom: 20px;\r\n  em {\r\n    margin-left: 20px;\r\n    font-size: 14px;\r\n    color: #ff6677;\r\n  }\r\n}\r\n.p-txt {\r\n  color: #606266;\r\n}\r\n</style>\r\n"]}]}
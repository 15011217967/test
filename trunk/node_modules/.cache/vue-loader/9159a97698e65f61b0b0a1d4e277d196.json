{"remainingRequest":"C:\\Users\\EDZ\\Desktop\\研发项目\\vue-project\\trunk\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\EDZ\\Desktop\\研发项目\\vue-project\\trunk\\src\\views\\index.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\EDZ\\Desktop\\研发项目\\vue-project\\trunk\\src\\views\\index.vue","mtime":1574160264690},{"path":"C:\\Users\\EDZ\\Desktop\\研发项目\\vue-project\\trunk\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1558492728398},{"path":"C:\\Users\\EDZ\\Desktop\\研发项目\\vue-project\\trunk\\node_modules\\babel-loader\\lib\\index.js","mtime":1558492720858},{"path":"C:\\Users\\EDZ\\Desktop\\研发项目\\vue-project\\trunk\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1558492728398},{"path":"C:\\Users\\EDZ\\Desktop\\研发项目\\vue-project\\trunk\\node_modules\\vue-loader\\lib\\index.js","mtime":1558492728890}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\r\n// 导入组件\r\nimport NavCon from \"../components/navcon.vue\";\r\nimport LeftNav from \"../components/leftnav.vue\";\r\nimport { mapState, mapGetters, mapActions } from 'vuex'\r\n\r\nexport default {\r\n  name: \"index\",\r\n  // 注册组件\r\n  components: {\r\n    NavCon,\r\n    LeftNav\r\n  },\r\n  data() {\r\n    return {\r\n      // 页面显示名称\r\n      topTitle: \"\",\r\n      // 是否显示topBar\r\n      topBar: null,\r\n      // 是否显示返回\r\n      backBtn: null\r\n    }\r\n  },\r\n\r\n  created() {\r\n    this.topTitle = this.$route.meta.title;\r\n    this.topBar = this.$route.meta.topBar === undefined ? true : this.$route.meta.topBar;\r\n    this.backBtn = this.$route.meta.backBtn === undefined ? true : this.$route.meta.backBtn;\r\n  },\r\n  mounted() {\r\n    this.$nextTick(() => {\r\n      this.init();\r\n    })\r\n\r\n  },\r\n  methods: {\r\n    ...mapActions({\r\n      setSubMenuInfo: 'permission/setSubMenuInfo'\r\n    }),\r\n    routerBack() {\r\n      this.$router.go(-1);\r\n    },\r\n    init(){\r\n      let meta = this.$route.meta;\r\n      this.topTitle = meta.title;\r\n      let menuId = meta.parentId;\r\n      if(menuId){\r\n        this.getSubMenu(menuId);\r\n      }else {\r\n        this.setSubMenuInfo({\r\n          menuId: this.moduleMenu[0].id,\r\n          subMenu: this.moduleMenu[0].sublist\r\n        });\r\n      }\r\n    },\r\n    getSubMenu(menuId) {\r\n      for(let menuItem of this.moduleMenu){\r\n        if(menuItem.id === menuId){\r\n          this.setSubMenuInfo({\r\n            menuId,\r\n            subMenu: menuItem.sublist\r\n          });\r\n          break;\r\n        }\r\n      }\r\n    }\r\n  },\r\n  computed: {\r\n    // 获取模块菜单和缓存页面\r\n    ...mapGetters({\r\n      moduleMenu : 'permissionMenus',\r\n      menuId : 'permissionMenuId',\r\n      subMenu : 'permissionSubMenu',\r\n      cachedViews : 'cachedViews'\r\n    }),\r\n    // 标识\r\n    key() {\r\n      return this.$route.path\r\n    }\r\n  },\r\n  watch: {\r\n    $route: {\r\n      handler:function(val,oldval){\r\n        setTimeout(()=> {\r\n          this.topTitle = this.$route.meta.title;\r\n          this.topBar = this.$route.meta.topBar === undefined ? true : this.$route.meta.topBar;\r\n          this.backBtn = this.$route.meta.backBtn === undefined ? true : this.$route.meta.backBtn;\r\n        },0);\r\n      },\r\n      deep:true\r\n    },\r\n    cachedViews: {\r\n      handler:function(val,oldval){\r\n\r\n      },\r\n      deep:true\r\n    }\r\n  }\r\n};\r\n",{"version":3,"sources":["index.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA6EA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA","file":"index.vue","sourceRoot":"src/views","sourcesContent":["<!--\r\n * @Description:公共页面\r\n * @Author: your name\r\n * @Date: 2019-07-01 15:20:22\r\n * @LastEditTime: 2019-08-20 17:20:41\r\n * @LastEditors: Please set LastEditors\r\n -->\r\n<style scoped>\r\n  .index-con {\r\n    height: 100%;\r\n    width: 100%;\r\n    box-sizing: border-box;\r\n  }\r\n\r\n  .aside {\r\n    width: 64px !important;\r\n    height: 100%;\r\n    background-color: #5c5e67;\r\n    margin: 0px;\r\n  }\r\n  .aside-show {\r\n    width: 200px !important;\r\n    min-height: calc(100% - 70px);\r\n    background-color: #5c5e67;\r\n    margin: -1px;\r\n  }\r\n  .el-aside {\r\n    position: relative;\r\n    z-index: 105;\r\n  }\r\n\r\n  .v-topBar {\r\n    display: flex;\r\n    justify-content: flex-start;\r\n    align-items: center;\r\n    height: 60px;\r\n    background-color: #ffffff;\r\n    margin-bottom: 8px;\r\n  }\r\n  .topbar-wrap i {\r\n    margin-right: 10px;\r\n    cursor: pointer;\r\n    font-size: 18px;\r\n    vertical-align: -2px;\r\n  }\r\n</style>\r\n<template>\r\n  <el-container class=\"index-con\">\r\n    <el-header class=\"index-header\" height=\"60px;\">\r\n      <nav-con @change-menu=\"getSubMenu\" :all-menu=\"moduleMenu\" :menu-id=\"menuId\"></nav-con>\r\n    </el-header>\r\n    <el-container class=\"main-con\">\r\n      <el-aside class=\"aside-show\">\r\n        <left-nav :module-menu=\"subMenu\"></left-nav>\r\n      </el-aside>\r\n      <el-main class=\"index-main\">\r\n        <el-scrollbar>\r\n          <div class=\"v-topBar\">\r\n            <nav class=\"topbar-wrap\">\r\n              <i class=\"el-icon-back\" v-if=\"backBtn\" @click=\"routerBack\"></i>\r\n              <i class=\"fa fa-home fa-lg\" v-else></i>\r\n              <span>{{ topTitle }}</span>\r\n            </nav>\r\n          </div>\r\n          <keep-alive :include=\"cachedViews\">\r\n            <router-view class=\"base-c\" :key=\"key\" />\r\n          </keep-alive>\r\n<!--          <keep-alive>-->\r\n<!--            <router-view v-if=\"$route.meta.keepAlive\"></router-view>-->\r\n<!--          </keep-alive>-->\r\n<!--          <router-view v-if=\"!$route.meta.keepAlive\"></router-view>-->\r\n        </el-scrollbar>\r\n      </el-main>\r\n    </el-container>\r\n  </el-container>\r\n</template>\r\n<script>\r\n// 导入组件\r\nimport NavCon from \"../components/navcon.vue\";\r\nimport LeftNav from \"../components/leftnav.vue\";\r\nimport { mapState, mapGetters, mapActions } from 'vuex'\r\n\r\nexport default {\r\n  name: \"index\",\r\n  // 注册组件\r\n  components: {\r\n    NavCon,\r\n    LeftNav\r\n  },\r\n  data() {\r\n    return {\r\n      // 页面显示名称\r\n      topTitle: \"\",\r\n      // 是否显示topBar\r\n      topBar: null,\r\n      // 是否显示返回\r\n      backBtn: null\r\n    }\r\n  },\r\n\r\n  created() {\r\n    this.topTitle = this.$route.meta.title;\r\n    this.topBar = this.$route.meta.topBar === undefined ? true : this.$route.meta.topBar;\r\n    this.backBtn = this.$route.meta.backBtn === undefined ? true : this.$route.meta.backBtn;\r\n  },\r\n  mounted() {\r\n    this.$nextTick(() => {\r\n      this.init();\r\n    })\r\n\r\n  },\r\n  methods: {\r\n    ...mapActions({\r\n      setSubMenuInfo: 'permission/setSubMenuInfo'\r\n    }),\r\n    routerBack() {\r\n      this.$router.go(-1);\r\n    },\r\n    init(){\r\n      let meta = this.$route.meta;\r\n      this.topTitle = meta.title;\r\n      let menuId = meta.parentId;\r\n      if(menuId){\r\n        this.getSubMenu(menuId);\r\n      }else {\r\n        this.setSubMenuInfo({\r\n          menuId: this.moduleMenu[0].id,\r\n          subMenu: this.moduleMenu[0].sublist\r\n        });\r\n      }\r\n    },\r\n    getSubMenu(menuId) {\r\n      for(let menuItem of this.moduleMenu){\r\n        if(menuItem.id === menuId){\r\n          this.setSubMenuInfo({\r\n            menuId,\r\n            subMenu: menuItem.sublist\r\n          });\r\n          break;\r\n        }\r\n      }\r\n    }\r\n  },\r\n  computed: {\r\n    // 获取模块菜单和缓存页面\r\n    ...mapGetters({\r\n      moduleMenu : 'permissionMenus',\r\n      menuId : 'permissionMenuId',\r\n      subMenu : 'permissionSubMenu',\r\n      cachedViews : 'cachedViews'\r\n    }),\r\n    // 标识\r\n    key() {\r\n      return this.$route.path\r\n    }\r\n  },\r\n  watch: {\r\n    $route: {\r\n      handler:function(val,oldval){\r\n        setTimeout(()=> {\r\n          this.topTitle = this.$route.meta.title;\r\n          this.topBar = this.$route.meta.topBar === undefined ? true : this.$route.meta.topBar;\r\n          this.backBtn = this.$route.meta.backBtn === undefined ? true : this.$route.meta.backBtn;\r\n        },0);\r\n      },\r\n      deep:true\r\n    },\r\n    cachedViews: {\r\n      handler:function(val,oldval){\r\n\r\n      },\r\n      deep:true\r\n    }\r\n  }\r\n};\r\n</script>\r\n\r\n"]}]}
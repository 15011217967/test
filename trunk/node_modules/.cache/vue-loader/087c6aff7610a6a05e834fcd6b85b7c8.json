{"remainingRequest":"C:\\Users\\EDZ\\Desktop\\研发项目\\vue-project\\trunk\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\EDZ\\Desktop\\研发项目\\vue-project\\trunk\\src\\views\\orders\\business\\purchase\\purchaseOrder_list.vue?vue&type=style&index=0&id=f41935e2&lang=less&scoped=true&","dependencies":[{"path":"C:\\Users\\EDZ\\Desktop\\研发项目\\vue-project\\trunk\\src\\views\\orders\\business\\purchase\\purchaseOrder_list.vue","mtime":1577172765872},{"path":"C:\\Users\\EDZ\\Desktop\\研发项目\\vue-project\\trunk\\node_modules\\css-loader\\index.js","mtime":1558492728478},{"path":"C:\\Users\\EDZ\\Desktop\\研发项目\\vue-project\\trunk\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":1558492728890},{"path":"C:\\Users\\EDZ\\Desktop\\研发项目\\vue-project\\trunk\\node_modules\\postcss-loader\\src\\index.js","mtime":1558492728823},{"path":"C:\\Users\\EDZ\\Desktop\\研发项目\\vue-project\\trunk\\node_modules\\less-loader\\dist\\cjs.js","mtime":1566193719488},{"path":"C:\\Users\\EDZ\\Desktop\\研发项目\\vue-project\\trunk\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1558492728398},{"path":"C:\\Users\\EDZ\\Desktop\\研发项目\\vue-project\\trunk\\node_modules\\vue-loader\\lib\\index.js","mtime":1558492728890}],"contextDependencies":[],"result":["\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\r\n.purchases-bass {\r\n  // background-color: #fff;\r\n  height: 100%;\r\n  margin: 8px;\r\n  .item-form {\r\n    margin-bottom: 8px;\r\n    background-color: #fff;\r\n    padding: 10px 10px 0 10px;\r\n  }\r\n  .item-cont {\r\n    margin-right: 10px;\r\n    display: flex;\r\n  }\r\n  .date-picker-div {\r\n    margin-right: 10px;\r\n  }\r\n}\r\n.table {\r\n  padding: 20px;\r\n}\r\n",{"version":3,"sources":["purchaseOrder_list.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA0jBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"purchaseOrder_list.vue","sourceRoot":"src/views/orders/business/purchase","sourcesContent":["<template>\r\n  <!--//采购单-->\r\n  <div class=\"purchases-bass\">\r\n    <!-- input-form -->\r\n    <div class=\"item-form\">\r\n      <el-form\r\n        class=\"item-form\"\r\n        :model=\"filtersData\"\r\n        label-width=\"90px\"\r\n        size=\"small\"\r\n        ref=\"filtersForm\"\r\n        inline\r\n      >\r\n        <el-row>\r\n          <el-col>\r\n            <el-form-item prop=\"searchKey\" label=\"模糊查询：\">\r\n              <el-input class=\"input-w\" placeholder=\"到货单号/采购订单号\" v-model=\"filtersData.searchKey\"></el-input>\r\n            </el-form-item>\r\n\r\n            <el-form-item prop=\"businessStatusList\" label=\"状态：\">\r\n              <el-select class=\"input-w\" placeholder=\"请选择\" multiple v-model=\"filtersData.businessStatusList\">\r\n                <el-option\r\n                  v-for=\"item in options1\"\r\n                  :key=\"item.id\"\r\n                  :label=\"item.name\"\r\n                  :value=\"item.value\"\r\n                ></el-option>\r\n              </el-select>\r\n            </el-form-item>\r\n            <el-form-item prop=\"channelCodes\" label=\"订单来源：\">\r\n              <code-set v-model=\"filtersData.channelCodes\" code=\"ORD001\" :multiple=\"true\"/>\r\n            </el-form-item>\r\n            <el-form-item label=\"所属机构：\" prop=\"organizationCodes\">\r\n             <el-select v-model=\"filtersData.organizationCodes\" placeholder=\"请选择\" :multiple=\"true\">\r\n              <el-option\r\n                v-for=\"item in organizationListData\"\r\n                :label=\"item.name\"\r\n                :key=\"item.id\"\r\n                :value=\"item.id\"\r\n              ></el-option>\r\n            </el-select>\r\n            </el-form-item>\r\n          </el-col>\r\n          <el-col>\r\n            <el-form-item prop=\"supplierCodes\" label=\"供应商：\">\r\n              <el-select class=\"input-w\" placeholder=\"请选择\" multiple v-model=\"filtersData.supplierCodes\">\r\n                <el-option\r\n                  v-for=\"item in suppliers\"\r\n                  :key=\"item.id\"\r\n                  :label=\"item.name\"\r\n                  :value=\"item.code\"\r\n                ></el-option>\r\n              </el-select>\r\n            </el-form-item>\r\n            <el-form-item label=\"选择日期：\">\r\n              <template>\r\n                <div class=\"block\">\r\n                  <el-date-picker\r\n                    class=\"date-picker-div\"\r\n                    v-model=\"filtersData.startTime\"\r\n                    type=\"date\"\r\n                    placeholder=\"开始时间\"\r\n                  ></el-date-picker>\r\n                  <el-date-picker v-model=\"filtersData.endTime\" type=\"date\" placeholder=\"结束时间\"></el-date-picker>\r\n                </div>\r\n              </template>\r\n            </el-form-item>\r\n            <el-form-item>\r\n              <el-button @click=\"handleSearch\" type=\"primary\" plain size=\"small\">搜索</el-button>\r\n              <el-button @click=\"handleResetFilters('filtersForm')\" size=\"small\">重置</el-button>\r\n            </el-form-item>\r\n          </el-col>\r\n        </el-row>\r\n      </el-form>\r\n    </div>\r\n    <!-- table -->\r\n    <div class=\"item-table\">\r\n      <div class=\"item-cont\">\r\n        <el-button size=\"small\" type=\"primary\" @click=\"openAddClass()\" style=\"margin-right:10px;\">新增</el-button>\r\n        <el-upload\r\n          class=\"upload-demo\"\r\n          :action=\"fileAction()\"\r\n          accept=\".xlsx,.xls,.csv\"\r\n          :headers=\"tokenHeaders\"\r\n          name=\"multipartFile\"\r\n          :on-success=\"handleFileSuccess\"\r\n          :on-change=\"beforefileUploadChange\"\r\n          :show-file-list='false'\r\n          >\r\n          <el-button size=\"small\" type=\"primary\">导入</el-button>\r\n        </el-upload>\r\n        <!-- <el-button size=\"small\" @click=\"importExcel()\"  >导入</el-button> -->\r\n        <el-button size=\"small\" style=\"margin-left: 10px;\">\r\n          <a href=\"https://content-template.oss-cn-beijing.aliyuncs.com/excel/order.xlsx\" style=\"color:#222;\">下载模板</a>\r\n        </el-button>\r\n      </div>\r\n      <div class=\"item-table\">\r\n        <el-table\r\n          :data=\"purchaseOrderListData\"\r\n          stripe\r\n          empty-text=\"暂无数据\"\r\n          header-align=\"center\"\r\n          header-row-class-name=\"item-table-header\"\r\n          :highlight-current-row=\"true\"\r\n        >\r\n          <el-table-column prop=\"orderSn\" align=\"center\" label=\"采购订单号\" width=\"210\"></el-table-column>\r\n          <el-table-column align=\"center\" label=\"状态\" min-width=\"100\">\r\n            <template slot-scope=\"scope\">{{ scope.row.businessStatus | filterBusinessStatus}}</template>\r\n          </el-table-column>\r\n          <el-table-column prop=\"contractSn\" align=\"center\" label=\"采购合同号\" width=\"150\">\r\n            <template slot-scope=\"scope\">\r\n              <span>{{scope.row.contractSn?scope.row.contractSn:'--'}}</span>\r\n            </template>\r\n          </el-table-column>\r\n          <el-table-column prop=\"supplier\" align=\"center\" label=\"供应商\" width=\"100\"></el-table-column>\r\n          <el-table-column prop=\"amount\" align=\"center\" label=\"采购金额\" width=\"100\"></el-table-column>\r\n          <!--todo 差两个参数-->\r\n          <el-table-column prop=\"validAmount\" align=\"center\" label=\"实付金额\" width=\"100\"></el-table-column>\r\n          <el-table-column align=\"center\" label=\"付款方式\" min-width=\"100\">\r\n            <template slot-scope=\"scope\">{{ scope.row.paymentCode | filterPaymentCode}}</template>\r\n          </el-table-column>\r\n          <el-table-column align=\"center\" label=\"到货状态\" min-width=\"100\">\r\n            <template slot-scope=\"scope\">{{ scope.row.warehouseStatus | filterWarehouseStatus}}</template>\r\n          </el-table-column>\r\n          <el-table-column prop=\"quantity\" align=\"center\" label=\"采购总数\" width=\"100\"></el-table-column>\r\n          <el-table-column prop=\"actualQuantity\" align=\"center\" label=\"实收总数\" width=\"100\"></el-table-column>\r\n          <el-table-column prop=\"deliverNum\" align=\"center\" label=\"发货次数\" width=\"100\"></el-table-column>\r\n          <el-table-column align=\"center\" label=\"创建时间\" min-width=\"180\">\r\n            <template slot-scope=\"scope\">{{ scope.row.createTime | timestampToTime}}</template>\r\n          </el-table-column>\r\n          <el-table-column prop=\"purchaser\" align=\"center\" label=\"采购人\" width=\"130\">\r\n            <template slot-scope=\"scope\">{{ scope.row.purchaser ? scope.row.purchaser :'--'}}</template>\r\n          </el-table-column>\r\n          <el-table-column prop=\"organization\" align=\"center\" label=\"所属机构\" width=\"100\">\r\n            <template slot-scope=\"scope\">{{ scope.row.organization ? scope.row.organization :'--'}}</template>\r\n          </el-table-column>\r\n          <el-table-column align=\"center\" label=\"订单来源\" min-width=\"100\">\r\n            <template slot-scope=\"scope\">{{ scope.row.channelCode | filterChannelCode}}</template>\r\n          </el-table-column>\r\n          <el-table-column\r\n            fixed=\"right\"\r\n            label-class-name=\"text-center\"\r\n            class-name=\"text-center\"\r\n            align=\"center\"\r\n            label=\"操作\"\r\n            width=\"160\"\r\n          >\r\n            <template slot-scope=\"scope\">\r\n              <el-button @click=\"openShowDetails(scope.row.orderSn)\" type=\"text\" size=\"small\" v-auth=\"codeData\" data-code='PCO_VIEW'>查看</el-button>\r\n              <el-button  @click=\"openEdit(scope.row.orderSn)\" type=\"text\" size=\"small\" v-auth=\"codeData\" data-code='PCO_UPDATE' :disabled=\"scope.row.businessStatus!='06' || scope.row.deliverNum!=0\">修改</el-button>\r\n              <el-button  @click=\"deleteItem(scope.row)\" type=\"text\" size=\"small\" v-auth=\"codeData\" data-code='PCO_DELETE' :disabled=\"scope.row.businessStatus!='06' || scope.row.deliverNum!=0\">删除</el-button>\r\n              <el-dropdown @command=\"handleCommand\">\r\n                <span class=\"el-dropdown-link\">\r\n                  <i class=\"el-icon-arrow-down el-icon--right\"></i>\r\n                </span>\r\n                <el-dropdown-menu slot=\"dropdown\" v-if=\"scope.row.businessStatus=='06'\">\r\n                  <el-dropdown-item :command=\"dropdownItemValueChange('addNote',scope.row)\">添加到货单</el-dropdown-item>\r\n                  <el-dropdown-item :command=\"dropdownItemValueChange('done',scope.row)\">确认完成</el-dropdown-item>\r\n                </el-dropdown-menu>\r\n                <el-dropdown-menu slot=\"dropdown\" v-else>\r\n                  <el-dropdown-item :command=\"dropdownItemValueChange('addNote',scope.row)\" disabled>添加到货单</el-dropdown-item>\r\n                  <el-dropdown-item disabled :command=\"dropdownItemValueChange('done',scope.row)\">确认完成</el-dropdown-item>\r\n                </el-dropdown-menu>\r\n              </el-dropdown>\r\n            </template>\r\n          </el-table-column>\r\n        </el-table>\r\n        <div class=\"pagination mt-10 mb-20\">\r\n          <el-pagination\r\n            class=\"mr-20\"\r\n            @size-change=\"handleSizeChange\"\r\n            @current-change=\"handleCurrentChange\"\r\n            :current-page=\"filtersData.pageIndex\"\r\n            :page-sizes=\"[10,20,30,40,50]\"\r\n            :page-size=\"filtersData.pageSize\"\r\n            layout=\"total, sizes, prev, pager, next, jumper\"\r\n            :total=\"total\"\r\n          ></el-pagination>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { formatTimestamp } from \"@/utils/date\";\r\nimport codeSet from \"@/components/codeSet\";\r\nimport treeDept from \"@/components/treeDept\";\r\nimport { getToken } from \"@/utils/auth\";\r\nimport { Loading } from 'element-ui';\r\nlet token = getToken(); \r\n/**\r\n * 基本管理\r\n */\r\nexport default {\r\n  components: {\r\n    codeSet,\r\n    treeDept\r\n  },\r\n  data() {\r\n    return {\r\n      loadingInstance:null,\r\n      //权限Code码\r\n      codeData:[],\r\n      tokenHeaders:{accessToken: token},\r\n      fileList:[],\r\n      filtersData: {\r\n        orderType: \"0301\",\r\n        searchKey: \"\",\r\n        businessStatusList: [],\r\n        channelCodes: [],\r\n        //组织机构code码\r\n        organizationCodes: [],\r\n        supplierCodes: [],\r\n        startTime: \"\",\r\n        endTime: \"\",\r\n        pageIndex: 1,\r\n        pageSize: 10\r\n      },\r\n      options1: [\r\n        {\r\n          value: \"06\",\r\n          name: \"未完成\"\r\n        },\r\n        {\r\n          value: \"08\",\r\n          name: \"已完成\"\r\n        },\r\n        {\r\n          value: \"15\",\r\n          name: \"已作废\"\r\n        }\r\n      ],\r\n      //采购订单列表\r\n      purchaseOrderListData: [],\r\n\r\n      total: null,\r\n      //日期\r\n      datefilter: [],\r\n\r\n      agencies: [], //所属机构集合\r\n      suppliers: [], //供应商集合\r\n      //组织机构数据\r\n      organizationListData: [],\r\n    };\r\n  },\r\n  created() {\r\n    //得到表格数据\r\n    this.getTableList();\r\n    this.findAgencyList();\r\n    this.findSuppliers();\r\n    //得到组织机构\r\n    this.getWarehouseListData()\r\n\r\n    this.getCodeLimitToBtnStatus(this.$route.meta.currentid);\r\n  },\r\n  filters:{\r\n    //过滤当前状态\r\n    filterBusinessStatus(val) {\r\n     switch (val) {\r\n        case \"06\":\r\n          return \"未完成\";\r\n          break;\r\n        case \"08\":\r\n          return \"已完成\";\r\n          break;\r\n        case \"15\":\r\n          return \"已作废\";\r\n          break;\r\n        default:\r\n          return '--'\r\n        break;\r\n      }\r\n    },\r\n    //过滤支付状态\r\n    filterPaymentCode(val) {\r\n      switch (val) {\r\n        case \"01\":\r\n          return \"现金\";\r\n          break;\r\n        case \"02\":\r\n          return \"银行卡\";\r\n          break;\r\n        case \"03\":\r\n          return \"微信\";\r\n          break;\r\n        case \"04\":\r\n          return \"支付宝\";\r\n          break;\r\n        case \"05\":\r\n          return \"支票\";\r\n          break;\r\n        case \"06\":\r\n          return \"电汇\";\r\n          break;\r\n        case \"07\":\r\n          return \"汇票\";\r\n          break;\r\n        case \"08\":\r\n          return \"其他\";\r\n          break;\r\n        default:\r\n          return '--'\r\n        break;\r\n      }\r\n    },\r\n    //过滤到货状态\r\n    filterWarehouseStatus(val){\r\n      switch (val) {\r\n        case \"1001\":\r\n          return \"未到货\";\r\n        break;\r\n        case \"1002\":\r\n          return \"部分到货\";\r\n        break;\r\n        case \"1003\":\r\n          return \"全部到货\";\r\n        break;\r\n        case \"1004\":\r\n          return \"超收到货\";\r\n          break;\r\n        default:\r\n          return \"--\"\r\n        break;\r\n      }\r\n    },\r\n    //过滤订单来源\r\n    filterChannelCode(val){\r\n      switch (val) {\r\n        case \"01\":\r\n          return \"淘宝\";\r\n        break;\r\n        case \"02\":\r\n          return \"京东\";\r\n        break;\r\n        case \"03\":\r\n          return \"天猫\";\r\n        break;\r\n        case \"04\":\r\n          return \"手工录入\";\r\n          break;\r\n        default:\r\n          return \"--\"\r\n        break;\r\n      }\r\n    }\r\n  },\r\n  methods: {\r\n    fileAction() {\r\n      return this.api.FN_ALLPATH(this.api.order.channelPurchaseOrder_importPurchaseOrder);\r\n    },\r\n    //文件上传成功过\r\n    handleFileSuccess(res, file){\r\n      if(!res.data.model){\r\n        this.$nextTick(() => { \r\n          let html = '';\r\n          res.data.invalid.forEach(errItem => {\r\n            html += '<p>'+ errItem + '：该商品不存在</p>';\r\n          });\r\n          this.$notify({\r\n            title: '提示',\r\n            duration: 0,\r\n            dangerouslyUseHTMLString: true,\r\n            message: html\r\n          });\r\n          this.loadingInstance.close();\r\n        });\r\n        return;\r\n      }\r\n      var uploadData = JSON.stringify(res.data.model)\r\n      var invalid =JSON.stringify(res.data.invalid)\r\n      console.log(res)\r\n      this.$nextTick(() => { \r\n        this.$router.push({  \r\n          name: \"purchaseOrder_add\",\r\n          params: {\r\n            uploadData:uploadData,\r\n            invalid:invalid\r\n          }\r\n        })\r\n        localStorage.setItem(\"type\", \"add\");\r\n        this.loadingInstance.close();\r\n      });\r\n    },\r\n    beforefileUploadChange(file) {\r\n      console.log(file);\r\n      //文件上传之前调用做一些拦截限制\r\n      // this.fileList=[]\r\n      // this.fileList.push({name:file.name});\r\n      this.loadingInstance = Loading.service({ \r\n        fullscreen: true,\r\n        text:'正在拼命导入。。。' \r\n      });\r\n    },\r\n    // 得到code码，用来限制是否显示按钮\r\n    getCodeLimitToBtnStatus(codeId) {\r\n      this.request(this.api.user.crm_userCompany_authList, {\r\n        menuId: codeId\r\n      }).then(res => {\r\n        console.log(res);\r\n        this.codeData=res\r\n      });\r\n    },\r\n    //得到组织机构数据\r\n    async getWarehouseListData() {\r\n      let info = await this.request(this.api.user.get_userinfo, {}, true);\r\n      console.log(info);\r\n      //得到部门Id\r\n      // this.signData.relationDepId = info.departId;\r\n\r\n      this.request(this.api.user.userCompany_getUserOrgByUserId, {\r\n        userId: info.userId,\r\n        type: 0\r\n      }).then(data => {\r\n        console.log(data);\r\n        this.organizationListData.push(data)\r\n        //得到供货商数据\r\n        this.getSupplierListData(data.id)\r\n      });\r\n    },\r\n    //得到供货商数据\r\n    getSupplierListData(organizationId) {\r\n      console.log(246);\r\n      //cooperation 为true得到有合作的供应商 不传 得到全部的供应商\r\n      this.request(this.api.product.supplier_list, {cooperation:true}).then(data => {\r\n        console.log(data);\r\n        this.suppliers = data.data;\r\n      });\r\n    },\r\n    //获取列表\r\n    getTableList() {\r\n      this.request(\r\n        this.api.order.channelPurchaseOrder_list,\r\n        this.filtersData\r\n      ).then(data => {\r\n        this.total = data.totalCount;\r\n        this.purchaseOrderListData = data.data;\r\n      });\r\n    },\r\n    //新增\r\n    openAddClass() {\r\n      this.$router.push({\r\n        path: \"/OS/business/purchase/purchaseOrder_add\",\r\n        query: {\r\n          type: \"add\"\r\n        }\r\n      });\r\n      localStorage.setItem(\"type\", \"add\");\r\n    },\r\n    //查看\r\n    openShowDetails(orderSn) {\r\n      this.$router.push({\r\n        path: \"/OS/business/purchase/purchaseOrder_check\",\r\n        query: {\r\n          orderSn: orderSn\r\n        }\r\n      });\r\n    },\r\n    //修改\r\n    openEdit(orderSn) {\r\n      console.log(orderSn)\r\n      this.$router.push({\r\n        path: \"/OS/business/purchase/purchaseOrder_editor\",\r\n        query: {\r\n          orderSn: orderSn\r\n        }\r\n      });\r\n      localStorage.setItem(\"type\", \"add\");\r\n    },\r\n    //下拉选项\r\n    handleCommand(row) {\r\n      console.log(row)\r\n      if (row[\"remark\"] == \"addNote\") {\r\n        //点击了到货单\r\n        this.$router.push({\r\n          path: \"/OS/business/purchase/arrivalNotice_add\",\r\n          query: {\r\n            orderSn:row['row'].orderSn\r\n          }\r\n      });\r\n      } else {\r\n        //点击了该行的完成\r\n        this.request(this.api.order.channelPurchaseOrder_updatePurchaseOrderStatus,{orderSn:row['row'].orderSn, symbol:'complete'}).then(data=>{\r\n          this.$message({\r\n            message: '订单已完成',\r\n            type: 'success'\r\n          });\r\n          //刷新表格数据\r\n          this.getTableList()\r\n        })\r\n      }\r\n    },\r\n    dropdownItemValueChange(tagStr, row) {\r\n      return {\r\n        remark: tagStr,\r\n        row: row\r\n      };\r\n    },\r\n    //查询所属机构列表\r\n    findAgencyList() {\r\n\r\n    },\r\n    //查询供应商列表\r\n    findSuppliers() {},\r\n    //导入\r\n    importExcel(id) {\r\n      console.log(\"importExcel\")\r\n      // this.postAxios(this.$base.api.procureOrder_importExcel, {}).then(data => {\r\n      //   alert(data.data);\r\n      //   this.getTableList();\r\n      // });\r\n    },\r\n    //下载模板\r\n    downloadTemplate() {},\r\n    //查看质检报告\r\n    findQuality(id) {},\r\n    //删除\r\n    deleteItem(val) {\r\n      if (confirm(\"确定删除？\")) {\r\n        console.log(val);\r\n        this.request(this.api.order.channelPurchaseOrder_logicDelete, {\r\n          orderSn: val.orderSn\r\n        }).then(data => {\r\n          this.getTableList();\r\n        });\r\n      }\r\n    },\r\n    //完成订单\r\n    completeOrder(val) {\r\n      if (\r\n        confirm(\r\n          \"确认采购订单完成吗？\\n\" +\r\n            \"\\n\" +\r\n            \"确认后采购订单结束，不可增添到货单！\"\r\n        )\r\n      ) {\r\n        this.postAxios(this.$base.api.procureOrder_confirm, val).then(data => {\r\n          this.getTableList();\r\n        });\r\n      }\r\n    },\r\n    //搜索\r\n    handleSearch() {\r\n      console.log(this.filtersData);\r\n      this.getTableList();\r\n    },\r\n\r\n    //清空重置\r\n    handleResetFilters(formName) {\r\n      console.log(\"handleResetFilters======\");\r\n      this.$refs[formName].resetFields();\r\n      this.filtersData.startTime = \"\";\r\n      this.filtersData.endTime = \"\";\r\n      // this.getTableList();\r\n    },\r\n    //当前页数修改时发生改变\r\n    handleCurrentChange(val) {\r\n      this.filtersData.pageIndex = val;\r\n      this.getTableList();\r\n    },\r\n    // 每页显示多少条时发生改变\r\n    handleSizeChange(val) {\r\n      this.filtersData.pageSize = val;\r\n      this.getTableList();\r\n    }\r\n  }\r\n};\r\n</script>\r\n\r\n<style  lang=\"less\" scoped>\r\n.purchases-bass {\r\n  // background-color: #fff;\r\n  height: 100%;\r\n  margin: 8px;\r\n  .item-form {\r\n    margin-bottom: 8px;\r\n    background-color: #fff;\r\n    padding: 10px 10px 0 10px;\r\n  }\r\n  .item-cont {\r\n    margin-right: 10px;\r\n    display: flex;\r\n  }\r\n  .date-picker-div {\r\n    margin-right: 10px;\r\n  }\r\n}\r\n.table {\r\n  padding: 20px;\r\n}\r\n</style>\r\n\r\n"]}]}
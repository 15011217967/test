{"remainingRequest":"C:\\Users\\EDZ\\Desktop\\研发项目\\vue-project\\trunk\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\EDZ\\Desktop\\研发项目\\vue-project\\trunk\\src\\views\\scb\\order\\sell_order_detail.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\EDZ\\Desktop\\研发项目\\vue-project\\trunk\\src\\views\\scb\\order\\sell_order_detail.vue","mtime":1587347931114},{"path":"C:\\Users\\EDZ\\Desktop\\研发项目\\vue-project\\trunk\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1558492728398},{"path":"C:\\Users\\EDZ\\Desktop\\研发项目\\vue-project\\trunk\\node_modules\\babel-loader\\lib\\index.js","mtime":1558492720858},{"path":"C:\\Users\\EDZ\\Desktop\\研发项目\\vue-project\\trunk\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1558492728398},{"path":"C:\\Users\\EDZ\\Desktop\\研发项目\\vue-project\\trunk\\node_modules\\vue-loader\\lib\\index.js","mtime":1558492728890}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\r\nimport PageTable from \"@/views/collocation/components/PageTable\";\r\nimport ImagePopover from \"@/views/collocation/components/ImagePopover\";\r\nexport default {\r\n  name: \"transfer_slip_details\",\r\n  // 组件\r\n  components: {\r\n    PageTable,\r\n    ImagePopover\r\n  },\r\n  // 数据\r\n  data() {\r\n    return {\r\n      purchaseOrderLogs:[],\r\n      orderStarusType:{\r\n        100:'待编辑',\r\n        101:'待审核',\r\n        102:'待发货',\r\n        103:'部分已发货',\r\n        104:'异常完成',\r\n        105:'已完成',\r\n        106:'已作废'\r\n      },\r\n      // 路由参数\r\n      _id: \"\",\r\n      // 请求参数\r\n      productFormData: {\r\n        pageIndex: 1,\r\n        pageSize: 10\r\n      },\r\n      // 单据状态\r\n      billType: this.$common.getBillType(\"transferSlip\"),\r\n      // 调拨单信息\r\n      transferSlipGoodsInfo: {},\r\n      // 表格数据\r\n      tableData: {},\r\n       activities: [{\r\n          content: '支持使用图标',\r\n          timestamp: '2018-04-12 20:46',\r\n          size: 'large',\r\n          type: 'primary',\r\n          icon: 'el-icon-more'\r\n        }, {\r\n          content: '支持自定义颜色',\r\n          timestamp: '2018-04-03 20:46',\r\n          color: '#0bbd87'\r\n        }, {\r\n          content: '支持自定义尺寸',\r\n          timestamp: '2018-04-03 20:46',\r\n          size: 'large'\r\n        }, {\r\n          content: '默认样式的节点',\r\n          timestamp: '2018-04-03 20:46'\r\n        }]\r\n    };\r\n  },\r\n  // 初始化数据\r\n  mounted() {\r\n    this.$nextTick(() => {\r\n      this.init();\r\n    });\r\n  },\r\n  // 方法\r\n  methods: {\r\n    // 初始化\r\n    init() {\r\n      this.getQueryParams();\r\n      this.getStoreAllotGoodsOrder();\r\n      this.getPurchaseOrderProduct_listPage();\r\n    },\r\n    // 获取上页面参数\r\n    getQueryParams() {\r\n      this._id = this.$route.query.id;\r\n    },\r\n    // 获取详情\r\n    getStoreAllotGoodsOrder() {\r\n      this.request(\r\n        this.api.scb.purchaseOrder_getDTOByOrderId,\r\n        {orderId: this._id}\r\n      ).then(data => {\r\n        this.transferSlipGoodsInfo = data;\r\n        data.purchaseOrderDTO.createTime = this.$options.filters.timestampToTime(data.purchaseOrderDTO.createTime);\r\n        data.data = data.purchaseOrderProductDTOS;\r\n        this.purchaseOrderLogs = data.purchaseOrderLogs;\r\n        data.purchaseOrderLogs.forEach((item, index) => {\r\n          item.createTime = this.$options.filters.timestampToTime(item.createTime);\r\n          item.content = item.content.replace(/\\d{10,}/g, (items) => {\r\n            return `<span class=\"orderColor\">${items}</span>`;\r\n          })\r\n          item.content = \r\n          `<div class=\"el-timeline-item__tail\"></div>\r\n           <div class=\"el-timeline-item__node el-timeline-item__node--large el-timeline-item__node--primary\">\r\n            <i class=\"el-timeline-item__icon el-icon-more\"></i>\r\n            </div>\r\n            <!----><div class=\"el-timeline-item__wrapper\"><!---->\r\n            <div class=\"el-timeline-item__content\">${item.createTime}&nbsp;&nbsp;&nbsp;&nbsp;${item.content}</div>\r\n            <div class=\"el-timeline-item__timestamp is-bottom\"></div>\r\n            </div>`\r\n        });\r\n      });\r\n    },\r\n    // 获取详情\r\n    getPurchaseOrderProduct_listPage() {\r\n      Object.assign(this.productFormData, {\r\n        purchaseOrderId: this._id\r\n      });\r\n      this.request(\r\n        this.api.scb.purchaseOrderProduct_listPage,\r\n        this.productFormData\r\n      ).then(data => {\r\n        this.tableData = data;\r\n      });\r\n    },\r\n    // 状态转name\r\n    statusToName(val) {\r\n      if (!val && val !== 0) return;\r\n      let item = this.billType.find(item => {\r\n        return item.id === val;\r\n      });\r\n      if (item) {\r\n        return item.name;\r\n      } else {\r\n        return val;\r\n      }\r\n    },\r\n    // 取消\r\n    editAllotCancel() {\r\n      // 回退到主页面;\r\n      let module = \"/\" + this.$route.path.split(\"/\")[1];\r\n      this.$router.push({\r\n        path: module + \"/transfer_slip/transfer_slip_list\"\r\n      });\r\n    }\r\n  },\r\n  // 计算属性\r\n  computed: {},\r\n  // 监听数据变化\r\n  watch: {}\r\n};\r\n",{"version":3,"sources":["sell_order_detail.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA+HA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"sell_order_detail.vue","sourceRoot":"src/views/scb/order","sourcesContent":["<style lang=\"less\" scoped>\r\n.sub-order{\r\n  font-size: 18px;\r\n  color: #409EFf;\r\n}\r\n/deep/ .orderColor{\r\n  color: #409EFf;\r\n}\r\n.transfer-slip-details {\r\n  background: #fff;\r\n  h4 {\r\n    padding-bottom: 20px;\r\n  }\r\n  .h4 {\r\n    border-bottom: 1px solid #ebeef5;\r\n  }\r\n  .text-info {\r\n    display: flex;\r\n    width: 90%;\r\n    flex-wrap: wrap;\r\n    padding: 15px 10px 0 10px;\r\n    li {\r\n      width: 20%;\r\n      margin-right: 30px;\r\n      height: 55px;\r\n      padding-bottom: 10px;\r\n    }\r\n  }\r\n  .goods-info {\r\n    padding-top: 30px;\r\n  }\r\n  .image{\r\n    width: 45px;\r\n    height: 45px;\r\n  }\r\n  .text-length {\r\n    position: relative;\r\n    .text-info {\r\n      position: absolute;\r\n      left: 0;\r\n      top: 0;\r\n      padding-left: 75px;\r\n      width: 100%;\r\n      overflow: hidden;\r\n      text-overflow: ellipsis;\r\n      white-space: nowrap;\r\n    }\r\n  }\r\n}\r\n</style>\r\n<template>\r\n  <div>\r\n    <div class=\"transfer-slip-details item-margin item-cont\">\r\n      <h4 class=\"h4\">主订单编号：{{ transferSlipGoodsInfo.purchaseOrderDTO.purchaseOrderNum }}<el-button class=\"ml-20\" size=\"mini\" type=\"primary\" disabled plain>{{ orderStarusType[transferSlipGoodsInfo.purchaseOrderDTO.purchaseOrderStatus]  }}</el-button></h4>\r\n      <ul class=\"text-info\">\r\n        <li>收货人：{{ transferSlipGoodsInfo.purchaseOrderDTO.receiveMan }}</li>\r\n        <li>联系电话：{{ transferSlipGoodsInfo.purchaseOrderDTO.phone }}</li>\r\n        <li>订单商品数量：{{ transferSlipGoodsInfo.purchaseOrderDTO.productQty }}</li>\r\n        <li>创建时间：{{ transferSlipGoodsInfo.purchaseOrderDTO.createTime }}</li>\r\n        <li>实发数量：{{ transferSlipGoodsInfo.purchaseOrderDTO.actualSendSumQty }}</li>\r\n        <li>收货地址：{{ transferSlipGoodsInfo.purchaseOrderDTO.provinceName }} {{ transferSlipGoodsInfo.purchaseOrderDTO.cityName }} {{ transferSlipGoodsInfo.purchaseOrderDTO.areaName }} {{ transferSlipGoodsInfo.purchaseOrderDTO.addressInfo }}</li>\r\n        <li>备注：{{ transferSlipGoodsInfo.purchaseOrderDTO.remark || '--' }}</li>\r\n      </ul>\r\n      <!-- <h5 class=\"ml-10\">关联子订单号：<span class=\"sub-order\">{{ 1019121119231022838}}</span>（已完成）</h5> -->\r\n      <h4 class=\"goods-info\">订单商品信息</h4>\r\n      <page-table :form-data=\"productFormData\" :get-data=\"getPurchaseOrderProduct_listPage\" :table-data=\"tableData\">\r\n        <el-table\r\n          :data=\"tableData.data\"\r\n          stripe\r\n          empty-text=\"暂无数据\"\r\n          header-align=\"center\"\r\n          header-row-class-name=\"item-table-header\"\r\n          :highlight-current-row=\"true\">\r\n          <el-table-column align=\"left\" :show-overflow-tooltip=\"true\" label=\"商品款号\" min-width=\"70\">\r\n            <template slot-scope=\"scope\">{{ scope.row.productCode || '--' }}</template>\r\n          </el-table-column>\r\n          <el-table-column align=\"left\" :show-overflow-tooltip=\"true\" label=\"商品货号\" min-width=\"70\">\r\n            <template slot-scope=\"scope\">{{ scope.row.goodsCode || '--' }}</template>\r\n          </el-table-column>\r\n          <el-table-column align=\"left\" :show-overflow-tooltip=\"true\" label=\"商品图片\" min-width=\"70\">\r\n            <template slot-scope=\"scope\">\r\n              <img class=\"image\" :src=\"scope.row.image\" alt=\"\">\r\n            </template>\r\n          </el-table-column>\r\n          <el-table-column align=\"left\" :show-overflow-tooltip=\"true\" label=\"颜色\" min-width=\"70\">\r\n            <template slot-scope=\"scope\">{{ scope.row.color }}</template>\r\n          </el-table-column>\r\n          <el-table-column align=\"left\" :show-overflow-tooltip=\"true\" label=\"规格\" min-width=\"70\">\r\n            <template slot-scope=\"scope\">{{ scope.row.size }}</template>\r\n          </el-table-column>\r\n          <el-table-column align=\"left\" :show-overflow-tooltip=\"true\" label=\"品牌\" min-width=\"70\">\r\n            <template slot-scope=\"scope\">{{ scope.row.brandName }}</template>\r\n          </el-table-column>\r\n          <el-table-column align=\"left\" :show-overflow-tooltip=\"true\" label=\"吊牌单价\" min-width=\"70\">\r\n            <template slot-scope=\"scope\">{{ scope.row.price }}</template>\r\n          </el-table-column>\r\n          <el-table-column align=\"left\" :show-overflow-tooltip=\"true\" label=\"结算单价\" min-width=\"70\">\r\n            <template slot-scope=\"scope\">{{ scope.row.modifyPrice }}</template>\r\n          </el-table-column>\r\n          <el-table-column align=\"left\" :show-overflow-tooltip=\"true\" label=\"销售数量\" min-width=\"70\">\r\n            <template slot-scope=\"scope\">{{ scope.row.skuModifyQuantity }}</template>\r\n          </el-table-column>\r\n          <el-table-column align=\"left\" :show-overflow-tooltip=\"true\" label=\"实发数量\" min-width=\"70\">\r\n            <template slot-scope=\"scope\">{{ scope.row.actualSendQty }}</template>\r\n          </el-table-column>\r\n        </el-table>\r\n      </page-table>\r\n    </div>\r\n    <div class=\"transfer-slip-details item-margin item-cont\" v-if=\"purchaseOrderLogs && purchaseOrderLogs.length > 0\">\r\n      <div>订单进程：</div>\r\n      <div class=\"block mt-20\">\r\n        <el-timeline>\r\n          <el-timeline-item\r\n            v-for=\"(activity, index) in purchaseOrderLogs\"\r\n            :key=\"index\"\r\n            :icon=\"activity.icon\"\r\n            :type=\"activity.type\"\r\n            :color=\"activity.color\"\r\n            :size=\"activity.size\"\r\n            v-html=\"activity.content\">\r\n          </el-timeline-item>\r\n        </el-timeline>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n<script>\r\nimport PageTable from \"@/views/collocation/components/PageTable\";\r\nimport ImagePopover from \"@/views/collocation/components/ImagePopover\";\r\nexport default {\r\n  name: \"transfer_slip_details\",\r\n  // 组件\r\n  components: {\r\n    PageTable,\r\n    ImagePopover\r\n  },\r\n  // 数据\r\n  data() {\r\n    return {\r\n      purchaseOrderLogs:[],\r\n      orderStarusType:{\r\n        100:'待编辑',\r\n        101:'待审核',\r\n        102:'待发货',\r\n        103:'部分已发货',\r\n        104:'异常完成',\r\n        105:'已完成',\r\n        106:'已作废'\r\n      },\r\n      // 路由参数\r\n      _id: \"\",\r\n      // 请求参数\r\n      productFormData: {\r\n        pageIndex: 1,\r\n        pageSize: 10\r\n      },\r\n      // 单据状态\r\n      billType: this.$common.getBillType(\"transferSlip\"),\r\n      // 调拨单信息\r\n      transferSlipGoodsInfo: {},\r\n      // 表格数据\r\n      tableData: {},\r\n       activities: [{\r\n          content: '支持使用图标',\r\n          timestamp: '2018-04-12 20:46',\r\n          size: 'large',\r\n          type: 'primary',\r\n          icon: 'el-icon-more'\r\n        }, {\r\n          content: '支持自定义颜色',\r\n          timestamp: '2018-04-03 20:46',\r\n          color: '#0bbd87'\r\n        }, {\r\n          content: '支持自定义尺寸',\r\n          timestamp: '2018-04-03 20:46',\r\n          size: 'large'\r\n        }, {\r\n          content: '默认样式的节点',\r\n          timestamp: '2018-04-03 20:46'\r\n        }]\r\n    };\r\n  },\r\n  // 初始化数据\r\n  mounted() {\r\n    this.$nextTick(() => {\r\n      this.init();\r\n    });\r\n  },\r\n  // 方法\r\n  methods: {\r\n    // 初始化\r\n    init() {\r\n      this.getQueryParams();\r\n      this.getStoreAllotGoodsOrder();\r\n      this.getPurchaseOrderProduct_listPage();\r\n    },\r\n    // 获取上页面参数\r\n    getQueryParams() {\r\n      this._id = this.$route.query.id;\r\n    },\r\n    // 获取详情\r\n    getStoreAllotGoodsOrder() {\r\n      this.request(\r\n        this.api.scb.purchaseOrder_getDTOByOrderId,\r\n        {orderId: this._id}\r\n      ).then(data => {\r\n        this.transferSlipGoodsInfo = data;\r\n        data.purchaseOrderDTO.createTime = this.$options.filters.timestampToTime(data.purchaseOrderDTO.createTime);\r\n        data.data = data.purchaseOrderProductDTOS;\r\n        this.purchaseOrderLogs = data.purchaseOrderLogs;\r\n        data.purchaseOrderLogs.forEach((item, index) => {\r\n          item.createTime = this.$options.filters.timestampToTime(item.createTime);\r\n          item.content = item.content.replace(/\\d{10,}/g, (items) => {\r\n            return `<span class=\"orderColor\">${items}</span>`;\r\n          })\r\n          item.content = \r\n          `<div class=\"el-timeline-item__tail\"></div>\r\n           <div class=\"el-timeline-item__node el-timeline-item__node--large el-timeline-item__node--primary\">\r\n            <i class=\"el-timeline-item__icon el-icon-more\"></i>\r\n            </div>\r\n            <!----><div class=\"el-timeline-item__wrapper\"><!---->\r\n            <div class=\"el-timeline-item__content\">${item.createTime}&nbsp;&nbsp;&nbsp;&nbsp;${item.content}</div>\r\n            <div class=\"el-timeline-item__timestamp is-bottom\"></div>\r\n            </div>`\r\n        });\r\n      });\r\n    },\r\n    // 获取详情\r\n    getPurchaseOrderProduct_listPage() {\r\n      Object.assign(this.productFormData, {\r\n        purchaseOrderId: this._id\r\n      });\r\n      this.request(\r\n        this.api.scb.purchaseOrderProduct_listPage,\r\n        this.productFormData\r\n      ).then(data => {\r\n        this.tableData = data;\r\n      });\r\n    },\r\n    // 状态转name\r\n    statusToName(val) {\r\n      if (!val && val !== 0) return;\r\n      let item = this.billType.find(item => {\r\n        return item.id === val;\r\n      });\r\n      if (item) {\r\n        return item.name;\r\n      } else {\r\n        return val;\r\n      }\r\n    },\r\n    // 取消\r\n    editAllotCancel() {\r\n      // 回退到主页面;\r\n      let module = \"/\" + this.$route.path.split(\"/\")[1];\r\n      this.$router.push({\r\n        path: module + \"/transfer_slip/transfer_slip_list\"\r\n      });\r\n    }\r\n  },\r\n  // 计算属性\r\n  computed: {},\r\n  // 监听数据变化\r\n  watch: {}\r\n};\r\n</script>\r\n"]}]}
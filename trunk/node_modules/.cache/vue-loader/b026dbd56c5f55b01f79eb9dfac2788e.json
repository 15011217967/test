{"remainingRequest":"C:\\Users\\EDZ\\Desktop\\研发项目\\vue-project\\trunk\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\EDZ\\Desktop\\研发项目\\vue-project\\trunk\\src\\views\\collocation\\components\\group_dialog.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\EDZ\\Desktop\\研发项目\\vue-project\\trunk\\src\\views\\collocation\\components\\group_dialog.vue","mtime":1572415125600},{"path":"C:\\Users\\EDZ\\Desktop\\研发项目\\vue-project\\trunk\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1558492728398},{"path":"C:\\Users\\EDZ\\Desktop\\研发项目\\vue-project\\trunk\\node_modules\\babel-loader\\lib\\index.js","mtime":1558492720858},{"path":"C:\\Users\\EDZ\\Desktop\\研发项目\\vue-project\\trunk\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1558492728398},{"path":"C:\\Users\\EDZ\\Desktop\\研发项目\\vue-project\\trunk\\node_modules\\vue-loader\\lib\\index.js","mtime":1558492728890}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\r\nexport default {\r\n  name: \"tp-group-dialog\",\r\n  data() {\r\n    return {\r\n      dialogVisible: false,\r\n      filtersData: {\r\n        sort: 0,\r\n        name: \"\",\r\n        description: \"\"\r\n      },\r\n      //验证\r\n      rules: {\r\n        name: [\r\n          { required: true, message: \"请输入分类名称\", trigger: \"blur\" },\r\n          { max: 24, message: \"最大长度24个字符\", trigger: \"blur\" }\r\n        ],\r\n        description: [\r\n          { max: 120, message: \"最大长度120个字符\", trigger: \"blur\" }\r\n        ],\r\n        sort: [{ required: true, message: \"请选择排序\", trigger: \"change\" }]\r\n      },\r\n      editDisabled: false, //可编辑状态  除使用状态其他都不可编辑\r\n      showDisabled: false, //查看时 使用状态不可编辑\r\n      sortOptions: [],\r\n      _type: \"\",\r\n      _id: \"\",\r\n      _title: \"新增\",\r\n      tagStr: \"\"\r\n    };\r\n  },\r\n\r\n  created() {\r\n    this.init();\r\n  },\r\n  methods: {\r\n    init() {\r\n      this._type = \"\";\r\n      this._id = \"\";\r\n      this._title = \"\";\r\n      this.tagStr = \"\";\r\n      this.sortOptions = [];\r\n      this.filtersData = {\r\n        sort: 0,\r\n        name: \"\",\r\n        description: \"\"\r\n      };\r\n    },\r\n    //初始化\r\n    popupInit(_type, _title, _id) {\r\n      this.init();\r\n      this._type = _type;\r\n      this._id = _id;\r\n      this._title = _title;\r\n      //对象还需初始化\r\n      switch (_type.toString()) {\r\n        case \"add\": //新增\r\n          this.editDisabled = false;\r\n          this.showDisabled = false;\r\n          this.getSortData(_type);\r\n          break;\r\n        case \"edit\": //修改\r\n          this.editDisabled = true;\r\n          this.showDisabled = false;\r\n          this.getSortData(_type);\r\n          this.getTagGroupData(_id);\r\n          break;\r\n        case \"show\": //查看\r\n          this.editDisabled = true;\r\n          this.showDisabled = true;\r\n          this.getSortData(_type);\r\n          this.getTagGroupData(_id);\r\n          break;\r\n      }\r\n      this.dialogVisible = true;\r\n    },\r\n    //关闭\r\n    closeDialog(formName) {\r\n      this.dialogVisible = false;\r\n      this.$refs[formName].resetFields(); //重置选项\r\n    },\r\n    //保存表单\r\n    submitForm(formName) {\r\n      this.$refs[formName].validate(valid => {\r\n        if (valid) {\r\n          this.request(\r\n            this.api.collocation.collocationTagGroup_save,\r\n            this.filtersData\r\n          ).then(data => {\r\n            this.$message.success(\"保存成功\");\r\n            this.closeDialog(formName);\r\n            setTimeout(() => {\r\n              this.$emit(\"refreshItem\", \"刷新吧兄弟\");\r\n            }, 500);\r\n          });\r\n        } else {\r\n          console.log(\"error submit!!\");\r\n          return false;\r\n        }\r\n      });\r\n    },\r\n    // //获取列表数据\r\n    getTagGroupData(_id) {\r\n      this.request(this.api.collocation.collocationTagGroup_get, {\r\n        id: _id\r\n      }).then(res => {\r\n        console.log(res);\r\n        let arr = [];\r\n        let items = res.collocationTagItems;\r\n        for (let i = 0; i < items.length; i++) {\r\n          arr.push(items[i].tagName);\r\n        }\r\n        this.tagStr = arr.join(\"、\");\r\n        this.filtersData = res;\r\n      });\r\n    },\r\n    //\r\n    getSortData(_type) {\r\n      this.request(\r\n        this.api.collocation.collocationTagGroup_selectMaxSort,\r\n        {}\r\n      ).then(res => {\r\n        console.log(res == null);\r\n        let num = _type == \"add\" ? (res == null ? 1 : Number(res) + 1) : res;\r\n        let arr = [];\r\n        for (let i = 1; i <= num; i++) {\r\n          arr.push({\r\n            num: i\r\n          });\r\n        }\r\n        if (_type == \"add\") {\r\n          this.filtersData.sort = num;\r\n        }\r\n        this.sortOptions = arr;\r\n      });\r\n    },\r\n    //修改表单\r\n    editForm(formName) {\r\n      this.submitForm(formName);\r\n    }\r\n  }\r\n};\r\n",{"version":3,"sources":["group_dialog.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAyDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"group_dialog.vue","sourceRoot":"src/views/collocation/components","sourcesContent":[" <template>\r\n  <el-dialog\r\n    v-if=\"dialogVisible\"\r\n    :title=\"_title\"\r\n    :visible.sync=\"dialogVisible\"\r\n    class=\"alarmPopup\"\r\n    width=\"500px\"\r\n  >\r\n    <el-form :model=\"filtersData\" :rules=\"rules\" label-width=\"100px\" size=\"small\" ref=\"filtersForm\">\r\n      <el-form-item prop=\"name\" label=\"分组名称：\">\r\n        <el-input\r\n          placeholder=\"请输入内容\"\r\n          class=\"input-w-2\"\r\n          :disabled=\"showDisabled\"\r\n          v-model=\"filtersData.name\"\r\n        ></el-input>\r\n      </el-form-item>\r\n      <el-form-item label=\"包含标签：\" v-if=\"_type != 'add'\">{{tagStr}}</el-form-item>\r\n      <el-form-item prop=\"sort\" label=\"排序：\">\r\n        <el-select :disabled=\"showDisabled\" v-model=\"filtersData.sort\" class=\"input-w-2\" placeholder=\"请选择\">\r\n          <el-option\r\n            v-for=\"item in sortOptions\"\r\n            :key=\"item.num\"\r\n            :label=\"item.num\"\r\n            :value=\"item.num\"\r\n          ></el-option>\r\n        </el-select>\r\n      </el-form-item>\r\n      <el-form-item prop=\"description\" label=\"分组描述：\">\r\n        <el-input\r\n          type=\"textarea\"\r\n          placeholder=\"请输入内容\"\r\n          class=\"input-w-2\"\r\n          :disabled=\"showDisabled\"\r\n          v-model=\"filtersData.description\"\r\n        ></el-input>\r\n      </el-form-item>\r\n    </el-form>\r\n\r\n    <div class=\"item-right\">\r\n      <el-button size=\"small\" @click=\"closeDialog('filtersForm')\">取消</el-button>\r\n      <el-button\r\n        v-if=\"_type == 'add'\"\r\n        size=\"small\"\r\n        @click=\"submitForm('filtersForm')\"\r\n        type=\"primary\"\r\n      >确定</el-button>\r\n      <el-button\r\n        v-else-if=\"_type == 'edit'\"\r\n        size=\"small\"\r\n        @click=\"submitForm('filtersForm')\"\r\n        type=\"primary\"\r\n      >修改</el-button>\r\n    </div>\r\n  </el-dialog>\r\n</template>\r\n<script>\r\nexport default {\r\n  name: \"tp-group-dialog\",\r\n  data() {\r\n    return {\r\n      dialogVisible: false,\r\n      filtersData: {\r\n        sort: 0,\r\n        name: \"\",\r\n        description: \"\"\r\n      },\r\n      //验证\r\n      rules: {\r\n        name: [\r\n          { required: true, message: \"请输入分类名称\", trigger: \"blur\" },\r\n          { max: 24, message: \"最大长度24个字符\", trigger: \"blur\" }\r\n        ],\r\n        description: [\r\n          { max: 120, message: \"最大长度120个字符\", trigger: \"blur\" }\r\n        ],\r\n        sort: [{ required: true, message: \"请选择排序\", trigger: \"change\" }]\r\n      },\r\n      editDisabled: false, //可编辑状态  除使用状态其他都不可编辑\r\n      showDisabled: false, //查看时 使用状态不可编辑\r\n      sortOptions: [],\r\n      _type: \"\",\r\n      _id: \"\",\r\n      _title: \"新增\",\r\n      tagStr: \"\"\r\n    };\r\n  },\r\n\r\n  created() {\r\n    this.init();\r\n  },\r\n  methods: {\r\n    init() {\r\n      this._type = \"\";\r\n      this._id = \"\";\r\n      this._title = \"\";\r\n      this.tagStr = \"\";\r\n      this.sortOptions = [];\r\n      this.filtersData = {\r\n        sort: 0,\r\n        name: \"\",\r\n        description: \"\"\r\n      };\r\n    },\r\n    //初始化\r\n    popupInit(_type, _title, _id) {\r\n      this.init();\r\n      this._type = _type;\r\n      this._id = _id;\r\n      this._title = _title;\r\n      //对象还需初始化\r\n      switch (_type.toString()) {\r\n        case \"add\": //新增\r\n          this.editDisabled = false;\r\n          this.showDisabled = false;\r\n          this.getSortData(_type);\r\n          break;\r\n        case \"edit\": //修改\r\n          this.editDisabled = true;\r\n          this.showDisabled = false;\r\n          this.getSortData(_type);\r\n          this.getTagGroupData(_id);\r\n          break;\r\n        case \"show\": //查看\r\n          this.editDisabled = true;\r\n          this.showDisabled = true;\r\n          this.getSortData(_type);\r\n          this.getTagGroupData(_id);\r\n          break;\r\n      }\r\n      this.dialogVisible = true;\r\n    },\r\n    //关闭\r\n    closeDialog(formName) {\r\n      this.dialogVisible = false;\r\n      this.$refs[formName].resetFields(); //重置选项\r\n    },\r\n    //保存表单\r\n    submitForm(formName) {\r\n      this.$refs[formName].validate(valid => {\r\n        if (valid) {\r\n          this.request(\r\n            this.api.collocation.collocationTagGroup_save,\r\n            this.filtersData\r\n          ).then(data => {\r\n            this.$message.success(\"保存成功\");\r\n            this.closeDialog(formName);\r\n            setTimeout(() => {\r\n              this.$emit(\"refreshItem\", \"刷新吧兄弟\");\r\n            }, 500);\r\n          });\r\n        } else {\r\n          console.log(\"error submit!!\");\r\n          return false;\r\n        }\r\n      });\r\n    },\r\n    // //获取列表数据\r\n    getTagGroupData(_id) {\r\n      this.request(this.api.collocation.collocationTagGroup_get, {\r\n        id: _id\r\n      }).then(res => {\r\n        console.log(res);\r\n        let arr = [];\r\n        let items = res.collocationTagItems;\r\n        for (let i = 0; i < items.length; i++) {\r\n          arr.push(items[i].tagName);\r\n        }\r\n        this.tagStr = arr.join(\"、\");\r\n        this.filtersData = res;\r\n      });\r\n    },\r\n    //\r\n    getSortData(_type) {\r\n      this.request(\r\n        this.api.collocation.collocationTagGroup_selectMaxSort,\r\n        {}\r\n      ).then(res => {\r\n        console.log(res == null);\r\n        let num = _type == \"add\" ? (res == null ? 1 : Number(res) + 1) : res;\r\n        let arr = [];\r\n        for (let i = 1; i <= num; i++) {\r\n          arr.push({\r\n            num: i\r\n          });\r\n        }\r\n        if (_type == \"add\") {\r\n          this.filtersData.sort = num;\r\n        }\r\n        this.sortOptions = arr;\r\n      });\r\n    },\r\n    //修改表单\r\n    editForm(formName) {\r\n      this.submitForm(formName);\r\n    }\r\n  }\r\n};\r\n</script>\r\n<style lang=\"less\" scoped>\r\n</style>\r\n"]}]}
{"remainingRequest":"C:\\Users\\EDZ\\Desktop\\研发项目\\vue-project\\trunk\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\EDZ\\Desktop\\研发项目\\vue-project\\trunk\\src\\views\\market\\coupon\\coupon_details.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\EDZ\\Desktop\\研发项目\\vue-project\\trunk\\src\\views\\market\\coupon\\coupon_details.vue","mtime":1572415124516},{"path":"C:\\Users\\EDZ\\Desktop\\研发项目\\vue-project\\trunk\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1558492728398},{"path":"C:\\Users\\EDZ\\Desktop\\研发项目\\vue-project\\trunk\\node_modules\\babel-loader\\lib\\index.js","mtime":1558492720858},{"path":"C:\\Users\\EDZ\\Desktop\\研发项目\\vue-project\\trunk\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1558492728398},{"path":"C:\\Users\\EDZ\\Desktop\\研发项目\\vue-project\\trunk\\node_modules\\vue-loader\\lib\\index.js","mtime":1558492728890}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\r\nimport { validateNaturalNumber, validateDiscount } from \"@/utils/validate\";\r\nimport { timesTampConvertsDate } from \"@/utils/index\";\r\nimport ElUploadImg from \"@/components/uploadImg/el_upload_img\";\r\n\r\nlet mirrorFiltersData=null;\r\nexport default {\r\n  components: {\r\n    ElUploadImg\r\n  },\r\n  data() {\r\n    return {\r\n      //引入卡券右侧视图图片\r\n      previewImg: {\r\n        couponLocation: require(\"@/assets/coupon/coupon_location.png\"),\r\n        couponSemicircle: require(\"@/assets/coupon/coupon_semicircle.png\"),\r\n        couponWrap: require(\"@/assets/coupon/coupon_wrap.png\")\r\n      },\r\n      //自然数验证\r\n      validateNaturalNumber: validateNaturalNumber,\r\n      //折扣验证\r\n      validateDiscount: validateDiscount,\r\n      //日期\r\n      pickerOptionsA: {\r\n        disabledDate: time => {\r\n          let delay = this.filtersData.sendEndTime\r\n          if (!!this.filtersData.sendEndTime) {\r\n            return time.getTime() < (Date.now() - (24 * 60 * 60 * 1000)) || time.getTime() > new Date(delay).getTime();\r\n          } else {\r\n            return time.getTime() < (Date.now() - (24 * 60 * 60 * 1000));\r\n          }\r\n        }\r\n      },\r\n      pickerOptionsB: {\r\n        disabledDate: time => {\r\n          return (\r\n            time.getTime() < new Date(this.filtersData.sendStartTime).getTime()\r\n          ); //减去一天的时间代表可以选择同一天;\r\n        }\r\n      },\r\n      pickerOptionsC: {\r\n        disabledDate: time => {\r\n          let delay = this.filtersData.usingEndTime\r\n          if (!!this.filtersData.usingEndTime) {\r\n            return  time.getTime() < Date.now() - 1 * 24 * 60 * 60 * 1000 || time.getTime() > new Date(delay).getTime();\r\n          } else {\r\n            return time.getTime() < Date.now() - 1 * 24 * 60 * 60 * 1000;\r\n          }\r\n        }\r\n      },\r\n      pickerOptionsD: {\r\n        disabledDate: time => {\r\n          return (\r\n            time.getTime() < new Date(this.filtersData.usingStartTime).getTime()\r\n          ); //减去一天的时间代表可以选择同一天;\r\n        }\r\n      },\r\n      //数据汇总\r\n      summaryData: [\r\n        { name: \"卡券总量\", tag: \"total\", val: \"\" },\r\n        { name: \"领取人数\", tag: \"limitUser\", val: \"\" },\r\n        { name: \"领取次数\", tag: \"limitCount\", val: \"\" },\r\n        { name: \"核销数量\", tag: \"writeOffCount\", val: \"\" },\r\n        { name: \"关联订单数量\", tag: \"orderCount\", val: \"\" },\r\n        { name: \"关联订单金额\", tag: \"orderAmount\", val: \"\" },\r\n        { name: \"获新客数量\", tag: \"newCustomerCount\", val: \"\" },\r\n        { name: \"\", tag: \"\", val: null }\r\n      ],\r\n      //门店列表数据\r\n      storeOptions: [],\r\n      paramType: \"\",\r\n      paramId: \"\",\r\n      //标签切换默认\r\n      activeName: \"basic\",\r\n      totalLimitForm: {\r\n        addTotalLimit: null\r\n      },\r\n      filtersData: {\r\n        name: \"\", //卡券标题\r\n        type: \"\", //卡券类型\r\n        denomination: \"\", //面额\r\n        giftDescription: \"\", //实物描述\r\n        usingCondition: \"\", //使用条件\r\n        minAmount: \"\", //条件金额\r\n        totalLimit: \"\", //卡券总量\r\n        storeId: \"\", //适用门店ID\r\n        storeName: \"\", //适用门店名称\r\n        sendStartTime: null, //持续时间 开始\r\n        sendEndTime: null, //持续时间 结束\r\n        validityType: \"\", //有效时间类型\r\n        validityPeriod: \"\", //有效时间 天数 或下面字段\r\n        usingStartTime: null, //有效时间 开始日期 或上面字段\r\n        usingEndTime: null, //有效时间 结束日期  或上上字段\r\n        range: \"\", //适用商品\r\n        superposition: \"\", //是否叠加折扣\r\n        userLimitType: \"\", //领取规则\r\n        cover:\"https://lss-app-temporary.oss-cn-beijing.aliyuncs.com/applet-WeChat/coupon_banner.png\", //页面封面\r\n        poster:\"https://lss-app-temporary.oss-cn-beijing.aliyuncs.com/applet-WeChat/coupon_poster.jpg\", //分享海报\r\n        description: \"2：领取卡券后到店消费或出示后核销兑现；3：卡券面额不可兑换现金或其他等值商品；4：卡券解释权归门店所有。\", //规则说明\r\n        forwardCopywriting: \"有一张特权券等待您的领取。\" //转发文案\r\n      },\r\n      timeBugFlag: false,\r\n      editDisabled: false,\r\n      showDisabled: false,\r\n      productImages: [ { url: \"https://lss-app-temporary.oss-cn-beijing.aliyuncs.com/applet-WeChat/coupon_banner.png\" }],\r\n      posterImages: [ { url: \"https://lss-app-temporary.oss-cn-beijing.aliyuncs.com/applet-WeChat/coupon_poster.jpg\" }],\r\n      storeObj: {},\r\n      totalLimitVisible: false, //可领数量弹窗 增量状态\r\n      couponTimeView: \"\",\r\n      rules: {\r\n        //规则验证\r\n        name: [\r\n          { required: true, message: \"请输入卡券标题\", trigger: \"blur\" },\r\n          { min: 1, max: 20, message: \"最长不超过20个字符\", trigger: \"blur\" }\r\n        ],\r\n        type: [\r\n          { required: true, message: \"请选择卡券类型\", trigger: \"change\" }\r\n        ],\r\n        usingCondition: [\r\n          { required: true, message: \"请选择使用条件\", trigger: \"change\" }\r\n        ],\r\n        range: [\r\n          { required: true, message: \"请选择适用商品\", trigger: \"change\" }\r\n        ],\r\n        storeId: [\r\n          { required: true, message: \"请选择适用门店\", trigger: \"change\" }\r\n        ],\r\n        superposition: [\r\n          { required: true, message: \"请选择折扣叠加\", trigger: \"change\" }\r\n        ],\r\n        validityType: [\r\n          { required: true, message: \"请选择有效时间类型\", trigger: \"change\" }\r\n        ],\r\n        userLimitType: [\r\n          { required: true, message: \"请选择领取规则\", trigger: \"change\" }\r\n        ],\r\n        forwardCopywriting: [\r\n          { required: true, message: \"请输入转发文案\", trigger: \"blur\" },\r\n          { max: 22, message: \"最长不超过22个字符\", trigger: \"blur\" }\r\n        ],\r\n        sendStartTime: [\r\n          {required: true, message: \"请选择开始日期\", trigger: \"change\"}\r\n        ],\r\n        sendEndTime: [\r\n          { required: true, message: \"请选择结束日期\", trigger: \"change\"}\r\n        ],\r\n        usingStartTime: [\r\n          { required: true, message: \"请选择开始日期\",trigger: \"change\"}\r\n        ],\r\n        usingEndTime: [\r\n          {required: true, message: \"请选择结束日期\",trigger: \"change\"}\r\n        ]\r\n      }\r\n    };\r\n  },\r\n  created() {\r\n    mirrorFiltersData=null; \r\n    this.getParentParams();\r\n  },\r\n  methods: {\r\n    /**\r\n     * @description:根据上个页面的参数进行判断 新增等等\r\n     * @author: elephant\r\n     * @param {name,couponId} name: 路由名称 couponId 卡券ID\r\n     * @return: null\r\n     * @Date: 2019-10-08 16:16:07\r\n     */\r\n    getParentParams() {\r\n      let itemStatus = this.$route.name;\r\n      this.paramId = this.$route.query.couponId;\r\n      switch (itemStatus.toString()) {\r\n        case \"add_coupon\": //新增\r\n          this.editDisabled = false;\r\n          this.showDisabled = false;\r\n          this.activeName = \"basic\";\r\n          this.paramType = \"add\";\r\n          this.getStoreData();\r\n          break;\r\n        case \"edit_coupon\": //修改\r\n          this.editDisabled = true;\r\n          this.showDisabled = false;\r\n          this.paramType = \"edit\";\r\n          this.activeName = \"dataSummary\";\r\n          this.getPromiseCouponAll();\r\n          this.getCouponStatisticalData();\r\n          break;\r\n        case \"show_coupon\": //查看\r\n          this.editDisabled = true;\r\n          this.showDisabled = true;\r\n          this.paramType = \"show\";\r\n          this.activeName = \"dataSummary\";\r\n          this.getPromiseCouponAll();\r\n          this.getCouponStatisticalData();\r\n          break;\r\n      }\r\n      //回显时间出现问题 此时坐下延迟处理\r\n      setTimeout(() => {\r\n        this.timeBugFlag = true;\r\n      }, 500);\r\n    },\r\n    //新增\r\n    submitForm(formName) {\r\n      this.$refs[formName].validate(valid => {\r\n        if (valid) {\r\n          let filter = this.$common.deepCopy(this.filtersData);\r\n          filter.usingEndTime = this.endTime(filter.usingEndTime);\r\n          filter.sendEndTime = this.endTime(filter.sendEndTime);\r\n          this.request(this.api.market.coupon_save, filter).then(data => {\r\n            this.$message.success(\"保存成功\");\r\n            setTimeout(() => {\r\n              this.routerback();\r\n            }, 1500);\r\n          });\r\n        } else {\r\n          this.$message.error(\"请输入必填项\");\r\n        }\r\n      });\r\n    },\r\n    //修改提交\r\n    editForm(formName) {\r\n      this.$refs[formName].validate(valid => {\r\n        if (valid) {\r\n          let filter = this.$common.deepCopy(this.filtersData);\r\n          if(mirrorFiltersData.usingEndTime != filter.usingEndTime){\r\n            filter.usingEndTime = this.endTime(filter.usingEndTime);\r\n          }\r\n          if(mirrorFiltersData.sendEndTime != filter.sendEndTime){\r\n            filter.sendEndTime = this.endTime(filter.sendEndTime);\r\n          }\r\n          this.request(this.api.market.coupon_save, filter).then(data => {\r\n            this.$message.success(\"修改成功\");\r\n            setTimeout(() => {\r\n              this.routerback();\r\n            }, 1500);\r\n          });\r\n        } else {\r\n          this.$message.error(\"请输入必填项\");\r\n        }\r\n      });\r\n    },\r\n    //获取卡券统计\r\n    getCouponStatisticalData(){\r\n       this.request(this.api.market.coupon_statistical, { id: this.paramId })\r\n       .then( data => {\r\n          for (let i = 0; i < this.summaryData.length; i++) {\r\n            for (let k in data) {\r\n              if(this.summaryData[i].tag == k){\r\n                this.summaryData[i].val=data[k];\r\n              }\r\n            }\r\n          }\r\n        });\r\n    },\r\n    /**\r\n     * @description: 并发获取接口数据\r\n     * @author: elephant\r\n     * @param {type}\r\n     * @return:\r\n     * @Date: 2019-10-21 16:00:19\r\n     */\r\n    getPromiseCouponAll() {\r\n      Promise.all([\r\n        this.getPromiseCouponData(),\r\n        this.getPromiseStoreData()\r\n      ]).then(res => {\r\n        //处理卡券返回的数据\r\n        this.handlePromiseCouponData(res[0]);\r\n        //处理门店返回的数据\r\n        this.handlePromiseStoreData(res[1]);\r\n      });\r\n    },\r\n    /**\r\n     * @description: promise 获取回显数据\r\n     * @author: elephant\r\n     * @param id\r\n     * @return: resolve(data)\r\n     * @Date: 2019-10-21 15:54:56\r\n     */\r\n    getPromiseCouponData() {\r\n      return new Promise((resolve, reject) => {\r\n        this.request(this.api.market.coupon_get, { id: this.paramId }).then(\r\n          data => {\r\n            resolve(data);\r\n          }\r\n        );\r\n      });\r\n    },\r\n    /**\r\n     * @description: promise 获取适用门店数据\r\n     * @author: elephant\r\n     * @param {type}\r\n     * @return:\r\n     * @Date: 2019-10-21 15:57:11\r\n     */\r\n    getPromiseStoreData() {\r\n      return new Promise((resolve, reject) => {\r\n        this.request(this.api.retailStore.storeBasic_list4Feign, {\r\n          valid: true\r\n        }).then(data => {\r\n          resolve(data);\r\n        });\r\n      });\r\n    },\r\n    /**\r\n     * @description: 处理 promise 返回的卡券数据\r\n     * @author: elephant\r\n     * @param {data}\r\n     * @return:\r\n     * @Date: 2019-10-21 16:04:46\r\n     */\r\n    handlePromiseCouponData(res) {\r\n      mirrorFiltersData = this.$common.deepCopy(res);\r\n      this.filtersData = res;\r\n      if (!!res.cover) {\r\n        this.productImages = [{ url: res.cover }];\r\n      }\r\n      if (!!res.poster) {\r\n        this.posterImages = [{ url: res.poster }];\r\n      }\r\n    },\r\n    /**\r\n     * @description: 处理 promise 返回的门店数据\r\n     * @author: elephant\r\n     * @param {data}\r\n     * @return:\r\n     * @Date: 2019-10-21 16:04:46\r\n     */\r\n    handlePromiseStoreData(res) {\r\n      this.storeOptions = res.data;\r\n      this.handleStoreGet(this.filtersData.storeId);\r\n    },\r\n    //卡券类型切换清空\r\n    handleTypeChange(val) {\r\n      this.filtersData.denomination = \"\";\r\n      this.filtersData.giftDescription = \"\";\r\n    },\r\n    //使用条件切换清空\r\n    handleConditionChange(val) {\r\n      this.filtersData.minAmount = \"\";\r\n    },\r\n    //有效时间类型\r\n    handleValidityTypeChange(val) {\r\n      this.filtersData.usingStartTime = null;\r\n      this.filtersData.usingEndTime = null;\r\n      this.filtersData.validityPeriod = \"\";\r\n    },\r\n    //获取适用门店列表\r\n    getStoreData() {\r\n      this.request(this.api.retailStore.storeBasic_list4Feign, {\r\n        valid: true\r\n      }).then(res => {\r\n        this.storeOptions = res.data;\r\n      });\r\n    },\r\n    //增加可领数量\r\n    addTotalLimit(formName) {\r\n      this.$refs[formName].validate(valid => {\r\n        if (valid) {\r\n          this.filtersData.totalLimit = Number(this.totalLimitForm.addTotalLimit) + Number(this.filtersData.totalLimit);\r\n          this.$message({\r\n            type: \"success\",\r\n            message: \"数量增加成功\"\r\n          });\r\n          this.closeDialog();\r\n        } else {\r\n          this.$message.error(\"请输入增加数量\");\r\n        }\r\n      });\r\n    },\r\n    //适用门店发生改变\r\n    handleStoreGet(val) {\r\n      if (!!val) {\r\n        let _obj = this.storeOptions.find(item => item.id == val);\r\n        this.filtersData.storeName = _obj.name;\r\n        this.storeObj = _obj;\r\n      }\r\n    },\r\n    //时间处理\r\n    endTime(val) {\r\n      if (val != null) {\r\n        let date = new Date(val);\r\n        let t = (date.getTime() / 1000 + 86399) * 1000;\r\n        return new Date(t);\r\n      }\r\n    },\r\n    //html\r\n    handleHtml(content) {\r\n      var reg = /[;；]/g;\r\n      content = content.replace(reg, \"$&\\r\\n\");\r\n      return content;\r\n    },\r\n    //后退\r\n    routerback() {\r\n      this.$router.go(-1);\r\n    },\r\n    //关闭\r\n    closeDialog() {\r\n      this.totalLimitForm.addTotalLimit = null;\r\n      this.totalLimitVisible = false;\r\n    }\r\n  },\r\n  \r\n  computed: {\r\n    //卡券字典项集合\r\n    COUPON() {\r\n      let COUPONOBJ = {};\r\n      let codeSet = this.$store.getters.codeData;\r\n      //卡券类型\r\n      if (codeSet.COUPON001) COUPONOBJ.type = codeSet.COUPON001.codeItemList;\r\n      //卡券发放类型\r\n      if (codeSet.COUPON002) COUPONOBJ.issueType = codeSet.COUPON002.codeItemList;\r\n      //卡券使用渠道\r\n      if (codeSet.COUPON003) COUPONOBJ.channel = codeSet.COUPON003.codeItemList;\r\n      //卡券使用范围\r\n      if (codeSet.COUPON004) COUPONOBJ.range = codeSet.COUPON004.codeItemList;\r\n      //卡券使用条件\r\n      if (codeSet.COUPON005) COUPONOBJ.usingCondition = codeSet.COUPON005.codeItemList;\r\n      //卡券有效类型\r\n      if (codeSet.COUPON006) COUPONOBJ.validityType = codeSet.COUPON006.codeItemList;\r\n      return COUPONOBJ;\r\n    },\r\n    //卡券展示名称\r\n    couponViewName() {\r\n      let type = this.filtersData.type;\r\n      switch (type) {\r\n        //元\r\n        case \"REDUCE\":\r\n          return `${this.filtersData.denomination}元`;\r\n          break;\r\n        //折\r\n        case \"DISCOUNTS\":\r\n          return `${this.filtersData.denomination}折`;\r\n          break;\r\n        //实物\r\n        case \"GIFT\":\r\n          return `${this.filtersData.giftDescription}`;\r\n          break;\r\n      }\r\n    },\r\n    //卡券展示条件\r\n    couponConditionView() {\r\n      let usingCondition = this.filtersData.usingCondition;\r\n      switch (usingCondition) {\r\n        //无门槛\r\n        case \"UNCONDITIONAL\":\r\n          return `无门槛`;\r\n          break;\r\n        //满金额\r\n        case \"AMOUNT\":\r\n          return `满${this.filtersData.minAmount}元可用`;\r\n          break;\r\n        //满几件\r\n        case \"SUBSTANCE\":\r\n          return `满${this.filtersData.minAmount}件可用`;\r\n          break;\r\n      }\r\n    },\r\n    //规则说明\r\n    topDesc() {\r\n      if (this.filtersData.validityType == \"COLLECTION\") {\r\n        this.couponTimeView = `领取后${this.filtersData.validityPeriod}天可用；`;\r\n        return `1：卡券有效期为领取后${this.filtersData.validityPeriod}天内；`;\r\n      } else if (this.filtersData.validityType == \"PERIOD\") {\r\n        let startTime = timesTampConvertsDate(this.filtersData.usingStartTime) || '--';\r\n        let startViewTime = timesTampConvertsDate(this.filtersData.usingStartTime,true) || '--';\r\n        let endTime = timesTampConvertsDate(this.filtersData.usingEndTime) || '--';\r\n        let endViewTime = timesTampConvertsDate(this.filtersData.usingEndTime,true) || '--';\r\n        this.couponTimeView = `${startViewTime}-${endViewTime}`;\r\n        return `1：卡券有效期为${startTime}至${endTime}；`;\r\n      }\r\n    }\r\n  }\r\n};\r\n",{"version":3,"sources":["coupon_details.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA8dA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"coupon_details.vue","sourceRoot":"src/views/market/coupon","sourcesContent":["<template>\r\n  <div class=\"bg-fff item-margin coupon-box\">\r\n    <!-- 卡券配置 -->\r\n    <el-form\r\n      class=\"item-form coupon-form\"\r\n      :model=\"filtersData\"\r\n      :rules=\"rules\"\r\n      label-width=\"120px\"\r\n      size=\"small\"\r\n      ref=\"filtersForm\"\r\n    >\r\n      <el-tabs v-model=\"activeName\" class=\"basic-wrap\">\r\n        <!-- 数据汇总 -->\r\n        <el-tab-pane v-if=\"paramType != 'add'\" label=\"数据汇总\" name=\"dataSummary\">\r\n          <div class=\"summary-wrap\">\r\n            <dl v-for=\"(item,index) in summaryData\" :key=\"index\">\r\n              <dt>{{item.name}}</dt>\r\n              <dd>{{item.val}}</dd>\r\n            </dl>\r\n          </div>\r\n        </el-tab-pane>\r\n        <!-- 基本设置 -->\r\n        <el-tab-pane label=\"基本设置\" name=\"basic\">\r\n          <el-form-item prop=\"name\" label=\"卡券标题：\">\r\n            <el-input\r\n              class=\"input-w-2\"\r\n              :disabled=\"showDisabled\"\r\n              placeholder=\"请输入卡券标题，如：领券到店立享受优惠\"\r\n              v-model=\"filtersData.name\"\r\n            ></el-input>\r\n          </el-form-item>\r\n          <el-form-item prop=\"type\" label=\"卡券类型：\">\r\n            <el-select\r\n              class=\"input-w-2\"\r\n              @change=\"handleTypeChange\"\r\n              placeholder=\"请选择\"\r\n              v-model=\"filtersData.type\"\r\n              :disabled=\"editDisabled\"\r\n            >\r\n              <el-option\r\n                v-for=\"item in COUPON.type\"\r\n                :key=\"item.code\"\r\n                :label=\"item.name\"\r\n                :value=\"item.code\"\r\n              ></el-option>\r\n            </el-select>\r\n          </el-form-item>\r\n          <!-- 根据卡券类型切换  -->\r\n          <!-- 面额 元  -->\r\n          <el-form-item\r\n            v-if=\"filtersData.type == 'REDUCE'\"\r\n            prop=\"denomination\"\r\n            :rules=\"[\r\n              { required: true, message: '面额不能为空',trigger: 'blur'},\r\n               { validator: validateNaturalNumber, trigger: 'blur' }\r\n            ]\"\r\n            label=\"面额：\"\r\n          >\r\n            <el-input\r\n              class=\"input-w\"\r\n              :disabled=\"editDisabled\"\r\n              placeholder=\"请输入减免金额\"\r\n              v-model=\"filtersData.denomination\"\r\n            ></el-input>\r\n            <em>元</em>\r\n          </el-form-item>\r\n          <!-- 面额 折  -->\r\n          <el-form-item\r\n            v-else-if=\"filtersData.type == 'DISCOUNTS'\"\r\n            prop=\"denomination\"\r\n            :rules=\"[\r\n              { required: true, message: '折扣不能为空',trigger: 'blur'},\r\n              { validator: validateDiscount, trigger: 'blur' }\r\n            ]\"\r\n            label=\"面额：\"\r\n          >\r\n            <el-input\r\n              class=\"input-w\"\r\n              :disabled=\"editDisabled\"\r\n              placeholder=\"请输入折扣,如9.9\"\r\n              v-model=\"filtersData.denomination\"\r\n            ></el-input>\r\n            <em>折</em>\r\n          </el-form-item>\r\n          <!-- 实物描述 -->\r\n          <el-form-item\r\n            v-else-if=\"filtersData.type == 'GIFT'\"\r\n            prop=\"giftDescription\"\r\n            :rules=\"[{required: true, message: '请输入实物描述', trigger: 'blur'},\r\n             { min: 1, max: 10, message: '最长不超过10个字符', trigger: 'blur' }]\"\r\n            label=\"实物描述：\"\r\n          >\r\n            <el-input\r\n              class=\"input-w-2\"\r\n              :disabled=\"editDisabled\"\r\n              placeholder=\"请输入实物描述，如：纯棉毛巾一条\"\r\n              v-model=\"filtersData.giftDescription\"\r\n            ></el-input>\r\n          </el-form-item>\r\n          <!-- 根据卡券类型切换 END -->\r\n          <el-form-item prop=\"usingCondition\" label=\"使用条件：\">\r\n            <el-select\r\n              class=\"input-w-2\"\r\n              @change=\"handleConditionChange\"\r\n              :disabled=\"editDisabled\"\r\n              placeholder=\"请选择\"\r\n              v-model=\"filtersData.usingCondition\"\r\n            >\r\n              <el-option\r\n                v-for=\"item in COUPON.usingCondition\"\r\n                :key=\"item.code\"\r\n                :label=\"item.name\"\r\n                :value=\"item.code\"\r\n              ></el-option>\r\n            </el-select>\r\n          </el-form-item>\r\n          <!-- 根据使用条件切换  -->\r\n          <el-form-item\r\n            v-if=\"filtersData.usingCondition == 'AMOUNT'\"\r\n            prop=\"minAmount\"\r\n            :rules=\"[\r\n              { required: true, message: '金额不能为空',trigger: 'blur'},\r\n              { validator: validateNaturalNumber, trigger: 'blur' }\r\n            ]\"\r\n            label=\"满：\"\r\n          >\r\n            <el-input\r\n              class=\"input-w\"\r\n              :disabled=\"editDisabled\"\r\n              placeholder=\"请输入条件金额\"\r\n              v-model=\"filtersData.minAmount\"\r\n            ></el-input>\r\n            <em>元可使用</em>\r\n          </el-form-item>\r\n          <el-form-item\r\n            v-if=\"filtersData.usingCondition == 'SUBSTANCE'\"\r\n            prop=\"minAmount\"\r\n            :rules=\"[\r\n              { required: true, message: '件数不能为空',trigger: 'blur'},\r\n              { validator: validateNaturalNumber, trigger: 'blur' }\r\n            ]\"\r\n            label=\"满：\"\r\n          >\r\n            <el-input\r\n              class=\"input-w\"\r\n              :disabled=\"editDisabled\"\r\n              placeholder=\"请输入购物数量\"\r\n              v-model=\"filtersData.minAmount\"\r\n            ></el-input>\r\n            <em>件可使用</em>\r\n          </el-form-item>\r\n          <!-- 根据使用条件切换 END  -->\r\n          <el-form-item\r\n            prop=\"totalLimit\"\r\n            :rules=\"[\r\n              { required: true, message: '可领数量不能为空',trigger: 'blur'},\r\n              { validator: validateNaturalNumber, trigger: 'blur' }\r\n            ]\"\r\n            label=\"可领数量：\"\r\n          >\r\n            <el-input\r\n              class=\"input-w-2\"\r\n              :disabled=\"editDisabled\"\r\n              placeholder=\"请输入卡券库存数量\"\r\n              v-model=\"filtersData.totalLimit\"\r\n            ></el-input>\r\n            <el-button\r\n              v-if=\"paramType == 'edit'\"\r\n              @click=\"totalLimitVisible=true;\"\r\n              type=\"text\"\r\n              size=\"mini\"\r\n            >增加</el-button>\r\n          </el-form-item>\r\n        </el-tab-pane>\r\n        <!-- 基本设置 END-->\r\n        <!-- 适用范围 -->\r\n        <el-tab-pane label=\"适用范围\" name=\"area\">\r\n          <el-form-item prop=\"storeId\" label=\"适用门店：\">\r\n            <el-select\r\n              class=\"input-w-2\"\r\n              @change=\"handleStoreGet\"\r\n              :disabled=\"editDisabled\"\r\n              clearable\r\n              filterable\r\n              placeholder=\"请选择\"\r\n              v-model=\"filtersData.storeId\"\r\n            >\r\n              <el-option\r\n                v-for=\"item in storeOptions\"\r\n                :key=\"item.id\"\r\n                :label=\"item.name\"\r\n                :value=\"item.id\"\r\n              ></el-option>\r\n            </el-select>\r\n          </el-form-item>\r\n          <el-form-item v-if=\"timeBugFlag\" required class=\"time-wrap\" label=\"持续时间：\">\r\n            <el-col :span=\"11\">\r\n              <el-form-item prop=\"sendStartTime\" class=\"mb-0\">\r\n                <el-date-picker\r\n                  :disabled=\"showDisabled\"\r\n                  :clearable=\"false\"\r\n                  v-model=\"filtersData.sendStartTime\"\r\n                  type=\"date\"\r\n                  placeholder=\"请选择开始日期\"\r\n                  :picker-options=\"pickerOptionsA\"\r\n                  format=\"yyyy 年 MM 月 dd 日\"\r\n                  class=\"input-w\"\r\n                ></el-date-picker>\r\n              </el-form-item>\r\n            </el-col>\r\n            <el-col class=\"line\" :span=\"2\">-</el-col>\r\n            <el-col :span=\"11\">\r\n              <el-form-item prop=\"sendEndTime\" class=\"mb-0\">\r\n                <el-date-picker\r\n                  :clearable=\"false\"\r\n                  :disabled=\"showDisabled\"\r\n                  v-model=\"filtersData.sendEndTime\"\r\n                  type=\"date\"\r\n                  placeholder=\"请选择结束日期\"\r\n                  :picker-options=\"pickerOptionsB\"\r\n                  format=\"yyyy 年 MM 月 dd 日\"\r\n                  class=\"input-w\"\r\n                ></el-date-picker>\r\n              </el-form-item>\r\n            </el-col>\r\n          </el-form-item>\r\n          <el-form-item prop=\"validityType\" label=\"有效时间类型：\">\r\n            <el-select\r\n              class=\"input-w-2\"\r\n              @change=\"handleValidityTypeChange\"\r\n              :disabled=\"editDisabled\"\r\n              placeholder=\"请选择\"\r\n              v-model=\"filtersData.validityType\"\r\n            >\r\n              <el-option\r\n                v-for=\"item in  COUPON.validityType\"\r\n                :key=\"item.code\"\r\n                :label=\"item.name\"\r\n                :value=\"item.code\"\r\n              ></el-option>\r\n            </el-select>\r\n          </el-form-item>\r\n          <el-form-item\r\n            v-if=\"filtersData.validityType == 'COLLECTION'\"\r\n            prop=\"validityPeriod\"\r\n            :rules=\"[\r\n              { required: true, message: '天数不能为空',trigger: 'blur'},\r\n              { validator: validateNaturalNumber, trigger: 'blur' }\r\n            ]\"\r\n            label=\"领取后：\"\r\n          >\r\n            <el-input\r\n              class=\"input-w\"\r\n              :disabled=\"showDisabled\"\r\n              placeholder=\"请输入天数，如：7\"\r\n              v-model=\"filtersData.validityPeriod\"\r\n            ></el-input>\r\n            <em>天内有效</em>\r\n          </el-form-item>\r\n          <el-form-item\r\n            class=\"time-wrap\"\r\n            v-else-if=\"filtersData.validityType == 'PERIOD'\"\r\n            label=\"有效日期：\"\r\n            required\r\n          >\r\n            <el-col :span=\"11\">\r\n              <el-form-item prop=\"usingStartTime\" class=\"mb-0\">\r\n                <el-date-picker\r\n                  :disabled=\"editDisabled\"\r\n                  :clearable=\"false\"\r\n                  v-model=\"filtersData.usingStartTime\"\r\n                  type=\"date\"\r\n                  placeholder=\"请选择开始日期\"\r\n                  :picker-options=\"pickerOptionsC\"\r\n                  format=\"yyyy 年 MM 月 dd 日\"\r\n                  class=\"input-w\"\r\n                ></el-date-picker>\r\n              </el-form-item>\r\n            </el-col>\r\n            <el-col class=\"line\" :span=\"2\">-</el-col>\r\n            <el-col :span=\"11\">\r\n              <el-form-item prop=\"usingEndTime\" class=\"mb-0\">\r\n                <el-date-picker\r\n                  :clearable=\"false\"\r\n                  :disabled=\"showDisabled\"\r\n                  v-model=\"filtersData.usingEndTime\"\r\n                  type=\"date\"\r\n                  placeholder=\"请选择开始日期\"\r\n                  :picker-options=\"pickerOptionsD\"\r\n                  format=\"yyyy 年 MM 月 dd 日\"\r\n                  class=\"input-w\"\r\n                ></el-date-picker>\r\n              </el-form-item>\r\n            </el-col>\r\n          </el-form-item>\r\n          <el-form-item prop=\"range\" label=\"适用商品：\">\r\n            <el-select\r\n              class=\"input-w-2\"\r\n              placeholder=\"请选择\"\r\n              :disabled=\"editDisabled\"\r\n              v-model=\"filtersData.range\"\r\n            >\r\n              <el-option label=\"通用\" value=\"GENERAL\"></el-option>\r\n            </el-select>\r\n          </el-form-item>\r\n          <el-form-item prop=\"superposition\" label=\"叠加折扣：\">\r\n            <el-select\r\n              :disabled=\"editDisabled\"\r\n              class=\"input-w-2\"\r\n              placeholder=\"请选择折扣叠加规则\"\r\n              v-model=\"filtersData.superposition\"\r\n            >\r\n              <!-- <el-option label=\"不可叠加\" :value=\"false\"></el-option> -->\r\n              <el-option label=\"叠加所有折扣\" :value=\"true\"></el-option>\r\n            </el-select>\r\n          </el-form-item>\r\n          <el-form-item prop=\"userLimitType\" label=\"领取规则：\">\r\n            <el-select\r\n              class=\"input-w-2\"\r\n              :disabled=\"editDisabled\"\r\n              placeholder=\"请选择领取规则\"\r\n              v-model=\"filtersData.userLimitType\"\r\n            >\r\n              <el-option label=\"限领一张；\" value=\"SINGLE\"></el-option>\r\n              <el-option label=\"限领一张，可重复领取；\" value=\"HOLD_SINGLE\"></el-option>\r\n            </el-select>\r\n          </el-form-item>\r\n        </el-tab-pane>\r\n        <!-- 适用范围 END-->\r\n        <!-- 其他设置 -->\r\n        <el-tab-pane label=\"其他设置\" name=\"other\">\r\n          <!-- <el-form-item prop=\"forward\" label=\"转发设置：\">\r\n            <el-select class=\"input-w-2\" placeholder=\"请选择\" v-model=\"filtersData.forward\">\r\n              <el-option label=\"不允许转发\" :value=\"false\"></el-option>\r\n              <el-option label=\"允许转发\" :value=\"true\"></el-option>\r\n            </el-select>\r\n          </el-form-item>-->\r\n          <el-form-item label=\"页面封面：\" prop=\"cover\">\r\n            <el-upload-img\r\n              :disabled=\"showDisabled\"\r\n              v-model=\"filtersData.cover\"\r\n              ImgTips=\"图片小于500K，建议尺寸750×600\"\r\n              ImgSize=\"0.5\"\r\n              :EchoDisplayImages=\"productImages\"\r\n              CatalogName=\"market\"\r\n            ></el-upload-img>\r\n          </el-form-item>\r\n          <el-form-item label=\"分享海报：\" prop=\"poster\">\r\n            <el-upload-img\r\n              :disabled=\"showDisabled\"\r\n              v-model=\"filtersData.poster\"\r\n              ImgTips=\"图片小于2M，建议尺寸1334×750\"\r\n              :EchoDisplayImages=\"posterImages\"\r\n              CatalogName=\"market\"\r\n            ></el-upload-img>\r\n          </el-form-item>\r\n          <el-form-item label=\"规则说明：\" prop=\"description\">\r\n            <p>{{topDesc}}</p>\r\n            <el-input\r\n              :disabled=\"showDisabled\"\r\n              type=\"textarea\"\r\n              :autosize=\"{ minRows: 6, maxRows: 12}\"\r\n              class=\"coupon-textarea\"\r\n              v-model=\"filtersData.description\"\r\n            ></el-input>\r\n          </el-form-item>\r\n          <el-form-item prop=\"forwardCopywriting\" label=\"转发文案：\">\r\n            <el-input\r\n              class=\"input-w-2\"\r\n              :disabled=\"showDisabled\"\r\n              placeholder\r\n              v-model=\"filtersData.forwardCopywriting\"\r\n            ></el-input>\r\n          </el-form-item>\r\n        </el-tab-pane>\r\n        <!-- 其他设置 END-->\r\n      </el-tabs>\r\n      <div class=\"item-footer\">\r\n        <el-button\r\n          v-if=\"paramType == 'add'\"\r\n          size=\"small\"\r\n          @click=\"submitForm('filtersForm')\"\r\n          type=\"primary\"\r\n        >保存</el-button>\r\n        <el-button\r\n          v-else-if=\"paramType == 'edit'\"\r\n          size=\"small\"\r\n          @click=\"editForm('filtersForm')\"\r\n          type=\"primary\"\r\n        >修改</el-button>\r\n        <el-button size=\"small\" @click=\"routerback('filtersForm')\">取消</el-button>\r\n      </div>\r\n    </el-form>\r\n    <!-- 卡券配置END -->\r\n    <!-- 预览 -->\r\n    <div class=\"coupon-preview\">\r\n      <div class=\"preview-banner\">\r\n        <img :src=\"filtersData.cover\" alt />\r\n      </div>\r\n      <!-- 下部 -->\r\n      <div class=\"preview-cont\">\r\n        <ul class=\"cont-top\">\r\n          <li>\r\n            <img class=\"store-img\" :src=\"storeObj.logoImage\" alt />\r\n          </li>\r\n          <li>\r\n            <p>{{!!storeObj.name ? storeObj.name : ''}}</p>\r\n            <p>{{!!storeObj.addressInfo ? storeObj.addressInfo : ''}}</p>\r\n          </li>\r\n          <li>\r\n            <img :src=\"previewImg.couponLocation\" alt />\r\n          </li>\r\n        </ul>\r\n        <!-- 中 -->\r\n        <div class=\"cont-center\">\r\n          <h3 class=\"title\">优惠券</h3>\r\n          <div class=\"coupon-wrap\">\r\n            <img class=\"center-bg\" :src=\"previewImg.couponWrap\" alt />\r\n            <img class=\"center-circle\" :src=\"previewImg.couponSemicircle\" alt />\r\n            <ul class=\"center-txt\">\r\n              <li>{{couponViewName}}</li>\r\n              <li>{{couponConditionView}}{{filtersData.superposition?' 、可叠加':''}}</li>\r\n              <li>{{couponTimeView}}</li>\r\n            </ul>\r\n            <nav class=\"center-nav\">点击领取</nav>\r\n          </div>\r\n        </div>\r\n        <!-- 下 -->\r\n        <div class=\"cont-bottom\">\r\n          <h3 class=\"title\">卡券规则</h3>\r\n          <div\r\n            class=\"bottom-txt\"\r\n            style=\"white-space: pre-wrap;\"\r\n            v-html=\"handleHtml((!!topDesc ? topDesc :'') + filtersData.description)\"\r\n          ></div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n    <!-- 预览END -->\r\n    <!-- dialog -->\r\n    <el-dialog\r\n      title=\"增加可领数量\"\r\n      width=\"400px\"\r\n      :visible.sync=\"totalLimitVisible\"\r\n      class=\"video-wrap\"\r\n      append-to-body\r\n    >\r\n      <el-form\r\n        class\r\n        :model=\"totalLimitForm\"\r\n        label-width=\"120px\"\r\n        size=\"small\"\r\n        ref=\"totalLimitFormRef\"\r\n      >\r\n        <el-form-item label=\"当前可领总数：\">\r\n          <p>{{filtersData.totalLimit}}</p>\r\n        </el-form-item>\r\n        <el-form-item\r\n          prop=\"addTotalLimit\"\r\n          :rules=\"[\r\n            { required: true, message: '增加数量不能为空',trigger: 'blur'},\r\n            { validator: validateNaturalNumber, trigger: 'blur' }\r\n          ]\"\r\n          label=\"增加数量：\"\r\n        >\r\n          <el-input class=\"input-w\" placeholder=\"请输入所需增加的数量\" v-model=\"totalLimitForm.addTotalLimit\"></el-input>\r\n          <em>张</em>\r\n        </el-form-item>\r\n      </el-form>\r\n      <div slot=\"footer\" class=\"dialog-footer\">\r\n        <el-button size=\"small\" @click=\"closeDialog\">取 消</el-button>\r\n        <el-button type=\"primary\" size=\"small\" @click=\"addTotalLimit('totalLimitFormRef')\">确 定</el-button>\r\n      </div>\r\n    </el-dialog>\r\n    <!-- dialogEND -->\r\n  </div>\r\n</template>\r\n<script>\r\nimport { validateNaturalNumber, validateDiscount } from \"@/utils/validate\";\r\nimport { timesTampConvertsDate } from \"@/utils/index\";\r\nimport ElUploadImg from \"@/components/uploadImg/el_upload_img\";\r\n\r\nlet mirrorFiltersData=null;\r\nexport default {\r\n  components: {\r\n    ElUploadImg\r\n  },\r\n  data() {\r\n    return {\r\n      //引入卡券右侧视图图片\r\n      previewImg: {\r\n        couponLocation: require(\"@/assets/coupon/coupon_location.png\"),\r\n        couponSemicircle: require(\"@/assets/coupon/coupon_semicircle.png\"),\r\n        couponWrap: require(\"@/assets/coupon/coupon_wrap.png\")\r\n      },\r\n      //自然数验证\r\n      validateNaturalNumber: validateNaturalNumber,\r\n      //折扣验证\r\n      validateDiscount: validateDiscount,\r\n      //日期\r\n      pickerOptionsA: {\r\n        disabledDate: time => {\r\n          let delay = this.filtersData.sendEndTime\r\n          if (!!this.filtersData.sendEndTime) {\r\n            return time.getTime() < (Date.now() - (24 * 60 * 60 * 1000)) || time.getTime() > new Date(delay).getTime();\r\n          } else {\r\n            return time.getTime() < (Date.now() - (24 * 60 * 60 * 1000));\r\n          }\r\n        }\r\n      },\r\n      pickerOptionsB: {\r\n        disabledDate: time => {\r\n          return (\r\n            time.getTime() < new Date(this.filtersData.sendStartTime).getTime()\r\n          ); //减去一天的时间代表可以选择同一天;\r\n        }\r\n      },\r\n      pickerOptionsC: {\r\n        disabledDate: time => {\r\n          let delay = this.filtersData.usingEndTime\r\n          if (!!this.filtersData.usingEndTime) {\r\n            return  time.getTime() < Date.now() - 1 * 24 * 60 * 60 * 1000 || time.getTime() > new Date(delay).getTime();\r\n          } else {\r\n            return time.getTime() < Date.now() - 1 * 24 * 60 * 60 * 1000;\r\n          }\r\n        }\r\n      },\r\n      pickerOptionsD: {\r\n        disabledDate: time => {\r\n          return (\r\n            time.getTime() < new Date(this.filtersData.usingStartTime).getTime()\r\n          ); //减去一天的时间代表可以选择同一天;\r\n        }\r\n      },\r\n      //数据汇总\r\n      summaryData: [\r\n        { name: \"卡券总量\", tag: \"total\", val: \"\" },\r\n        { name: \"领取人数\", tag: \"limitUser\", val: \"\" },\r\n        { name: \"领取次数\", tag: \"limitCount\", val: \"\" },\r\n        { name: \"核销数量\", tag: \"writeOffCount\", val: \"\" },\r\n        { name: \"关联订单数量\", tag: \"orderCount\", val: \"\" },\r\n        { name: \"关联订单金额\", tag: \"orderAmount\", val: \"\" },\r\n        { name: \"获新客数量\", tag: \"newCustomerCount\", val: \"\" },\r\n        { name: \"\", tag: \"\", val: null }\r\n      ],\r\n      //门店列表数据\r\n      storeOptions: [],\r\n      paramType: \"\",\r\n      paramId: \"\",\r\n      //标签切换默认\r\n      activeName: \"basic\",\r\n      totalLimitForm: {\r\n        addTotalLimit: null\r\n      },\r\n      filtersData: {\r\n        name: \"\", //卡券标题\r\n        type: \"\", //卡券类型\r\n        denomination: \"\", //面额\r\n        giftDescription: \"\", //实物描述\r\n        usingCondition: \"\", //使用条件\r\n        minAmount: \"\", //条件金额\r\n        totalLimit: \"\", //卡券总量\r\n        storeId: \"\", //适用门店ID\r\n        storeName: \"\", //适用门店名称\r\n        sendStartTime: null, //持续时间 开始\r\n        sendEndTime: null, //持续时间 结束\r\n        validityType: \"\", //有效时间类型\r\n        validityPeriod: \"\", //有效时间 天数 或下面字段\r\n        usingStartTime: null, //有效时间 开始日期 或上面字段\r\n        usingEndTime: null, //有效时间 结束日期  或上上字段\r\n        range: \"\", //适用商品\r\n        superposition: \"\", //是否叠加折扣\r\n        userLimitType: \"\", //领取规则\r\n        cover:\"https://lss-app-temporary.oss-cn-beijing.aliyuncs.com/applet-WeChat/coupon_banner.png\", //页面封面\r\n        poster:\"https://lss-app-temporary.oss-cn-beijing.aliyuncs.com/applet-WeChat/coupon_poster.jpg\", //分享海报\r\n        description: \"2：领取卡券后到店消费或出示后核销兑现；3：卡券面额不可兑换现金或其他等值商品；4：卡券解释权归门店所有。\", //规则说明\r\n        forwardCopywriting: \"有一张特权券等待您的领取。\" //转发文案\r\n      },\r\n      timeBugFlag: false,\r\n      editDisabled: false,\r\n      showDisabled: false,\r\n      productImages: [ { url: \"https://lss-app-temporary.oss-cn-beijing.aliyuncs.com/applet-WeChat/coupon_banner.png\" }],\r\n      posterImages: [ { url: \"https://lss-app-temporary.oss-cn-beijing.aliyuncs.com/applet-WeChat/coupon_poster.jpg\" }],\r\n      storeObj: {},\r\n      totalLimitVisible: false, //可领数量弹窗 增量状态\r\n      couponTimeView: \"\",\r\n      rules: {\r\n        //规则验证\r\n        name: [\r\n          { required: true, message: \"请输入卡券标题\", trigger: \"blur\" },\r\n          { min: 1, max: 20, message: \"最长不超过20个字符\", trigger: \"blur\" }\r\n        ],\r\n        type: [\r\n          { required: true, message: \"请选择卡券类型\", trigger: \"change\" }\r\n        ],\r\n        usingCondition: [\r\n          { required: true, message: \"请选择使用条件\", trigger: \"change\" }\r\n        ],\r\n        range: [\r\n          { required: true, message: \"请选择适用商品\", trigger: \"change\" }\r\n        ],\r\n        storeId: [\r\n          { required: true, message: \"请选择适用门店\", trigger: \"change\" }\r\n        ],\r\n        superposition: [\r\n          { required: true, message: \"请选择折扣叠加\", trigger: \"change\" }\r\n        ],\r\n        validityType: [\r\n          { required: true, message: \"请选择有效时间类型\", trigger: \"change\" }\r\n        ],\r\n        userLimitType: [\r\n          { required: true, message: \"请选择领取规则\", trigger: \"change\" }\r\n        ],\r\n        forwardCopywriting: [\r\n          { required: true, message: \"请输入转发文案\", trigger: \"blur\" },\r\n          { max: 22, message: \"最长不超过22个字符\", trigger: \"blur\" }\r\n        ],\r\n        sendStartTime: [\r\n          {required: true, message: \"请选择开始日期\", trigger: \"change\"}\r\n        ],\r\n        sendEndTime: [\r\n          { required: true, message: \"请选择结束日期\", trigger: \"change\"}\r\n        ],\r\n        usingStartTime: [\r\n          { required: true, message: \"请选择开始日期\",trigger: \"change\"}\r\n        ],\r\n        usingEndTime: [\r\n          {required: true, message: \"请选择结束日期\",trigger: \"change\"}\r\n        ]\r\n      }\r\n    };\r\n  },\r\n  created() {\r\n    mirrorFiltersData=null; \r\n    this.getParentParams();\r\n  },\r\n  methods: {\r\n    /**\r\n     * @description:根据上个页面的参数进行判断 新增等等\r\n     * @author: elephant\r\n     * @param {name,couponId} name: 路由名称 couponId 卡券ID\r\n     * @return: null\r\n     * @Date: 2019-10-08 16:16:07\r\n     */\r\n    getParentParams() {\r\n      let itemStatus = this.$route.name;\r\n      this.paramId = this.$route.query.couponId;\r\n      switch (itemStatus.toString()) {\r\n        case \"add_coupon\": //新增\r\n          this.editDisabled = false;\r\n          this.showDisabled = false;\r\n          this.activeName = \"basic\";\r\n          this.paramType = \"add\";\r\n          this.getStoreData();\r\n          break;\r\n        case \"edit_coupon\": //修改\r\n          this.editDisabled = true;\r\n          this.showDisabled = false;\r\n          this.paramType = \"edit\";\r\n          this.activeName = \"dataSummary\";\r\n          this.getPromiseCouponAll();\r\n          this.getCouponStatisticalData();\r\n          break;\r\n        case \"show_coupon\": //查看\r\n          this.editDisabled = true;\r\n          this.showDisabled = true;\r\n          this.paramType = \"show\";\r\n          this.activeName = \"dataSummary\";\r\n          this.getPromiseCouponAll();\r\n          this.getCouponStatisticalData();\r\n          break;\r\n      }\r\n      //回显时间出现问题 此时坐下延迟处理\r\n      setTimeout(() => {\r\n        this.timeBugFlag = true;\r\n      }, 500);\r\n    },\r\n    //新增\r\n    submitForm(formName) {\r\n      this.$refs[formName].validate(valid => {\r\n        if (valid) {\r\n          let filter = this.$common.deepCopy(this.filtersData);\r\n          filter.usingEndTime = this.endTime(filter.usingEndTime);\r\n          filter.sendEndTime = this.endTime(filter.sendEndTime);\r\n          this.request(this.api.market.coupon_save, filter).then(data => {\r\n            this.$message.success(\"保存成功\");\r\n            setTimeout(() => {\r\n              this.routerback();\r\n            }, 1500);\r\n          });\r\n        } else {\r\n          this.$message.error(\"请输入必填项\");\r\n        }\r\n      });\r\n    },\r\n    //修改提交\r\n    editForm(formName) {\r\n      this.$refs[formName].validate(valid => {\r\n        if (valid) {\r\n          let filter = this.$common.deepCopy(this.filtersData);\r\n          if(mirrorFiltersData.usingEndTime != filter.usingEndTime){\r\n            filter.usingEndTime = this.endTime(filter.usingEndTime);\r\n          }\r\n          if(mirrorFiltersData.sendEndTime != filter.sendEndTime){\r\n            filter.sendEndTime = this.endTime(filter.sendEndTime);\r\n          }\r\n          this.request(this.api.market.coupon_save, filter).then(data => {\r\n            this.$message.success(\"修改成功\");\r\n            setTimeout(() => {\r\n              this.routerback();\r\n            }, 1500);\r\n          });\r\n        } else {\r\n          this.$message.error(\"请输入必填项\");\r\n        }\r\n      });\r\n    },\r\n    //获取卡券统计\r\n    getCouponStatisticalData(){\r\n       this.request(this.api.market.coupon_statistical, { id: this.paramId })\r\n       .then( data => {\r\n          for (let i = 0; i < this.summaryData.length; i++) {\r\n            for (let k in data) {\r\n              if(this.summaryData[i].tag == k){\r\n                this.summaryData[i].val=data[k];\r\n              }\r\n            }\r\n          }\r\n        });\r\n    },\r\n    /**\r\n     * @description: 并发获取接口数据\r\n     * @author: elephant\r\n     * @param {type}\r\n     * @return:\r\n     * @Date: 2019-10-21 16:00:19\r\n     */\r\n    getPromiseCouponAll() {\r\n      Promise.all([\r\n        this.getPromiseCouponData(),\r\n        this.getPromiseStoreData()\r\n      ]).then(res => {\r\n        //处理卡券返回的数据\r\n        this.handlePromiseCouponData(res[0]);\r\n        //处理门店返回的数据\r\n        this.handlePromiseStoreData(res[1]);\r\n      });\r\n    },\r\n    /**\r\n     * @description: promise 获取回显数据\r\n     * @author: elephant\r\n     * @param id\r\n     * @return: resolve(data)\r\n     * @Date: 2019-10-21 15:54:56\r\n     */\r\n    getPromiseCouponData() {\r\n      return new Promise((resolve, reject) => {\r\n        this.request(this.api.market.coupon_get, { id: this.paramId }).then(\r\n          data => {\r\n            resolve(data);\r\n          }\r\n        );\r\n      });\r\n    },\r\n    /**\r\n     * @description: promise 获取适用门店数据\r\n     * @author: elephant\r\n     * @param {type}\r\n     * @return:\r\n     * @Date: 2019-10-21 15:57:11\r\n     */\r\n    getPromiseStoreData() {\r\n      return new Promise((resolve, reject) => {\r\n        this.request(this.api.retailStore.storeBasic_list4Feign, {\r\n          valid: true\r\n        }).then(data => {\r\n          resolve(data);\r\n        });\r\n      });\r\n    },\r\n    /**\r\n     * @description: 处理 promise 返回的卡券数据\r\n     * @author: elephant\r\n     * @param {data}\r\n     * @return:\r\n     * @Date: 2019-10-21 16:04:46\r\n     */\r\n    handlePromiseCouponData(res) {\r\n      mirrorFiltersData = this.$common.deepCopy(res);\r\n      this.filtersData = res;\r\n      if (!!res.cover) {\r\n        this.productImages = [{ url: res.cover }];\r\n      }\r\n      if (!!res.poster) {\r\n        this.posterImages = [{ url: res.poster }];\r\n      }\r\n    },\r\n    /**\r\n     * @description: 处理 promise 返回的门店数据\r\n     * @author: elephant\r\n     * @param {data}\r\n     * @return:\r\n     * @Date: 2019-10-21 16:04:46\r\n     */\r\n    handlePromiseStoreData(res) {\r\n      this.storeOptions = res.data;\r\n      this.handleStoreGet(this.filtersData.storeId);\r\n    },\r\n    //卡券类型切换清空\r\n    handleTypeChange(val) {\r\n      this.filtersData.denomination = \"\";\r\n      this.filtersData.giftDescription = \"\";\r\n    },\r\n    //使用条件切换清空\r\n    handleConditionChange(val) {\r\n      this.filtersData.minAmount = \"\";\r\n    },\r\n    //有效时间类型\r\n    handleValidityTypeChange(val) {\r\n      this.filtersData.usingStartTime = null;\r\n      this.filtersData.usingEndTime = null;\r\n      this.filtersData.validityPeriod = \"\";\r\n    },\r\n    //获取适用门店列表\r\n    getStoreData() {\r\n      this.request(this.api.retailStore.storeBasic_list4Feign, {\r\n        valid: true\r\n      }).then(res => {\r\n        this.storeOptions = res.data;\r\n      });\r\n    },\r\n    //增加可领数量\r\n    addTotalLimit(formName) {\r\n      this.$refs[formName].validate(valid => {\r\n        if (valid) {\r\n          this.filtersData.totalLimit = Number(this.totalLimitForm.addTotalLimit) + Number(this.filtersData.totalLimit);\r\n          this.$message({\r\n            type: \"success\",\r\n            message: \"数量增加成功\"\r\n          });\r\n          this.closeDialog();\r\n        } else {\r\n          this.$message.error(\"请输入增加数量\");\r\n        }\r\n      });\r\n    },\r\n    //适用门店发生改变\r\n    handleStoreGet(val) {\r\n      if (!!val) {\r\n        let _obj = this.storeOptions.find(item => item.id == val);\r\n        this.filtersData.storeName = _obj.name;\r\n        this.storeObj = _obj;\r\n      }\r\n    },\r\n    //时间处理\r\n    endTime(val) {\r\n      if (val != null) {\r\n        let date = new Date(val);\r\n        let t = (date.getTime() / 1000 + 86399) * 1000;\r\n        return new Date(t);\r\n      }\r\n    },\r\n    //html\r\n    handleHtml(content) {\r\n      var reg = /[;；]/g;\r\n      content = content.replace(reg, \"$&\\r\\n\");\r\n      return content;\r\n    },\r\n    //后退\r\n    routerback() {\r\n      this.$router.go(-1);\r\n    },\r\n    //关闭\r\n    closeDialog() {\r\n      this.totalLimitForm.addTotalLimit = null;\r\n      this.totalLimitVisible = false;\r\n    }\r\n  },\r\n  \r\n  computed: {\r\n    //卡券字典项集合\r\n    COUPON() {\r\n      let COUPONOBJ = {};\r\n      let codeSet = this.$store.getters.codeData;\r\n      //卡券类型\r\n      if (codeSet.COUPON001) COUPONOBJ.type = codeSet.COUPON001.codeItemList;\r\n      //卡券发放类型\r\n      if (codeSet.COUPON002) COUPONOBJ.issueType = codeSet.COUPON002.codeItemList;\r\n      //卡券使用渠道\r\n      if (codeSet.COUPON003) COUPONOBJ.channel = codeSet.COUPON003.codeItemList;\r\n      //卡券使用范围\r\n      if (codeSet.COUPON004) COUPONOBJ.range = codeSet.COUPON004.codeItemList;\r\n      //卡券使用条件\r\n      if (codeSet.COUPON005) COUPONOBJ.usingCondition = codeSet.COUPON005.codeItemList;\r\n      //卡券有效类型\r\n      if (codeSet.COUPON006) COUPONOBJ.validityType = codeSet.COUPON006.codeItemList;\r\n      return COUPONOBJ;\r\n    },\r\n    //卡券展示名称\r\n    couponViewName() {\r\n      let type = this.filtersData.type;\r\n      switch (type) {\r\n        //元\r\n        case \"REDUCE\":\r\n          return `${this.filtersData.denomination}元`;\r\n          break;\r\n        //折\r\n        case \"DISCOUNTS\":\r\n          return `${this.filtersData.denomination}折`;\r\n          break;\r\n        //实物\r\n        case \"GIFT\":\r\n          return `${this.filtersData.giftDescription}`;\r\n          break;\r\n      }\r\n    },\r\n    //卡券展示条件\r\n    couponConditionView() {\r\n      let usingCondition = this.filtersData.usingCondition;\r\n      switch (usingCondition) {\r\n        //无门槛\r\n        case \"UNCONDITIONAL\":\r\n          return `无门槛`;\r\n          break;\r\n        //满金额\r\n        case \"AMOUNT\":\r\n          return `满${this.filtersData.minAmount}元可用`;\r\n          break;\r\n        //满几件\r\n        case \"SUBSTANCE\":\r\n          return `满${this.filtersData.minAmount}件可用`;\r\n          break;\r\n      }\r\n    },\r\n    //规则说明\r\n    topDesc() {\r\n      if (this.filtersData.validityType == \"COLLECTION\") {\r\n        this.couponTimeView = `领取后${this.filtersData.validityPeriod}天可用；`;\r\n        return `1：卡券有效期为领取后${this.filtersData.validityPeriod}天内；`;\r\n      } else if (this.filtersData.validityType == \"PERIOD\") {\r\n        let startTime = timesTampConvertsDate(this.filtersData.usingStartTime) || '--';\r\n        let startViewTime = timesTampConvertsDate(this.filtersData.usingStartTime,true) || '--';\r\n        let endTime = timesTampConvertsDate(this.filtersData.usingEndTime) || '--';\r\n        let endViewTime = timesTampConvertsDate(this.filtersData.usingEndTime,true) || '--';\r\n        this.couponTimeView = `${startViewTime}-${endViewTime}`;\r\n        return `1：卡券有效期为${startTime}至${endTime}；`;\r\n      }\r\n    }\r\n  }\r\n};\r\n</script>\r\n<style lang=\"less\" scoped>\r\n.coupon-textarea {\r\n  width: 300px;\r\n}\r\n.coupon-box {\r\n  display: flex;\r\n  justify-content: space-between;\r\n}\r\n.coupon-form {\r\n  flex: 1;\r\n}\r\n.coupon-form /deep/ .mb-0 {\r\n  margin-bottom: 0;\r\n}\r\n.coupon-preview {\r\n  min-width: 375px;\r\n  margin: 20px 0;\r\n  width: 375px;\r\n  height: 700px;\r\n  background: #f5f5f5;\r\n  margin-right: 10%;\r\n  box-shadow: #aaa 2px 10px 10px;\r\n  overflow-y: auto;\r\n}\r\n.time-wrap {\r\n  width: 556px;\r\n}\r\n.summary-wrap {\r\n  width: 600px;\r\n  display: flex;\r\n  flex-wrap: wrap;\r\n  > dl {\r\n    width: 25%;\r\n    text-align: center;\r\n    > dt {\r\n      background-color: #f5f5f5;\r\n    }\r\n    dt,\r\n    dd {\r\n      border: 1px solid #eeeeee;\r\n      height: 40px;\r\n      line-height: 40px;\r\n      border-bottom: 0;\r\n      border-right: 0;\r\n    }\r\n    dt,\r\n    dd:last-child {\r\n      border-right: 1px solid #eeeeee;\r\n    }\r\n  }\r\n  > dl:nth-child(1n + 5) > dd {\r\n    border-bottom: 1px solid #eeeeee;\r\n  }\r\n}\r\n// 右侧视图\r\n.preview-banner {\r\n  width: 375px;\r\n  height: auto;\r\n  > img {\r\n    width: 375px;\r\n    height: 100%;\r\n  }\r\n}\r\n.preview-cont {\r\n  width: 375px;\r\n  background-color: #d02c2c;\r\n  padding: 20px 12px;\r\n}\r\n.cont-top {\r\n  width: 100%;\r\n  height: 60px;\r\n  border: 1px solid #da4b4b;\r\n  background-color: #b52323;\r\n  border-radius: 6px;\r\n  padding: 12px;\r\n  display: flex;\r\n  position: relative;\r\n  > li:nth-child(1) {\r\n    width: 32px;\r\n    height: 32px;\r\n    border-radius: 50%;\r\n    overflow: hidden;\r\n    > img {\r\n      width: 100%;\r\n      height: 100%;\r\n    }\r\n  }\r\n  > li:nth-child(2) {\r\n    margin-left: 12px;\r\n    width: 250px;\r\n    > p {\r\n      font-size: 12px;\r\n      color: #ffffff;\r\n    }\r\n    > p:nth-child(2) {\r\n      font-size: 12px;\r\n      color: #ef8585;\r\n    }\r\n  }\r\n  > li:nth-child(3) {\r\n    width: 10px;\r\n    height: 15px;\r\n    position: absolute;\r\n    top: 22px;\r\n    right: 16px;\r\n    > img {\r\n      width: 100%;\r\n      height: 100%;\r\n    }\r\n  }\r\n}\r\n.cont-center {\r\n  margin-top: 12px;\r\n  width: 100%;\r\n  height: 154px;\r\n  border: 1px solid #da4b4b;\r\n  background-color: #b52323;\r\n  border-radius: 6px;\r\n  padding: 20px;\r\n  position: relative;\r\n}\r\n.title {\r\n  font-size: 16px;\r\n  font-weight: 600;\r\n  color: #ffffff;\r\n  text-align: center;\r\n  position: relative;\r\n}\r\n.title::before,\r\n.title::after {\r\n  content: \"\";\r\n  display: block;\r\n  width: 80px;\r\n  height: 1px;\r\n  /* border-bottom: 1px dotted #eee; */\r\n  /* border: 1px dashed #eee; */\r\n  background: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAYIAAAACCAYAAABVPdvlAAAAR0lEQVRIS2M8ffr0fwYkYGpqyojMR2ePqh8NH+Q0MZoeRtPDaHpAhMBQLT8ZRzPyaEYezchDPyPDfDBUC6JR92NvftOrfAYAhOwG0kBjIZQAAAAASUVORK5CYII=)\r\n    no-repeat left center;\r\n  background-size: 100% 100%;\r\n  position: absolute;\r\n  top: 12px;\r\n  overflow: hidden;\r\n}\r\n.title::before {\r\n  left: 25px;\r\n}\r\n.title::after {\r\n  right: 25px;\r\n}\r\n.coupon-wrap {\r\n  width: 100%;\r\n  height: 78px;\r\n  margin-top: 12px;\r\n  position: relative;\r\n  padding: 15px 16px 0 25px;\r\n  .center-bg {\r\n    position: absolute;\r\n    left: 0;\r\n    top: 0;\r\n    width: 100%;\r\n    height: 100%;\r\n  }\r\n  .center-circle {\r\n    position: absolute;\r\n    right: 60px;\r\n    top: 0;\r\n    width: 56px;\r\n    height: 78px;\r\n  }\r\n  .center-txt {\r\n    position: absolute;\r\n    left: 25px;\r\n    top: 10px;\r\n    > li:nth-child(1) {\r\n      color: #ffc590;\r\n      font-size: 16px;\r\n    }\r\n    > li:nth-child(2) {\r\n      color: #650909;\r\n      font-size: 12px;\r\n    }\r\n    > li:nth-child(3) {\r\n      color: #650909;\r\n      font-size: 10px;\r\n    }\r\n  }\r\n  .center-nav {\r\n    border-radius: 3px;\r\n    background-color: #ffb36e;\r\n    text-align: center;\r\n    font-size: 14px;\r\n    color: #d33f3f;\r\n    font-weight: bold;\r\n    line-height: 32px;\r\n    width: 74px;\r\n    height: 32px;\r\n    position: absolute;\r\n    top: 23px;\r\n    right: 16px;\r\n  }\r\n}\r\n.cont-bottom {\r\n  margin-top: 12px;\r\n  width: 100%;\r\n  border: 1px solid #da4b4b;\r\n  background-color: #b52323;\r\n  border-radius: 6px;\r\n  padding: 20px;\r\n  position: relative;\r\n  .bottom-txt {\r\n    margin-top: 20px;\r\n    font-size: 14px;\r\n    color: #ffffff;\r\n  }\r\n}\r\n</style>"]}]}
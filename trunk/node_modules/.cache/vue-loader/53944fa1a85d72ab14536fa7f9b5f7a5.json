{"remainingRequest":"C:\\Users\\EDZ\\Desktop\\研发项目\\vue-project\\trunk\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\EDZ\\Desktop\\研发项目\\vue-project\\trunk\\src\\components\\editor\\UploadImg.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\EDZ\\Desktop\\研发项目\\vue-project\\trunk\\src\\components\\editor\\UploadImg.vue","mtime":1572415127784},{"path":"C:\\Users\\EDZ\\Desktop\\研发项目\\vue-project\\trunk\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1558492728398},{"path":"C:\\Users\\EDZ\\Desktop\\研发项目\\vue-project\\trunk\\node_modules\\babel-loader\\lib\\index.js","mtime":1558492720858},{"path":"C:\\Users\\EDZ\\Desktop\\研发项目\\vue-project\\trunk\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1558492728398},{"path":"C:\\Users\\EDZ\\Desktop\\研发项目\\vue-project\\trunk\\node_modules\\vue-loader\\lib\\index.js","mtime":1558492728890}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nexport default {\n  props: {\n    contentTxt:{\n      type: String,\n      default: \"上传封面\"\n    },\n    callBack: {\n      type: Function\n    },\n    value: {\n      default: \"\"\n    },\n    isRadio: {\n      type: Boolean,\n      default: true\n    },\n    imgList: {\n      type: Array\n    },\n    actionUrl: {\n      type: String\n    },\n    // 是否多选\n    isMultiple: {\n      type: Boolean,\n      default: false\n    },\n    // 图片id\n    baseId: {\n      default: \"\"\n    }\n  },\n  // 数据\n  data() {\n    return {\n      // 除素材外的上传图片\n      action: this.api.contentCore.picture_content_upload.url,\n      // 默认参数\n      params: {\n        catalog: 'content'\n      },\n      // 加载中\n      isLoading: false\n    }\n  },\n  // 组件\n  components: {},\n  // 初始化数据\n  mounted() {\n    this.$nextTick(() => {\n      if(this.actionUrl){\n        this.action = this.actionUrl\n      }\n    })\n  },\n  // 方法\n  methods: {\n    handleAvatarSuccess(res, file) {\n      if(file.status === \"success\"){\n        const res = file.response;\n        if(res.bSuccess){\n          this.isLoading = false\n          const url = res.data.imageUrl\n          const id = res.data.id\n          if(this.isRadio){\n            this.$emit('input', url)\n            this.$emit(\"update:baseId\",id);\n            if(this.callBack){\n              this.callBack(url)\n            }\n          }else {\n            this.imgList.push({\n              url: url,\n              baseId: id\n            })\n          }\n        }\n      }\n      if(file.status == \"fail\"){\n        this.$message.error('上传失败');\n      }\n    },\n    beforeAvatarUpload(file) {\n      const str = file.type.split('/')[1].toLowerCase()\n      if (!str.match(/png|jpg|gif|webp|jpeg/)) {\n        this.$message.error('上传头像图片只能是 jpeg | jpg | png格式!');\n        return false\n      }\n      this.isLoading = true\n      return true;\n    }\n  },\n  // 计算属性\n  computed: {},\n  // 监听数据变化\n  watch: {}\n}\n",{"version":3,"sources":["UploadImg.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;AAwBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"UploadImg.vue","sourceRoot":"src/components/editor","sourcesContent":["<style lang=\"less\" scoped>\r\n  .upload-img{margin-right: 20px;width: 80px;height: 80px;display: inline-block;overflow: hidden;}\r\n  .upload-img .avatar-uploader .el-upload { border: 1px dashed #d9d9d9; border-radius: 6px; cursor: pointer; position: relative; overflow: hidden;width: 80px;height: 80px;text-align: center;line-height: 80px;}\r\n  .upload-img .avatar-uploader .el-upload:hover { border-color: #409EFF;}\r\n  .upload-img img {width: 100%;height: 100%;}\r\n  .upload-img span {font-size: 14px;}\r\n</style>\r\n<template>\r\n  <div class=\"upload-img\" v-loading=\"isLoading\">\r\n    <el-upload\r\n        class=\"avatar-uploader\"\r\n        :action=\"action\"\r\n        :show-file-list=\"false\"\r\n        :on-success=\"handleAvatarSuccess\"\r\n        :before-upload=\"beforeAvatarUpload\"\r\n        :data=\"params\"\r\n        :multiple=\"isMultiple\"\r\n    >\r\n      <span v-show=\"value.length === 0\">{{ contentTxt }}</span>\r\n      <img :src=\"value\" alt=\"\" v-show=\"value.length > 0\">\r\n    </el-upload>\r\n  </div>\r\n</template>\r\n<script>\r\n  export default {\r\n    props: {\r\n      contentTxt:{\r\n        type: String,\r\n        default: \"上传封面\"\r\n      },\r\n      callBack: {\r\n        type: Function\r\n      },\r\n      value: {\r\n        default: \"\"\r\n      },\r\n      isRadio: {\r\n        type: Boolean,\r\n        default: true\r\n      },\r\n      imgList: {\r\n        type: Array\r\n      },\r\n      actionUrl: {\r\n        type: String\r\n      },\r\n      // 是否多选\r\n      isMultiple: {\r\n        type: Boolean,\r\n        default: false\r\n      },\r\n      // 图片id\r\n      baseId: {\r\n        default: \"\"\r\n      }\r\n    },\r\n    // 数据\r\n    data() {\r\n      return {\r\n        // 除素材外的上传图片\r\n        action: this.api.contentCore.picture_content_upload.url,\r\n        // 默认参数\r\n        params: {\r\n          catalog: 'content'\r\n        },\r\n        // 加载中\r\n        isLoading: false\r\n      }\r\n    },\r\n    // 组件\r\n    components: {},\r\n    // 初始化数据\r\n    mounted() {\r\n      this.$nextTick(() => {\r\n        if(this.actionUrl){\r\n          this.action = this.actionUrl\r\n        }\r\n      })\r\n    },\r\n    // 方法\r\n    methods: {\r\n      handleAvatarSuccess(res, file) {\r\n        if(file.status === \"success\"){\r\n          const res = file.response;\r\n          if(res.bSuccess){\r\n            this.isLoading = false\r\n            const url = res.data.imageUrl\r\n            const id = res.data.id\r\n            if(this.isRadio){\r\n              this.$emit('input', url)\r\n              this.$emit(\"update:baseId\",id);\r\n              if(this.callBack){\r\n                this.callBack(url)\r\n              }\r\n            }else {\r\n              this.imgList.push({\r\n                url: url,\r\n                baseId: id\r\n              })\r\n            }\r\n          }\r\n        }\r\n        if(file.status == \"fail\"){\r\n          this.$message.error('上传失败');\r\n        }\r\n      },\r\n      beforeAvatarUpload(file) {\r\n        const str = file.type.split('/')[1].toLowerCase()\r\n        if (!str.match(/png|jpg|gif|webp|jpeg/)) {\r\n          this.$message.error('上传头像图片只能是 jpeg | jpg | png格式!');\r\n          return false\r\n        }\r\n        this.isLoading = true\r\n        return true;\r\n      }\r\n    },\r\n    // 计算属性\r\n    computed: {},\r\n    // 监听数据变化\r\n    watch: {}\r\n  }\r\n</script>\r\n"]}]}
{"remainingRequest":"C:\\Users\\EDZ\\Desktop\\研发项目\\vue-project\\trunk\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\EDZ\\Desktop\\研发项目\\vue-project\\trunk\\src\\views\\collocation\\components\\matching_dialog.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\EDZ\\Desktop\\研发项目\\vue-project\\trunk\\src\\views\\collocation\\components\\matching_dialog.vue","mtime":1572415125598},{"path":"C:\\Users\\EDZ\\Desktop\\研发项目\\vue-project\\trunk\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1558492728398},{"path":"C:\\Users\\EDZ\\Desktop\\研发项目\\vue-project\\trunk\\node_modules\\babel-loader\\lib\\index.js","mtime":1558492720858},{"path":"C:\\Users\\EDZ\\Desktop\\研发项目\\vue-project\\trunk\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1558492728398},{"path":"C:\\Users\\EDZ\\Desktop\\研发项目\\vue-project\\trunk\\node_modules\\vue-loader\\lib\\index.js","mtime":1558492728890}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\r\nimport ElUploadImg from '@/components/uploadImg/el_upload_img';\r\nexport default {\r\n  name: \"tp-matching-dialog\",\r\n  data() {\r\n    return {\r\n      dialogVisible: false,\r\n      filtersData: {\r\n        name: \"\", //标签名称\r\n        image:'',\r\n        tagGroupId:'',\r\n        tagGroupName:'',\r\n        description: \"\"\r\n      },\r\n      productImages:[],\r\n      //验证\r\n      rules: {\r\n        name: [\r\n          { required: true, message: \"请输入标签名称\", trigger: \"blur\" },\r\n          { max: 24, message: \"最大长度24个字符\", trigger: \"blur\" }\r\n        ],\r\n        description: [\r\n          { max: 120, message: \"最大长度120个字符\", trigger: \"blur\" }\r\n        ]\r\n      },\r\n      editDisabled: false, //可编辑状态  除使用状态其他都不可编辑\r\n      showDisabled: false, //查看时 使用状态不可编辑\r\n      _type: \"\",\r\n      _id: \"\",\r\n      _title: \"新增\",\r\n      groupOptions: [],\r\n      setGroupData: []\r\n    };\r\n  },\r\n  created() {\r\n    this.init();\r\n    this.getTagGroupList();\r\n  },\r\n  methods: {\r\n    init() {\r\n      this._type = \"\";\r\n      this._id = \"\";\r\n      this._title = \"\";\r\n      this.setGroupData = [];\r\n      this.productImages=[];\r\n      this.filtersData = {\r\n        name: \"\",\r\n        description: \"\",\r\n        image:'',\r\n         tagGroupId:'',\r\n        tagGroupName:'',\r\n\r\n      };\r\n    },\r\n    getTagGroupList() {\r\n      this.request(this.api.collocation.collocationTagGroup_list, {}).then(\r\n        res => {\r\n          this.groupOptions = res.data;\r\n        }\r\n      );\r\n    },\r\n     //分组ID改变时获取ID 同时赋值name\r\n    tagGroupIdGet(val) {\r\n      let _obj = this.groupOptions.find(item => item.id == val);\r\n      this.filtersData.tagGroupName = _obj.name;\r\n    },\r\n    //初始化\r\n    popupInit(_type, _title, _id) {\r\n      this.init();\r\n      this._type = _type;\r\n      this._id = _id;\r\n      this._title = _title;\r\n      //对象还需初始化\r\n      switch (_type.toString()) {\r\n        case \"add\": //新增\r\n          this.editDisabled = false;\r\n          this.showDisabled = false;\r\n          break;\r\n        case \"edit\": //修改\r\n          this.editDisabled = true;\r\n          this.showDisabled = false;\r\n          this.getListData(_id);\r\n          break;\r\n        case \"show\": //查看\r\n          this.editDisabled = true;\r\n          this.showDisabled = true;\r\n          this.getListData(_id);\r\n          break;\r\n      }\r\n      this.dialogVisible = true;\r\n    },\r\n    //关闭\r\n    closeDialog(formName) {\r\n      this.dialogVisible = false;\r\n      this.$refs[formName].resetFields(); //重置选项\r\n    },\r\n    //保存表单\r\n    submitForm(formName) {\r\n      this.$refs[formName].validate(valid => {\r\n        if (valid) {\r\n          this.request(\r\n            this.api.collocation.collocationTag_save,\r\n            this.filtersData\r\n          ).then(data => {\r\n            this.$message.success(\"保存成功\");\r\n            this.closeDialog(formName);\r\n            setTimeout(() => {\r\n              this.$emit(\"refreshItem\", \"刷新吧兄弟\");\r\n            }, 500);\r\n          });\r\n        } else {\r\n          console.log(\"error submit!!\");\r\n          return false;\r\n        }\r\n      });\r\n    },\r\n\r\n    // //获取列表数据\r\n    getListData(_id) {\r\n      this.request(this.api.collocation.collocationTag_get, {\r\n        id: this._id\r\n      }).then(res => {\r\n        console.log(res);\r\n        if(!!res.image){\r\n          this.productImages=[{url:res.image}];\r\n        }else{\r\n          this.productImages=[];\r\n        }\r\n         this.filtersData = res;\r\n      });\r\n    },\r\n    //修改表单\r\n    editForm(formName) {\r\n      this.submitForm(formName);\r\n    },\r\n\r\n  },\r\n    components: {\r\n      ElUploadImg\r\n    },\r\n};\r\n",{"version":3,"sources":["matching_dialog.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAkFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA","file":"matching_dialog.vue","sourceRoot":"src/views/collocation/components","sourcesContent":["<!--\r\n * @Description: 标签\r\n * @Author:elephant\r\n * @Date: 2019-08-20 08:58:17\r\n * @LastEditTime: 2019-08-20 14:51:36\r\n * @LastEditors: Please set LastEditors\r\n -->\r\n <template>\r\n  <el-dialog\r\n    v-if=\"dialogVisible\"\r\n    :title=\"_title\"\r\n    :visible.sync=\"dialogVisible\"\r\n    class=\"alarmPopup\"\r\n    width=\"500px\"\r\n  >\r\n    <el-form\r\n      :model=\"filtersData\"\r\n      :rules=\"rules\"\r\n      label-width=\"100px\"\r\n      size=\"small\"\r\n      ref=\"filtersForm\"\r\n      inline\r\n    >\r\n      <el-form-item prop=\"name\" label=\"标签名称：\">\r\n        <el-input\r\n          class=\"input-w-2\"\r\n          placeholder=\"请输入内容\"\r\n          :disabled=\"editDisabled\"\r\n          v-model=\"filtersData.name\"\r\n        ></el-input>\r\n      </el-form-item>\r\n      <el-form-item label=\"所属分组：\">\r\n        <el-select\r\n          class=\"input-w-2\"\r\n          placeholder=\"请选择\"\r\n          :disabled=\"showDisabled\"\r\n          v-model=\"filtersData.tagGroupId\"\r\n          @change=\"tagGroupIdGet\"\r\n        >\r\n          <el-option\r\n            v-for=\"item in groupOptions\"\r\n            :key=\"item.id\"\r\n            :label=\"item.name\"\r\n            :value=\"item.id\"\r\n          ></el-option>\r\n        </el-select>\r\n      </el-form-item>\r\n         <el-form-item  prop=\"image\"  label=\"标签图片：\">\r\n           <el-upload-img\r\n            v-model=\"filtersData.image\"\r\n            :EchoDisplayImages=\"productImages\"\r\n            CatalogName=\"product\"\r\n            ></el-upload-img>\r\n        </el-form-item>\r\n      <el-form-item prop=\"description\" label=\"标签描述：\">\r\n        <el-input\r\n          type=\"textarea\"\r\n          placeholder=\"请输入内容\"\r\n          class=\"input-w-2\"\r\n          :disabled=\"showDisabled\"\r\n          v-model=\"filtersData.description\"\r\n        ></el-input>\r\n      </el-form-item>\r\n    </el-form>\r\n    <div class=\"item-right\">\r\n      <el-button size=\"small\" @click=\"closeDialog('filtersForm')\">取消</el-button>\r\n      <el-button\r\n        v-if=\"_type == 'add'\"\r\n        size=\"small\"\r\n        @click=\"submitForm('filtersForm')\"\r\n        type=\"primary\"\r\n      >确定</el-button>\r\n      <el-button\r\n        v-else-if=\"_type == 'edit'\"\r\n        size=\"small\"\r\n        @click=\"editForm('filtersForm')\"\r\n        type=\"primary\"\r\n      >修改</el-button>\r\n    </div>\r\n  </el-dialog>\r\n</template>\r\n<script>\r\nimport ElUploadImg from '@/components/uploadImg/el_upload_img';\r\nexport default {\r\n  name: \"tp-matching-dialog\",\r\n  data() {\r\n    return {\r\n      dialogVisible: false,\r\n      filtersData: {\r\n        name: \"\", //标签名称\r\n        image:'',\r\n        tagGroupId:'',\r\n        tagGroupName:'',\r\n        description: \"\"\r\n      },\r\n      productImages:[],\r\n      //验证\r\n      rules: {\r\n        name: [\r\n          { required: true, message: \"请输入标签名称\", trigger: \"blur\" },\r\n          { max: 24, message: \"最大长度24个字符\", trigger: \"blur\" }\r\n        ],\r\n        description: [\r\n          { max: 120, message: \"最大长度120个字符\", trigger: \"blur\" }\r\n        ]\r\n      },\r\n      editDisabled: false, //可编辑状态  除使用状态其他都不可编辑\r\n      showDisabled: false, //查看时 使用状态不可编辑\r\n      _type: \"\",\r\n      _id: \"\",\r\n      _title: \"新增\",\r\n      groupOptions: [],\r\n      setGroupData: []\r\n    };\r\n  },\r\n  created() {\r\n    this.init();\r\n    this.getTagGroupList();\r\n  },\r\n  methods: {\r\n    init() {\r\n      this._type = \"\";\r\n      this._id = \"\";\r\n      this._title = \"\";\r\n      this.setGroupData = [];\r\n      this.productImages=[];\r\n      this.filtersData = {\r\n        name: \"\",\r\n        description: \"\",\r\n        image:'',\r\n         tagGroupId:'',\r\n        tagGroupName:'',\r\n\r\n      };\r\n    },\r\n    getTagGroupList() {\r\n      this.request(this.api.collocation.collocationTagGroup_list, {}).then(\r\n        res => {\r\n          this.groupOptions = res.data;\r\n        }\r\n      );\r\n    },\r\n     //分组ID改变时获取ID 同时赋值name\r\n    tagGroupIdGet(val) {\r\n      let _obj = this.groupOptions.find(item => item.id == val);\r\n      this.filtersData.tagGroupName = _obj.name;\r\n    },\r\n    //初始化\r\n    popupInit(_type, _title, _id) {\r\n      this.init();\r\n      this._type = _type;\r\n      this._id = _id;\r\n      this._title = _title;\r\n      //对象还需初始化\r\n      switch (_type.toString()) {\r\n        case \"add\": //新增\r\n          this.editDisabled = false;\r\n          this.showDisabled = false;\r\n          break;\r\n        case \"edit\": //修改\r\n          this.editDisabled = true;\r\n          this.showDisabled = false;\r\n          this.getListData(_id);\r\n          break;\r\n        case \"show\": //查看\r\n          this.editDisabled = true;\r\n          this.showDisabled = true;\r\n          this.getListData(_id);\r\n          break;\r\n      }\r\n      this.dialogVisible = true;\r\n    },\r\n    //关闭\r\n    closeDialog(formName) {\r\n      this.dialogVisible = false;\r\n      this.$refs[formName].resetFields(); //重置选项\r\n    },\r\n    //保存表单\r\n    submitForm(formName) {\r\n      this.$refs[formName].validate(valid => {\r\n        if (valid) {\r\n          this.request(\r\n            this.api.collocation.collocationTag_save,\r\n            this.filtersData\r\n          ).then(data => {\r\n            this.$message.success(\"保存成功\");\r\n            this.closeDialog(formName);\r\n            setTimeout(() => {\r\n              this.$emit(\"refreshItem\", \"刷新吧兄弟\");\r\n            }, 500);\r\n          });\r\n        } else {\r\n          console.log(\"error submit!!\");\r\n          return false;\r\n        }\r\n      });\r\n    },\r\n\r\n    // //获取列表数据\r\n    getListData(_id) {\r\n      this.request(this.api.collocation.collocationTag_get, {\r\n        id: this._id\r\n      }).then(res => {\r\n        console.log(res);\r\n        if(!!res.image){\r\n          this.productImages=[{url:res.image}];\r\n        }else{\r\n          this.productImages=[];\r\n        }\r\n         this.filtersData = res;\r\n      });\r\n    },\r\n    //修改表单\r\n    editForm(formName) {\r\n      this.submitForm(formName);\r\n    },\r\n\r\n  },\r\n    components: {\r\n      ElUploadImg\r\n    },\r\n};\r\n</script>\r\n<style lang=\"less\" scoped>\r\n</style>\r\n"]}]}
{"remainingRequest":"C:\\Users\\EDZ\\Desktop\\研发项目\\vue-project\\trunk\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\EDZ\\Desktop\\研发项目\\vue-project\\trunk\\src\\views\\content\\create\\components\\Video.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\EDZ\\Desktop\\研发项目\\vue-project\\trunk\\src\\views\\content\\create\\components\\Video.vue","mtime":1572415123609},{"path":"C:\\Users\\EDZ\\Desktop\\研发项目\\vue-project\\trunk\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1558492728398},{"path":"C:\\Users\\EDZ\\Desktop\\研发项目\\vue-project\\trunk\\node_modules\\babel-loader\\lib\\index.js","mtime":1558492720858},{"path":"C:\\Users\\EDZ\\Desktop\\研发项目\\vue-project\\trunk\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1558492728398},{"path":"C:\\Users\\EDZ\\Desktop\\研发项目\\vue-project\\trunk\\node_modules\\vue-loader\\lib\\index.js","mtime":1558492728890}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport ReleasePublic from '@/views/content/create/components/ReleasePublic'\nimport VideoRadioList from '@/views/content/create/components/VideoRadioList'\nimport UploadVideo from '@/components/editor/UploadVideo'\nexport default {\n  props:{\n    formData:{\n      type: Object\n    }\n  },\n  // 数据\n  data() {\n    return {\n      // 选择图片弹窗\n      videoCheckDialog: false,\n      // tabs 默认选中的\n      activeName: 'local',\n      // 素材列表\n      materialRadioCheck: [],\n      materialVideoList: [],\n      materialVideoFrom: {\n        pageIndex: 1,\n        pageSize: 12,\n        type: 1  // 1 -- 视频  2 -- 图片\n      }\n    }\n  },\n  // 组件\n  components: {\n    ReleasePublic,\n    UploadVideo,\n    VideoRadioList\n  },\n  created(){\n    // 编辑\n    if(this.formData.videoInfoParams.info){\n      this.videoInfoParams = JSON.parse(JSON.stringify(this.formData.videoInfoParams))\n    }\n  },\n  // 初始化数据\n  mounted() {\n    this.$nextTick(() => {\n\n    })\n  },\n  // 方法\n  methods: {\n    // 初始化\n    init(){\n      // 初始化公共的\n      this.$refs.releasePublic.init();\n    },\n    // 显示弹窗\n    videoRadioDialogShow(){\n      this.videoCheckDialog = true\n      this.materialVideoFrom.pageIndex = 1\n      this.activeName = 'local'\n    },\n    // 本地上传回调\n    uploadVideoCallBack(info){\n      this.formData.videoInfoParams.info = info\n      this.videoCheckDialog = false\n    },\n    //图片 素材 本地 切换\n    handleClick(node){\n      if(node.name === 'material'){\n        this.getMaterialVideoData(false)\n      }\n    },\n    // 获取素材信息\n    getMaterialVideoData(flag){\n      if(flag){\n        this.materialVideoFrom.pageIndex++\n      }\n      this.request(this.api.contentCore.library_list, this.materialVideoFrom).then(data => {\n        if(data.count === 0){\n          this.$message.error('已加载全部数据')\n          return\n        }\n        if(flag){\n          this.materialVideoList = this.materialVideoList.concat(data.data)\n        }else {\n          this.materialVideoList =  data.data\n        }\n      });\n    },\n    // 选中素材\n    videoRadioDialogSub(){\n      if(this.materialRadioCheck.length){\n        this.formData.videoInfoParams.info = this.materialRadioCheck[0]\n        this.videoCheckDialog = false\n      }else{\n        this.$message.error('请选择视频')\n      }\n    }\n  },\n  // 计算属性\n  computed: {},\n  // 监听数据变化\n  watch: {\n\n  }\n}\n",{"version":3,"sources":["Video.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA6CA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA","file":"Video.vue","sourceRoot":"src/views/content/create/components","sourcesContent":["<style lang=\"less\" scoped>\r\n  .my-video{\r\n    .upload-list{height: 230px;\r\n      .auto-list{height: 200px;overflow: auto;}\r\n    }\r\n    .video-upload{height: 80px;width: 80px;border-radius: 5px;border: 1px dashed #d9d9d9;cursor: pointer;text-align: center;float: left;line-height: 80px;margin: 10px;\r\n      img,video {width: 80px;height: 80px;cursor: pointer;}\r\n    }\r\n    .video-upload:hover{border: 1px dashed #409EFF;}\r\n  }\r\n</style>\r\n<template>\r\n  <div class=\"my-video\">\r\n    <release-public :form-data=\"formData\" ref=\"releasePublic\">\r\n      <!--视频-->\r\n      <div class=\"clearfix\">\r\n        <div class=\"video-upload\" @click=\"videoRadioDialogShow\">\r\n          <span  v-if=\"!formData.videoInfoParams.info\">选择视频</span>\r\n          <video :src=\"formData.videoInfoParams.info.mediaUrl\" v-if=\"formData.videoInfoParams.info && formData.videoInfoParams.info.mediaUrl && !formData.videoInfoParams.info.videoCoverUrl\" title=\"点击重新选择\"></video>\r\n          <img :src=\"formData.videoInfoParams.info.videoCoverUrl\" alt=\"\"  v-if=\"formData.videoInfoParams.info && formData.videoInfoParams.info.videoCoverUrl\" title=\"点击重新选择\">\r\n        </div>\r\n      </div>\r\n    </release-public>\r\n    <el-dialog title=\"选择视频\" :visible.sync=\"videoCheckDialog\" width=\"45%\" :close-on-click-modal=\"false\">\r\n      <div class=\"upload-list\">\r\n        <el-tabs v-model=\"activeName\" @tab-click=\"handleClick\">\r\n          <el-tab-pane label=\"本地上传\" name=\"local\">\r\n            <upload-video ref=\"uploadVideo\" :call-back=\"uploadVideoCallBack\" v-if=\"videoCheckDialog\"></upload-video>\r\n          </el-tab-pane>\r\n          <el-tab-pane label=\"素材库\" name=\"material\">\r\n            <div class=\"auto-list\">\r\n              <video-radio-list :radio-list=\"materialVideoList\" :radio-check=\"materialRadioCheck\"></video-radio-list>\r\n              <el-button type=\"primary\" @click=\"getMaterialVideoData(true)\" size=\"small\">加载更多</el-button>\r\n            </div>\r\n          </el-tab-pane>\r\n        </el-tabs>\r\n      </div>\r\n      <span slot=\"footer\" class=\"dialog-footer\" v-if=\"activeName === 'material'\">\r\n        <el-button @click=\"videoCheckDialog = false\" size=\"small\">取 消</el-button>\r\n          <el-button type=\"primary\" @click=\"videoRadioDialogSub\" size=\"small\">确 定</el-button>\r\n        </span>\r\n    </el-dialog>\r\n  </div>\r\n</template>\r\n<script>\r\n  import ReleasePublic from '@/views/content/create/components/ReleasePublic'\r\n  import VideoRadioList from '@/views/content/create/components/VideoRadioList'\r\n  import UploadVideo from '@/components/editor/UploadVideo'\r\n  export default {\r\n    props:{\r\n      formData:{\r\n        type: Object\r\n      }\r\n    },\r\n    // 数据\r\n    data() {\r\n      return {\r\n        // 选择图片弹窗\r\n        videoCheckDialog: false,\r\n        // tabs 默认选中的\r\n        activeName: 'local',\r\n        // 素材列表\r\n        materialRadioCheck: [],\r\n        materialVideoList: [],\r\n        materialVideoFrom: {\r\n          pageIndex: 1,\r\n          pageSize: 12,\r\n          type: 1  // 1 -- 视频  2 -- 图片\r\n        }\r\n      }\r\n    },\r\n    // 组件\r\n    components: {\r\n      ReleasePublic,\r\n      UploadVideo,\r\n      VideoRadioList\r\n    },\r\n    created(){\r\n      // 编辑\r\n      if(this.formData.videoInfoParams.info){\r\n        this.videoInfoParams = JSON.parse(JSON.stringify(this.formData.videoInfoParams))\r\n      }\r\n    },\r\n    // 初始化数据\r\n    mounted() {\r\n      this.$nextTick(() => {\r\n\r\n      })\r\n    },\r\n    // 方法\r\n    methods: {\r\n      // 初始化\r\n      init(){\r\n        // 初始化公共的\r\n        this.$refs.releasePublic.init();\r\n      },\r\n      // 显示弹窗\r\n      videoRadioDialogShow(){\r\n        this.videoCheckDialog = true\r\n        this.materialVideoFrom.pageIndex = 1\r\n        this.activeName = 'local'\r\n      },\r\n      // 本地上传回调\r\n      uploadVideoCallBack(info){\r\n        this.formData.videoInfoParams.info = info\r\n        this.videoCheckDialog = false\r\n      },\r\n      //图片 素材 本地 切换\r\n      handleClick(node){\r\n        if(node.name === 'material'){\r\n          this.getMaterialVideoData(false)\r\n        }\r\n      },\r\n      // 获取素材信息\r\n      getMaterialVideoData(flag){\r\n        if(flag){\r\n          this.materialVideoFrom.pageIndex++\r\n        }\r\n        this.request(this.api.contentCore.library_list, this.materialVideoFrom).then(data => {\r\n          if(data.count === 0){\r\n            this.$message.error('已加载全部数据')\r\n            return\r\n          }\r\n          if(flag){\r\n            this.materialVideoList = this.materialVideoList.concat(data.data)\r\n          }else {\r\n            this.materialVideoList =  data.data\r\n          }\r\n        });\r\n      },\r\n      // 选中素材\r\n      videoRadioDialogSub(){\r\n        if(this.materialRadioCheck.length){\r\n          this.formData.videoInfoParams.info = this.materialRadioCheck[0]\r\n          this.videoCheckDialog = false\r\n        }else{\r\n          this.$message.error('请选择视频')\r\n        }\r\n      }\r\n    },\r\n    // 计算属性\r\n    computed: {},\r\n    // 监听数据变化\r\n    watch: {\r\n\r\n    }\r\n  }\r\n</script>\r\n"]}]}
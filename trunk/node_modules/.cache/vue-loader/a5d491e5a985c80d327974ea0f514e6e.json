{"remainingRequest":"C:\\Users\\EDZ\\Desktop\\研发项目\\vue-project\\trunk\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\EDZ\\Desktop\\研发项目\\vue-project\\trunk\\src\\views\\system\\wareHouse_details.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\EDZ\\Desktop\\研发项目\\vue-project\\trunk\\src\\views\\system\\wareHouse_details.vue","mtime":1572415124660},{"path":"C:\\Users\\EDZ\\Desktop\\研发项目\\vue-project\\trunk\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1558492728398},{"path":"C:\\Users\\EDZ\\Desktop\\研发项目\\vue-project\\trunk\\node_modules\\babel-loader\\lib\\index.js","mtime":1558492720858},{"path":"C:\\Users\\EDZ\\Desktop\\研发项目\\vue-project\\trunk\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1558492728398},{"path":"C:\\Users\\EDZ\\Desktop\\研发项目\\vue-project\\trunk\\node_modules\\vue-loader\\lib\\index.js","mtime":1558492728890}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport {isvalidPhone} from '@/utils/validate'\nimport division from \"@/components/division\";\nimport codeSet from '@/components/codeSet'\nimport OrganizationSelect from \"@/views/system/components/OrganizationSelect.vue\";\nlet validPhone=(rule, value,callback)=>{\n    if(!value){\n        callback(new Error('请输入手机号码'));\n    }else if (!isvalidPhone(value) && value){\n        callback(new Error('请输入正确的11位手机号码'));\n    }else {\n        callback();\n    }\n};\nexport default {\n    name:\"wareHouse_details\",\n    components: {\n        codeSet,\n        division,\n        OrganizationSelect\n    },\n    props: {\n        itemParam: {\n            type: Object,\n        },\n\n    },\n    data() {\n        return {\n            filtersData:{\n                // 仓库编号\n                code: '',\n                // 隶属机构\n                orgId: '',\n                // 固定电话\n                telnum: '',\n                // 仓库名称\n                name: '',\n                // 负责人\n                leader: '',\n                // 手机号\n                phone: '',\n                // 仓库地址\n                divisionId: '',\n                // 详细地址\n                address: '',\n                // 仓库描述\n                description: '',\n                // 存储类型\n                type: '',\n                // 启停状态\n                used: true\n            },\n            classDialogVisible:false,\n            editDisabled: false,\n            showDisabled: false,\n            //验证\n            rules: {\n                code: [\n                    {required: true, message: \"请输入仓库编号\", trigger: \"blur\"}\n                ],\n                name: [\n                    {required: true, message: \"请输入仓库名称\", trigger: \"blur\"},\n                ],\n                orgId: [\n                    {required: true, message: \"请选择机构\", trigger: \"blur\"}\n                ],\n                leader: [\n                    {required: true, message: \"请输入负责人\", trigger: \"blur\"}\n                ],\n                mobilenum: [\n                    { required: true, trigger: \"blur\", validator: validPhone}\n                ],\n                type: [\n                    {required: true, message: \"请选择仓库类型\", trigger: \"blur\"}\n                ],\n                divisionId: [\n                    {required: true, message: \"请选择仓库地址\", trigger: \"blur\"}\n                ],\n                address: [\n                    {required: true, message: \"请输入详细地址\", trigger: \"blur\"}\n                ]\n            },\n        };\n    },\n    methods: {\n        //初始化\n        wareHouseDetailsPopupInit() {\n            this.filtersData = {\n                // 仓库编号\n                code: '',\n                // 隶属机构\n                orgId: '',\n                // 固定电话\n                telnum: '',\n                // 仓库名称\n                name: '',\n                // 负责人\n                leader: '',\n                // 手机号\n                phone: '',\n                // 仓库地址\n                divisionId: '',\n                // 详细地址\n                address: '',\n                // 仓库描述\n                description: '',\n                // 存储类型\n                type: '',\n                // 启停状态\n                used: true\n            }\n            //对象还需初始化\n            let itemStatus = this.itemParam.type;\n            switch (itemStatus.toString()) {\n                case \"add\": //新增\n                    this.editDisabled = false;\n                    this.showDisabled = false;\n                    break;\n                case \"edit\": //修改\n                    this.editDisabled = true;\n                    this.showDisabled = false;\n                    this.getData(this.itemParam.id);\n                    break;\n                case \"show\": //查看\n                    this.editDisabled = true;\n                    this.showDisabled = true;\n                    break;\n            }\n            this.classDialogVisible = true;\n            this.$nextTick(()=>{\n                this.$refs.division.init();\n            })\n        },\n        //获取仓库数据\n        getData(_id) {\n            this.request(this.api.system.warehouse_get, {id: _id}).then(data => {\n                this.filtersData = data;\n            });\n        },\n        //保存\n        submitForm(formName) {\n            this.$refs[formName].validate(valid => {\n                if (valid) {\n                    this.request(this.api.system.warehouse_save, this.filtersData).then(data => {\n                        this.$message({\n                            type: \"success\",\n                            message: \"操作成功\"\n                        });\n                        this.classDialogVisible = false;\n                        this.$emit(\"refreshItem\", \"刷新上级数据\");\n                    });\n                }\n            });\n        },\n        // 获取省市信息\n        setDivision(division){\n            this.filtersData.divisionId =  division.divisionId;\n        },\n    },\n}\n",{"version":3,"sources":["wareHouse_details.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAiEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"wareHouse_details.vue","sourceRoot":"src/views/system","sourcesContent":["<template>\r\n    <el-dialog\r\n            :title=\"itemParam.title\"\r\n            :visible.sync=\"classDialogVisible\"\r\n            class=\"alarmPopup\"\r\n            width=\"800px\"\r\n    >\r\n    <div class=\" bg-fff\">\r\n        <el-form :model=\"filtersData\"  :rules=\"rules\"  label-width=\"100px\" size=\"small\"\r\n                 ref=\"filtersForm\">\r\n            <el-row>\r\n                <el-col :span=\"12\"  style=\"padding-right: 80px;\">\r\n                    <el-form-item prop=\"code\" label=\"仓库编号：\">\r\n                        <el-input class=\"input-w\" :disabled=\"showDisabled\" placeholder=\"请输入内容\"\r\n                                  v-model=\"filtersData.code\"></el-input>\r\n                    </el-form-item>\r\n                    <el-form-item prop=\"orgId\" label=\"隶属机构：\">\r\n                        <organization-select v-model=\"filtersData.orgId\" width-class=\"input-w\" ref=\"organization\"></organization-select>\r\n                    </el-form-item>\r\n                    <el-form-item prop=\"telnum\" label=\"固定电话：\">\r\n                        <el-input class=\"input-w\" :disabled=\"showDisabled\" placeholder=\"请输入内容\"\r\n                                  v-model=\"filtersData.telnum\"></el-input>\r\n                    </el-form-item>\r\n                    <el-form-item  prop=\"type\"  label=\"仓库类型：\">\r\n                        <code-set v-model=\"filtersData.type\" code=\"CEN018\" :disabled=\"showDisabled\"/>\r\n                    </el-form-item>\r\n                </el-col>\r\n                <el-col :span=\"12\">\r\n                    <el-form-item prop=\"name\" label=\"仓库名称：\">\r\n                        <el-input class=\"input-w\" :disabled=\"showDisabled\" placeholder=\"请输入内容\"\r\n                                  v-model=\"filtersData.name\"></el-input>\r\n                    </el-form-item>\r\n                    <el-form-item prop=\"leader\" label=\"负责人：\">\r\n                        <el-input class=\"input-w\" :disabled=\"showDisabled\" placeholder=\"请输入内容\"\r\n                                  v-model=\"filtersData.leader\"></el-input>\r\n                    </el-form-item>\r\n                    <el-form-item prop=\"mobilenum\" label=\"手机号：\">\r\n                        <el-input class=\"input-w\" :disabled=\"showDisabled\" placeholder=\"请输入内容\"\r\n                                  v-model=\"filtersData.mobilenum\"></el-input>\r\n                    </el-form-item>\r\n                    <el-form-item prop=\"used\" label=\"启停状态\" width=\"80\">\r\n                        <el-switch v-model=\"filtersData.used\" active-color=\"#13ce66\" inactive-color=\"#9d9d9d\"></el-switch>\r\n                    </el-form-item>\r\n                </el-col>\r\n                <el-col :span=\"24\">\r\n                    <el-form-item label=\"所在地区：\" prop=\"divisionId\">\r\n                        <division v-model=\"filtersData.divisionId\" @set-division=\"setDivision\" ref=\"division\"  :disabled=\"showDisabled\"></division>\r\n                    </el-form-item>\r\n                    <el-form-item label=\"\" prop=\"address\">\r\n                        <el-input v-model=\"filtersData.address\" placeholder=\"请输入详细地址\" class=\"input-w\"  :disabled=\"showDisabled\"></el-input>\r\n                    </el-form-item>\r\n                    <el-form-item label=\"仓库描述：\">\r\n                        <el-input type=\"textarea\" v-model=\"filtersData.description\"></el-input>\r\n                    </el-form-item>\r\n                </el-col>\r\n            </el-row>\r\n        </el-form>\r\n        <div class=\"item-footer item-right\">\r\n            <el-button size=\"small\" @click=\"classDialogVisible = false\">取消</el-button>\r\n            <el-button size=\"small\" @click=\"submitForm('filtersForm')\" type=\"primary\">确定</el-button>\r\n        </div>\r\n    </div>\r\n    </el-dialog>\r\n</template>\r\n<script>\r\n    import {isvalidPhone} from '@/utils/validate'\r\n    import division from \"@/components/division\";\r\n    import codeSet from '@/components/codeSet'\r\n    import OrganizationSelect from \"@/views/system/components/OrganizationSelect.vue\";\r\n    let validPhone=(rule, value,callback)=>{\r\n        if(!value){\r\n            callback(new Error('请输入手机号码'));\r\n        }else if (!isvalidPhone(value) && value){\r\n            callback(new Error('请输入正确的11位手机号码'));\r\n        }else {\r\n            callback();\r\n        }\r\n    };\r\n    export default {\r\n        name:\"wareHouse_details\",\r\n        components: {\r\n            codeSet,\r\n            division,\r\n            OrganizationSelect\r\n        },\r\n        props: {\r\n            itemParam: {\r\n                type: Object,\r\n            },\r\n\r\n        },\r\n        data() {\r\n            return {\r\n                filtersData:{\r\n                    // 仓库编号\r\n                    code: '',\r\n                    // 隶属机构\r\n                    orgId: '',\r\n                    // 固定电话\r\n                    telnum: '',\r\n                    // 仓库名称\r\n                    name: '',\r\n                    // 负责人\r\n                    leader: '',\r\n                    // 手机号\r\n                    phone: '',\r\n                    // 仓库地址\r\n                    divisionId: '',\r\n                    // 详细地址\r\n                    address: '',\r\n                    // 仓库描述\r\n                    description: '',\r\n                    // 存储类型\r\n                    type: '',\r\n                    // 启停状态\r\n                    used: true\r\n                },\r\n                classDialogVisible:false,\r\n                editDisabled: false,\r\n                showDisabled: false,\r\n                //验证\r\n                rules: {\r\n                    code: [\r\n                        {required: true, message: \"请输入仓库编号\", trigger: \"blur\"}\r\n                    ],\r\n                    name: [\r\n                        {required: true, message: \"请输入仓库名称\", trigger: \"blur\"},\r\n                    ],\r\n                    orgId: [\r\n                        {required: true, message: \"请选择机构\", trigger: \"blur\"}\r\n                    ],\r\n                    leader: [\r\n                        {required: true, message: \"请输入负责人\", trigger: \"blur\"}\r\n                    ],\r\n                    mobilenum: [\r\n                        { required: true, trigger: \"blur\", validator: validPhone}\r\n                    ],\r\n                    type: [\r\n                        {required: true, message: \"请选择仓库类型\", trigger: \"blur\"}\r\n                    ],\r\n                    divisionId: [\r\n                        {required: true, message: \"请选择仓库地址\", trigger: \"blur\"}\r\n                    ],\r\n                    address: [\r\n                        {required: true, message: \"请输入详细地址\", trigger: \"blur\"}\r\n                    ]\r\n                },\r\n            };\r\n        },\r\n        methods: {\r\n            //初始化\r\n            wareHouseDetailsPopupInit() {\r\n                this.filtersData = {\r\n                    // 仓库编号\r\n                    code: '',\r\n                    // 隶属机构\r\n                    orgId: '',\r\n                    // 固定电话\r\n                    telnum: '',\r\n                    // 仓库名称\r\n                    name: '',\r\n                    // 负责人\r\n                    leader: '',\r\n                    // 手机号\r\n                    phone: '',\r\n                    // 仓库地址\r\n                    divisionId: '',\r\n                    // 详细地址\r\n                    address: '',\r\n                    // 仓库描述\r\n                    description: '',\r\n                    // 存储类型\r\n                    type: '',\r\n                    // 启停状态\r\n                    used: true\r\n                }\r\n                //对象还需初始化\r\n                let itemStatus = this.itemParam.type;\r\n                switch (itemStatus.toString()) {\r\n                    case \"add\": //新增\r\n                        this.editDisabled = false;\r\n                        this.showDisabled = false;\r\n                        break;\r\n                    case \"edit\": //修改\r\n                        this.editDisabled = true;\r\n                        this.showDisabled = false;\r\n                        this.getData(this.itemParam.id);\r\n                        break;\r\n                    case \"show\": //查看\r\n                        this.editDisabled = true;\r\n                        this.showDisabled = true;\r\n                        break;\r\n                }\r\n                this.classDialogVisible = true;\r\n                this.$nextTick(()=>{\r\n                    this.$refs.division.init();\r\n                })\r\n            },\r\n            //获取仓库数据\r\n            getData(_id) {\r\n                this.request(this.api.system.warehouse_get, {id: _id}).then(data => {\r\n                    this.filtersData = data;\r\n                });\r\n            },\r\n            //保存\r\n            submitForm(formName) {\r\n                this.$refs[formName].validate(valid => {\r\n                    if (valid) {\r\n                        this.request(this.api.system.warehouse_save, this.filtersData).then(data => {\r\n                            this.$message({\r\n                                type: \"success\",\r\n                                message: \"操作成功\"\r\n                            });\r\n                            this.classDialogVisible = false;\r\n                            this.$emit(\"refreshItem\", \"刷新上级数据\");\r\n                        });\r\n                    }\r\n                });\r\n            },\r\n            // 获取省市信息\r\n            setDivision(division){\r\n                this.filtersData.divisionId =  division.divisionId;\r\n            },\r\n        },\r\n    }\r\n</script>\r\n<style lang=\"less\" scoped>\r\n\r\n</style>\r\n"]}]}
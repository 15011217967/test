{"remainingRequest":"C:\\Users\\EDZ\\Desktop\\研发项目\\vue-project\\trunk\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\EDZ\\Desktop\\研发项目\\vue-project\\trunk\\src\\views\\OC\\user\\userCompany_list.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\EDZ\\Desktop\\研发项目\\vue-project\\trunk\\src\\views\\OC\\user\\userCompany_list.vue","mtime":1572415125210},{"path":"C:\\Users\\EDZ\\Desktop\\研发项目\\vue-project\\trunk\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1558492728398},{"path":"C:\\Users\\EDZ\\Desktop\\研发项目\\vue-project\\trunk\\node_modules\\babel-loader\\lib\\index.js","mtime":1558492720858},{"path":"C:\\Users\\EDZ\\Desktop\\研发项目\\vue-project\\trunk\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1558492728398},{"path":"C:\\Users\\EDZ\\Desktop\\研发项目\\vue-project\\trunk\\node_modules\\vue-loader\\lib\\index.js","mtime":1558492728890}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\r\nimport userRoleEditor from \"@/views/OC/user/userRole_editor.vue\";\r\nimport userRoleList from \"@/views/OC/user/userRoleList.vue\";\r\nimport UserDepartEditor from \"@/views/OC/user/userDepart_editor.vue\";\r\nimport treeDept from \"@/components/treeDept\";\r\nimport user2depart from \"@/views/OC/user/user2depart.vue\";\r\nimport reset_pwd from \"@/views/OC/user/resetPwd.vue\";\r\n// 默认头像\r\nimport defaultHeader from '../../../assets/img/default_header.png';\r\n/**\r\n * 基本管理\r\n */\r\nexport default {\r\n  components: {\r\n    userRoleEditor,\r\n    treeDept,\r\n    UserDepartEditor,\r\n    user2depart,\r\n    reset_pwd,\r\n    userRoleList\r\n  },\r\n  data() {\r\n    return {\r\n      defaultHeader: defaultHeader,\r\n      filtersData: {\r\n        pageIndex: 1, //当前页码\r\n        pageSize: 10, //每页数量\r\n        filter: \"\" //搜索关键字\r\n      },\r\n      tableListData: [],\r\n      total: null,\r\n      positionOptions: [],\r\n      userRoleItemParam: {\r\n        title: \"关联角色\",\r\n        id: \"\"\r\n      },\r\n      userDepartItemParam: {\r\n        title: \"授权机构/部门\",\r\n        id: \"\"\r\n      },\r\n      userSetItemParam: {\r\n        title: \"重置密码\",\r\n        id: \"\"\r\n      }\r\n    };\r\n  },\r\n  created() {\r\n    this.getTableList();\r\n    this.getPositionList();\r\n    var self = this;\r\n    document.onkeydown = function(e) {\r\n      var key = window.event.keyCode;\r\n      if (key == 13) {\r\n        self.handleSearch();\r\n      }\r\n    };\r\n  },\r\n  methods: {\r\n    //获取列表\r\n    getTableList() {\r\n      this.request(this.api.user.userCompany_list, this.filtersData).then(\r\n        data => {\r\n          let _data = data.data,\r\n            _dataLen = _data.length;\r\n          for (let i = 0; i < _dataLen; i++) {\r\n            _data[i].isShow = true;\r\n            _data[i].isType = 1;\r\n          }\r\n          this.tableListData = _data;\r\n          this.total = data.totalCount;\r\n        }\r\n      );\r\n    },\r\n    //获取职位\r\n    getPositionList() {\r\n      this.request(this.api.user.position_list, {used: true}).then(data => {\r\n        this.positionOptions = data.data;\r\n      });\r\n    },\r\n    // 按用户授权\r\n    editUserAuth(row){\r\n      this.$router.push({\r\n        path: \"/userCompany_auth\",\r\n        name: \"userCompany_auth\",\r\n        query: {\r\n          userId: row.userId,\r\n          id: row.id\r\n        }\r\n      });\r\n    },\r\n    //新增基本信息  跳转页面\r\n    openAddAttrbute() {\r\n      this.$router.push({\r\n        path: \"/add_userCompany\",\r\n        name: \"add_userCompany\",\r\n        query: {\r\n          type: \"add\"\r\n        }\r\n      });\r\n    },\r\n    //查看基本信息\r\n    openShowDetails(id) {\r\n      this.$router.push({\r\n        path: \"/show_userCompany\",\r\n        name: \"show_userCompany\",\r\n        query: {\r\n          id: id,\r\n          type: \"show\"\r\n        }\r\n      });\r\n    },\r\n    //修改基本信息\r\n    openEditDetails(id) {\r\n      this.$router.push({\r\n        path: \"/edit_userCompany\",\r\n        name: \"edit_userCompany\",\r\n        query: {\r\n          id: id,\r\n          type: \"edit\"\r\n        }\r\n      });\r\n    },\r\n    //修改密码\r\n    resetPwdShow(id) {\r\n      this.userSetItemParam.title = \"重置密码\";\r\n      this.userSetItemParam.id = id;\r\n      this.$refs.resetPwdCpt.setPwdPopupInit();\r\n    },\r\n    //用户关联角色\r\n    edituserrole(userid) {\r\n      this.userRoleItemParam.title = \"关联角色\";\r\n      this.userRoleItemParam.id = userid;\r\n      this.$refs.userRoleCpt.userRolePopupInit();\r\n    },\r\n    //用户关联机构\r\n    edituserdepart(userid) {\r\n      this.userDepartItemParam.title = \"授权机构/部门\";\r\n      this.userDepartItemParam.id = userid;\r\n      this.$refs.userDepartCpt.userDepartPopupInit();\r\n    },\r\n    //用户关联机构2\r\n    edituserdepart2(userid) {\r\n      this.userDepartItemParam.title = \"授权机构/部门\";\r\n      this.userDepartItemParam.id = userid;\r\n      this.$refs.user2DepartCpt.user2DepartPopupInit();\r\n    },\r\n    //用户关联角色\r\n    rolelist(userid) {\r\n      this.userRoleItemParam.title = \"关联角色\";\r\n      this.userRoleItemParam.id = userid;\r\n      this.$refs.userRoleListCpt.userRoleListPopupInit();\r\n    },\r\n    //搜索\r\n    handleSearch() {\r\n      this.filtersData.pageIndex = 1;\r\n      this.getTableList();\r\n    },\r\n    //清空重置\r\n    handleResetFilters(formName) {\r\n      this.$refs[formName].resetFields();\r\n    },\r\n    //当前页数修改时发生改变\r\n    handleCurrentChange(val) {\r\n      this.filtersData.pageIndex = val;\r\n      this.getTableList();\r\n    },\r\n    // 每页显示多少条时发生改变\r\n    handleSizeChange(val) {\r\n      this.filtersData.pageSize = val;\r\n      this.getTableList();\r\n    },\r\n    //滑块开关\r\n    switchValid(params) {\r\n      let self = this;\r\n      let urlCon = this.util.deepCopy(self.api.user.userCompany_updateSelective);\r\n      urlCon.tip = false;\r\n      self.request(urlCon, params).then(data => {\r\n      });\r\n    },\r\n    //点击获取子元素插入数组\r\n    childrenIsShow(e) {\r\n      let _id = e.target.dataset.id; //当前数据ID\r\n      let _type = e.target.dataset.type; //状态 1 关闭 0 打开\r\n      if (_type == \"1\") {\r\n        //当前为关闭状态 需请求接口获取子元素\r\n        e.target.className = \"el-icon-remove-outline i-cursor\";\r\n        this.editType(_id, 0);\r\n        this.getChildData(e, _id);\r\n      } else {\r\n        //当前为打开状态 需删除子元素\r\n        this.editType(_id, 1);\r\n        e.target.className = \"el-icon-circle-plus-outline i-cursor\";\r\n        this.removeChildData(e);\r\n      }\r\n    },\r\n    //修改当前数据的type\r\n    editType(_id, type) {\r\n      let _index = this.tableListData.findIndex(item => item.id == _id);\r\n      if (type == 1) {\r\n        this.tableListData[_index].isType = 1;\r\n      } else {\r\n        this.tableListData[_index].isType = 0;\r\n      }\r\n    }\r\n  }\r\n};\r\n",{"version":3,"sources":["userCompany_list.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAkMA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"userCompany_list.vue","sourceRoot":"src/views/OC/user","sourcesContent":["<template>\r\n  <div>\r\n    <div class=\"item-margin\">\r\n      <el-form\r\n        class=\"item-form\"\r\n        :model=\"filtersData\"\r\n        label-width=\"90px\"\r\n        size=\"small\"\r\n        ref=\"filtersForm\"\r\n        inline\r\n      >\r\n        <el-form-item prop=\"filter\" label=\"模糊查询：\">\r\n          <el-input class=\"input-w\" placeholder=\"工号/员工姓名/手机号\" v-model=\"filtersData.filter\"></el-input>\r\n        </el-form-item>\r\n        <el-form-item prop=\"departId\" label=\"所属部门：\">\r\n          <tree-dept v-model=\"filtersData.departId\" val-type=\"id\"></tree-dept>\r\n        </el-form-item>\r\n        <el-form-item prop=\"positionId\" label=\"职位：\">\r\n          <el-select placeholder=\"请选择\" class=\"input-w\" v-model=\"filtersData.positionId\">\r\n            <el-option\r\n              v-for=\"item in positionOptions\"\r\n              :key=\"item.id\"\r\n              :label=\"item.name\"\r\n              :value=\"item.id\"\r\n            ></el-option>\r\n          </el-select>\r\n        </el-form-item>\r\n        <el-form-item prop=\"used\" label=\"启停状态：\">\r\n          <el-select placeholder=\"请选择\" class=\"input-w\" v-model=\"filtersData.used\">\r\n            <el-option\r\n              v-for=\"item in this.$common.usedOptions()\"\r\n              :key=\"item.id\"\r\n              :label=\"item.name\"\r\n              :value=\"item.id\"\r\n            ></el-option>\r\n          </el-select>\r\n        </el-form-item>\r\n        <el-form-item>\r\n          <el-button @click=\"handleSearch\" type=\"primary\" plain>搜索</el-button>\r\n          <el-button @click=\"handleResetFilters('filtersForm')\">重置</el-button>\r\n        </el-form-item>\r\n      </el-form>\r\n    </div>\r\n    <!--table  -->\r\n    <div class=\"item-margin\">\r\n      <div class=\"item-cont\">\r\n        <el-button-group>\r\n          <el-button size=\"small\" type=\"primary\" @click=\"openAddAttrbute\">新增</el-button>\r\n        </el-button-group>\r\n      </div>\r\n      <div class=\"item-table\">\r\n        <el-table\r\n          :data=\"tableListData\"\r\n          stripe\r\n          empty-text=\"暂无数据\"\r\n          header-align=\"center\"\r\n          header-row-class-name=\"item-table-header\"\r\n          :highlight-current-row=\"true\"\r\n        >\r\n          <el-table-column type=\"selection\" width=\"55\"></el-table-column>\r\n          <el-table-column prop=\"jobNum\" align=\"left\" label=\"员工工号\" width=\"100\"></el-table-column>\r\n          <el-table-column prop=\"loginName\" align=\"left\" label=\"员工账号\" width=\"150\"></el-table-column>\r\n          <el-table-column prop=\"avatar\" align=\"left\" label=\"员工头像\" width=\"100\">\r\n            <template slot-scope=\"scope\">\r\n              <img :src=\"scope.row.avatar || defaultHeader\" width=\"50\" height=\"50\">\r\n            </template>\r\n          </el-table-column>\r\n          <el-table-column prop=\"name\" align=\"left\" label=\"员工姓名\" min-width=\"80\"></el-table-column>\r\n          <el-table-column prop=\"gender\" align=\"left\" label=\"性别\" min-width=\"60\">\r\n            <template slot-scope=\"scope\">{{\"COM004\"|codeToName(scope.row.gender)}}</template>\r\n          </el-table-column>\r\n          <el-table-column prop=\"departName\" align=\"left\" label=\"所属部门\" min-width=\"100\"></el-table-column>\r\n          <el-table-column prop=\"positionName\" align=\"left\" label=\"职位\" min-width=\"100\"></el-table-column>\r\n          <el-table-column prop=\"leader\" align=\"left\" label=\"是否部门负责人\" width=\"130\">\r\n            <template slot-scope=\"scope\">\r\n              {{ scope.row.leader ? '是' : '否' }}\r\n            </template>\r\n          </el-table-column>\r\n          <el-table-column\r\n            label-class-name=\"text-left\"\r\n            class-name=\"text-left\"\r\n            align=\"left\"\r\n            label=\"授权部门/机构\"\r\n            min-width=\"120\"\r\n          >\r\n            <template slot-scope=\"scope\">\r\n              <el-button\r\n                @click=\"edituserdepart2(scope.row.userId)\"\r\n                v-if=\"scope.row.isShow\"\r\n                type=\"text\"\r\n                size=\"small\"\r\n              >查看</el-button>\r\n            </template>\r\n          </el-table-column>\r\n          <el-table-column\r\n            label-class-name=\"text-left\"\r\n            class-name=\"text-left\"\r\n            align=\"left\"\r\n            label=\"关联角色\"\r\n            min-width=\"80\"\r\n          >\r\n            <template slot-scope=\"scope\">\r\n              <el-button\r\n                @click=\"rolelist(scope.row.userId)\"\r\n                v-if=\"scope.row.isShow\"\r\n                type=\"text\"\r\n                size=\"small\"\r\n              >查看</el-button>\r\n            </template>\r\n          </el-table-column>\r\n          <el-table-column prop=\"phone\" align=\"left\" label=\"手机号\" width=\"130\"></el-table-column>\r\n          <el-table-column prop=\"used\" align=\"left\" label=\"启停状态\" width=\"100\">\r\n            <template slot-scope=\"scope\">\r\n              <el-switch\r\n                v-if=\"scope.row.isShow\"\r\n                v-model=\"scope.row.used\"\r\n                active-color=\"#13ce66\"\r\n                @change=\"switchValid(scope.row)\"\r\n                inactive-color=\"#9d9d9d\"\r\n              ></el-switch>\r\n            </template>\r\n          </el-table-column>\r\n          <el-table-column\r\n            fixed=\"right\"\r\n            label-class-name=\"text-left\"\r\n            class-name=\"text-left\"\r\n            align=\"left\"\r\n            label=\"操作\"\r\n            width=\"150\"\r\n          >\r\n            <template slot-scope=\"scope\">\r\n              <el-button\r\n                @click=\"openShowDetails(scope.row.id)\"\r\n                v-if=\"scope.row.isShow\"\r\n                type=\"text\"\r\n                size=\"small\"\r\n              >查看</el-button>\r\n              <el-button\r\n                @click=\"openEditDetails(scope.row.id)\"\r\n                v-if=\"scope.row.isShow\"\r\n                type=\"text\"\r\n                size=\"small\"\r\n              >编辑</el-button>\r\n              <el-button\r\n                @click=\"resetPwdShow(scope.row.id)\"\r\n                v-if=\"scope.row.isShow\"\r\n                type=\"text\"\r\n                size=\"small\"\r\n              >重置密码</el-button>\r\n              <el-button\r\n                @click=\"edituserrole(scope.row.userId)\"\r\n                v-if=\"scope.row.isShow\"\r\n                type=\"text\"\r\n                size=\"small\"\r\n              >关联角色</el-button>\r\n              <el-button\r\n                @click=\"edituserdepart(scope.row.userId)\"\r\n                v-if=\"scope.row.isShow\"\r\n                type=\"text\"\r\n                size=\"small\"\r\n              >关联机构</el-button>\r\n              <el-button\r\n                  @click=\"editUserAuth(scope.row)\"\r\n                  v-if=\"scope.row.isShow\"\r\n                  type=\"text\"\r\n                  size=\"small\"\r\n              >用户授权</el-button>\r\n            </template>\r\n          </el-table-column>\r\n        </el-table>\r\n        <div class=\"pagination mt-10 mb-20\">\r\n          <el-pagination\r\n            class=\"mr-20\"\r\n            @size-change=\"handleSizeChange\"\r\n            @current-change=\"handleCurrentChange\"\r\n            :current-page=\"filtersData.pageIndex\"\r\n            :page-sizes=\"[10, 20, 30, 40, 50]\"\r\n            :page-size=\"filtersData.pageSize\"\r\n            layout=\"total, sizes, prev, pager, next, jumper\"\r\n            :total=\"total\"\r\n          ></el-pagination>\r\n        </div>\r\n      </div>\r\n    </div>\r\n\r\n    <!--table END  -->\r\n    <userRoleEditor :itemParam=\"userRoleItemParam\" ref=\"userRoleCpt\"></userRoleEditor>\r\n    <userRoleList :itemParam=\"userRoleItemParam\" ref=\"userRoleListCpt\"></userRoleList>\r\n    <UserDepartEditor :itemParam=\"userDepartItemParam\" ref=\"userDepartCpt\"></UserDepartEditor>\r\n    <user2depart :itemParam=\"userDepartItemParam\" ref=\"user2DepartCpt\"></user2depart>\r\n    <reset_pwd :itemParam=\"userSetItemParam\" ref=\"resetPwdCpt\"></reset_pwd>\r\n  </div>\r\n</template>\r\n<script>\r\nimport userRoleEditor from \"@/views/OC/user/userRole_editor.vue\";\r\nimport userRoleList from \"@/views/OC/user/userRoleList.vue\";\r\nimport UserDepartEditor from \"@/views/OC/user/userDepart_editor.vue\";\r\nimport treeDept from \"@/components/treeDept\";\r\nimport user2depart from \"@/views/OC/user/user2depart.vue\";\r\nimport reset_pwd from \"@/views/OC/user/resetPwd.vue\";\r\n// 默认头像\r\nimport defaultHeader from '../../../assets/img/default_header.png';\r\n/**\r\n * 基本管理\r\n */\r\nexport default {\r\n  components: {\r\n    userRoleEditor,\r\n    treeDept,\r\n    UserDepartEditor,\r\n    user2depart,\r\n    reset_pwd,\r\n    userRoleList\r\n  },\r\n  data() {\r\n    return {\r\n      defaultHeader: defaultHeader,\r\n      filtersData: {\r\n        pageIndex: 1, //当前页码\r\n        pageSize: 10, //每页数量\r\n        filter: \"\" //搜索关键字\r\n      },\r\n      tableListData: [],\r\n      total: null,\r\n      positionOptions: [],\r\n      userRoleItemParam: {\r\n        title: \"关联角色\",\r\n        id: \"\"\r\n      },\r\n      userDepartItemParam: {\r\n        title: \"授权机构/部门\",\r\n        id: \"\"\r\n      },\r\n      userSetItemParam: {\r\n        title: \"重置密码\",\r\n        id: \"\"\r\n      }\r\n    };\r\n  },\r\n  created() {\r\n    this.getTableList();\r\n    this.getPositionList();\r\n    var self = this;\r\n    document.onkeydown = function(e) {\r\n      var key = window.event.keyCode;\r\n      if (key == 13) {\r\n        self.handleSearch();\r\n      }\r\n    };\r\n  },\r\n  methods: {\r\n    //获取列表\r\n    getTableList() {\r\n      this.request(this.api.user.userCompany_list, this.filtersData).then(\r\n        data => {\r\n          let _data = data.data,\r\n            _dataLen = _data.length;\r\n          for (let i = 0; i < _dataLen; i++) {\r\n            _data[i].isShow = true;\r\n            _data[i].isType = 1;\r\n          }\r\n          this.tableListData = _data;\r\n          this.total = data.totalCount;\r\n        }\r\n      );\r\n    },\r\n    //获取职位\r\n    getPositionList() {\r\n      this.request(this.api.user.position_list, {used: true}).then(data => {\r\n        this.positionOptions = data.data;\r\n      });\r\n    },\r\n    // 按用户授权\r\n    editUserAuth(row){\r\n      this.$router.push({\r\n        path: \"/userCompany_auth\",\r\n        name: \"userCompany_auth\",\r\n        query: {\r\n          userId: row.userId,\r\n          id: row.id\r\n        }\r\n      });\r\n    },\r\n    //新增基本信息  跳转页面\r\n    openAddAttrbute() {\r\n      this.$router.push({\r\n        path: \"/add_userCompany\",\r\n        name: \"add_userCompany\",\r\n        query: {\r\n          type: \"add\"\r\n        }\r\n      });\r\n    },\r\n    //查看基本信息\r\n    openShowDetails(id) {\r\n      this.$router.push({\r\n        path: \"/show_userCompany\",\r\n        name: \"show_userCompany\",\r\n        query: {\r\n          id: id,\r\n          type: \"show\"\r\n        }\r\n      });\r\n    },\r\n    //修改基本信息\r\n    openEditDetails(id) {\r\n      this.$router.push({\r\n        path: \"/edit_userCompany\",\r\n        name: \"edit_userCompany\",\r\n        query: {\r\n          id: id,\r\n          type: \"edit\"\r\n        }\r\n      });\r\n    },\r\n    //修改密码\r\n    resetPwdShow(id) {\r\n      this.userSetItemParam.title = \"重置密码\";\r\n      this.userSetItemParam.id = id;\r\n      this.$refs.resetPwdCpt.setPwdPopupInit();\r\n    },\r\n    //用户关联角色\r\n    edituserrole(userid) {\r\n      this.userRoleItemParam.title = \"关联角色\";\r\n      this.userRoleItemParam.id = userid;\r\n      this.$refs.userRoleCpt.userRolePopupInit();\r\n    },\r\n    //用户关联机构\r\n    edituserdepart(userid) {\r\n      this.userDepartItemParam.title = \"授权机构/部门\";\r\n      this.userDepartItemParam.id = userid;\r\n      this.$refs.userDepartCpt.userDepartPopupInit();\r\n    },\r\n    //用户关联机构2\r\n    edituserdepart2(userid) {\r\n      this.userDepartItemParam.title = \"授权机构/部门\";\r\n      this.userDepartItemParam.id = userid;\r\n      this.$refs.user2DepartCpt.user2DepartPopupInit();\r\n    },\r\n    //用户关联角色\r\n    rolelist(userid) {\r\n      this.userRoleItemParam.title = \"关联角色\";\r\n      this.userRoleItemParam.id = userid;\r\n      this.$refs.userRoleListCpt.userRoleListPopupInit();\r\n    },\r\n    //搜索\r\n    handleSearch() {\r\n      this.filtersData.pageIndex = 1;\r\n      this.getTableList();\r\n    },\r\n    //清空重置\r\n    handleResetFilters(formName) {\r\n      this.$refs[formName].resetFields();\r\n    },\r\n    //当前页数修改时发生改变\r\n    handleCurrentChange(val) {\r\n      this.filtersData.pageIndex = val;\r\n      this.getTableList();\r\n    },\r\n    // 每页显示多少条时发生改变\r\n    handleSizeChange(val) {\r\n      this.filtersData.pageSize = val;\r\n      this.getTableList();\r\n    },\r\n    //滑块开关\r\n    switchValid(params) {\r\n      let self = this;\r\n      let urlCon = this.util.deepCopy(self.api.user.userCompany_updateSelective);\r\n      urlCon.tip = false;\r\n      self.request(urlCon, params).then(data => {\r\n      });\r\n    },\r\n    //点击获取子元素插入数组\r\n    childrenIsShow(e) {\r\n      let _id = e.target.dataset.id; //当前数据ID\r\n      let _type = e.target.dataset.type; //状态 1 关闭 0 打开\r\n      if (_type == \"1\") {\r\n        //当前为关闭状态 需请求接口获取子元素\r\n        e.target.className = \"el-icon-remove-outline i-cursor\";\r\n        this.editType(_id, 0);\r\n        this.getChildData(e, _id);\r\n      } else {\r\n        //当前为打开状态 需删除子元素\r\n        this.editType(_id, 1);\r\n        e.target.className = \"el-icon-circle-plus-outline i-cursor\";\r\n        this.removeChildData(e);\r\n      }\r\n    },\r\n    //修改当前数据的type\r\n    editType(_id, type) {\r\n      let _index = this.tableListData.findIndex(item => item.id == _id);\r\n      if (type == 1) {\r\n        this.tableListData[_index].isType = 1;\r\n      } else {\r\n        this.tableListData[_index].isType = 0;\r\n      }\r\n    }\r\n  }\r\n};\r\n</script>\r\n<style lang=\"less\" scoped>\r\nh5 {\r\n  color: #222;\r\n   margin-left: -15px;\r\n}\r\n</style>\r\n"]}]}
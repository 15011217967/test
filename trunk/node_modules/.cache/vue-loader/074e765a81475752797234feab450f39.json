{"remainingRequest":"C:\\Users\\EDZ\\Desktop\\研发项目\\vue-project\\trunk\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\EDZ\\Desktop\\研发项目\\vue-project\\trunk\\src\\views\\product\\components\\commondity_description.vue?vue&type=style&index=0&id=23e290c1&lang=less&scoped=true&","dependencies":[{"path":"C:\\Users\\EDZ\\Desktop\\研发项目\\vue-project\\trunk\\src\\views\\product\\components\\commondity_description.vue","mtime":1572415123942},{"path":"C:\\Users\\EDZ\\Desktop\\研发项目\\vue-project\\trunk\\node_modules\\css-loader\\index.js","mtime":1558492728478},{"path":"C:\\Users\\EDZ\\Desktop\\研发项目\\vue-project\\trunk\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":1558492728890},{"path":"C:\\Users\\EDZ\\Desktop\\研发项目\\vue-project\\trunk\\node_modules\\postcss-loader\\src\\index.js","mtime":1558492728823},{"path":"C:\\Users\\EDZ\\Desktop\\研发项目\\vue-project\\trunk\\node_modules\\less-loader\\dist\\cjs.js","mtime":1566193719488},{"path":"C:\\Users\\EDZ\\Desktop\\研发项目\\vue-project\\trunk\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1558492728398},{"path":"C:\\Users\\EDZ\\Desktop\\研发项目\\vue-project\\trunk\\node_modules\\vue-loader\\lib\\index.js","mtime":1558492728890}],"contextDependencies":[],"result":["\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\r\n// 外部\r\n.desc-wrap {\r\n  display: flex;\r\n  width: 100%;\r\n  justify-content: flex-start;\r\n  flex-wrap: wrap;\r\n  > h5 {\r\n    font-size: 14px;\r\n    font-weight: 100;\r\n    width: 80px;\r\n    flex: 0 0 auto;\r\n    margin-top: 20px;\r\n  }\r\n  .full-video-wrap {\r\n    flex-wrap: wrap ;\r\n    min-width: 500px;\r\n    flex: 1;\r\n  }\r\n}\r\n.full-video {\r\n  display: flex;\r\n  justify-content: flex-start;\r\n}\r\n\r\n//图片\r\n.paroduct-img-wrap {\r\n  display: flex;\r\n  flex-wrap: wrap ;\r\n  justify-content: flex-start;\r\n  width: 100%;\r\n}\r\n.paroduct-img-group {\r\n  > span {\r\n    display: flex;\r\n    flex-wrap: wrap ;\r\n    justify-content: flex-start;\r\n  }\r\n  .img-group-item {\r\n    position: relative;\r\n\r\n    border-radius: 3px;\r\n    border: 1px solid #c0ccda;\r\n    margin: 10px 10px 0 0;\r\n    transition: all 0.5s ease-in-out;\r\n  }\r\n\r\n  .img-group-item:hover .hide-box {\r\n    display: flex;\r\n  }\r\n  .hide-box {\r\n    position: absolute;\r\n    left: 0;\r\n    top: 0;\r\n    background-color: rgba(0, 0, 0, 0.4);\r\n    width: 100%;\r\n    height: 100%;\r\n    border-radius: 3px;\r\n    border: 1px solid rgba(0, 0, 0, 0.4);\r\n    display: none;\r\n    justify-content: space-around;\r\n    cursor: move;\r\n    align-items: center;\r\n    .show {\r\n      font-size: 26px;\r\n      color: #ffffff;\r\n      cursor: pointer;\r\n    }\r\n    .delete {\r\n      font-size: 26px;\r\n      color: #ffffff;\r\n      cursor: pointer;\r\n    }\r\n  }\r\n}\r\n.flip-list-move {\r\n  transition: transform 0.5s;\r\n}\r\n.no-move {\r\n  transition: transform 0s;\r\n}\r\n.ghost {\r\n  opacity: 0.5;\r\n  background: #c8ebfb;\r\n}\r\n.list-group {\r\n  min-height: 20px;\r\n}\r\n.list-group-item {\r\n  cursor: move;\r\n}\r\n.list-group-item i {\r\n  cursor: pointer;\r\n}\r\n\r\n// 主图视频\r\n.upload-video {\r\n  display: flex;\r\n  justify-content: flex-start;\r\n  .btn-wrap {\r\n    border: 1px dashed #c0ccda;\r\n    border-radius: 6px;\r\n    text-align: center;\r\n    cursor: pointer;\r\n\r\n    i {\r\n      font-size: 28px;\r\n      color: #8c939d;\r\n    }\r\n  }\r\n  .full-video-wh {\r\n    width: 120px;\r\n    height: 200px;\r\n  }\r\n  .main-video-wh {\r\n    width: 120px;\r\n    height: 150px;\r\n  }\r\n  .video-wrap {\r\n    position: relative;\r\n\r\n    border: 1px solid #c0ccda;\r\n    border-radius: 6px;\r\n    text-align: center;\r\n\r\n    cursor: pointer;\r\n\r\n    img,\r\n    video {\r\n      width: 100%;\r\n      height: 100%;\r\n    }\r\n    .abs-cont {\r\n      width: 100%;\r\n      height: 100%;\r\n      position: absolute;\r\n      left: 0;\r\n      top: -1px;\r\n      font-size: 12px;\r\n      color: #ffffff;\r\n      padding: 4px 2px 4px 4px;\r\n      border-radius: 6px;\r\n      background-color: rgba(0, 0, 0, 0.4);\r\n      display: none;\r\n      transition: all 0.5s cubic-bezier(0.4, 0, 0.2, 1);\r\n      .remove {\r\n        position: absolute;\r\n        right: 10px;\r\n        bottom: 10px;\r\n        cursor: pointer;\r\n        font-size: 18px;\r\n      }\r\n      .play {\r\n        position: absolute;\r\n        left: 35%;\r\n        top: 35%;\r\n        cursor: pointer;\r\n        font-size: 40px;\r\n      }\r\n    }\r\n  }\r\n  .video-wrap:hover .abs-cont {\r\n    display: block;\r\n  }\r\n}\r\n.view-img {\r\n  width: 100%;\r\n  height: 100%;\r\n  border-radius: 4px;\r\n}\r\n\r\n.main-up-wrap /deep/ .btn-wrap {\r\n  height: 150px;\r\n  line-height: 150px;\r\n}\r\n.details-up-wrap /deep/ .btn-wrap {\r\n  width: 240px;\r\n  height: 320px;\r\n  line-height: 320px;\r\n}\r\n.main-img-wh {\r\n  width: 120px;\r\n  height: 150px;\r\n  line-height: 150px;\r\n}\r\n.detail-video-wh {\r\n  width: 120px;\r\n  height: 200px;\r\n  line-height: 200px;\r\n}\r\n.detail-img-wh {\r\n  width: 240px;\r\n  height: 320px;\r\n  line-height: 320px;\r\n}\r\n",{"version":3,"sources":["commondity_description.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAogBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"commondity_description.vue","sourceRoot":"src/views/product/components","sourcesContent":["<!--\r\n * @Description: 商品详情 =>商品描述\r\n * @Author: elephant\r\n * @Date: 2019-08-12 17:11:01\r\n * @LastEditTime: 2019-08-23 20:43:26\r\n * @LastEditors: \r\n -->\r\n<template>\r\n  <div>\r\n    <!-- 商品主图 -->\r\n    <div class=\"desc-wrap\">\r\n      <h5>商品主图：</h5>\r\n      <dl class=\"full-video-wrap\">\r\n        <dt class=\"paroduct-img-wrap\">\r\n          <draggable\r\n            class=\"paroduct-img-group\"\r\n            tag=\"ul\"\r\n            v-model=\"masterImgList\"\r\n            v-bind=\"dragOptions\"\r\n            @start=\"drag = true\"\r\n            @end=\"drag = false\"\r\n            @change=\"masterImgChange\"\r\n          >\r\n            <transition-group type=\"transition\">\r\n              <li\r\n                class=\"img-group-item main-img-wh\"\r\n                v-for=\"element in masterImgList\"\r\n                :key=\"element.url\"\r\n              >\r\n                <el-image class=\"view-img\" :src=\"element.url\" fit=\"contain\"></el-image>\r\n                <div class=\"hide-box\">\r\n                  <i @click=\"handlePictureCardPreview(element.url)\" class=\"show el-icon-zoom-in\"></i>\r\n                  <i v-if=\"!isShow\" @click=\"masterImgRemove(element)\" class=\"delete el-icon-delete\"></i>\r\n                </div>\r\n              </li>\r\n            </transition-group>\r\n          </draggable>\r\n          <dialog-up-img\r\n            v-if=\"!isShow\"\r\n            class=\"main-up-wrap\"\r\n            @setParentMasterImg=\"heandleMasterImg\"\r\n            :upIsShow=\"masterImgStatus\"\r\n            imgType=\"MASTER_IMAGE\"\r\n            ref=\"dialogUpImgRef\"\r\n          ></dialog-up-img>\r\n        </dt>\r\n        <dd v-show=\"!isShow\" class=\"mt-10\">最多上传5张主图，比列为3:4，每张大小不超过5M；拖动图片可移动图片位置</dd>\r\n      </dl>\r\n    </div>\r\n    <!-- 商品主图END -->\r\n    <!-- 主图视频 -->\r\n    <div class=\"desc-wrap mt-10\">\r\n      <h5>主图视频：</h5>\r\n      <dl>\r\n        <dt class=\"upload-video\">\r\n          <div v-if=\"Object.keys(mainVideoForm).length !== 0\" class=\"video-wrap main-video-wh\">\r\n            <el-image class=\"view-img\" :src=\"mainVideoForm.cover\" fit=\"contain\"></el-image>\r\n            <div class=\"abs-cont\">\r\n              <i\r\n                v-if=\"!isShow\"\r\n                @click.stop=\"mainVideoRemove(mainVideoForm)\"\r\n                class=\"remove el-icon-delete\"\r\n              ></i>\r\n              <i @click.stop=\"videoPlay(mainVideoForm.url)\" class=\"play el-icon-video-play\"></i>\r\n            </div>\r\n          </div>\r\n          <nav v-show=\"!isShow\" v-else @click=\"addMainPictureVideo\" class=\"btn-wrap main-img-wh\">\r\n            <i class=\"el-icon-plus\"></i>\r\n          </nav>\r\n        </dt>\r\n        <dd v-show=\"!isShow\" class=\"mt-10\">只能上传单个视频，建议比例为3：4，大小不超过20M</dd>\r\n      </dl>\r\n    </div>\r\n    <!-- 主图视频END -->\r\n    <!-- 全屏视频 -->\r\n    <div class=\"desc-wrap mt-10\">\r\n      <h5>全屏视频：</h5>\r\n      <dl class=\"full-video-wrap\">\r\n        <dt class=\"upload-video\">\r\n          <div v-if=\"fullScreenVideoList.length > 0\" class=\"full-video\">\r\n            <div\r\n              class=\"video-wrap full-video-wh mr-20\"\r\n              v-for=\"(item,index) in fullScreenVideoList\"\r\n              :key=\"index\"\r\n            >\r\n              <el-image class=\"view-img\" :src=\"item.cover\" fit=\"contain\"></el-image>\r\n              <div class=\"abs-cont\">\r\n                <i\r\n                  v-if=\"!isShow\"\r\n                  @click.stop=\"fullScreenRemove(item)\"\r\n                  class=\"remove el-icon-delete\"\r\n                ></i>\r\n                <i @click.stop=\"videoPlay(item.url)\" class=\"play el-icon-video-play\"></i>\r\n              </div>\r\n            </div>\r\n          </div>\r\n          <nav\r\n            v-if=\"fullScreenVideoList.length < 5\"\r\n            v-show=\"!isShow\"\r\n            @click=\"addFullScreenVideo\"\r\n            class=\"btn-wrap detail-video-wh\"\r\n          >\r\n            <i class=\"el-icon-plus\"></i>\r\n          </nav>\r\n        </dt>\r\n        <dd v-show=\"!isShow\" class=\"mt-10\">可以上传5个视频，建议比例为9：16，每个大小不超过20M</dd>\r\n      </dl>\r\n    </div>\r\n    <!-- 全屏视频END -->\r\n    <!-- 商品详情 -->\r\n    <div class=\"desc-wrap\">\r\n      <h5>商品详情：</h5>\r\n      <dl class=\"full-video-wrap\">\r\n        <dt class=\"paroduct-img-wrap\">\r\n          <draggable\r\n            class=\"paroduct-img-group\"\r\n            tag=\"ul\"\r\n            v-model=\"detailImgList\"\r\n            v-bind=\"dragOptions\"\r\n            @start=\"drag = true\"\r\n            @end=\"drag = false\"\r\n            @change=\"detailImgChange\"\r\n          >\r\n            <transition-group type=\"transition\">\r\n              <li\r\n                class=\"img-group-item detail-img-wh\"\r\n                v-for=\"element in detailImgList\"\r\n                :key=\"element.url\"\r\n              >\r\n                <el-image class=\"view-img\" :src=\"element.url\" fit=\"contain\"></el-image>\r\n                <div class=\"hide-box\">\r\n                  <i @click=\"handlePictureCardPreview(element.url)\" class=\"show el-icon-zoom-in\"></i>\r\n                  <i v-if=\"!isShow\" @click=\"detailImgRemove(element)\" class=\"delete el-icon-delete\"></i>\r\n                </div>\r\n              </li>\r\n            </transition-group>\r\n          </draggable>\r\n          <dialog-up-img\r\n            v-if=\"!isShow\"\r\n            class=\"details-up-wrap\"\r\n            @setParentDetailImg=\"heandledetailImg\"\r\n            :upIsShow=\"detailImgStatus\"\r\n            imgType=\"DETAIL_IMAGE\"\r\n            ref=\"dialogUpImgRef\"\r\n          ></dialog-up-img>\r\n        </dt>\r\n        <dd v-show=\"!isShow\" class=\"mt-10\">单张大小不超过5M，最多不超过15张，拖动可更改排序，点击可查看完整图片</dd>\r\n      </dl>\r\n    </div>\r\n    <!-- 商品详情END -->\r\n    <!-- 视频组件 -->\r\n    <video-play-view ref=\"videoRef\"></video-play-view>\r\n    <!-- 视频列表组件 -->\r\n    <dialog-video\r\n      @parentMainHandle=\"mainHandle\"\r\n      @parentFullScreenHandle=\"fullScreenHandle\"\r\n      @parentVideoPlay=\"videoPlay\"\r\n      ref=\"dialogVideoRef\"\r\n    ></dialog-video>\r\n    <!-- 图片预览 -->\r\n    <el-dialog :visible.sync=\"dialogImgVisible\" append-to-body>\r\n      <img width=\"100%\" :src=\"dialogImageUrl\" alt />\r\n    </el-dialog>\r\n  </div>\r\n</template>\r\n<script>\r\n//引入拖动模块功能\r\nimport draggable from \"vuedraggable\";\r\n//引入图片组件\r\nimport DialogUpImg from \"./dialog_video_upImg.vue\";\r\n//视频播放组件\r\nimport VideoPlayView from \"./videoPlay.vue\";\r\n//视频库组件\r\nimport DialogVideo from \"./dialog_video_list.vue\";\r\nlet productImages = []; //产品图片列表\r\nlet removeProductImagesList = []; //删除的产品图片列表\r\nlet productVideos = []; //产品视频列表\r\nlet removeProductVideoList = []; //删除的产品视频列表\r\nexport default {\r\n  name: \"commondityDescription\",\r\n  display: \"Transitions\",\r\n  order: 7,\r\n  data() {\r\n    return {\r\n      //主图视频\r\n      isMainVideo: false,\r\n      //主图视频数据\r\n      mainVideoForm: {},\r\n      //全屏视频\r\n      isFullScreenVideo: false,\r\n      //全屏视频列表\r\n      fullScreenVideoList: [],\r\n      //父组件传来的全部数据\r\n      parentForm: {},\r\n      //图片拖动组件\r\n      drag: false,\r\n      masterImgList: [], //主图列表\r\n      masterImgStatus: true,\r\n      //详情图片\r\n      detailImgList: [],\r\n      detailImgStatus: true,\r\n      dialogImgVisible: false,\r\n      dialogImageUrl: \"\",\r\n      isShow: false\r\n    };\r\n    // 主图：MASTER_IMAGE\r\n    // 详情：DETAIL_IMAGE\r\n    // 主视频：MASTER_VIDEO\r\n    // 全屏视频：FULL_SCREEN_VIDEO\r\n  },\r\n  created() {\r\n    this.init();\r\n  },\r\n  methods: {\r\n    init() {\r\n      productImages = [];\r\n      removeProductImagesList = [];\r\n      productVideos = []; //产品视频列表\r\n      removeProductVideoList = []; //删除的产品视频列表\r\n      this.isShow = false;\r\n    },\r\n    /**\r\n     * @description:  从父级获取数据 如果走了此方法说明是回显\r\n     * @param {obj} 整个数据\r\n     * @return:\r\n     */\r\n    videoImgPropInit(params, isShow = false) {\r\n      this.init();\r\n      this.isShow = isShow;\r\n      let parentForm = params;\r\n      //放入数据\r\n      productImages = parentForm.productImages || []; //产品图片列表\r\n      productVideos = parentForm.productVideos || []; //产品视频列表\r\n      //找出主图\r\n      let masterImg = productImages.filter(item => item.type == \"MASTER_IMAGE\");\r\n      this.masterImgList = masterImg.sort((a, b) => a.sort - b.sort);\r\n      //找出详情图\r\n      let detailImg = productImages.filter(item => item.type == \"DETAIL_IMAGE\");\r\n      this.detailImgList = detailImg.sort((a, b) => a.sort - b.sort);\r\n      //找出主图视频\r\n      this.mainVideoForm =\r\n        productVideos.find(item => item.type == \"MASTER_VIDEO\") || {};\r\n      this.isMainVideo = true;\r\n      //找出全屏视频\r\n      let fullScreenVideo = productVideos.filter(\r\n        item => item.type == \"FULL_SCREEN_VIDEO\"\r\n      );\r\n      this.fullScreenVideoList = fullScreenVideo.sort(\r\n        (a, b) => a.sort - b.sort\r\n      );\r\n    },\r\n    //主图视频\r\n    addMainPictureVideo() {\r\n      this.$refs.dialogVideoRef.propInit(\"main\");\r\n    },\r\n    //全屏视频\r\n    addFullScreenVideo() {\r\n      let fullScreenVideoList = this.$common.deepCopy(this.fullScreenVideoList);\r\n      this.$refs.dialogVideoRef.propInit(\"fullScreen\", fullScreenVideoList);\r\n      fullScreenVideoList = null;\r\n    },\r\n    //主图调用返回数据\r\n    mainHandle(params) {\r\n      this.isMainVideo = true;\r\n      let _params = this.$common.deepCopy(params);\r\n      this.mainVideoForm = {\r\n        cover: _params.cover,\r\n        videoName: _params.name,\r\n        url: _params.url,\r\n        videoId: _params.id,\r\n        type: \"MASTER_VIDEO\"\r\n      };\r\n      //数据\r\n      productVideos.push(this.mainVideoForm);\r\n      this.heandleSetParentVideoData();\r\n      _params = null;\r\n    },\r\n\r\n    //全屏视频返回的数据\r\n    fullScreenHandle(params) {\r\n      this.isFullScreenVideo = true;\r\n      let _params = this.$common.deepCopy(params);\r\n      let obj = {\r\n        cover: _params.cover,\r\n        videoName: _params.name,\r\n        url: _params.url,\r\n        videoId: _params.id,\r\n        type: \"FULL_SCREEN_VIDEO\",\r\n        sort: \"\"\r\n      };\r\n      this.fullScreenVideoList.push(obj);\r\n      for (let i = 0; i < this.fullScreenVideoList.length; i++) {\r\n        this.fullScreenVideoList[i].sort = i + 1;\r\n      }\r\n      //数据\r\n      productVideos.push(obj);\r\n      this.heandleSetParentVideoData();\r\n      _params = null;\r\n    },\r\n    //主图视频删除\r\n    mainVideoRemove(item) {\r\n      //有的话说明是后台返回的单独处理 //只有一个视频\r\n      if (!!item.id) {\r\n        item.status = 9;\r\n        removeProductVideoList.push(item);\r\n        let index = productVideos.findIndex(\r\n          elem => elem.videoId == item.videoId\r\n        );\r\n        productVideos.splice(index, 1);\r\n        this.mainVideoForm = {};\r\n        this.isMainVideo = false;\r\n        this.heandleSetParentVideoData();\r\n      } else {\r\n        //没有ID说明是新增的 删除就行\r\n        let productIndex = productVideos.findIndex(\r\n          elem => elem.videoId == item.videoId\r\n        );\r\n        productVideos.splice(productIndex, 1);\r\n        this.mainVideoForm = {};\r\n        this.isMainVideo = false;\r\n        this.heandleSetParentVideoData();\r\n      }\r\n    },\r\n    //全屏视频删除\r\n    fullScreenRemove(item) {\r\n      //有的话说明是后台返回的单独处理\r\n      if (!!item.id) {\r\n        item.status = 9;\r\n        removeProductVideoList.push(item);\r\n        let index = productVideos.findIndex(\r\n          elem => elem.videoId == item.videoId\r\n        );\r\n        productVideos.splice(index, 1);\r\n        let _index = this.fullScreenVideoList.findIndex(\r\n          elem => elem.videoId == item.videoId\r\n        );\r\n        this.fullScreenVideoList.splice(_index, 1);\r\n        this.heandleSetParentVideoData();\r\n      } else {\r\n        //没有ID说明是新增的 删除就行\r\n        let productIndex = productVideos.findIndex(\r\n          elem => elem.videoId == item.videoId\r\n        );\r\n        productVideos.splice(productIndex, 1);\r\n        let index = this.fullScreenVideoList.findIndex(\r\n          elem => elem.videoId == item.videoId\r\n        );\r\n        this.fullScreenVideoList.splice(index, 1);\r\n        this.heandleSetParentVideoData();\r\n      }\r\n    },\r\n    //处理视频给父组件传参\r\n    heandleSetParentVideoData() {\r\n      let list = this.$common.deepCopy(productVideos);\r\n      let deleteList = this.$common.deepCopy(removeProductVideoList);\r\n      let arr = [...list, ...deleteList];\r\n      this.$emit(\"setParentVideoList\", arr);\r\n      (list = null), (deleteList = null), (arr = null);\r\n    },\r\n    //视频播放\r\n    videoPlay(_url) {\r\n      this.$refs.videoRef.videoInit(_url);\r\n    },\r\n    //下面是图片处理\r\n    //处理从图片传回来的图片\r\n    heandleMasterImg(params) {\r\n      let obj = {\r\n        url: params.imageUrl,\r\n        imageId: params.id,\r\n        imageName: params.name,\r\n        type: \"MASTER_IMAGE\",\r\n        sort: \"\"\r\n      };\r\n      this.masterImgList.push(obj);\r\n      for (let i = 0; i < this.masterImgList.length; i++) {\r\n        this.masterImgList[i].sort = i + 1;\r\n      }\r\n      //数据\r\n      productImages.push(obj);\r\n      this.heandleSetParentImgData();\r\n    },\r\n    //处理商品详情 返回的图片\r\n    heandledetailImg(params) {\r\n      let obj = {\r\n        url: params.imageUrl,\r\n        imageId: params.id,\r\n        imageName: params.name,\r\n        type: \"DETAIL_IMAGE\",\r\n        sort: \"\"\r\n      };\r\n      this.detailImgList.push(obj);\r\n      for (let i = 0; i < this.detailImgList.length; i++) {\r\n        this.detailImgList[i].sort = i + 1;\r\n      }\r\n      //数据\r\n      productImages.push(obj);\r\n      this.heandleSetParentImgData();\r\n    },\r\n\r\n    sort(list) {\r\n      list = list.sort((a, b) => a.sort - b.sort);\r\n    },\r\n    //主图删除了\r\n    masterImgRemove(item) {\r\n      //有的话说明是后台返回的单独处理\r\n      if (!!item.id) {\r\n        item.status = 9;\r\n        removeProductImagesList.push(item);\r\n        let index = this.masterImgList.findIndex(\r\n          elem => elem.imageId == item.imageId\r\n        );\r\n        this.masterImgList.splice(index, 1);\r\n        this.heandleSetParentImgData();\r\n      } else {\r\n        //没有ID说明是新增的 删除就行\r\n        let productIndex = productImages.findIndex(\r\n          elem => elem.imageId == item.imageId\r\n        );\r\n        productImages.splice(productIndex, 1);\r\n        let index = this.masterImgList.findIndex(\r\n          elem => elem.imageId == item.imageId\r\n        );\r\n        this.masterImgList.splice(index, 1);\r\n        this.heandleSetParentImgData();\r\n         this.request(this.api.content.basePicture_deleteOssImage, {imageUrl:item.url});\r\n      }\r\n    },\r\n    //详情图删除了\r\n    detailImgRemove(item) {\r\n      //有的话说明是后台返回的单独处理\r\n      if (!!item.id) {\r\n        item.status = 9;\r\n        removeProductImagesList.push(item);\r\n        let index = this.detailImgList.findIndex(\r\n          elem => elem.imageId == item.imageId\r\n        );\r\n        this.detailImgList.splice(index, 1);\r\n        this.heandleSetParentImgData();\r\n      } else {\r\n        //没有ID说明是新增的 删除就行\r\n        let productIndex = productImages.findIndex(\r\n          elem => elem.imageId == item.imageId\r\n        );\r\n        productImages.splice(productIndex, 1);\r\n        let index = this.detailImgList.findIndex(\r\n          elem => elem.imageId == item.imageId\r\n        );\r\n        this.detailImgList.splice(index, 1);\r\n        this.heandleSetParentImgData();\r\n        this.request(this.api.content.basePicture_deleteOssImage, {imageUrl:item.url});\r\n      }\r\n    },\r\n    //主图被移动了\r\n    masterImgChange() {\r\n      for (let i = 0; i < this.masterImgList.length; i++) {\r\n        this.masterImgList[i].sort = i + 1;\r\n      }\r\n      this.heandleSetParentImgData();\r\n    },\r\n    //详情发生移动了\r\n    detailImgChange() {\r\n      for (let i = 0; i < this.detailImgList.length; i++) {\r\n        this.detailImgList[i].sort = i + 1;\r\n      }\r\n      this.heandleSetParentImgData();\r\n    },\r\n    //处理图片给父组件传参\r\n    heandleSetParentImgData() {\r\n      let list = this.$common.deepCopy(productImages);\r\n      let deleteList = this.$common.deepCopy(removeProductImagesList);\r\n      let arr = [...list, ...deleteList];\r\n      this.$emit(\"setParentImgList\", arr);\r\n      (list = null), (deleteList = null), (arr = null);\r\n    },\r\n\r\n    handlePictureCardPreview(url) {\r\n      //预览图片时调用\r\n      this.dialogImageUrl = url;\r\n      this.dialogImgVisible = true;\r\n    }\r\n  },\r\n  watch: {\r\n    masterImgList() {\r\n      if (this.masterImgList.length >= 5) {\r\n        this.masterImgStatus = false;\r\n      } else {\r\n        this.masterImgStatus = true;\r\n      }\r\n    },\r\n    detailImgList() {\r\n      if (this.detailImgList.length >= 15) {\r\n        this.detailImgStatus = false;\r\n      } else {\r\n        this.detailImgStatus = true;\r\n      }\r\n    }\r\n  },\r\n  computed: {\r\n    dragOptions() {\r\n      return {\r\n        animation: 200,\r\n        group: \"description\",\r\n        disabled: false,\r\n        ghostClass: \"ghost\"\r\n      };\r\n    }\r\n  },\r\n  components: {\r\n    VideoPlayView,\r\n    DialogVideo,\r\n    DialogUpImg,\r\n    draggable\r\n  }\r\n};\r\n</script>\r\n<style lang=\"less\" scoped>\r\n// 外部\r\n.desc-wrap {\r\n  display: flex;\r\n  width: 100%;\r\n  justify-content: flex-start;\r\n  flex-wrap: wrap;\r\n  > h5 {\r\n    font-size: 14px;\r\n    font-weight: 100;\r\n    width: 80px;\r\n    flex: 0 0 auto;\r\n    margin-top: 20px;\r\n  }\r\n  .full-video-wrap {\r\n    flex-wrap: wrap ;\r\n    min-width: 500px;\r\n    flex: 1;\r\n  }\r\n}\r\n.full-video {\r\n  display: flex;\r\n  justify-content: flex-start;\r\n}\r\n\r\n//图片\r\n.paroduct-img-wrap {\r\n  display: flex;\r\n  flex-wrap: wrap ;\r\n  justify-content: flex-start;\r\n  width: 100%;\r\n}\r\n.paroduct-img-group {\r\n  > span {\r\n    display: flex;\r\n    flex-wrap: wrap ;\r\n    justify-content: flex-start;\r\n  }\r\n  .img-group-item {\r\n    position: relative;\r\n\r\n    border-radius: 3px;\r\n    border: 1px solid #c0ccda;\r\n    margin: 10px 10px 0 0;\r\n    transition: all 0.5s ease-in-out;\r\n  }\r\n\r\n  .img-group-item:hover .hide-box {\r\n    display: flex;\r\n  }\r\n  .hide-box {\r\n    position: absolute;\r\n    left: 0;\r\n    top: 0;\r\n    background-color: rgba(0, 0, 0, 0.4);\r\n    width: 100%;\r\n    height: 100%;\r\n    border-radius: 3px;\r\n    border: 1px solid rgba(0, 0, 0, 0.4);\r\n    display: none;\r\n    justify-content: space-around;\r\n    cursor: move;\r\n    align-items: center;\r\n    .show {\r\n      font-size: 26px;\r\n      color: #ffffff;\r\n      cursor: pointer;\r\n    }\r\n    .delete {\r\n      font-size: 26px;\r\n      color: #ffffff;\r\n      cursor: pointer;\r\n    }\r\n  }\r\n}\r\n.flip-list-move {\r\n  transition: transform 0.5s;\r\n}\r\n.no-move {\r\n  transition: transform 0s;\r\n}\r\n.ghost {\r\n  opacity: 0.5;\r\n  background: #c8ebfb;\r\n}\r\n.list-group {\r\n  min-height: 20px;\r\n}\r\n.list-group-item {\r\n  cursor: move;\r\n}\r\n.list-group-item i {\r\n  cursor: pointer;\r\n}\r\n\r\n// 主图视频\r\n.upload-video {\r\n  display: flex;\r\n  justify-content: flex-start;\r\n  .btn-wrap {\r\n    border: 1px dashed #c0ccda;\r\n    border-radius: 6px;\r\n    text-align: center;\r\n    cursor: pointer;\r\n\r\n    i {\r\n      font-size: 28px;\r\n      color: #8c939d;\r\n    }\r\n  }\r\n  .full-video-wh {\r\n    width: 120px;\r\n    height: 200px;\r\n  }\r\n  .main-video-wh {\r\n    width: 120px;\r\n    height: 150px;\r\n  }\r\n  .video-wrap {\r\n    position: relative;\r\n\r\n    border: 1px solid #c0ccda;\r\n    border-radius: 6px;\r\n    text-align: center;\r\n\r\n    cursor: pointer;\r\n\r\n    img,\r\n    video {\r\n      width: 100%;\r\n      height: 100%;\r\n    }\r\n    .abs-cont {\r\n      width: 100%;\r\n      height: 100%;\r\n      position: absolute;\r\n      left: 0;\r\n      top: -1px;\r\n      font-size: 12px;\r\n      color: #ffffff;\r\n      padding: 4px 2px 4px 4px;\r\n      border-radius: 6px;\r\n      background-color: rgba(0, 0, 0, 0.4);\r\n      display: none;\r\n      transition: all 0.5s cubic-bezier(0.4, 0, 0.2, 1);\r\n      .remove {\r\n        position: absolute;\r\n        right: 10px;\r\n        bottom: 10px;\r\n        cursor: pointer;\r\n        font-size: 18px;\r\n      }\r\n      .play {\r\n        position: absolute;\r\n        left: 35%;\r\n        top: 35%;\r\n        cursor: pointer;\r\n        font-size: 40px;\r\n      }\r\n    }\r\n  }\r\n  .video-wrap:hover .abs-cont {\r\n    display: block;\r\n  }\r\n}\r\n.view-img {\r\n  width: 100%;\r\n  height: 100%;\r\n  border-radius: 4px;\r\n}\r\n\r\n.main-up-wrap /deep/ .btn-wrap {\r\n  height: 150px;\r\n  line-height: 150px;\r\n}\r\n.details-up-wrap /deep/ .btn-wrap {\r\n  width: 240px;\r\n  height: 320px;\r\n  line-height: 320px;\r\n}\r\n.main-img-wh {\r\n  width: 120px;\r\n  height: 150px;\r\n  line-height: 150px;\r\n}\r\n.detail-video-wh {\r\n  width: 120px;\r\n  height: 200px;\r\n  line-height: 200px;\r\n}\r\n.detail-img-wh {\r\n  width: 240px;\r\n  height: 320px;\r\n  line-height: 320px;\r\n}\r\n</style>\r\n"]}]}
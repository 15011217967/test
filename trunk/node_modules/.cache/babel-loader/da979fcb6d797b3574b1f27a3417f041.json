{"remainingRequest":"C:\\Users\\EDZ\\Desktop\\研发项目\\vue-project\\trunk\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\EDZ\\Desktop\\研发项目\\vue-project\\trunk\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!C:\\Users\\EDZ\\Desktop\\研发项目\\vue-project\\trunk\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\EDZ\\Desktop\\研发项目\\vue-project\\trunk\\src\\views\\warehouse\\warehouse_center\\warehouse_manager\\receive_order\\receive_order_add.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\EDZ\\Desktop\\研发项目\\vue-project\\trunk\\src\\views\\warehouse\\warehouse_center\\warehouse_manager\\receive_order\\receive_order_add.vue","mtime":1578302457306},{"path":"C:\\Users\\EDZ\\Desktop\\研发项目\\vue-project\\trunk\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1558492728398},{"path":"C:\\Users\\EDZ\\Desktop\\研发项目\\vue-project\\trunk\\node_modules\\babel-loader\\lib\\index.js","mtime":1558492720858},{"path":"C:\\Users\\EDZ\\Desktop\\研发项目\\vue-project\\trunk\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1558492728398},{"path":"C:\\Users\\EDZ\\Desktop\\研发项目\\vue-project\\trunk\\node_modules\\vue-loader\\lib\\index.js","mtime":1558492728890}],"contextDependencies":[],"result":["import _toConsumableArray from \"C:\\\\Users\\\\EDZ\\\\Desktop\\\\\\u7814\\u53D1\\u9879\\u76EE\\\\vue-project\\\\trunk\\\\node_modules\\\\@babel\\\\runtime-corejs2/helpers/esm/toConsumableArray\";\nimport \"core-js/modules/web.dom.iterable\";\nimport \"core-js/modules/es6.array.find-index\";\nimport \"core-js/modules/es6.function.name\";\nimport \"core-js/modules/es6.array.find\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport division from \"@/components/division\";\nimport { isvalidPhone } from \"@/utils/phonevalide\";\nimport { validatePositiveValNumber } from '@/utils/validate';\n\nvar validPhone = function validPhone(rule, value, callback) {\n  if (!value) {\n    callback(new Error(\"请输入电话号码\"));\n  } else if (!isvalidPhone(value)) {\n    callback(new Error(\"请输入正确的11位手机号码\"));\n  } else {\n    callback();\n  }\n};\n\nexport default {\n  components: {\n    division: division\n  },\n  data: function data() {\n    return {\n      addShopLoading: false,\n      // 正整数验证\n      validatePositiveValNumber: validatePositiveValNumber,\n      //标识是否显示新增商品\n      dialogTableVisible: false,\n      dialogTableData: {\n        pageIndex: 1,\n        pageSize: 1\n      },\n      dialogtotalCount: 1,\n      //添加商品里的嵌套表格数据\n      gridData: [],\n      signData: {\n        //商品编码\n        productGoodsCode: '',\n        //品牌\n        brandName: '',\n        //货主Id\n        ownerId: \"\",\n        //仓库编码\n        warehouseCode: '',\n        pageIndex: 1,\n        pageSize: 10\n      },\n      shop_user: {\n        //入库类型\n        type: \"\",\n        //预计到货日期\n        expectedTime: '',\n        //承运商\n        logistics: \"\",\n        //承运商编码\n        logisticsCode: \"\",\n        //承运单号\n        logisticsSn: \"\",\n        //原始订单号\n        orderSn: \"\",\n        //供应商名称\n        supply: '',\n        //联系人\n        contact: '',\n        //司机\n        driver: '',\n        //货主\n        goodsOwner: \"\",\n        //货主Id\n        ownerId: \"\",\n        //货主编码\n        ownerCode: \"\",\n        //联系方式\n        telephone: \"\",\n        //手机号码\n        driverMobile: '',\n        //仓库名称\n        warehouseName: \"\",\n        //仓库编码\n        warehouseCode: \"\",\n        //表格数据\n        configurationOrderItemList: []\n      },\n      //规则\n      rules: {\n        warehouseName: [{\n          required: true,\n          message: \"入库仓库不能为空\",\n          trigger: \"change\"\n        }],\n        type: [{\n          required: true,\n          message: \"入库类型不能为空\",\n          trigger: \"change\"\n        }],\n        goodsOwner: [{\n          required: true,\n          message: \"货主不能为空\",\n          trigger: \"change\"\n        }]\n      },\n      //承运商数据\n      logisticsData: [],\n      //出库类型数据\n      warehouseTypeData: [],\n      //出库仓库数据\n      warehouseData: [],\n      //货主数据\n      goodsOwnerData: [],\n      //记录总的商品数\n      totalPage: 0,\n      //记录选中得数据\n      multipleSelectionData: []\n    };\n  },\n  watch: {\n    \"shop_user.goodsOwner\": function shop_userGoodsOwner(newValue, oldValue) {\n      this.tmpGoodsOwner = oldValue;\n    }\n  },\n  //过滤器\n  filters: {\n    //过滤订单状态\n    filterBusinessStatus: function filterBusinessStatus(val) {\n      switch (val) {\n        case \"13\":\n          return \"待处理\";\n          break;\n\n        case \"14\":\n          return \"已处理\";\n          break;\n\n        case \"15\":\n          return \"已作废\";\n          break;\n      }\n    }\n  },\n  mounted: function mounted() {\n    //得到出库类型数据\n    this.getWarehouseData(); //得到承运商数据\n\n    this.getLogisticData(); //得到出库仓库数据\n\n    this.geSendWarehouseData(); //得到货主数据\n\n    this.getGoodsOwnerData();\n  },\n  methods: {\n    //得到承运商数据\n    getLogisticData: function getLogisticData() {\n      var _this = this;\n\n      this.request(this.api.warehouse.warehouseBase_logistics_list, {\n        isValid: true\n      }).then(function (res) {\n        console.log(res);\n        _this.logisticsData = res.data;\n      });\n    },\n    //承运商change事件\n    logisticsChangeEvent: function logisticsChangeEvent(val) {\n      console.log(val);\n      var logistics = this.logisticsData.find(function (item) {\n        return item.logisticsCode == val;\n      });\n      this.shop_user.logistics = logistics.name;\n    },\n    //得到出库类型数据\n    getWarehouseData: function getWarehouseData() {\n      var _this2 = this;\n\n      //得到出库类型数据 code==04\n      this.request(this.api.warehouse.warehouseBase_configurationDictionaryByCode, {\n        code: \"CONFIGURABLE05\"\n      }).then(function (res) {\n        console.log(res);\n        _this2.warehouseTypeData = res;\n        _this2.shop_user.type = \"05003\";\n      });\n    },\n    //得到发货仓库数据\n    geSendWarehouseData: function geSendWarehouseData() {\n      var _this3 = this;\n\n      this.request(this.api.warehouse.warehouseBase_warehouse_list, {\n        isValid: true\n      }).then(function (res) {\n        console.log(res);\n        _this3.warehouseData = res.data;\n      });\n    },\n    //入库仓库change事件\n    warehouseChangeEvent: function warehouseChangeEvent(val) {\n      this.shop_user.warehouseCode = this.warehouseData.find(function (item) {\n        return item.warehouseName == val;\n      }).warehouseCode;\n    },\n    //得到货主数据\n    getGoodsOwnerData: function getGoodsOwnerData() {\n      var _this4 = this;\n\n      this.request(this.api.warehouse.warehouseBase_goodsOwner_list, {\n        valid: true\n      }).then(function (res) {\n        console.log(res);\n        _this4.goodsOwnerData = res.data;\n      });\n    },\n    //货主change事件\n    goodsOwnerChangeEvent: function goodsOwnerChangeEvent(val) {\n      var _this5 = this;\n\n      var configurationOrderItemList = this.shop_user.configurationOrderItemList;\n\n      if (configurationOrderItemList.length > 0) {\n        this.$confirm(\"切换货主后，已选商品会清除，确认切换货主吗？\", \"提示\", {\n          confirmButtonText: \"确定\",\n          cancelButtonText: \"取消\",\n          type: \"warning\"\n        }).then(function () {\n          _this5.shop_user.configurationOrderItemList = [];\n\n          _this5.getOwnerIdAndCode(val);\n        }).catch(function (action) {\n          _this5.shop_user.goodsOwner = _this5.tmpGoodsOwner;\n\n          _this5.getOwnerIdAndCode(_this5.shop_user.goodsOwner);\n        });\n      } else {\n        this.getOwnerIdAndCode(val);\n      }\n    },\n    //得到货主的Id和Code\n    getOwnerIdAndCode: function getOwnerIdAndCode(val) {\n      var goodsOwner = this.goodsOwnerData.find(function (item) {\n        return item.name == val;\n      });\n      this.shop_user.goodsOwner = goodsOwner.code;\n      this.shop_user.ownerCode = goodsOwner.code;\n      this.shop_user.ownerId = goodsOwner.id;\n    },\n    //添加商品按钮得点击事件\n    addShopBtnClickEvent: function addShopBtnClickEvent() {\n      if (!this.shop_user.goodsOwner) {\n        this.$message.error(\"请选择货主\");\n        return;\n      }\n\n      this.gridData = []; //得到商品数据\n\n      this.getProductGoodsData();\n    },\n    //得到商品列表数据\n    getProductGoodsData: function getProductGoodsData() {\n      var _this6 = this;\n\n      this.addShopLoading = true;\n      this.signData.ownerId = this.shop_user.ownerCode; // this.signData.warehouseCode=this.shop_user.warehouseCode\n\n      this.dialogTableVisible = true;\n      this.request(this.api.product.productGoods_listProductGoods4Wms, this.signData, true).then(function (res) {\n        _this6.addShopLoading = false;\n        console.log(res);\n        _this6.gridData = res.data;\n        _this6.dialogtotalCount = res.totalCount;\n      });\n    },\n    //导入商品按钮的点击事件\n    exportExcelShopData: function exportExcelShopData() {\n      console.log(\"exportExcelShopData-----\");\n    },\n    //删除Btn点击事件\n    deleteBtnClick: function deleteBtnClick(id) {\n      var index = this.shop_user.configurationOrderItemList.findIndex(function (item) {\n        return item.id == id;\n      });\n      this.shop_user.configurationOrderItemList.splice(index, 1);\n    },\n    //提交订单Btn得点击事件\n    submitOrderBtnClickEvent: function submitOrderBtnClickEvent() {\n      var _this7 = this;\n\n      if (this.shop_user.configurationOrderItemList.length == 0) {\n        this.$message.error(\"提交商品不能为空,请添加商品\");\n        return;\n      } else {\n        var flag = this.shop_user.configurationOrderItemList.every(function (item) {\n          return item.orderQuantity == 0;\n        });\n\n        if (flag) {\n          this.$message.error(\"提交商品订货数量不能全部为0\");\n          return;\n        }\n      }\n\n      this.$refs.ruleForm.validate(function (valid) {\n        if (valid) {\n          _this7.shop_user.configurationOrderItemList = _this7.shop_user.configurationOrderItemList.filter(function (item) {\n            return item.orderQuantity > 0;\n          });\n\n          _this7.shop_user.configurationOrderItemList.forEach(function (item) {\n            item.goodsCode = item.code, item.goodsOwner = item.ownerId, item.color = item.colorName, item.size = item.sizeName, item.brand = item.brandName;\n          });\n\n          _this7.request(_this7.api.warehouse.warehouseBase_receiveOrder_insert, _this7.shop_user).then(function (res) {\n            console.log(res);\n\n            _this7.$message({\n              message: '保存成功',\n              type: 'success',\n              duration: 1500\n            });\n\n            setTimeout(function () {\n              _this7.$router.go(-1);\n            }, 1500);\n          });\n        } else {\n          console.log(\"error submit!!\");\n          return false;\n        }\n      });\n    },\n    //表单搜索-dialog\n    searchFormData: function searchFormData() {\n      this.signData.pageIndex = 1;\n      this.getProductGoodsData();\n    },\n    //确认Btn的按钮点击事件-dialog\n    sureBtnClickEvent: function sureBtnClickEvent() {\n      var _this8 = this;\n\n      if (this.multipleSelectionData) {\n        this.multipleSelectionData.forEach(function (item) {\n          _this8.$set(item, 'orderQuantity', 0);\n        });\n        var arr = this.$common.deepCopy(this.multipleSelectionData);\n        this.shop_user.configurationOrderItemList = [].concat(_toConsumableArray(this.shop_user.configurationOrderItemList), _toConsumableArray(arr));\n      }\n\n      this.hideAddShopDialog(); //去除重复对象\n\n      this.shop_user.configurationOrderItemList = this.deteleItemListObject(this.shop_user.configurationOrderItemList);\n    },\n    //去除数组中的重复对象\n    deteleItemListObject: function deteleItemListObject(arr) {\n      var hash = {};\n      var newArr = arr.reduce(function (item, next) {\n        hash[next.id] ? \"\" : hash[next.id] = true && item.push(next);\n        return item;\n      }, []);\n      return newArr;\n    },\n    //表格选择项改变时触发-dialog\n    selectionChange: function selectionChange(val) {\n      this.multipleSelectionData = val;\n    },\n    //添加商品的dialog的隐藏事件\n    hideAddShopDialog: function hideAddShopDialog() {\n      this.$refs.formData.resetFields();\n      this.dialogTableVisible = false;\n      this.multipleSelectionData = [];\n    },\n    //每页条数改变时-dialogTable\n    dialogTableHandleSizeChange: function dialogTableHandleSizeChange(page) {\n      this.signData.pageSize = page;\n      this.getProductGoodsData();\n    },\n    //当前页改变时-dialogTable\n    dialogTableHandleCurrentChange: function dialogTableHandleCurrentChange(page) {\n      this.signData.pageIndex = page;\n      this.getProductGoodsData();\n    }\n  }\n};",{"version":3,"sources":["receive_order_add.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\r\n  <div class=\"detail_div\">\r\n    <div class=\"middle-msg\">\r\n      <div class=\"middle-title-div\">\r\n        <label>基础信息</label>\r\n        <el-button type=\"primary\" @click=\"submitOrderBtnClickEvent\" size=\"small\">提交订单</el-button>\r\n      </div>\r\n      <el-form\r\n        :inline=\"true\"\r\n        :model=\"shop_user\"\r\n        ref=\"ruleForm\"\r\n        label-width=\"110px\"\r\n        class=\"demo-ruleForm\"\r\n        :rules=\"rules\"\r\n      >\r\n        <el-row :gutter=\"20\">\r\n          <el-col :span=\"5\">\r\n            <el-form-item label=\"入库类型：\" prop=\"type\">\r\n              <el-select :disabled = \"true\" v-model=\"shop_user.type\" style=\"width:185px;\" placeholder=\"请选择\">\r\n                <el-option\r\n                  v-for=\"item in warehouseTypeData\"\r\n                  :key=\"item.id\"\r\n                  :label=\"item.description\"\r\n                  :value=\"item.code\"\r\n                ></el-option>\r\n              </el-select>\r\n            </el-form-item>\r\n            <el-form-item label=\"预计到货日期：\" prop=\"expectedTime\">\r\n              <el-date-picker v-model=\"shop_user.expectedTime\" type=\"date\" placeholder=\"选择日期\" style=\"width: 185px;\">\r\n              </el-date-picker>\r\n            </el-form-item>\r\n            <el-form-item label=\"承运商：\" prop=\"logisticsCode\">\r\n              <el-select\r\n                v-model=\"shop_user.logisticsCode\"\r\n                style=\"width:185px;\"\r\n                @change=\"logisticsChangeEvent\"\r\n                placeholder='承运商名称'\r\n              >\r\n                <el-option\r\n                  v-for=\"item in logisticsData\"\r\n                  :key=\"item.id\"\r\n                  :label=\"item.name\"\r\n                  :value=\"item.code\"\r\n                ></el-option>\r\n              </el-select>\r\n            </el-form-item>\r\n          </el-col>\r\n          <el-col :span=\"5\">\r\n            <el-form-item label=\"原始订单号：\" prop=\"orderSn\">\r\n              <el-input v-model=\"shop_user.orderSn\" placeholder=\"原始订单号\"></el-input>\r\n            </el-form-item>\r\n             <el-form-item label=\"供应商名称：\" prop=\"supply\">\r\n              <el-input v-model=\"shop_user.supply\" placeholder=\"供应商名称\" maxlength=\"11\"></el-input>\r\n            </el-form-item>\r\n            <el-form-item label=\"承运商单号：\" prop=\"logisticsSn\">\r\n              <el-input v-model=\"shop_user.logisticsSn\" placeholder=\"承运商单号\" maxlength=\"11\"></el-input>\r\n            </el-form-item>\r\n          </el-col>\r\n          <el-col :span=\"5\">\r\n            <el-form-item label=\"仓库：\" prop=\"warehouseName\" placeholder=\"请选择\">\r\n              <el-select\r\n                v-model=\"shop_user.warehouseName\"\r\n                style=\"width:185px;\"\r\n                @change=\"warehouseChangeEvent\"\r\n              >\r\n                <el-option\r\n                  v-for=\"item in warehouseData\"\r\n                  :key=\"item.id\"\r\n                  :label=\"item.warehouseName\"\r\n                  :value=\"item.warehouseName\"\r\n                ></el-option>\r\n              </el-select>\r\n            </el-form-item>\r\n            <el-form-item label=\"联系人：\" prop=\"contact\">\r\n              <el-input v-model=\"shop_user.contact\" placeholder=\"供应商联系人\" maxlength=\"11\"></el-input>\r\n            </el-form-item>\r\n            <el-form-item label=\"司机：\" prop=\"driver\">\r\n              <el-input v-model=\"shop_user.driver\" placeholder=\"司机姓名\"></el-input>\r\n            </el-form-item>\r\n          </el-col>\r\n          <el-col :span=\"5\">\r\n            <el-form-item label=\"货主：\" prop=\"goodsOwner\" placeholder=\"请选择\">\r\n              <el-select\r\n                v-model=\"shop_user.goodsOwner\"\r\n                style=\"width:185px;\"\r\n                @change=\"goodsOwnerChangeEvent\"\r\n              >\r\n                <el-option\r\n                  v-for=\"item in goodsOwnerData\"\r\n                  :key=\"item.id\"\r\n                  :label=\"item.name\"\r\n                  :value=\"item.name\"\r\n                ></el-option>\r\n              </el-select>\r\n            </el-form-item>\r\n            <el-form-item label=\"联系方式：\" prop=\"telephone\">\r\n              <el-input v-model=\"shop_user.telephone\" placeholder=\"联系方式\" maxlength=\"11\"></el-input>\r\n            </el-form-item>\r\n            <el-form-item label=\"手机号码：\" prop=\"driverMobile\">\r\n              <el-input v-model=\"shop_user.driverMobile\" placeholder=\"司机手机号\"></el-input>\r\n            </el-form-item>\r\n          </el-col>\r\n        </el-row>\r\n      </el-form>\r\n    </div>\r\n    <div class=\"table_div\">\r\n      <div class=\"title-div\">\r\n        <label>商品明细</label>\r\n        <el-button type=\"primary\" @click=\"addShopBtnClickEvent\" size=\"small\">添加商品</el-button>\r\n        <!-- <el-button plain @click=\"exportExcelShopData\" size=\"small\">导入商品</el-button> -->\r\n      </div>\r\n      <el-table\r\n        :data=\"shop_user.configurationOrderItemList\"\r\n        stripe\r\n        style=\"width: 100%;padding-left:15px;\"\r\n        header-row-class-name=\"item-table-header\"\r\n        max-height=\"400\"\r\n      >\r\n        <el-table-column prop=\"code\" label=\"商品编码\" width=\"180\"></el-table-column>\r\n        <el-table-column prop=\"name\" label=\"商品名称\"></el-table-column>\r\n        <el-table-column prop=\"colorName\" label=\"颜色\"></el-table-column>\r\n        <el-table-column prop=\"sizeName\" label=\"尺码\"></el-table-column>\r\n        <el-table-column prop=\"brandName\" label=\"品牌\"></el-table-column>\r\n        <el-table-column prop=\"cateName\" label=\"品类\"></el-table-column>\r\n        <!-- <el-table-column prop=\"availableQuantity\" label=\"可用数量\" width=\"180\"></el-table-column> -->\r\n        <el-table-column prop=\"orderQuantity\" label=\"预计到货数量\">\r\n          <template slot-scope=\"scope\">\r\n            <el-input-number v-model.number=\"scope.row.orderQuantity\" size=\"mini\" :min=\"0\" />\r\n          </template>\r\n        </el-table-column>\r\n        <el-table-column fixed=\"right\" label=\"操作\" width=\"160\">\r\n          <template slot-scope=\"scope\">\r\n            <el-button @click=\"deleteBtnClick(scope.row.id)\" type=\"text\" size=\"small\">删除</el-button>\r\n          </template>\r\n        </el-table-column>\r\n      </el-table>\r\n    </div>\r\n    <el-dialog title=\"添加商品\" :visible.sync=\"dialogTableVisible\" @close=\"hideAddShopDialog\" width=\"700px\">\r\n      <div class=\"dialog-div\">\r\n        <el-form ref=\"formData\" :model=\"signData\" :inline=\"true\">\r\n          <el-form-item label=\"商品编码：\" prop=\"productGoodsCode\">\r\n            <el-input v-model=\"signData.productGoodsCode\" placeholder=\"可模糊查询\" style=\"width:130px;\"></el-input>\r\n          </el-form-item>\r\n          <el-form-item label=\"品牌：\" prop=\"brandName\">\r\n            <el-input v-model=\"signData.brandName\" placeholder=\"可模糊查询\" style=\"width:130px;\"></el-input>\r\n          </el-form-item>\r\n          <el-form-item>\r\n            <el-button @click=\"searchFormData\" type=\"primary\" plain size=\"small\">搜索</el-button>\r\n          </el-form-item>\r\n        </el-form>\r\n      </div>\r\n      <div>\r\n        <el-button type=\"primary\" @click=\"sureBtnClickEvent\" size=\"small\" :disabled='multipleSelectionData.length==0'>确认</el-button>\r\n        <el-table\r\n          v-loading=\"addShopLoading\"\r\n          element-loading-text=\"拼命加载中...\"\r\n          :data=\"gridData\"\r\n          style=\"margin-bottom:15px;\"\r\n          header-row-class-name=\"item-table-header\"\r\n          max-height=\"400\"\r\n          @selection-change=\"selectionChange\"\r\n        >\r\n          <el-table-column type=\"selection\" width=\"55\"></el-table-column>\r\n          <el-table-column property=\"code\" label=\"商品编码\" width=\"150\"></el-table-column>\r\n          <el-table-column property=\"name\" label=\"商品名称\" width=\"200\"></el-table-column>\r\n          <el-table-column property=\"colorName\" label=\"颜色\"></el-table-column>\r\n          <el-table-column property=\"sizeName\" label=\"尺寸\"></el-table-column>\r\n          <el-table-column property=\"brandName\" label=\"品牌\"></el-table-column>\r\n        </el-table>\r\n        <el-pagination\r\n          @size-change=\"dialogTableHandleSizeChange\"\r\n          @current-change=\"dialogTableHandleCurrentChange\"\r\n          :current-page.sync=\"dialogTableData.pageIndex\"\r\n          :page-sizes=\"[10, 20, 30, 40]\"\r\n          :page-size=\"dialogTableData.pageSize\"\r\n          layout=\"total, sizes, prev, pager, next, jumper\"\r\n          :total=\"dialogtotalCount\"\r\n        ></el-pagination>\r\n      </div>\r\n    </el-dialog>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport division from \"@/components/division\";\r\nimport { isvalidPhone } from \"@/utils/phonevalide\";\r\nimport { validatePositiveValNumber } from '@/utils/validate';\r\nvar validPhone = (rule, value, callback) => {\r\n  if (!value) {\r\n    callback(new Error(\"请输入电话号码\"));\r\n  } else if (!isvalidPhone(value)) {\r\n    callback(new Error(\"请输入正确的11位手机号码\"));\r\n  } else {\r\n    callback();\r\n  }\r\n};\r\nexport default {\r\n  components: {\r\n    division\r\n  },\r\n  data() {\r\n    return {\r\n      addShopLoading:false,\r\n      // 正整数验证\r\n      validatePositiveValNumber,\r\n      //标识是否显示新增商品\r\n      dialogTableVisible: false,\r\n      dialogTableData: {\r\n        pageIndex: 1,\r\n        pageSize: 1\r\n      },\r\n      dialogtotalCount: 1,\r\n      //添加商品里的嵌套表格数据\r\n      gridData: [],\r\n      signData: {\r\n        //商品编码\r\n        productGoodsCode:'',\r\n        //品牌\r\n        brandName:'',\r\n        //货主Id\r\n        ownerId: \"\",\r\n        //仓库编码\r\n        warehouseCode: '',\r\n        pageIndex: 1,\r\n        pageSize: 10\r\n      },\r\n      shop_user: {\r\n        //入库类型\r\n        type: \"\",\r\n        //预计到货日期\r\n        expectedTime:'',\r\n        //承运商\r\n        logistics: \"\",\r\n        //承运商编码\r\n        logisticsCode: \"\",\r\n        //承运单号\r\n        logisticsSn: \"\",\r\n        //原始订单号\r\n        orderSn: \"\",\r\n        //供应商名称\r\n        supply:'',\r\n        //联系人\r\n        contact:'',\r\n        //司机\r\n        driver:'',\r\n        //货主\r\n        goodsOwner: \"\",\r\n        //货主Id\r\n        ownerId: \"\",\r\n        //货主编码\r\n        ownerCode: \"\",\r\n        //联系方式\r\n        telephone: \"\",\r\n        //手机号码\r\n        driverMobile:'',\r\n        //仓库名称\r\n        warehouseName: \"\",\r\n        //仓库编码\r\n        warehouseCode: \"\",\r\n        //表格数据\r\n        configurationOrderItemList: []\r\n      },\r\n      //规则\r\n      rules: {\r\n        warehouseName: [\r\n          { required: true, message: \"入库仓库不能为空\", trigger: \"change\" }\r\n        ],\r\n        type: [\r\n          { required: true, message: \"入库类型不能为空\", trigger: \"change\" }\r\n        ],\r\n        goodsOwner: [\r\n          { required: true, message: \"货主不能为空\", trigger: \"change\" }\r\n        ]\r\n      },\r\n      //承运商数据\r\n      logisticsData: [],\r\n      //出库类型数据\r\n      warehouseTypeData: [],\r\n      //出库仓库数据\r\n      warehouseData: [],\r\n      //货主数据\r\n      goodsOwnerData: [],\r\n      //记录总的商品数\r\n      totalPage: 0,\r\n      //记录选中得数据\r\n      multipleSelectionData:[],\r\n    };\r\n  },\r\n  watch: {\r\n    \"shop_user.goodsOwner\": function(newValue, oldValue) {\r\n      this.tmpGoodsOwner = oldValue;\r\n    }\r\n  },\r\n  //过滤器\r\n  filters: {\r\n    //过滤订单状态\r\n    filterBusinessStatus(val) {\r\n      switch (val) {\r\n        case \"13\":\r\n          return \"待处理\";\r\n          break;\r\n        case \"14\":\r\n          return \"已处理\";\r\n          break;\r\n        case \"15\":\r\n          return \"已作废\";\r\n          break;\r\n      }\r\n    }\r\n  },\r\n  mounted() {\r\n    //得到出库类型数据\r\n    this.getWarehouseData();\r\n    //得到承运商数据\r\n    this.getLogisticData();\r\n    //得到出库仓库数据\r\n    this.geSendWarehouseData();\r\n    //得到货主数据\r\n    this.getGoodsOwnerData();\r\n  },\r\n  methods: {\r\n    //得到承运商数据\r\n    getLogisticData() {\r\n      this.request(this.api.warehouse.warehouseBase_logistics_list, {\r\n        isValid: true\r\n      }).then(res => {\r\n        console.log(res);\r\n        this.logisticsData = res.data;\r\n      });\r\n    },\r\n    //承运商change事件\r\n    logisticsChangeEvent(val) {\r\n      console.log(val);\r\n      var logistics = this.logisticsData.find(\r\n        item => item.logisticsCode == val\r\n      );\r\n      this.shop_user.logistics = logistics.name;\r\n    },\r\n    //得到出库类型数据\r\n    getWarehouseData() {\r\n      //得到出库类型数据 code==04\r\n      this.request(\r\n        this.api.warehouse.warehouseBase_configurationDictionaryByCode,\r\n        { code: \"CONFIGURABLE05\" }\r\n      ).then(res => {\r\n        console.log(res);\r\n        this.warehouseTypeData = res;\r\n          this.shop_user.type=\"05003\"\r\n\r\n      });\r\n    },\r\n    //得到发货仓库数据\r\n    geSendWarehouseData() {\r\n      this.request(this.api.warehouse.warehouseBase_warehouse_list, {\r\n        isValid: true\r\n      }).then(res => {\r\n        console.log(res);\r\n        this.warehouseData = res.data;\r\n      });\r\n    },\r\n    //入库仓库change事件\r\n    warehouseChangeEvent(val) {\r\n      this.shop_user.warehouseCode = this.warehouseData.find(\r\n        item => item.warehouseName == val\r\n      ).warehouseCode;\r\n    },\r\n    //得到货主数据\r\n    getGoodsOwnerData() {\r\n      this.request(this.api.warehouse.warehouseBase_goodsOwner_list, {\r\n        valid: true\r\n      }).then(res => {\r\n        console.log(res);\r\n        this.goodsOwnerData = res.data;\r\n      });\r\n    },\r\n    //货主change事件\r\n    goodsOwnerChangeEvent(val) {\r\n      var configurationOrderItemList=this.shop_user.configurationOrderItemList\r\n      if (configurationOrderItemList.length > 0) {\r\n        this.$confirm(\"切换货主后，已选商品会清除，确认切换货主吗？\", \"提示\", {\r\n          confirmButtonText: \"确定\",\r\n          cancelButtonText: \"取消\",\r\n          type: \"warning\"\r\n        })\r\n          .then(() => {\r\n           this.shop_user.configurationOrderItemList=[]\r\n           this.getOwnerIdAndCode(val);\r\n          })\r\n          .catch(action => {\r\n            this.shop_user.goodsOwner = this.tmpGoodsOwner;\r\n            this.getOwnerIdAndCode(this.shop_user.goodsOwner);\r\n          });\r\n      } else {\r\n        this.getOwnerIdAndCode(val);\r\n      }\r\n    },\r\n    //得到货主的Id和Code\r\n    getOwnerIdAndCode(val){\r\n      var goodsOwner = this.goodsOwnerData.find(\r\n        item => item.name == val\r\n      )\r\n      this.shop_user.goodsOwner=goodsOwner.code;\r\n      this.shop_user.ownerCode=goodsOwner.code;\r\n      this.shop_user.ownerId = goodsOwner.id;\r\n    },\r\n    //添加商品按钮得点击事件\r\n    addShopBtnClickEvent() {\r\n      if (!this.shop_user.goodsOwner) {\r\n        this.$message.error(\"请选择货主\");\r\n        return;\r\n      }\r\n      this.gridData=[]\r\n      //得到商品数据\r\n      this.getProductGoodsData();\r\n    },\r\n    //得到商品列表数据\r\n    getProductGoodsData(){\r\n      this.addShopLoading=true;\r\n      this.signData.ownerId=this.shop_user.ownerCode\r\n      // this.signData.warehouseCode=this.shop_user.warehouseCode\r\n      this.dialogTableVisible = true;\r\n      this.request(this.api.product.productGoods_listProductGoods4Wms,this.signData,true).then(res => {\r\n        this.addShopLoading=false;\r\n        console.log(res);\r\n        this.gridData=res.data;\r\n        this.dialogtotalCount=res.totalCount;\r\n      });\r\n    },\r\n    //导入商品按钮的点击事件\r\n    exportExcelShopData() {\r\n      console.log(\"exportExcelShopData-----\");\r\n    },\r\n    //删除Btn点击事件\r\n    deleteBtnClick(id) {\r\n      var index=this.shop_user.configurationOrderItemList.findIndex(item=>item.id==id)\r\n      this.shop_user.configurationOrderItemList.splice(index,1);\r\n    },\r\n    //提交订单Btn得点击事件\r\n    submitOrderBtnClickEvent(){ \r\n      if(this.shop_user.configurationOrderItemList.length==0){\r\n        this.$message.error(\"提交商品不能为空,请添加商品\");\r\n        return;\r\n      }else{\r\n        var flag=this.shop_user.configurationOrderItemList.every(item =>item.orderQuantity==0)\r\n        if(flag){\r\n          this.$message.error(\"提交商品订货数量不能全部为0\");  \r\n          return;\r\n        }\r\n      }\r\n      this.$refs.ruleForm.validate(valid => {\r\n        if (valid) {\r\n          this.shop_user.configurationOrderItemList=this.shop_user.configurationOrderItemList.filter(item =>item.orderQuantity>0)\r\n          this.shop_user.configurationOrderItemList.forEach(item =>{\r\n            item.goodsCode=item.code,\r\n            item.goodsOwner=item.ownerId,\r\n            item.color=item.colorName,\r\n            item.size=item.sizeName,\r\n            item.brand=item.brandName\r\n          })\r\n          this.request(this.api.warehouse.warehouseBase_receiveOrder_insert,this.shop_user).then(res=>{\r\n            console.log(res);\r\n            this.$message({\r\n              message: '保存成功',\r\n              type: 'success',\r\n              duration:1500\r\n            });\r\n            setTimeout(() => {\r\n              this.$router.go(-1);\r\n            }, 1500);\r\n          })\r\n        } else {\r\n          console.log(\"error submit!!\");\r\n          return false;\r\n        }\r\n      });\r\n    },\r\n    //表单搜索-dialog\r\n    searchFormData() {\r\n      this.signData.pageIndex=1;\r\n      this.getProductGoodsData();\r\n    },\r\n    //确认Btn的按钮点击事件-dialog\r\n    sureBtnClickEvent() {\r\n      if(this.multipleSelectionData){\r\n        this.multipleSelectionData.forEach(item=>{\r\n          this.$set(item,'orderQuantity',0)\r\n        })\r\n        let arr= this.$common.deepCopy(this.multipleSelectionData);\r\n        this.shop_user.configurationOrderItemList=[...this.shop_user.configurationOrderItemList,...arr];\r\n      }\r\n      this.hideAddShopDialog();\r\n      //去除重复对象\r\n      this.shop_user.configurationOrderItemList=this.deteleItemListObject(this.shop_user.configurationOrderItemList)\r\n    },\r\n    //去除数组中的重复对象\r\n    deteleItemListObject(arr) {\r\n      var hash = {};\r\n      const newArr = arr.reduce((item, next) => {\r\n        hash[next.id] ? \"\" : (hash[next.id] = true && item.push(next));\r\n        return item;\r\n      }, []);\r\n      return newArr;\r\n    },\r\n    //表格选择项改变时触发-dialog\r\n    selectionChange(val) {\r\n      this.multipleSelectionData = val;\r\n    },\r\n    //添加商品的dialog的隐藏事件\r\n    hideAddShopDialog() {\r\n      this.$refs.formData.resetFields();\r\n      this.dialogTableVisible = false;\r\n      this.multipleSelectionData =[]\r\n    },\r\n    //每页条数改变时-dialogTable\r\n    dialogTableHandleSizeChange(page) {\r\n      this.signData.pageSize = page;\r\n      this.getProductGoodsData();\r\n    },\r\n    //当前页改变时-dialogTable\r\n    dialogTableHandleCurrentChange(page) {\r\n      this.signData.pageIndex = page;\r\n      this.getProductGoodsData();\r\n    }\r\n  }\r\n};\r\n</script>\r\n\r\n<style lang=\"less\" scoped>\r\n.detail_div {\r\n  margin: 10px;\r\n  .middle-msg {\r\n    background-color: #fff;\r\n    margin: 10px 0;\r\n    padding: 10px 20px;\r\n    font-size: 13px;\r\n    .middle-title-div {\r\n      border-bottom: 1px solid #dcdfe6;\r\n      padding-bottom: 10px;\r\n      margin-bottom: 20px;\r\n      label {\r\n        color: #222;\r\n        margin-right: 10px;\r\n      }\r\n    }\r\n    span {\r\n      display: inline-block;\r\n      margin-bottom: 15px;\r\n      color: #2c3e50;\r\n      padding-left: 20px;\r\n    }\r\n  }\r\n  .table_div {\r\n    padding: 0 15px;\r\n    margin: 10px 0;\r\n    background-color: #fff;\r\n    .title-div {\r\n      padding-top: 20px;\r\n      padding-bottom: 10px;\r\n      border-bottom: 1px solid #ccc;\r\n      label {\r\n        color: #222;\r\n        font-size: 13px;\r\n        margin-right: 10px;\r\n      }\r\n    }\r\n  }\r\n}\r\n.dialog-div {\r\n  border-bottom: 1px solid #dcdfe6;\r\n  margin-bottom: 10px;\r\n  padding-left: 20px;\r\n  height: 53px;\r\n}\r\n.pagination {\r\n  text-align: right;\r\n  background-color: #fff;\r\n}\r\n</style>\r\n\r\n"],"sourceRoot":"src/views/warehouse/warehouse_center/warehouse_manager/receive_order"}]}
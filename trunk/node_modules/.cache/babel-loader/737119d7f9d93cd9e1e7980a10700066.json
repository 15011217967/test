{"remainingRequest":"C:\\Users\\EDZ\\Desktop\\研发项目\\vue-project\\trunk\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\EDZ\\Desktop\\研发项目\\vue-project\\trunk\\src\\store\\modules\\classSelect.js","dependencies":[{"path":"C:\\Users\\EDZ\\Desktop\\研发项目\\vue-project\\trunk\\src\\store\\modules\\classSelect.js","mtime":1572415123471},{"path":"C:\\Users\\EDZ\\Desktop\\研发项目\\vue-project\\trunk\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1558492728398},{"path":"C:\\Users\\EDZ\\Desktop\\研发项目\\vue-project\\trunk\\node_modules\\babel-loader\\lib\\index.js","mtime":1558492720858}],"contextDependencies":[],"result":["import \"regenerator-runtime/runtime\";\nimport _asyncToGenerator from \"C:\\\\Users\\\\EDZ\\\\Desktop\\\\\\u7814\\u53D1\\u9879\\u76EE\\\\vue-project\\\\trunk\\\\node_modules\\\\@babel\\\\runtime-corejs2/helpers/esm/asyncToGenerator\";\nimport * as api from '@/api/product';\n\nfunction getData() {\n  var da = localStorage.getItem('classSelect');\n\n  if (da) {\n    return JSON.parse(da);\n  }\n\n  return da;\n}\n\nfunction setClassZtree(res) {\n  localStorage.removeItem('classSelect');\n  var _data = res.data; // console.log(res)\n\n  function toTree(data, parent_id) {\n    var tree = [];\n    var temp;\n\n    for (var i = 0; i < data.length; i++) {\n      if (data[i].parentId == parent_id) {\n        var obj = data[i];\n        temp = toTree(data, data[i].id);\n\n        if (temp.length > 0) {\n          obj.children = temp;\n        }\n\n        tree.push(obj);\n      }\n    }\n\n    return tree;\n  }\n\n  var tree;\n  tree = toTree(_data, null);\n  localStorage.setItem('classSelect', JSON.stringify(tree));\n  return tree;\n}\n\nvar ClassSelect = {\n  state: {\n    classData: getData() //class 数据\n\n  },\n  mutations: {\n    SET_CLASS: function SET_CLASS(state, payload) {\n      state.classData = setClassZtree(payload);\n    }\n  },\n  actions: {\n    GET_CATEGORIES: function () {\n      var _GET_CATEGORIES = _asyncToGenerator(\n      /*#__PURE__*/\n      regeneratorRuntime.mark(function _callee(context, payload) {\n        return regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                _context.next = 2;\n                return this._vm.request(api.categories_list, {\n                  parentId: null\n                }, true).then(function (res) {\n                  context.commit('SET_CLASS', res);\n                });\n\n              case 2:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this);\n      }));\n\n      function GET_CATEGORIES(_x, _x2) {\n        return _GET_CATEGORIES.apply(this, arguments);\n      }\n\n      return GET_CATEGORIES;\n    }()\n  }\n};\nexport default ClassSelect;",{"version":3,"sources":["C:\\Users\\EDZ\\Desktop\\研发项目\\vue-project\\trunk\\src\\store\\modules\\classSelect.js"],"names":["api","getData","da","localStorage","getItem","JSON","parse","setClassZtree","res","removeItem","_data","data","toTree","parent_id","tree","temp","i","length","parentId","obj","id","children","push","setItem","stringify","ClassSelect","state","classData","mutations","SET_CLASS","payload","actions","GET_CATEGORIES","context","_vm","request","categories_list","then","commit"],"mappings":";;AAAA,OAAO,KAAKA,GAAZ,MAAqB,eAArB;;AACA,SAASC,OAAT,GAAmB;AACf,MAAIC,EAAE,GAAGC,YAAY,CAACC,OAAb,CAAqB,aAArB,CAAT;;AACA,MAAIF,EAAJ,EAAQ;AACJ,WAAOG,IAAI,CAACC,KAAL,CAAWJ,EAAX,CAAP;AACH;;AACD,SAAOA,EAAP;AACH;;AACD,SAASK,aAAT,CAAuBC,GAAvB,EAA2B;AACvBL,EAAAA,YAAY,CAACM,UAAb,CAAwB,aAAxB;AACA,MAAIC,KAAK,GAACF,GAAG,CAACG,IAAd,CAFuB,CAGtB;;AACD,WAASC,MAAT,CAAgBD,IAAhB,EAAqBE,SAArB,EAAgC;AAC5B,QAAIC,IAAI,GAAG,EAAX;AACA,QAAIC,IAAJ;;AACA,SAAK,IAAIC,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGL,IAAI,CAACM,MAAzB,EAAiCD,CAAC,EAAlC,EAAsC;AAClC,UAAIL,IAAI,CAACK,CAAD,CAAJ,CAAQE,QAAR,IAAoBL,SAAxB,EAAmC;AAC/B,YAAIM,GAAG,GAAGR,IAAI,CAACK,CAAD,CAAd;AACAD,QAAAA,IAAI,GAAGH,MAAM,CAACD,IAAD,EAAOA,IAAI,CAACK,CAAD,CAAJ,CAAQI,EAAf,CAAb;;AACA,YAAIL,IAAI,CAACE,MAAL,GAAc,CAAlB,EAAqB;AACrBE,UAAAA,GAAG,CAACE,QAAJ,GAAeN,IAAf;AACC;;AACDD,QAAAA,IAAI,CAACQ,IAAL,CAAUH,GAAV;AACH;AACJ;;AACD,WAAOL,IAAP;AACH;;AAED,MAAIA,IAAJ;AACAA,EAAAA,IAAI,GAAGF,MAAM,CAACF,KAAD,EAAQ,IAAR,CAAb;AACAP,EAAAA,YAAY,CAACoB,OAAb,CAAqB,aAArB,EAAoClB,IAAI,CAACmB,SAAL,CAAeV,IAAf,CAApC;AACA,SAAOA,IAAP;AACH;;AACD,IAAMW,WAAW,GAAG;AAChBC,EAAAA,KAAK,EAAC;AACFC,IAAAA,SAAS,EAAC1B,OAAO,EADf,CACmB;;AADnB,GADU;AAIhB2B,EAAAA,SAAS,EAAE;AACPC,IAAAA,SAAS,EAAG,mBAACH,KAAD,EAAOI,OAAP,EAAmB;AAC3BJ,MAAAA,KAAK,CAACC,SAAN,GAAkBpB,aAAa,CAACuB,OAAD,CAA/B;AACH;AAHM,GAJK;AAShBC,EAAAA,OAAO,EAAE;AACEC,IAAAA,cADF;AAAA;AAAA;AAAA,+CACkBC,OADlB,EAC0BH,OAD1B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,uBAEK,KAAKI,GAAL,CAASC,OAAT,CAAiBnC,GAAG,CAACoC,eAArB,EAAqC;AAAClB,kBAAAA,QAAQ,EAAC;AAAV,iBAArC,EAAqD,IAArD,EACLmB,IADK,CACA,UAAA7B,GAAG,EAAE;AACPyB,kBAAAA,OAAO,CAACK,MAAR,CAAe,WAAf,EAA2B9B,GAA3B;AACH,iBAHK,CAFL;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;AATO,CAApB;AAkBA,eAAeiB,WAAf","sourcesContent":["import * as api from '@/api/product'\r\nfunction getData() {\r\n    var da = localStorage.getItem('classSelect');\r\n    if (da) {\r\n        return JSON.parse(da);\r\n    }\r\n    return da;\r\n}\r\nfunction setClassZtree(res){\r\n    localStorage.removeItem('classSelect');\r\n    let _data=res.data;\r\n     // console.log(res)\r\n    function toTree(data,parent_id) {\r\n        var tree = [];\r\n        var temp;\r\n        for (var i = 0; i < data.length; i++) {\r\n            if (data[i].parentId == parent_id) {\r\n                var obj = data[i];\r\n                temp = toTree(data, data[i].id);\r\n                if (temp.length > 0) {\r\n                obj.children = temp;\r\n                }\r\n                tree.push(obj);\r\n            }\r\n        }\r\n        return tree;\r\n    }\r\n    \r\n    var tree;\r\n    tree = toTree(_data, null);\r\n    localStorage.setItem('classSelect', JSON.stringify(tree));\r\n    return tree\r\n}\r\nconst ClassSelect = {\r\n    state:{\r\n        classData:getData(), //class 数据\r\n    },\r\n    mutations: {\r\n        SET_CLASS : (state,payload) => {\r\n            state.classData = setClassZtree(payload)\r\n        }\r\n    },\r\n    actions: {\r\n        async  GET_CATEGORIES (context,payload){\r\n            await this._vm.request(api.categories_list,{parentId:null},true)\r\n            .then(res=>{\r\n                context.commit('SET_CLASS',res);\r\n            })\r\n        }\r\n    }\r\n}\r\nexport default ClassSelect"]}]}
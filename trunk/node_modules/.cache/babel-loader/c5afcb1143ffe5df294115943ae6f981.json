{"remainingRequest":"C:\\Users\\EDZ\\Desktop\\研发项目\\vue-project\\trunk\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\EDZ\\Desktop\\研发项目\\vue-project\\trunk\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!C:\\Users\\EDZ\\Desktop\\研发项目\\vue-project\\trunk\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\EDZ\\Desktop\\研发项目\\vue-project\\trunk\\src\\views\\product\\components\\CommondityBasicAndTag.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\EDZ\\Desktop\\研发项目\\vue-project\\trunk\\src\\views\\product\\components\\CommondityBasicAndTag.vue","mtime":1585053690051},{"path":"C:\\Users\\EDZ\\Desktop\\研发项目\\vue-project\\trunk\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1558492728398},{"path":"C:\\Users\\EDZ\\Desktop\\研发项目\\vue-project\\trunk\\node_modules\\babel-loader\\lib\\index.js","mtime":1558492720858},{"path":"C:\\Users\\EDZ\\Desktop\\研发项目\\vue-project\\trunk\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1558492728398},{"path":"C:\\Users\\EDZ\\Desktop\\研发项目\\vue-project\\trunk\\node_modules\\vue-loader\\lib\\index.js","mtime":1558492728890}],"contextDependencies":[],"result":["import \"core-js/modules/es6.array.find-index\";\nimport \"core-js/modules/es6.function.name\";\nimport \"core-js/modules/es6.array.find\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nexport default {\n  name: \"basic-and-tag\",\n  props: {\n    productFormData: {\n      type: Object\n    },\n    editDisabled: {\n      type: Boolean,\n      default: false\n    },\n    showDisabled: {\n      type: Boolean,\n      default: false\n    }\n  },\n  data: function data() {\n    return {\n      //商品状态集合\n      productStatus: {\n        brandActive: false,\n        brandLoading: true,\n        brandOwnerActive: false,\n        brandOwnerLoading: true,\n        DesignCompanyActive: false,\n        DesignCompanyLoading: true\n      },\n      activeName: \"tag\",\n      //标签切换默认\n      brandOptions: [],\n      //品牌\n      brandOwnerOptions: [],\n      //品牌商\n      designCompanyOptions: [],\n      //设计商\n      ownerOptions: [] //货主\n\n    };\n  },\n  created: function created() {\n    //获取货主\n    this.getOwnerOptions();\n  },\n  methods: {\n    //做延时加载下拉数据\n    handleVisibleChange: function handleVisibleChange(type, active, str) {\n      if (!!type) {\n        if (!active) {\n          switch (str) {\n            //品牌\n            case \"brand\":\n              this.productStatus.brandActive = true;\n              this.productStatus.brandLoading = false;\n              this.getBrandOption();\n              break;\n            //品牌商\n\n            case \"brandOwner\":\n              this.productStatus.brandOwnerActive = true;\n              this.productStatus.brandOwnerLoading = false;\n              this.getBrandOwnerOption();\n              break;\n            //设计商\n\n            case \"designCompany\":\n              this.productStatus.designCompanyActive = true;\n              this.productStatus.designCompanyLoading = false;\n              this.getDesignCompanyOption();\n              break;\n\n            default:\n              break;\n          }\n        }\n      }\n    },\n    //获取货主\n    getOwnerOptions: function getOwnerOptions() {\n      var _this = this;\n\n      this.request(this.api.warehouse.warehouseBase_goodsOwner_list, {\n        valid: true,\n        orderBy: 'create_time'\n      }, true).then(function (res) {\n        _this.ownerOptions = res.data;\n      });\n    },\n    //获取设计商\n    getDesignCompanyOption: function getDesignCompanyOption() {\n      var _this2 = this;\n\n      this.request(this.api.product.designCompany_list, {\n        valid: true\n      }, true).then(function (data) {\n        var _data = data.data;\n        _this2.designCompanyOptions = _data;\n      });\n    },\n    //获取品牌商\n    getBrandOwnerOption: function getBrandOwnerOption() {\n      var _this3 = this;\n\n      this.request(this.api.product.productBrandOwner_list, {\n        valid: true\n      }, true).then(function (data) {\n        var _data = data.data;\n        _this3.brandOwnerOptions = _data;\n      });\n    },\n    //试试获取封装属性\n    //品牌商ID改变时获取ID 同时赋值name\n    brandOwnerGet: function brandOwnerGet(val) {\n      var _obj = this.brandOwnerOptions.find(function (item) {\n        return item.id == val;\n      });\n\n      this.productFormData.brandOwnerName = _obj.name;\n      this.productFormData.brandOwnerId = _obj.id;\n      this.productFormData.brandOwnerCode = _obj.code;\n      this.productFormData.brandOwnerAddress = _obj.address;\n      this.productFormData.postalCode = _obj.postalCode;\n    },\n    //获取品牌\n    getBrandOption: function getBrandOption() {\n      var _this4 = this;\n\n      this.request(this.api.product.productBrand_list, {\n        valid: true\n      }, true).then(function (data) {\n        var _data = data.data;\n        _this4.brandOptions = _data;\n      });\n    },\n    //货主id \n    ownerGet: function ownerGet(val) {\n      var _obj = this.ownerOptions.find(function (item) {\n        return item.code == val;\n      });\n\n      this.productFormData.ownerName = _obj.name;\n      this.productFormData.ownerCode = _obj.code;\n      this.productFormData.ownerId = _obj.code;\n    },\n    //品牌ID改变时获取ID 同时赋值name\n    brandIdGet: function brandIdGet(val) {\n      var _obj = this.brandOptions.find(function (item) {\n        return item.id == val;\n      });\n\n      this.productFormData.brandName = _obj.name;\n      this.productFormData.brandCode = _obj.code;\n      this.productFormData.brandId = _obj.id;\n    },\n    tagBrandIdGet: function tagBrandIdGet(val) {\n      var _obj = this.brandOptions.find(function (item) {\n        return item.id == val;\n      });\n\n      this.productFormData.tagBrandName = _obj.name;\n      this.productFormData.tagBrandCode = _obj.code;\n      this.productFormData.tagBrandId = _obj.id;\n    },\n    //设计商ID改变时获取ID 同时赋值name\n    designCompanyGet: function designCompanyGet(val) {\n      var _obj = this.designCompanyOptions.find(function (item) {\n        return item.id == val;\n      });\n\n      this.productFormData.designCompanyName = _obj.name;\n      this.productFormData.designCompanyCode = _obj.code;\n      this.productFormData.designCompanyId = _obj.id;\n    },\n    //季节波段\n    seasonalStyleGet: function seasonalStyleGet(name) {\n      var seasonal = this.seasonalStyleOptions.find(function (item) {\n        return item.name == name;\n      });\n      this.productFormData.seasonalStyleCode = seasonal.code;\n    },\n    //安全类别选择\n    handleSafetyGradeSelect: function handleSafetyGradeSelect(item) {// console.log(item);\n    },\n    //安全类别搜索\n    querySafetyGradeSearch: function querySafetyGradeSearch(queryString, cb) {\n      if (!!queryString) {\n        this.request(this.api.product.safetyGrade_list, {\n          searchWords: queryString\n        }, true).then(function (res) {\n          cb(res.data);\n        });\n      }\n    },\n    //执行标准搜索\n    queryPerformanceStandardSearch: function queryPerformanceStandardSearch(str, cb) {\n      if (!!str) {\n        this.request(this.api.product.performanceStandard_list, {\n          searchWords: str\n        }, true).then(function (res) {\n          cb(res.data);\n        });\n      }\n    },\n    //执行标准选择\n    handlePerformanceStandardSelect: function handlePerformanceStandardSelect(item) {},\n    //基本信息存储默认值\n    basicSelectGet: function basicSelectGet(vId) {\n      var obj = {};\n      var basicData = this.productFormData.productInfoAttrs,\n          basicLen = basicData.length;\n\n      for (var i = 0; i < basicLen; i++) {\n        obj = basicData[i]._children.find(function (item) {\n          //这里的userList就是上面遍历的数据源\n          return item.id === vId; //筛选出匹配数据\n        });\n\n        if (obj) {\n          break;\n        }\n      } //找到匹配数组的下标\n\n\n      var index = this.productFormData.productInfoAttrs.findIndex(function (elem) {\n        return elem.infoAttrId == vId;\n      }); //补充数组数据\n\n      this.productFormData.productInfoAttrs[index].infoAttrName = obj.name;\n    }\n  },\n  computed: {\n    //季节波段\n    seasonalStyleOptions: function seasonalStyleOptions() {\n      var codeSet = this.$store.getters.codeData;\n\n      if (codeSet.PRO001) {\n        return codeSet.PRO001.codeItemList;\n      }\n    }\n  }\n};",{"version":3,"sources":["CommondityBasicAndTag.vue"],"names":[],"mappings":"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","sourcesContent":["<!--\r\n * @Author:elephant\r\n * @Date: 2019-11-08 16:51:02\r\n * @LastEditTime : 2020-01-17 16:12:02\r\n * @LastEditors  : Please set LastEditors\r\n * @Description: 商品中心 商品详情 基本信息和吊牌信息详情\r\n -->\r\n<template>\r\n\r\n    <el-tabs v-model=\"activeName\" class=\"basic-wrap pt-20\" type=\"card\">\r\n      <el-tab-pane label=\"基本信息\" name=\"basic\">\r\n        <h5 class=\"info\">\r\n          基本信息\r\n          <!-- <span>上次更新时间2019-02-01</span> -->\r\n        </h5>\r\n        <!-- 基本信息根据款式不同 所属的切换也不同 -->\r\n        <el-form-item\r\n          v-for=\"(item,index) in productFormData.productInfoAttrs\"\r\n          :prop=\"'productInfoAttrs.' + index + '.infoAttrId'\"\r\n          :label=\"item.infoName+ '：'\"\r\n          :key=\"index\"\r\n          :rules=\"{required: item.required, message: '请选择内容', trigger: 'change'}\"\r\n        >\r\n          <el-select\r\n            :disabled=\"showDisabled\"\r\n            placeholder=\"请选择\"\r\n            @change=\"basicSelectGet\"\r\n            class=\"input-w\"\r\n            v-model=\"item.infoAttrId\"\r\n          >\r\n            <el-option\r\n              v-for=\"list in item._children\"\r\n              :key=\"list.id\"\r\n              :label=\"list.name\"\r\n              :value=\"list.id\"\r\n            ></el-option>\r\n          </el-select>\r\n        </el-form-item>\r\n        <!-- 基本信息 END -->\r\n      </el-tab-pane>\r\n      <el-tab-pane label=\"吊牌信息\" name=\"tag\">\r\n        <h5 class=\"info\">\r\n          档案归属\r\n          <span></span>\r\n        </h5>\r\n         <el-form-item\r\n          prop=\"ownerId\"\r\n          :rules=\"{required: true, message: '请选择货主', trigger: 'change'}\"\r\n          label=\"归属货主：\"\r\n          value-key=\"code\"\r\n        >\r\n          <el-select\r\n            filterable\r\n            :disabled=\"editDisabled\"\r\n            @change=\"ownerGet\"\r\n            class=\"input-w\"\r\n            placeholder=\"请选择\"\r\n            v-model=\"productFormData.ownerName\"\r\n          >\r\n            <el-option\r\n              v-for=\"(item,index) in ownerOptions\"\r\n              :key=\"index.id\"\r\n              :label=\"item.name\"\r\n              :value=\"item.code\"\r\n            ></el-option>\r\n          </el-select>\r\n        </el-form-item>\r\n        <h5 class=\"info\">\r\n          吊牌信息\r\n          <span></span>\r\n        </h5>\r\n        <el-form-item\r\n          prop=\"name\"\r\n          :rules=\"{required: true, message: '请输入品名', trigger: 'blur'}\"\r\n          label=\"品名：\"\r\n        >\r\n          <el-input\r\n            class=\"input-w\"\r\n            :disabled=\"showDisabled\"\r\n            placeholder=\"请输入内容\"\r\n            v-model=\"productFormData.name\"\r\n          ></el-input>\r\n        </el-form-item>\r\n        <el-form-item\r\n          prop=\"brandName\"\r\n          :rules=\"{required: true, message: '请选择品牌', trigger: 'change'}\"\r\n          label=\"品牌：\"\r\n        >\r\n          <el-select\r\n            :loading=\"productStatus.brandLoading\"\r\n            @visible-change=\"handleVisibleChange($event,productStatus.brandActive,'brand')\"\r\n            filterable\r\n             value-key=\"id\"\r\n            :disabled=\"editDisabled\"\r\n            @change=\"brandIdGet\"\r\n            class=\"input-w\"\r\n            placeholder=\"请选择\"\r\n            v-model=\"productFormData.brandName\"\r\n          >\r\n            <el-option\r\n              v-for=\"(item,index) in brandOptions\"\r\n              :key=\"index.id\"\r\n              :label=\"item.name\"\r\n              :value=\"item.id\"\r\n            ></el-option>\r\n          </el-select>\r\n        </el-form-item>\r\n        <el-form-item\r\n          prop=\"tagBrandName\"\r\n          :rules=\"{required: true, message: '请选择打印品牌：', trigger: 'change'}\"\r\n          label=\"打印品牌：\"\r\n        >\r\n          <el-select\r\n            :loading=\"productStatus.brandLoading\"\r\n            @visible-change=\"handleVisibleChange($event,productStatus.brandActive,'brand')\"\r\n            filterable\r\n            value-key=\"id\"\r\n            :disabled=\"showDisabled\"\r\n            @change=\"tagBrandIdGet\"\r\n            class=\"input-w\"\r\n            placeholder=\"请选择\"\r\n            v-model=\"productFormData.tagBrandName\"\r\n          >\r\n            <el-option\r\n              v-for=\"(item,index) in brandOptions\"\r\n              :key=\"index.id\"\r\n              :label=\"item.name\"\r\n              :value=\"item.id\"\r\n            ></el-option>\r\n          </el-select>\r\n        </el-form-item>\r\n        <el-form-item\r\n          prop=\"originalCode\"\r\n          :rules=\"{required: true, message: '请输入原始款号', trigger: 'blur'}\"\r\n          label=\"原始款号：\"\r\n        >\r\n          <el-input\r\n            v-model=\"productFormData.originalCode\"\r\n            :disabled=\"editDisabled\"\r\n            class=\"input-w\"\r\n            placeholder=\"请输入原始款号\"\r\n          ></el-input>\r\n        </el-form-item>\r\n        <el-form-item\r\n          prop=\"seasonalStyle\"\r\n          :rules=\"{required: true, message: '请选择季节波段', trigger: 'change'}\"\r\n          label=\"季节波段：\"\r\n        >\r\n          <el-select\r\n            :disabled=\"editDisabled\"\r\n            class=\"input-w\"\r\n            @change=\"seasonalStyleGet\"\r\n            placeholder=\"请选择\"\r\n            v-model=\"productFormData.seasonalStyle\"\r\n          >\r\n            <el-option\r\n              v-for=\"(item,index) in seasonalStyleOptions\"\r\n              :key=\"index.code\"\r\n              :label=\"item.name\"\r\n              :value=\"item.name\"\r\n            ></el-option>\r\n          </el-select>\r\n        </el-form-item>\r\n        <el-form-item prop=\"popularYear\" label=\"年份：\">\r\n          <el-date-picker\r\n            :disabled=\"showDisabled\"\r\n            class=\"input-w\"\r\n            v-model=\"productFormData.popularYear\"\r\n            type=\"year\"\r\n            value-format=\"yyyy\"\r\n            placeholder=\"选择年\"\r\n          ></el-date-picker>\r\n        </el-form-item>\r\n        <el-form-item prop=\"designCompanyName\" label=\"设计商：\">\r\n          <el-select\r\n            :disabled=\"showDisabled\"\r\n            @change=\"designCompanyGet\"\r\n            class=\"input-w\"\r\n            placeholder=\"请选择\"\r\n            :loading=\"productStatus.designCompanyLoading\"\r\n            @visible-change=\"handleVisibleChange($event,productStatus.designCompanyActive,'designCompany')\"\r\n            filterable\r\n            value-key=\"id\"\r\n            v-model=\"productFormData.designCompanyName\"\r\n          >\r\n            <el-option\r\n              v-for=\"(item,index) in designCompanyOptions\"\r\n              :key=\"index.id\"\r\n              :label=\"item.name\"\r\n              :value=\"item.id\"\r\n            ></el-option>\r\n          </el-select>\r\n        </el-form-item>\r\n        <el-form-item prop=\"brandOwnerName\" label=\"品牌商：\">\r\n          <el-select\r\n            :disabled=\"showDisabled\"\r\n            @change=\"brandOwnerGet\"\r\n            value-key=\"id\"\r\n            :loading=\"productStatus.brandOwnerLoading\"\r\n            @visible-change=\"handleVisibleChange($event,productStatus.brandOwnerActive,'brandOwner')\"\r\n            filterable\r\n            class=\"input-w\"\r\n            placeholder=\"请选择\"\r\n            v-model=\"productFormData.brandOwnerName\"\r\n          >\r\n            <el-option\r\n              v-for=\"(item,index) in brandOwnerOptions\"\r\n              :key=\"index.id\"\r\n              :label=\"item.name\"\r\n              :value=\"item.id\"\r\n            ></el-option>\r\n          </el-select>\r\n        </el-form-item>\r\n        <el-form-item prop=\"performanceStandard\" label=\"执行标准：\">\r\n           <el-autocomplete\r\n            class=\"input-w\"\r\n            :debounce=\"500\"\r\n            value-key=\"name\"\r\n            v-model=\"productFormData.performanceStandard\"\r\n            :fetch-suggestions=\"queryPerformanceStandardSearch\"\r\n            placeholder=\"请输入内容\"\r\n            @select=\"handlePerformanceStandardSelect\"\r\n          ></el-autocomplete>\r\n        </el-form-item>\r\n        <el-form-item prop=\"qualityInspector\" label=\"检验员：\">\r\n          <el-input\r\n            :disabled=\"showDisabled\"\r\n            class=\"input-w\"\r\n            placeholder=\"请输入内容\"\r\n            v-model=\"productFormData.qualityInspector\"\r\n          ></el-input>\r\n        </el-form-item>\r\n        <el-form-item prop=\"lining\" label=\"里料：\">\r\n          <el-input\r\n            class=\"input-w\"\r\n            :disabled=\"showDisabled\"\r\n            placeholder=\"请输入内容\"\r\n            v-model=\"productFormData.lining\"\r\n          ></el-input>\r\n        </el-form-item>\r\n        <el-form-item prop=\"ingredients\" label=\"配料：\">\r\n          <el-input\r\n            class=\"input-w\"\r\n            :disabled=\"showDisabled\"\r\n            placeholder=\"请输入内容\"\r\n            v-model=\"productFormData.ingredients\"\r\n          ></el-input>\r\n        </el-form-item>\r\n        <el-form-item prop=\"filler\" label=\"填充物：\">\r\n          <el-input\r\n            class=\"input-w\"\r\n            :disabled=\"showDisabled\"\r\n            placeholder=\"请输入内容\"\r\n            v-model=\"productFormData.filler\"\r\n          ></el-input>\r\n        </el-form-item>\r\n        <el-form-item prop=\"fabric\" label=\"面料：\">\r\n          <el-input\r\n            class=\"input-w\"\r\n            :disabled=\"showDisabled\"\r\n            placeholder=\"请输入内容\"\r\n            v-model=\"productFormData.fabric\"\r\n          ></el-input>\r\n        </el-form-item>\r\n        <el-form-item prop=\"level\" label=\"等级：\">\r\n          <el-input\r\n            class=\"input-w\"\r\n            :disabled=\"showDisabled\"\r\n            placeholder=\"请输入内容\"\r\n            v-model=\"productFormData.level\"\r\n          ></el-input>\r\n        </el-form-item>\r\n        <el-form-item prop=\"postalCode\" label=\"邮编：\">\r\n          <el-input\r\n            class=\"input-w\"\r\n            :disabled=\"showDisabled\"\r\n            placeholder=\"请输入内容\"\r\n            v-model=\"productFormData.postalCode\"\r\n          ></el-input>\r\n        </el-form-item>\r\n        <el-form-item prop=\"safetyGrade\" label=\"安全类别：\">\r\n          <el-autocomplete\r\n            class=\"input-w\"\r\n            :debounce=\"500\"\r\n            value-key=\"name\"\r\n            v-model=\"productFormData.safetyGrade\"\r\n            :fetch-suggestions=\"querySafetyGradeSearch\"\r\n            placeholder=\"请输入内容\"\r\n            @select=\"handleSafetyGradeSelect\"\r\n          ></el-autocomplete>\r\n        </el-form-item>\r\n        <el-form-item prop=\"brandOwnerAddress\" label=\"地址：\">\r\n          <el-input\r\n            type=\"textarea\"\r\n            class=\"input-w-2\"\r\n            :disabled=\"showDisabled\"\r\n            :autosize=\"{ minRows: 2, maxRows: 4}\"\r\n            placeholder=\"请输入内容\"\r\n            v-model=\"productFormData.brandOwnerAddress\"\r\n          ></el-input>\r\n        </el-form-item>\r\n      </el-tab-pane>\r\n    </el-tabs>\r\n  \r\n</template>\r\n<script>\r\nexport default {\r\n  name: \"basic-and-tag\",\r\n  props: {\r\n    productFormData: {\r\n      type: Object\r\n    },\r\n    editDisabled:{\r\n        type:Boolean,\r\n        default:false\r\n    },\r\n    showDisabled:{\r\n        type:Boolean,\r\n        default:false\r\n    },\r\n  },\r\n  data() {\r\n    return {\r\n      //商品状态集合\r\n      productStatus: {\r\n        brandActive: false,\r\n        brandLoading: true,\r\n        brandOwnerActive: false,\r\n        brandOwnerLoading: true,\r\n        DesignCompanyActive: false,\r\n        DesignCompanyLoading: true\r\n      },\r\n      activeName:\"tag\",\r\n      //标签切换默认\r\n      brandOptions: [], //品牌\r\n      brandOwnerOptions: [], //品牌商\r\n      designCompanyOptions: [], //设计商\r\n      ownerOptions: [],//货主\r\n    };\r\n  },\r\n  created() {\r\n    //获取货主\r\n    this.getOwnerOptions();\r\n  },\r\n  methods: {\r\n    //做延时加载下拉数据\r\n    handleVisibleChange(type, active, str) {\r\n      if (!!type) {\r\n        if (!active) {\r\n          switch (str) {\r\n            //品牌\r\n            case \"brand\":\r\n              this.productStatus.brandActive = true;\r\n              this.productStatus.brandLoading = false;\r\n              this.getBrandOption();\r\n              break;\r\n            //品牌商\r\n            case \"brandOwner\":\r\n              this.productStatus.brandOwnerActive = true;\r\n              this.productStatus.brandOwnerLoading = false;\r\n              this.getBrandOwnerOption();\r\n              break;\r\n            //设计商\r\n            case \"designCompany\":\r\n              this.productStatus.designCompanyActive = true;\r\n              this.productStatus.designCompanyLoading = false;\r\n              this.getDesignCompanyOption();\r\n              break;\r\n            default:\r\n              break;\r\n          }\r\n        }\r\n      }\r\n    },\r\n    //获取货主\r\n    getOwnerOptions(){\r\n       this.request(this.api.warehouse.warehouseBase_goodsOwner_list, {valid: true,orderBy:'create_time'},true).then(\r\n        res => {\r\n          this.ownerOptions = res.data;\r\n        }\r\n      );\r\n    },\r\n    //获取设计商\r\n    getDesignCompanyOption() {\r\n      this.request(\r\n        this.api.product.designCompany_list,\r\n        { valid: true },\r\n        true\r\n      ).then(data => {\r\n        let _data = data.data;\r\n        this.designCompanyOptions = _data;\r\n      });\r\n    },\r\n    //获取品牌商\r\n    getBrandOwnerOption() {\r\n      this.request(\r\n        this.api.product.productBrandOwner_list,\r\n        {\r\n          valid: true\r\n        },\r\n        true\r\n      ).then(data => {\r\n        let _data = data.data;\r\n        this.brandOwnerOptions = _data;\r\n      });\r\n    },\r\n    //试试获取封装属性\r\n    //品牌商ID改变时获取ID 同时赋值name\r\n    brandOwnerGet(val) {\r\n      let _obj = this.brandOwnerOptions.find(item => item.id == val);\r\n      this.productFormData.brandOwnerName = _obj.name;\r\n      this.productFormData.brandOwnerId= _obj.id;\r\n      this.productFormData.brandOwnerCode = _obj.code;\r\n      this.productFormData.brandOwnerAddress = _obj.address;\r\n      this.productFormData.postalCode = _obj.postalCode;\r\n    },\r\n    //获取品牌\r\n    getBrandOption() {\r\n      this.request(\r\n        this.api.product.productBrand_list,\r\n        { valid: true },\r\n        true\r\n      ).then(data => {\r\n        let _data = data.data;\r\n        this.brandOptions = _data;\r\n      });\r\n    },\r\n    //货主id \r\n    ownerGet(val){\r\n      let _obj = this.ownerOptions.find(item => item.code == val);\r\n      this.productFormData.ownerName = _obj.name;\r\n      this.productFormData.ownerCode = _obj.code;\r\n      this.productFormData.ownerId = _obj.code;\r\n\r\n    },\r\n    //品牌ID改变时获取ID 同时赋值name\r\n    brandIdGet(val) {\r\n      let _obj = this.brandOptions.find(item => item.id == val);\r\n      this.productFormData.brandName = _obj.name;\r\n      this.productFormData.brandCode = _obj.code;\r\n      this.productFormData.brandId = _obj.id;\r\n    },\r\n    tagBrandIdGet(val) {\r\n      let _obj = this.brandOptions.find(item => item.id == val);\r\n      this.productFormData.tagBrandName = _obj.name;\r\n      this.productFormData.tagBrandCode = _obj.code;\r\n      this.productFormData.tagBrandId =  _obj.id;\r\n    },\r\n    //设计商ID改变时获取ID 同时赋值name\r\n    designCompanyGet(val) {\r\n      let _obj = this.designCompanyOptions.find(item => item.id == val);\r\n      this.productFormData.designCompanyName = _obj.name;\r\n      this.productFormData.designCompanyCode = _obj.code;\r\n      this.productFormData.designCompanyId = _obj.id;\r\n\r\n    },\r\n    //季节波段\r\n    seasonalStyleGet(name) {\r\n      let seasonal = this.seasonalStyleOptions.find(item => item.name == name);\r\n      this.productFormData.seasonalStyleCode = seasonal.code;\r\n    },\r\n    //安全类别选择\r\n    handleSafetyGradeSelect(item){\r\n     // console.log(item);\r\n    },\r\n    //安全类别搜索\r\n    querySafetyGradeSearch(queryString,cb){\r\n      if(!!queryString){\r\n        this.request(\r\n          this.api.product.safetyGrade_list,\r\n          { searchWords: queryString },\r\n          true\r\n        ).then(res => {\r\n              cb(res.data)\r\n        });\r\n      }\r\n    },\r\n    //执行标准搜索\r\n    queryPerformanceStandardSearch(str,cb){\r\n      if(!!str){\r\n        this.request(\r\n          this.api.product.performanceStandard_list,\r\n          { searchWords: str },\r\n          true\r\n        ).then(res => {\r\n            cb(res.data)\r\n        });\r\n      }\r\n    },\r\n    //执行标准选择\r\n    handlePerformanceStandardSelect(item){\r\n    },\r\n    //基本信息存储默认值\r\n    basicSelectGet(vId) {\r\n      let obj = {};\r\n      let basicData = this.productFormData.productInfoAttrs,\r\n        basicLen = basicData.length;\r\n      for (let i = 0; i < basicLen; i++) {\r\n        obj = basicData[i]._children.find(item => {\r\n          //这里的userList就是上面遍历的数据源\r\n          return item.id === vId; //筛选出匹配数据\r\n        });\r\n        if (obj) {\r\n          break;\r\n        }\r\n      }\r\n      //找到匹配数组的下标\r\n      let index = this.productFormData.productInfoAttrs.findIndex(\r\n        elem => elem.infoAttrId == vId\r\n      );\r\n      //补充数组数据\r\n      this.productFormData.productInfoAttrs[index].infoAttrName = obj.name;\r\n    },\r\n  },\r\n  computed: {\r\n    //季节波段\r\n    seasonalStyleOptions() {\r\n      let codeSet = this.$store.getters.codeData;\r\n      if (codeSet.PRO001) {\r\n        return codeSet.PRO001.codeItemList;\r\n      }\r\n    }, //执行标准\r\n    // performanceStandardOptions() {\r\n    //   let codeSet = this.$store.getters.codeData;\r\n    //   if (codeSet.PRO002) {\r\n    //     return codeSet.PRO002.codeItemList;\r\n    //   }\r\n    // },\r\n  }\r\n};\r\n</script>\r\n<style lang=\"less\" scoped>\r\n</style>"],"sourceRoot":"src/views/product/components"}]}
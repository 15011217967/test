{"remainingRequest":"C:\\Users\\EDZ\\Desktop\\研发项目\\vue-project\\trunk\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\EDZ\\Desktop\\研发项目\\vue-project\\trunk\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!C:\\Users\\EDZ\\Desktop\\研发项目\\vue-project\\trunk\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\EDZ\\Desktop\\研发项目\\vue-project\\trunk\\src\\views\\scb\\goods\\goods_details.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\EDZ\\Desktop\\研发项目\\vue-project\\trunk\\src\\views\\scb\\goods\\goods_details.vue","mtime":1576239318120},{"path":"C:\\Users\\EDZ\\Desktop\\研发项目\\vue-project\\trunk\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1558492728398},{"path":"C:\\Users\\EDZ\\Desktop\\研发项目\\vue-project\\trunk\\node_modules\\babel-loader\\lib\\index.js","mtime":1558492720858},{"path":"C:\\Users\\EDZ\\Desktop\\研发项目\\vue-project\\trunk\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1558492728398},{"path":"C:\\Users\\EDZ\\Desktop\\研发项目\\vue-project\\trunk\\node_modules\\vue-loader\\lib\\index.js","mtime":1558492728890}],"contextDependencies":[],"result":["import \"core-js/modules/es6.regexp.replace\";\nimport \"core-js/modules/es6.regexp.split\";\nimport \"core-js/modules/web.dom.iterable\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport axios from \"axios\";\nimport { getToken } from \"@/utils/auth\";\nimport codeSet from \"@/components/codeSet\";\nimport treeDept from \"@/components/treeDept\";\nimport { filter } from \"minimatch\";\nimport { get } from \"http\";\nvar token = getToken();\nexport default {\n  data: function data() {\n    return {\n      categories_getPullDownCategoriesList_data: [],\n      // 获取分类所用-分类下拉（一二级）\n      labelPosition: 'right',\n      selectArr: [1, 2, 3],\n      goodsData: [],\n      formLabelAlign: {\n        name: '53424400GM',\n        productCode: ''\n      },\n      cateIds: [],\n      merchantId: this.$route.query.merchantId,\n      productCode: this.$route.query.productCode,\n      merchantProduct_productDetail_data: {} // 商品详情info\n\n    };\n  },\n  created: function created() {\n    var that = this;\n    this.merchantProduct_productDetail();\n    this.categories_getPullDownCategoriesList(); // 获取分类所用-分类下拉（一二级）\n  },\n  methods: {\n    /**\r\n     * 获取分类所用-分类下拉（一二级）\r\n     */\n    categories_getPullDownCategoriesList: function categories_getPullDownCategoriesList() {\n      var that = this;\n      this.request(this.api.scb.categories_getPullDownCategoriesList, {\n        \"merchantId\": \"\"\n      }, true).then(function (res) {\n        that.categories_getPullDownCategoriesList_data = res;\n      });\n    },\n\n    /**\r\n     * 获取商品详情\r\n     */\n    merchantProduct_productDetail: function merchantProduct_productDetail() {\n      var _this = this;\n\n      var that = this;\n      this.request(this.api.scb.merchantProduct_productDetail, {\n        \"merchantId\": this.merchantId,\n        \"productCode\": this.productCode\n      }, true).then(function (res) {\n        _this.merchantProduct_productDetail_data = res;\n        _this.cateIds = res.cateIds;\n      });\n    },\n\n    /**\r\n     * 获取商品详情 SKU上下架\r\n     */\n    merchantProduct_onSaleOrOffSaleSKU: function merchantProduct_onSaleOrOffSaleSKU(obj) {\n      var _this2 = this;\n\n      var that = this;\n      var text = obj.onSaleStatus == 'ONSALE' ? '下架后客户无法下单，是否继续？' : '确定上架吗？';\n      this.$confirm(text, '提示', {\n        confirmButtonText: '确定',\n        cancelButtonText: '取消',\n        type: 'warning'\n      }).then(function () {\n        _this2.request(_this2.api.scb.merchantProduct_onSaleOrOffSaleSKU, {\n          \"goodsCode\": obj.goodsCode,\n          \"merchantId\": _this2.merchantId,\n          \"productCode\": _this2.productCode\n        }, true).then(function (res) {\n          _this2.merchantProduct_productDetail(); // 重新刷新列表\n\n\n          _this2.warn('操作成功！');\n        });\n      }).catch(function () {\n        _this2.$message({\n          type: 'info',\n          message: '已取消'\n        });\n      });\n    },\n\n    /**\r\n     * 获取商品修改\r\n     */\n    merchantProduct_saveProductDetail: function merchantProduct_saveProductDetail(obj) {\n      var _this3 = this;\n\n      var that = this;\n      var data = {\n        \"cateIds\": this.cateIds,\n        \"merchantId\": \"\",\n        \"merchantProductGoodsVOS\": [],\n        \"productCode\": this.productCode\n      };\n      var arr = this.merchantProduct_productDetail_data.merchantProductSKUPCDetailDTOS;\n\n      if (arr && arr.length > 0) {\n        arr.forEach(function (item) {\n          if (!item.productDiscountValue) return;\n          data.merchantProductGoodsVOS.push({\n            \"goodsCode\": null,\n            \"id\": item.id,\n            \"onSaleStatus\": null,\n            \"onSaleTime\": null,\n            \"productCodeId\": null,\n            \"productDiscountType\": 1,\n            \"productDiscountValue\": parseFloat(item.productDiscountValue)\n          });\n        });\n        var checkItem = arr.every(function (item, index) {\n          return /(^[1-9](\\.\\d)?$)|(^[0]\\.\\d$)/.test(parseFloat(item.productDiscountValue)) || !item.productDiscountValue;\n        });\n\n        if (!checkItem) {\n          this.warn('请输入正确的折扣数值！', 'warning');\n          return;\n        }\n      }\n\n      ;\n      this.request(this.api.scb.merchantProduct_saveProductDetail, data, true).then(function (res) {\n        _this3.href('/goods/goods_list');\n\n        _this3.warn('保存成功！');\n      });\n    },\n\n    /**\r\n     * 提示\r\n     * @param { String } message 提示文案\r\n     * @param { String } type 提示类型\r\n     */\n    warn: function warn(message, type) {\n      this.$message({\n        message: message,\n        type: type || \"success\"\n      });\n    },\n\n    /**\r\n     * 编辑\r\n     * @param { Object } item 当前对象\r\n     * @param { Boolean } isRead 是否可对写\r\n     * @property { Boolean }isEcho 是否是编辑\r\n     * @return { Object } Obj 返回对象\r\n     */\n    timeRedact: function timeRedact(item) {\n      var Obj = {};\n      this.href(\"discount_order_edit\", {\n        isEdit: true,\n        discountId: item.discountId,\n        type: item.type\n      });\n    },\n\n    /**\r\n     * 获取折扣列表\r\n     */\n    marketingMiddleground_discountList: function marketingMiddleground_discountList() {\n      var _this4 = this;\n\n      this.request(this.api.market.marketingMiddleground_discountList, this.filtersData).then(function (res) {\n        _this4.discountData = res;\n      });\n    },\n\n    /**\r\n     * 路由跳转\r\n     * @param { String } routeName 路由路径\r\n     * @param { Object } param 路由参数\r\n     */\n    href: function href(routeName, param) {\n      var module = '/' + this.$route.path.split('/')[1];\n      this.$router.push({\n        path: module + routeName,\n        query: param\n      });\n    },\n\n    /**\r\n     * 模糊搜索\r\n     */\n    handleSearch: function handleSearch() {\n      this.filtersData.pageIndex = 1;\n      this.filtersData.storeName = this.filtersData.storeName.replace(/(^\\s)|(\\s$)/g, \"\");\n      this.marketingMiddleground_discountList();\n    },\n\n    /**\r\n     * 搜索重置\r\n     */\n    handleResetFilters: function handleResetFilters() {\n      Object.assign(this.filtersData, {\n        pageIndex: 1,\n        // 当前页码\n        pageSize: 10,\n        // 每页数量\n        type: \"\",\n        // 门店类型\n        storeName: \"\" // 门店名称\n\n      });\n    },\n\n    /**\r\n     * 点击页数\r\n     * @param { Number } pageIndex 当前页\r\n     */\n    handleCurrentChange: function handleCurrentChange(pageIndex) {\n      this.filtersData.pageIndex = pageIndex;\n      this.marketingMiddleground_discountList();\n    },\n\n    /**\r\n     *  选择每页多少条数\r\n     *  @param { Number } pageSize 每页条数\r\n     */\n    handleSizeChange: function handleSizeChange(pageSize) {\n      this.filtersData.pageSize = pageSize;\n      this.marketingMiddleground_discountList();\n    }\n  },\n  components: {\n    codeSet: codeSet,\n    treeDept: treeDept\n  }\n};",{"version":3,"sources":["goods_details.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\r\n  <div class=\"box\">\r\n    <!-- 基本信息 -->\r\n    <h4>基本信息</h4>\r\n    <el-form class=\"mt-20\" :label-position=\"labelPosition\" label-width=\"90px\" :model=\"formLabelAlign\">\r\n      <el-form-item label=\"商品款号：\">\r\n        <el-input v-model=\"productCode\" disabled></el-input>\r\n      </el-form-item>\r\n      <el-form-item label=\"所属分类：\" prop=\"name\">\r\n        <el-cascader ref=\"cascader\" v-model=\"cateIds\" :options=\"categories_getPullDownCategoriesList_data\" :props=\"{ checkStrictly: true, label: 'name', value: 'id', emitPath: false, multiple: true}\" clearable></el-cascader>\r\n      </el-form-item>\r\n    </el-form>\r\n    <!-- 吊牌信息 -->\r\n    <h4>吊牌信息</h4>\r\n    <el-form class=\"mt-20 previewVisible-list\"  label-width=\"90px\" :model=\"formLabelAlign\">\r\n      <el-form-item v-for=\"(item, index) in merchantProduct_productDetail_data.attributes\" :key=\"index\" :label=\"`${item.name}：`\" class=\"mr-20\">\r\n        <el-input v-model=\"item.value\" disabled></el-input>\r\n      </el-form-item>\r\n    </el-form>\r\n    <!-- 货号信息 -->\r\n    <h4>货号信息</h4>\r\n    <div class=\"item-table\">\r\n      <el-table\r\n        class=\"mt-20 table\"\r\n        :data=\"merchantProduct_productDetail_data.merchantProductSKUPCDetailDTOS\"\r\n        stripe\r\n        empty-text=\"暂无数据\"\r\n        header-align=\"center\"\r\n        header-row-class-name=\"item-table-header\"\r\n        :highlight-current-row=\"true\">\r\n        <el-table-column prop=\"\" align=\"center\" :show-overflow-tooltip=\"true\" label=\"商品货号\" min-width=\"100\">\r\n          <template  slot-scope=\"scope\">{{ scope.row.goodsCode || '--' }}</template>\r\n        </el-table-column>\r\n        <el-table-column prop=\"\" align=\"center\" :show-overflow-tooltip=\"true\" label=\"商品规格\" min-width=\"100\">\r\n          <template  slot-scope=\"scope\">{{ scope.row.color + '/' + scope.row.size || '--' }}</template>\r\n        </el-table-column>\r\n        <el-table-column prop=\"\" align=\"center\" :show-overflow-tooltip=\"true\" label=\"图片\" min-width=\"100\">\r\n          <template  slot-scope=\"scope\"><img class=\"discountImg\" :src=\"scope.row.image\" alt=\"\"></template>\r\n        </el-table-column>\r\n        <el-table-column prop=\"\" align=\"center\" :show-overflow-tooltip=\"true\" label=\"吊牌价\" min-width=\"100\">\r\n          <template  slot-scope=\"scope\">{{ scope.row.price || '--' }}</template>\r\n        </el-table-column>\r\n        <el-table-column prop=\"\" align=\"center\" :show-overflow-tooltip=\"true\" label=\"商品折扣\" min-width=\"100\">\r\n          <template  slot-scope=\"scope\">\r\n            <el-input v-model=\"scope.row.productDiscountValue\" placeholder=\"请填写商品折扣\"></el-input>\r\n          </template>\r\n        </el-table-column>\r\n        <el-table-column\r\n          fixed=\"right\"\r\n          label-class-name=\"text-center\"\r\n          class-name=\"text-center\"\r\n          align=\"center\"\r\n          label=\"操作\"\r\n          width=\"180\">\r\n          <template slot-scope=\"scope\">\r\n            <el-button type=\"text\" size=\"small\" @click=\"merchantProduct_onSaleOrOffSaleSKU(scope.row)\">{{ scope.row.onSaleStatus == 'ONSALE' ? '下架' : '上架' }}</el-button>\r\n          </template>\r\n        </el-table-column>\r\n      </el-table>\r\n    </div>\r\n    <el-button type=\"primary\" @click=\"merchantProduct_saveProductDetail\" class=\"mt-30\">保存</el-button>\r\n  </div>\r\n</template>\r\n<script>\r\nimport axios from \"axios\";\r\nimport { getToken } from \"@/utils/auth\";\r\nimport codeSet from \"@/components/codeSet\";\r\nimport treeDept from \"@/components/treeDept\";\r\nimport { filter } from \"minimatch\";\r\nimport { get } from \"http\";\r\n\r\nlet token = getToken();\r\n\r\nexport default {\r\n  data() {\r\n    return {\r\n      categories_getPullDownCategoriesList_data:[],// 获取分类所用-分类下拉（一二级）\r\n      labelPosition: 'right',\r\n      selectArr:[1, 2, 3],\r\n      goodsData:[],\r\n      formLabelAlign: {\r\n        name: '53424400GM',\r\n        productCode:''\r\n      },\r\n      cateIds:[],\r\n      merchantId:this.$route.query.merchantId,\r\n      productCode:this.$route.query.productCode,\r\n      merchantProduct_productDetail_data:{},// 商品详情info\r\n    }\r\n  },\r\n  created() {\r\n    const that = this;\r\n    this.merchantProduct_productDetail();\r\n    this.categories_getPullDownCategoriesList();// 获取分类所用-分类下拉（一二级）\r\n  },\r\n  methods: {\r\n    /**\r\n     * 获取分类所用-分类下拉（一二级）\r\n     */\r\n    categories_getPullDownCategoriesList() {\r\n      const that = this;\r\n\r\n      this.request(\r\n        this.api.scb.categories_getPullDownCategoriesList,\r\n        {\r\n          \"merchantId\": \"\"\r\n        },\r\n        true\r\n      ).then(res => {\r\n        that.categories_getPullDownCategoriesList_data = res;\r\n      });\r\n    },\r\n    /**\r\n     * 获取商品详情\r\n     */\r\n    merchantProduct_productDetail() {\r\n      const that = this;\r\n\r\n      this.request(\r\n        this.api.scb.merchantProduct_productDetail,\r\n        {\r\n          \"merchantId\": this.merchantId,\r\n          \"productCode\": this.productCode\r\n        },\r\n        true\r\n      ).then(res => {\r\n        this.merchantProduct_productDetail_data = res;\r\n        this.cateIds = res.cateIds;\r\n      });\r\n    },\r\n    /**\r\n     * 获取商品详情 SKU上下架\r\n     */\r\n    merchantProduct_onSaleOrOffSaleSKU(obj) {\r\n      const that = this;\r\n      const text = obj.onSaleStatus == 'ONSALE' ? '下架后客户无法下单，是否继续？' : '确定上架吗？';\r\n      this.$confirm(text, '提示', {\r\n        confirmButtonText: '确定',\r\n        cancelButtonText: '取消',\r\n        type: 'warning'\r\n      }).then(() => {\r\n        this.request(\r\n          this.api.scb.merchantProduct_onSaleOrOffSaleSKU,\r\n          {\r\n            \"goodsCode\": obj.goodsCode,\r\n            \"merchantId\": this.merchantId,\r\n            \"productCode\": this.productCode\r\n          },\r\n          true\r\n        ).then(res => {\r\n          this.merchantProduct_productDetail();// 重新刷新列表\r\n          this.warn('操作成功！');\r\n        });\r\n      }).catch(() => {\r\n        this.$message({\r\n          type: 'info',\r\n          message: '已取消'\r\n        });          \r\n      });\r\n     \r\n    },\r\n    /**\r\n     * 获取商品修改\r\n     */\r\n    merchantProduct_saveProductDetail(obj) {\r\n      const that = this;\r\n      const data = {\r\n        \"cateIds\": this.cateIds,\r\n        \"merchantId\": \"\",\r\n        \"merchantProductGoodsVOS\": [],\r\n        \"productCode\": this.productCode\r\n      };\r\n      const arr = this.merchantProduct_productDetail_data.merchantProductSKUPCDetailDTOS;\r\n      if(arr && arr.length > 0) {\r\n        arr.forEach(item => {\r\n          if(!item.productDiscountValue) return;\r\n          data.merchantProductGoodsVOS.push({\r\n            \"goodsCode\": null,\r\n            \"id\": item.id,\r\n            \"onSaleStatus\": null,\r\n            \"onSaleTime\": null,\r\n            \"productCodeId\": null,\r\n            \"productDiscountType\": 1,\r\n            \"productDiscountValue\": parseFloat(item.productDiscountValue)\r\n          })\r\n        });\r\n        var checkItem = arr.every((item, index) => {\r\n          return /(^[1-9](\\.\\d)?$)|(^[0]\\.\\d$)/.test(parseFloat(item.productDiscountValue)) || !item.productDiscountValue;\r\n        });\r\n        if(!checkItem) {\r\n          this.warn('请输入正确的折扣数值！','warning');\r\n          return;\r\n        }\r\n      };                                   \r\n      this.request(\r\n        this.api.scb.merchantProduct_saveProductDetail,\r\n        data,\r\n        true\r\n      ).then(res => {\r\n        this.href('/goods/goods_list');\r\n        this.warn('保存成功！');\r\n      });\r\n    },\r\n    /**\r\n     * 提示\r\n     * @param { String } message 提示文案\r\n     * @param { String } type 提示类型\r\n     */\r\n    warn(message, type) {\r\n      this.$message({\r\n        message: message,\r\n        type: type || \"success\"\r\n      });\r\n    },\r\n    /**\r\n     * 编辑\r\n     * @param { Object } item 当前对象\r\n     * @param { Boolean } isRead 是否可对写\r\n     * @property { Boolean }isEcho 是否是编辑\r\n     * @return { Object } Obj 返回对象\r\n     */\r\n    timeRedact(item) {\r\n      var Obj = {};\r\n      this.href(\"discount_order_edit\", {\r\n        isEdit: true,\r\n        discountId: item.discountId,\r\n        type: item.type\r\n      });\r\n    },\r\n    /**\r\n     * 获取折扣列表\r\n     */\r\n    marketingMiddleground_discountList() {\r\n      this.request(\r\n        this.api.market.marketingMiddleground_discountList,\r\n        this.filtersData\r\n      ).then(res => {\r\n        this.discountData = res;\r\n      });\r\n    },\r\n    /**\r\n     * 路由跳转\r\n     * @param { String } routeName 路由路径\r\n     * @param { Object } param 路由参数\r\n     */\r\n    href(routeName, param) {\r\n      let module = '/' + this.$route.path.split('/')[1];\r\n      this.$router.push({\r\n        path: module + routeName,\r\n        query: param\r\n      });\r\n    },\r\n    /**\r\n     * 模糊搜索\r\n     */\r\n    handleSearch() {\r\n      this.filtersData.pageIndex = 1;\r\n      this.filtersData.storeName = this.filtersData.storeName.replace(\r\n        /(^\\s)|(\\s$)/g,\r\n        \"\"\r\n      );\r\n      this.marketingMiddleground_discountList();\r\n    },\r\n    /**\r\n     * 搜索重置\r\n     */\r\n    handleResetFilters() {\r\n      Object.assign(this.filtersData, {\r\n        pageIndex: 1, // 当前页码\r\n        pageSize: 10, // 每页数量\r\n        type: \"\", // 门店类型\r\n        storeName: \"\" // 门店名称\r\n      });\r\n    },\r\n    /**\r\n     * 点击页数\r\n     * @param { Number } pageIndex 当前页\r\n     */\r\n    handleCurrentChange(pageIndex) {\r\n      this.filtersData.pageIndex = pageIndex;\r\n      this.marketingMiddleground_discountList();\r\n    },\r\n    /**\r\n     *  选择每页多少条数\r\n     *  @param { Number } pageSize 每页条数\r\n     */\r\n    handleSizeChange(pageSize) {\r\n      this.filtersData.pageSize = pageSize;\r\n      this.marketingMiddleground_discountList();\r\n    }\r\n  },\r\n  components: {\r\n    codeSet,\r\n    treeDept\r\n  }\r\n};\r\n</script>\r\n<style  lang=\"less\" scoped>\r\n.discountImg{\r\n  width:40px;\r\n  height: 40px;\r\n}\r\nh4{\r\n  border-bottom: 1px solid #ccc;\r\n  height: 40px;\r\n}\r\n.el-form-item{\r\n  width:350px;\r\n}\r\n.table /deep/ .el-input__inner{\r\n  width: 150px;\r\n}\r\n.el-select{\r\n  display: block;\r\n}\r\n.previewVisible-list {\r\n  display: flex;\r\n  flex-wrap: wrap;\r\n  .item {\r\n    width: 50%;\r\n    margin-right: 0;\r\n    text-align: right;\r\n  }\r\n}\r\n.blueness {\r\n  color: #1e90ff;\r\n}\r\nh5 {\r\n  color: #222;\r\n  margin-left: -15px;\r\n}\r\n.test {\r\n  color: #9d9d9d;\r\n}\r\n.box {\r\n  padding: 20px 50px 20px 50px;\r\n  margin: 8px 8px 20px 8px;\r\n  background: #fff;\r\n}\r\n</style>\r\n"],"sourceRoot":"src/views/scb/goods"}]}
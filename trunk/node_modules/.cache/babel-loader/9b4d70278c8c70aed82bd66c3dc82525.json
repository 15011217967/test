{"remainingRequest":"C:\\Users\\EDZ\\Desktop\\研发项目\\vue-project\\trunk\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\EDZ\\Desktop\\研发项目\\vue-project\\trunk\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!C:\\Users\\EDZ\\Desktop\\研发项目\\vue-project\\trunk\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\EDZ\\Desktop\\研发项目\\vue-project\\trunk\\src\\views\\content\\create\\components\\ReleasePublic.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\EDZ\\Desktop\\研发项目\\vue-project\\trunk\\src\\views\\content\\create\\components\\ReleasePublic.vue","mtime":1572415123616},{"path":"C:\\Users\\EDZ\\Desktop\\研发项目\\vue-project\\trunk\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1558492728398},{"path":"C:\\Users\\EDZ\\Desktop\\研发项目\\vue-project\\trunk\\node_modules\\babel-loader\\lib\\index.js","mtime":1558492720858},{"path":"C:\\Users\\EDZ\\Desktop\\研发项目\\vue-project\\trunk\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1558492728398},{"path":"C:\\Users\\EDZ\\Desktop\\研发项目\\vue-project\\trunk\\node_modules\\vue-loader\\lib\\index.js","mtime":1558492728890}],"contextDependencies":[],"result":["import \"core-js/modules/es6.function.name\";\nimport \"core-js/modules/web.dom.iterable\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport UploadImg from '@/components/editor/UploadImg';\nimport RadioList from '@/views/content/create/components/RadioList';\nimport LinkDialog from '@/views/content/create/components/LinkDialog';\nexport default {\n  props: {\n    formData: {\n      type: Object,\n      default: true\n    }\n  },\n  // 数据\n  data: function data() {\n    return {\n      radio: '1',\n      // 标签\n      tagsVal: '',\n      // 省数据\n      provinceList: [],\n      // 分类数据\n      categoryTreeList: [],\n      // 分类映射\n      categoryTreeListProps: {\n        value: '_flag',\n        label: 'name',\n        children: 'children',\n        expandTrigger: 'hover'\n      },\n      // 上传的图片\n      imgList: [],\n      // 关联商品弹窗\n      linkDialog: false\n    };\n  },\n  // 组件\n  components: {\n    UploadImg: UploadImg,\n    LinkDialog: LinkDialog,\n    RadioList: RadioList\n  },\n  created: function created() {\n    if (this.formData.id) {\n      this.imgList = JSON.parse(JSON.stringify(this.formData.coverList));\n    }\n  },\n  // 初始化数据\n  mounted: function mounted() {\n    var _this = this;\n\n    this.$nextTick(function () {\n      _this.getProvinceList();\n\n      _this.getCategoryTreeList();\n    });\n  },\n  // 方法\n  methods: {\n    // 初始化\n    init: function init() {\n      this.imgList = [];\n      this.tagsVal = '';\n    },\n    // 获取分类tree\n    getCategoryTreeList: function getCategoryTreeList() {\n      var _this2 = this;\n\n      this.request(this.api.contentCore.category_tree_list, {\n        contentType: this.formData.contentType\n      }).then(function (data) {\n        if (data && data.length) {\n          _this2.categoryTreeListInit(data);\n\n          _this2.categoryTreeList = data;\n        }\n      });\n    },\n    // 初始分类数据\n    categoryTreeListInit: function categoryTreeListInit(data) {\n      var _this3 = this;\n\n      if (data && data.length) {\n        data.forEach(function (item) {\n          item._flag = item.id + '&' + item.identifier + '&' + item.name;\n\n          if (item.children) {\n            if (item.children.length === 0) {\n              delete item.children;\n            } else {\n              _this3.categoryTreeListInit(item.children);\n            }\n          }\n        });\n      }\n    },\n    // 获取省级list province_list\n    getProvinceList: function getProvinceList() {\n      var _this4 = this;\n\n      this.request(this.api.contentCore.province_list, {\n        contentType: this.formData.type\n      }).then(function (data) {\n        if (data && data.length) {\n          _this4.provinceList = data;\n        }\n      });\n    },\n    // 标签\n    tagsKeyUp: function tagsKeyUp() {\n      if (!this.tagsVal) return;\n\n      if (this.tagsVal.length > 8) {\n        this.tagsVal = this.tagsVal.substr(0, 8);\n      }\n\n      this.formData.tagList.push({\n        name: this.tagsVal\n      });\n      this.tagsVal = '';\n    },\n    // 删除标签\n    tagClose: function tagClose(index) {\n      this.formData.tagList.splice(index, 1);\n    },\n    // 删除链接\n    handleClose: function handleClose(index) {\n      var _this5 = this;\n\n      this.$confirm('确认删除吗？', '删除', {\n        confirmButtonText: '确认',\n        cancelButtonText: '取消',\n        showClose: false\n      }).then(function () {\n        _this5.formData.relationInfoList.splice(index, 1);\n      }).catch(function () {});\n    }\n  },\n  // 计算属性\n  computed: {},\n  // 监听数据变化\n  watch: {}\n};",{"version":3,"sources":["ReleasePublic.vue"],"names":[],"mappings":"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","sourcesContent":["<style lang=\"less\" scoped>\r\n  .release-public{\r\n    .form-data{\r\n      .release-title{\r\n        input{width: 100%;height: 36px;border: none;border-bottom: 1px solid #eee;}\r\n      }\r\n      .el-input__inner{width: 500px;}\r\n      .el-tag{margin-right: 10px;}\r\n      .input-required /deep/ .el-form-item__label:before{content: '*';color: #f56c6c;margin-right: 4px;}\r\n      .release-public-main{padding-bottom: 20px;}\r\n    }\r\n    .commodity-link{display: flex;\r\n      .link{width: 80px;text-align: right;padding-right: 10px;line-height: 36px;}\r\n      .commodity-list{flex:1;\r\n        li{margin-bottom: 10px;\r\n          img{height: 36px;}\r\n          span{margin: 0 20px;}\r\n        }\r\n      }\r\n    }\r\n  }\r\n</style>\r\n<template>\r\n  <div class=\"release-public\">\r\n    <el-form ref=\"form\" :model=\"formData\" label-width=\"80px\" class=\"form-data\">\r\n      <div class=\"release-title\">\r\n        <input type=\"text\" placeholder=\"请输入标题\" v-model=\"formData.title\">\r\n      </div>\r\n      <div class=\"release-public-main\">\r\n        <slot></slot>\r\n      </div>\r\n      <el-form-item label=\"副标题\">\r\n        <el-input v-model=\"formData.smallTitle\" placeholder=\"请输入副标题\"></el-input>\r\n      </el-form-item>\r\n      <el-form-item label=\"封面\" class=\"input-required\">\r\n        <div><el-radio v-model=\"radio\" label=\"1\">单封面</el-radio></div>\r\n        <radio-list :radioList=\"imgList\" :radio-check=\"formData.coverList\" :is-default-check=\"true\">\r\n          <upload-img :is-radio=\"false\" :imgList=\"imgList\"></upload-img>\r\n        </radio-list>\r\n      </el-form-item>\r\n      <el-form-item label=\"分类\" class=\"input-required\">\r\n        <el-cascader :options=\"categoryTreeList\" v-model=\"formData.contentCategory\" :props=\"categoryTreeListProps\" :show-all-levels=\"false\">\r\n        </el-cascader>\r\n      </el-form-item>\r\n      <el-form-item label=\"标签\" class=\"input-required\">\r\n        <el-input v-model=\"tagsVal\" @keyup.13.native=\"tagsKeyUp\"></el-input>\r\n        <el-tag v-for=\"(item, index) in formData.tagList\" closable @close=\"tagClose(index)\" :key=\"index\">{{ item.name }}</el-tag>\r\n        <p>您可添加标签，标签最多八个字符，按回车键确认。描述越准确，越利于触达兴趣人群。</p>\r\n      </el-form-item>\r\n      <el-form-item label=\"地域\">\r\n        <el-select v-model=\"formData.regions\" placeholder=\"请选择\" multiple>\r\n          <el-option :label=\"item.province\" :value=\"item.provinceCode\" v-for=\"item in provinceList\" :key=\"item.province\"></el-option>\r\n        </el-select>\r\n      </el-form-item>\r\n      <el-form-item label=\"关联商品\">\r\n        <ul class=\"commodity-list\">\r\n          <li> <el-button type=\"primary\" size=\"small\" @click=\"linkDialog = true\">添加</el-button></li>\r\n          <li v-for=\"(item, index) in formData.relationInfoList\">\r\n            <el-tag type=\"info\" :key=\"item.id\" closable @close=\"handleClose(index)\">id：{{ item.id }}</el-tag>\r\n          </li>\r\n        </ul>\r\n      </el-form-item>\r\n    </el-form>\r\n    <!--添加链接-->\r\n    <el-dialog title=\"关联商品\" :visible.sync=\"linkDialog\" width=\"60%\" :close-on-click-modal=\"false\">\r\n      <link-dialog :checkLinkList=\"formData.relationInfoList\" :linkDialog.sync=\"linkDialog\" v-if=\"linkDialog\"></link-dialog>\r\n    </el-dialog>\r\n  </div>\r\n</template>\r\n<script>\r\n  import UploadImg from '@/components/editor/UploadImg'\r\n  import RadioList from '@/views/content/create/components/RadioList'\r\n  import LinkDialog from '@/views/content/create/components/LinkDialog'\r\n  export default {\r\n    props: {\r\n      formData: {\r\n        type: Object,\r\n        default: true\r\n      }\r\n    },\r\n    // 数据\r\n    data() {\r\n      return {\r\n        radio: '1',\r\n        // 标签\r\n        tagsVal: '',\r\n        // 省数据\r\n        provinceList: [],\r\n        // 分类数据\r\n        categoryTreeList: [],\r\n        // 分类映射\r\n        categoryTreeListProps:{\r\n          value: '_flag',\r\n          label: 'name',\r\n          children: 'children',\r\n          expandTrigger: 'hover'\r\n        },\r\n        // 上传的图片\r\n        imgList: [],\r\n        // 关联商品弹窗\r\n        linkDialog: false\r\n      }\r\n    },\r\n    // 组件\r\n    components: {\r\n      UploadImg,\r\n      LinkDialog,\r\n      RadioList\r\n    },\r\n    created(){\r\n      if(this.formData.id){\r\n        this.imgList = JSON.parse(JSON.stringify(this.formData.coverList))\r\n      }\r\n    },\r\n    // 初始化数据\r\n    mounted() {\r\n      this.$nextTick(() => {\r\n        this.getProvinceList()\r\n        this.getCategoryTreeList()\r\n      })\r\n    },\r\n    // 方法\r\n    methods: {\r\n      // 初始化\r\n      init(){\r\n        this.imgList = []\r\n        this.tagsVal = ''\r\n      },\r\n      // 获取分类tree\r\n      getCategoryTreeList(){\r\n        this.request(this.api.contentCore.category_tree_list, {contentType: this.formData.contentType}).then(data => {\r\n          if(data && data.length){\r\n            this.categoryTreeListInit(data)\r\n            this.categoryTreeList = data\r\n          }\r\n        });\r\n      },\r\n      // 初始分类数据\r\n      categoryTreeListInit(data){\r\n        if(data && data.length){\r\n          data.forEach((item)=>{\r\n            item._flag = item.id  +'&'+ item.identifier +'&'+ item.name\r\n            if(item.children){\r\n              if(item.children.length === 0){\r\n                delete item.children\r\n              }else {\r\n                this.categoryTreeListInit(item.children)\r\n              }\r\n            }\r\n          })\r\n        }\r\n      },\r\n      // 获取省级list province_list\r\n      getProvinceList(){\r\n        this.request(this.api.contentCore.province_list, {contentType: this.formData.type}).then(data => {\r\n          if(data && data.length){\r\n            this.provinceList = data\r\n          }\r\n        });\r\n      },\r\n      // 标签\r\n      tagsKeyUp(){\r\n        if(!this.tagsVal) return\r\n        if(this.tagsVal.length > 8){\r\n          this.tagsVal = this.tagsVal.substr(0, 8)\r\n        }\r\n        this.formData.tagList.push({\r\n          name: this.tagsVal\r\n        })\r\n        this.tagsVal = ''\r\n      },\r\n      // 删除标签\r\n      tagClose(index){\r\n        this.formData.tagList.splice(index, 1);\r\n      },\r\n\r\n      // 删除链接\r\n      handleClose(index){\r\n        this.$confirm('确认删除吗？', '删除', {\r\n          confirmButtonText: '确认',\r\n          cancelButtonText: '取消',\r\n          showClose:false\r\n        }).then(() => {\r\n          this.formData.relationInfoList.splice(index, 1)\r\n        }).catch(() => {\r\n        });\r\n      }\r\n    },\r\n    // 计算属性\r\n    computed: {},\r\n    // 监听数据变化\r\n    watch: {\r\n\r\n    }\r\n  }\r\n</script>\r\n"],"sourceRoot":"src/views/content/create/components"}]}
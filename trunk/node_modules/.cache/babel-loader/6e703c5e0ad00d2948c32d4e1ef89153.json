{"remainingRequest":"C:\\Users\\EDZ\\Desktop\\研发项目\\vue-project\\trunk\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\EDZ\\Desktop\\研发项目\\vue-project\\trunk\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!C:\\Users\\EDZ\\Desktop\\研发项目\\vue-project\\trunk\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\EDZ\\Desktop\\研发项目\\vue-project\\trunk\\src\\views\\OC\\components\\divisionList.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\EDZ\\Desktop\\研发项目\\vue-project\\trunk\\src\\views\\OC\\components\\divisionList.vue","mtime":1572415125279},{"path":"C:\\Users\\EDZ\\Desktop\\研发项目\\vue-project\\trunk\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1558492728398},{"path":"C:\\Users\\EDZ\\Desktop\\研发项目\\vue-project\\trunk\\node_modules\\babel-loader\\lib\\index.js","mtime":1558492720858},{"path":"C:\\Users\\EDZ\\Desktop\\研发项目\\vue-project\\trunk\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1558492728398},{"path":"C:\\Users\\EDZ\\Desktop\\研发项目\\vue-project\\trunk\\node_modules\\vue-loader\\lib\\index.js","mtime":1558492728890}],"contextDependencies":[],"result":["import \"core-js/modules/es6.object.keys\";\nimport \"core-js/modules/web.dom.iterable\";\nimport \"regenerator-runtime/runtime\";\nimport _asyncToGenerator from \"C:\\\\Users\\\\EDZ\\\\Desktop\\\\\\u7814\\u53D1\\u9879\\u76EE\\\\vue-project\\\\trunk\\\\node_modules\\\\@babel\\\\runtime-corejs2/helpers/esm/asyncToGenerator\";\nimport \"core-js/modules/es6.function.name\";\nimport \"core-js/modules/es6.array.find\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nexport default {\n  name: \"division-list\",\n  props: {\n    viewModel: {// 接收绑定参数\n    }\n  },\n  watch: {},\n  data: function data() {\n    return {\n      proList: [],\n      muniList: [],\n      areaList: []\n    };\n  },\n  created: function created() {\n    // 获取数据\n    this.getAllDivision();\n  },\n  methods: {\n    // 省的选择事件\n    provinceChangeEvent: function provinceChangeEvent(code) {\n      var pro = this.proList.find(function (t) {\n        return t.code == code;\n      });\n\n      if (pro) {\n        this.viewModel.province = pro.name;\n        this.viewModel.provinceCode = pro.code;\n        this.muniList = this.divisionInfo.municipalitys[code];\n      } else {\n        this.muniList = [];\n      }\n\n      this.viewModel.municipality = '';\n      this.viewModel.municipalityCode = '';\n      this.viewModel.area = '';\n      this.viewModel.areaCode = '';\n      this.areaList = [];\n    },\n    // 城市的选择事件\n    cityChangeEvent: function cityChangeEvent(code) {\n      var muti = this.muniList.find(function (t) {\n        return t.code == code;\n      });\n\n      if (muti) {\n        this.viewModel.municipality = muti.name;\n        this.viewModel.municipalityCode = muti.code;\n        this.areaList = this.divisionInfo.areas[code];\n      } else {\n        this.areaList = [];\n      }\n\n      this.viewModel.area = '';\n      this.viewModel.areaCode = '';\n    },\n    // 区的选择事件\n    areaChangeEvent: function areaChangeEvent(code) {\n      var area = this.areaList.find(function (t) {\n        return t.code == code;\n      });\n\n      if (area) {\n        this.viewModel.area = area.name;\n        this.viewModel.areaCode = area.code;\n        this.viewModel.divisionId = area.id;\n        this.$emit(\"set-division\", this.viewModel);\n      }\n    },\n    // 获取所有的省市区回显组合及下拉数据\n    getAllDivision: function () {\n      var _getAllDivision = _asyncToGenerator(\n      /*#__PURE__*/\n      regeneratorRuntime.mark(function _callee() {\n        var divisionInfo, municipalitys, areas;\n        return regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                if (!(localStorage.getItem(\"divisionInfo\") != null)) {\n                  _context.next = 5;\n                  break;\n                }\n\n                this.divisionInfo = JSON.parse(localStorage.getItem(\"divisionInfo\"));\n                this.proList = this.divisionInfo.provinces;\n                this.getEditList();\n                return _context.abrupt(\"return\");\n\n              case 5:\n                _context.next = 7;\n                return this.request(this.api.system.division_get_info, {});\n\n              case 7:\n                divisionInfo = _context.sent;\n\n                // 初始化数据 转对象\n                if (divisionInfo && divisionInfo.municipalitys.length) {\n                  municipalitys = {};\n                  divisionInfo.municipalitys.forEach(function (item) {\n                    var key = Object.keys(item)[0];\n                    municipalitys[key] = item[key];\n                  });\n                  divisionInfo.municipalitys = municipalitys;\n                } else {\n                  divisionInfo.municipalitys = {};\n                }\n\n                if (divisionInfo && divisionInfo.areas.length) {\n                  areas = {};\n                  divisionInfo.areas.forEach(function (item) {\n                    var key = Object.keys(item)[0];\n                    areas[key] = item[key];\n                  });\n                  divisionInfo.areas = areas;\n                } else {\n                  divisionInfo.areas = {};\n                }\n\n                this.divisionInfo = divisionInfo; // 获取省份数据\n\n                this.proList = this.divisionInfo.provinces; // 获取市区数据\n\n                this.getEditList(); // 存储下拉数据\n\n                localStorage.setItem(\"divisionInfo\", JSON.stringify(this.divisionInfo));\n\n              case 14:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this);\n      }));\n\n      function getAllDivision() {\n        return _getAllDivision.apply(this, arguments);\n      }\n\n      return getAllDivision;\n    }(),\n    // 编辑获取子集列表\n    getEditList: function getEditList() {\n      if (this.viewModel.provinceCode) {\n        this.muniList = this.divisionInfo.municipalitys[this.viewModel.provinceCode];\n      }\n\n      if (this.viewModel.municipalityCode) {\n        this.areaList = this.divisionInfo.areas[this.viewModel.municipalityCode];\n      }\n    }\n  }\n};",{"version":3,"sources":["divisionList.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\r\n    <div class=\"cont-inline\">\r\n        <el-select v-model=\"viewModel.provinceCode\" @change='provinceChangeEvent' clearable placeholder=\"省/直辖市\">\r\n            <el-option v-for=\"(item,index) in proList\" :key=\"index\"\r\n                       :label=\"item.name\"\r\n                       :value=\"item.code\">\r\n            </el-option>\r\n        </el-select>\r\n        <el-select v-model=\"viewModel.municipalityCode\" @change=\"cityChangeEvent\" clearable placeholder=\"市\">\r\n            <el-option v-for=\"(item,index) in muniList\" :key=\"index\"\r\n                       :label=\"item.name\"\r\n                       :value=\"item.code\">\r\n            </el-option>\r\n        </el-select>\r\n        <el-select v-model=\"viewModel.areaCode\" @change=\"areaChangeEvent\" clearable placeholder=\"区/县\">\r\n            <el-option v-for=\"(item,index) in areaList\" :key=\"index\"\r\n                       :label=\"item.name\"\r\n                       :value=\"item.code\">\r\n            </el-option>\r\n        </el-select>\r\n    </div>\r\n</template>\r\n<script>\r\n    export default {\r\n        name: \"division-list\",\r\n        props: {\r\n            viewModel: {\r\n                // 接收绑定参数\r\n\r\n            }\r\n        },\r\n        watch: {\r\n        },\r\n        data() {\r\n            return {\r\n                proList: [],\r\n                muniList: [],\r\n                areaList: []\r\n            };\r\n        },\r\n        created() {\r\n            // 获取数据\r\n            this.getAllDivision()\r\n        },\r\n        methods: {\r\n            // 省的选择事件\r\n            provinceChangeEvent(code) {\r\n                let pro = this.proList.find(t => t.code == code);\r\n                if(pro){\r\n                    this.viewModel.province = pro.name;\r\n                    this.viewModel.provinceCode = pro.code;\r\n                    this.muniList = this.divisionInfo.municipalitys[code];\r\n                }else {\r\n                    this.muniList = [];\r\n                }\r\n                this.viewModel.municipality = '';\r\n                this.viewModel.municipalityCode = '';\r\n                this.viewModel.area = '';\r\n                this.viewModel.areaCode = '';\r\n                this.areaList = [];\r\n            },\r\n            // 城市的选择事件\r\n            cityChangeEvent(code) {\r\n                let muti = this.muniList.find(t => t.code == code);\r\n                if(muti){\r\n                    this.viewModel.municipality = muti.name;\r\n                    this.viewModel.municipalityCode = muti.code;\r\n                    this.areaList = this.divisionInfo.areas[code];\r\n                }else {\r\n                    this.areaList = [];\r\n                }\r\n                this.viewModel.area = '';\r\n                this.viewModel.areaCode = '';\r\n            },\r\n            // 区的选择事件\r\n            areaChangeEvent(code) {\r\n                let area = this.areaList.find(t => t.code == code);\r\n                if(area){\r\n                    this.viewModel.area = area.name;\r\n                    this.viewModel.areaCode = area.code;\r\n                    this.viewModel.divisionId = area.id;\r\n                    this.$emit(\"set-division\", this.viewModel);\r\n                }\r\n            },\r\n            // 获取所有的省市区回显组合及下拉数据\r\n            async getAllDivision() {\r\n                if(localStorage.getItem(\"divisionInfo\") != null) {\r\n                    this.divisionInfo = JSON.parse(localStorage.getItem(\"divisionInfo\"));\r\n                    this.proList = this.divisionInfo.provinces;\r\n                    this.getEditList();\r\n                    return;\r\n                }\r\n                // 获取省市区下拉数据\r\n                let divisionInfo = await this.request(this.api.system.division_get_info, {});\r\n                // 初始化数据 转对象\r\n                if(divisionInfo && divisionInfo.municipalitys.length){\r\n                    let municipalitys = {};\r\n                    divisionInfo.municipalitys.forEach(item => {\r\n                        let key = Object.keys(item)[0];\r\n                        municipalitys[key] = item[key];\r\n                    });\r\n                    divisionInfo.municipalitys = municipalitys;\r\n                }else{\r\n                    divisionInfo.municipalitys = {};\r\n                }\r\n                if(divisionInfo && divisionInfo.areas.length){\r\n                    let areas = {};\r\n                    divisionInfo.areas.forEach(item => {\r\n                        let key = Object.keys(item)[0];\r\n                        areas[key] = item[key];\r\n                    })\r\n                    divisionInfo.areas = areas;\r\n                }else {\r\n                    divisionInfo.areas = {};\r\n                }\r\n                this.divisionInfo = divisionInfo;\r\n                // 获取省份数据\r\n                this.proList = this.divisionInfo.provinces;\r\n                // 获取市区数据\r\n                this.getEditList();\r\n                // 存储下拉数据\r\n                localStorage.setItem(\"divisionInfo\", JSON.stringify(this.divisionInfo));\r\n            },\r\n            // 编辑获取子集列表\r\n            getEditList(){\r\n                if(this.viewModel.provinceCode){\r\n                    this.muniList = this.divisionInfo.municipalitys[this.viewModel.provinceCode];\r\n                }\r\n                if(this.viewModel.municipalityCode){\r\n                    this.areaList = this.divisionInfo.areas[this.viewModel.municipalityCode];\r\n                }\r\n            }\r\n        }\r\n    };\r\n</script>\r\n<style scoped>\r\n.el-form-item__content{\r\n    width: 80%;\r\n}\r\n.el-select{\r\n    width: 25%;\r\n}\r\n.cont-inline{\r\n    display: inline;\r\n}\r\n</style>\r\n"],"sourceRoot":"src/views/OC/components"}]}
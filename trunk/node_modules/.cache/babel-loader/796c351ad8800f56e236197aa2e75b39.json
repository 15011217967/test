{"remainingRequest":"C:\\Users\\EDZ\\Desktop\\研发项目\\vue-project\\trunk\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\EDZ\\Desktop\\研发项目\\vue-project\\trunk\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!C:\\Users\\EDZ\\Desktop\\研发项目\\vue-project\\trunk\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\EDZ\\Desktop\\研发项目\\vue-project\\trunk\\src\\views\\product\\added_services\\config_added_services.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\EDZ\\Desktop\\研发项目\\vue-project\\trunk\\src\\views\\product\\added_services\\config_added_services.vue","mtime":1572415123861},{"path":"C:\\Users\\EDZ\\Desktop\\研发项目\\vue-project\\trunk\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1558492728398},{"path":"C:\\Users\\EDZ\\Desktop\\研发项目\\vue-project\\trunk\\node_modules\\babel-loader\\lib\\index.js","mtime":1558492720858},{"path":"C:\\Users\\EDZ\\Desktop\\研发项目\\vue-project\\trunk\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1558492728398},{"path":"C:\\Users\\EDZ\\Desktop\\研发项目\\vue-project\\trunk\\node_modules\\vue-loader\\lib\\index.js","mtime":1558492728890}],"contextDependencies":[],"result":["import \"core-js/modules/es6.regexp.split\";\nimport \"core-js/modules/web.dom.iterable\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport axios from \"axios\";\nimport { setTimeout } from 'timers';\nexport default {\n  data: function data() {\n    return {\n      propss: {\n        multiple: true,\n        value: 'identifier',\n        label: 'name'\n      },\n      // 新建门店提交对象\n      save_createStore_obj: {\n        \"used\": false,\n        \"price\": \"\",\n        \"list\": []\n      },\n      // 获取下拉品类树结构\n      categories_getTree_Arr: [],\n      // 选中的商品集合\n      goodsIdArr: [],\n      // 增值服务配置\n      rules: {\n        storeName: [{\n          required: true,\n          message: '请输入活动名称',\n          trigger: 'blur'\n        }],\n        region: [{\n          required: true,\n          message: '请选择活动区域',\n          trigger: 'change'\n        }],\n        price: [{\n          type: 'date',\n          required: true,\n          message: '请选择日期',\n          trigger: 'change'\n        }]\n      }\n    };\n  },\n  created: function created() {\n    // 获取下拉品类树结构\n    this.categories_getTree(); // 获取选中的下拉品类树结构\n\n    this.appreciationServiceConfig_get();\n  },\n  mounted: function mounted() {},\n  methods: {\n    /**\r\n     * 保存新建门店\r\n     */\n    save_createStore: function save_createStore() {\n      var that = this,\n          goodsIdArr = JSON.parse(JSON.stringify(this.goodsIdArr)),\n          save_createStore_obj = JSON.parse(JSON.stringify(this.save_createStore_obj)); // 处理商品集合\n\n      goodsIdArr.forEach(function (item, index) {\n        var sub = item.splice(item.length - 1, 1)[0];\n        save_createStore_obj.list.push({\n          identifier: sub\n        });\n      }); // 处理增值服务状态\n\n      save_createStore_obj.used = save_createStore_obj.used ? 1 : 0;\n      console.log(this.goodsIdArr);\n      console.log(save_createStore_obj); // return;\n\n      this.request(this.api.product.appreciationServiceConfig_save, save_createStore_obj).then(function (res) {\n        that.warn('添加成功!');\n      });\n    },\n\n    /**\r\n     * 提示\r\n     */\n    warn: function warn(message, type) {\n      this.$message({\n        message: message,\n        type: type || 'success'\n      });\n    },\n\n    /**\r\n     * 获取全部下拉品类树结构\r\n     */\n    categories_getTree: function categories_getTree() {\n      var _this = this;\n\n      this.request(this.api.product.categories_getTree, {\n        \"valid\": \"true\",\n        \"type\": \"1\"\n      }).then(function (res) {\n        _this.categories_getTree_Arr = res;\n\n        _this.isChildrenNull(res);\n      });\n    },\n\n    /**\r\n     * 递归将categories_getTree_Arr中所有空的children设置为null\r\n     * @param { Array } res 需要递归的数据数组\r\n     */\n    isChildrenNull: function isChildrenNull(res) {\n      var _this2 = this;\n\n      res.forEach(function (item, index) {\n        if (item.children && item.children.length == 0) {\n          item.children = null;\n        } else {\n          _this2.isChildrenNull(item.children);\n        }\n      });\n    },\n\n    /**\r\n     * 获取选中的下拉品类树结构\r\n     */\n    appreciationServiceConfig_get: function appreciationServiceConfig_get() {\n      var _this3 = this;\n\n      this.request(this.api.product.appreciationServiceConfig_get).then(function (res) {\n        // 处理选中下拉品类\n        res.list.forEach(function (item, index) {\n          var identifierArr = item.identifier.split('.');\n          var itemArr = [];\n          var str = '';\n          identifierArr.forEach(function (items, indexs) {\n            // 如果不是第一个数组，拼接时加上点;\n            str += indexs != 0 ? \".\".concat(items) : \"\".concat(items);\n            itemArr.push(str);\n          });\n\n          _this3.goodsIdArr.push(itemArr);\n        });\n        Object.assign(_this3.save_createStore_obj, {\n          used: res.used ? true : false,\n          price: res.price\n        });\n        console.log(_this3.goodsIdArr);\n      });\n    }\n  },\n  components: {}\n};",{"version":3,"sources":["config_added_services.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\r\n  <div class=\"create-store\">\r\n    <template>\r\n      <section>\r\n        <el-form :model=\"save_createStore_obj\" :rules=\"rules\" ref=\"save_createStore_obj\" label-width=\"120px\" class=\"form-label\">\r\n          <!-- 增值服务 -->\r\n          <el-form-item label=\"增值服务：\">\r\n             <el-switch\r\n                v-model=\"save_createStore_obj.used\"\r\n                active-color=\"#13ce66\"\r\n                inactive-color=\"#9d9d9d\"\r\n            ></el-switch>\r\n            <span class=\"ml-10\">当前状态：{{ save_createStore_obj.used ? '启用' : '关闭' }}</span>\r\n          </el-form-item>\r\n          <!-- 免费品类 -->\r\n        <el-form-item  label=\"商品分类：\">\r\n          <div class=\"block\">\r\n            <el-cascader\r\n              style=\"width:370px;\"\r\n              v-model=\"goodsIdArr\"\r\n              :show-all-levels=\"false\"\r\n              :options=\"categories_getTree_Arr\"\r\n              :props=\"propss\"\r\n              clearable></el-cascader>\r\n          </div>\r\n        </el-form-item>\r\n          <!-- 服务价格 -->\r\n          <el-form-item label=\"服务价格：\">\r\n            <el-input style=\"height:40px;\" v-model=\"save_createStore_obj.price\" placeholder=\"请输入服务价格\"></el-input>\r\n          </el-form-item>\r\n        </el-form>\r\n      </section>\r\n    </template>\r\n    <div class=\"save\">\r\n      <el-button type=\"primary\" @click=\"save_createStore\">确认</el-button>\r\n    </div>\r\n  </div>\r\n\r\n</template>\r\n\r\n<script>\r\nimport axios from \"axios\";\r\nimport { setTimeout } from 'timers';\r\n\r\nexport default {\r\n  data() {\r\n    return {\r\n      propss: {\r\n        multiple: true,\r\n        value:'identifier',\r\n        label:'name'\r\n      },\r\n      // 新建门店提交对象\r\n      save_createStore_obj:{\r\n        \"used\":false,\r\n        \"price\":\"\",\r\n        \"list\":[]\r\n      },\r\n      // 获取下拉品类树结构\r\n      categories_getTree_Arr:[],\r\n      // 选中的商品集合\r\n      goodsIdArr:[],\r\n      // 增值服务配置\r\n      rules: {\r\n        storeName: [\r\n          { required: true, message: '请输入活动名称', trigger: 'blur' },\r\n        ],\r\n        region: [\r\n          { required: true, message: '请选择活动区域', trigger: 'change' }\r\n        ],\r\n        price: [\r\n          { type: 'date', required: true, message: '请选择日期', trigger: 'change' }\r\n        ]\r\n      }\r\n    };\r\n  },\r\n  created() {\r\n    // 获取下拉品类树结构\r\n    this.categories_getTree();\r\n    // 获取选中的下拉品类树结构\r\n    this.appreciationServiceConfig_get();\r\n  },\r\n  mounted() {\r\n\r\n  },\r\n  methods: {\r\n    /**\r\n     * 保存新建门店\r\n     */\r\n    save_createStore() {\r\n      const that = this,\r\n            goodsIdArr = JSON.parse(JSON.stringify(this.goodsIdArr)),\r\n            save_createStore_obj = JSON.parse(JSON.stringify(this.save_createStore_obj));\r\n      // 处理商品集合\r\n      goodsIdArr.forEach((item, index) => {\r\n        const sub = item.splice(item.length-1,1)[0];\r\n        save_createStore_obj.list.push({\r\n          identifier:sub\r\n        });\r\n      });\r\n      // 处理增值服务状态\r\n      save_createStore_obj.used = save_createStore_obj.used ? 1 : 0;\r\n      console.log(this.goodsIdArr)\r\n      console.log(save_createStore_obj)\r\n      // return;\r\n      this.request(\r\n        this.api.product.appreciationServiceConfig_save,\r\n        save_createStore_obj\r\n      ).then(res => {\r\n        that.warn('添加成功!');\r\n      });\r\n    },\r\n    /**\r\n     * 提示\r\n     */\r\n    warn(message, type) {\r\n      this.$message({\r\n        message: message,\r\n        type: type || 'success'\r\n      });\r\n    },\r\n    /**\r\n     * 获取全部下拉品类树结构\r\n     */\r\n    categories_getTree() {\r\n      this.request(\r\n        this.api.product.categories_getTree,\r\n        {\r\n          \"valid\":\"true\",\r\n          \"type\":\"1\"\r\n        }\r\n      ).then(res => {\r\n        this.categories_getTree_Arr = res;\r\n        this.isChildrenNull(res);\r\n      });\r\n    },\r\n    /**\r\n     * 递归将categories_getTree_Arr中所有空的children设置为null\r\n     * @param { Array } res 需要递归的数据数组\r\n     */\r\n    isChildrenNull(res) {\r\n      res.forEach((item, index) => {\r\n        if(item.children && item.children.length == 0) {\r\n          item.children = null;\r\n        }else{\r\n          this.isChildrenNull(item.children);\r\n        }\r\n      });\r\n    },\r\n    /**\r\n     * 获取选中的下拉品类树结构\r\n     */\r\n    appreciationServiceConfig_get() {\r\n      this.request(\r\n        this.api.product.appreciationServiceConfig_get\r\n      ).then(res => {\r\n        // 处理选中下拉品类\r\n        res.list.forEach((item, index) => {\r\n          const identifierArr = item.identifier.split('.');\r\n          const itemArr = [];\r\n          let str = '';\r\n          identifierArr.forEach((items, indexs) => {\r\n            // 如果不是第一个数组，拼接时加上点;\r\n            str += (indexs != 0) ? `.${items}` : `${items}`;\r\n            itemArr.push(str);\r\n          });\r\n          this.goodsIdArr.push(itemArr);\r\n        });\r\n\r\n        Object.assign(this.save_createStore_obj, {\r\n          used: res.used ? true : false,\r\n          price:res.price\r\n        });\r\n        console.log(this.goodsIdArr);\r\n      });\r\n    }\r\n  },\r\n  components: {}\r\n};\r\n</script>\r\n<style  lang=\"less\" scoped>\r\n  .create-store{\r\n    margin: 8px;\r\n    padding: 20px;\r\n    background: #fff;\r\n    .save{\r\n      margin-left: 120px;\r\n    }\r\n    .form-label{\r\n      margin-top: 20px;\r\n      .el-input, .el-select{\r\n        width: 370px;\r\n\r\n      }\r\n      .el-input /deep/ .el-input__inner{height: 40px;}\r\n      .el-checkbox-group{\r\n        width: 550px;\r\n      }\r\n      .el-input-short{\r\n        width: 180px;\r\n      }\r\n      .video-upload {\r\n        border: 1px dashed #d9d9d9;\r\n        border-radius: 6px;\r\n        cursor: pointer;\r\n        position: relative;\r\n        overflow: hidden;\r\n        width: 80px;\r\n        height: 80px;\r\n        text-align: center;\r\n        line-height: 80px;\r\n        span{\r\n          font-size: 35px;\r\n          color: #d9d9d9;\r\n        }\r\n      }\r\n      .video-upload-p{\r\n        color: #666;\r\n        font-size: 12px;\r\n      }\r\n      .video-upload:hover{\r\n        border: 1px dashed #409EFF;\r\n      }\r\n    }\r\n  }\r\n  .display-flex{\r\n    display:flex;\r\n  }\r\n</style>\r\n\r\n"],"sourceRoot":"src/views/product/added_services"}]}
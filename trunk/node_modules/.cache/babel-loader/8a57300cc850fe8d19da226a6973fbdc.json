{"remainingRequest":"C:\\Users\\EDZ\\Desktop\\研发项目\\vue-project\\trunk\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\EDZ\\Desktop\\研发项目\\vue-project\\trunk\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!C:\\Users\\EDZ\\Desktop\\研发项目\\vue-project\\trunk\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\EDZ\\Desktop\\研发项目\\vue-project\\trunk\\src\\views\\system\\shipper_list.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\EDZ\\Desktop\\研发项目\\vue-project\\trunk\\src\\views\\system\\shipper_list.vue","mtime":1574160265475},{"path":"C:\\Users\\EDZ\\Desktop\\研发项目\\vue-project\\trunk\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1558492728398},{"path":"C:\\Users\\EDZ\\Desktop\\研发项目\\vue-project\\trunk\\node_modules\\babel-loader\\lib\\index.js","mtime":1558492720858},{"path":"C:\\Users\\EDZ\\Desktop\\研发项目\\vue-project\\trunk\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1558492728398},{"path":"C:\\Users\\EDZ\\Desktop\\研发项目\\vue-project\\trunk\\node_modules\\vue-loader\\lib\\index.js","mtime":1558492728890}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport OrganizationSelect from \"@/views/system/components/OrganizationSelect.vue\";\nimport { validateNumber } from '@/utils/validate';\nexport default {\n  name: 'shipper_list',\n  components: {\n    OrganizationSelect: OrganizationSelect\n  },\n  data: function data() {\n    return {\n      filtersData: {\n        pageIndex: 1,\n        //当前页码\n        pageSize: 10 //每页数量\n\n      },\n      // 表格数据\n      tableData: {},\n      // 新增和编辑\n      addAndEditDialog: false,\n      isAdd: true,\n      addAndEditForm: {\n        orgId: '',\n        description: '',\n        code: '',\n        name: '',\n        used: true\n      },\n      //验证\n      rules: {\n        code: [{\n          required: true,\n          trigger: \"blur\",\n          validator: validateNumber\n        }],\n        name: [{\n          required: true,\n          message: \"请输入货主名称\",\n          trigger: \"blur\"\n        }],\n        orgId: [{\n          required: true,\n          message: \"请选择机构\",\n          trigger: \"change\"\n        }]\n      }\n    };\n  },\n  mounted: function mounted() {\n    var _this = this;\n\n    this.$nextTick(function () {\n      _this.getTableList();\n    });\n  },\n  activated: function activated() {\n    this.getTableList();\n  },\n  methods: {\n    //获取列表\n    getTableList: function getTableList() {\n      var _this2 = this;\n\n      this.request(this.api.system.goodsOwner_list, this.filtersData).then(function (data) {\n        _this2.tableData = data;\n      });\n    },\n    // 获取详情\n    getDetails: function getDetails(id) {\n      var _this3 = this;\n\n      this.request(this.api.system.goodsOwner_get, {\n        id: id\n      }).then(function (data) {\n        _this3.addAndEditForm = data;\n      });\n    },\n    //新增\n    openAddClass: function openAddClass() {\n      var _this4 = this;\n\n      this.isAdd = true;\n      this.addAndEditDialog = true;\n      this.addAndEditForm = {\n        orgId: '',\n        description: '',\n        code: '',\n        name: '',\n        used: true\n      };\n      this.$nextTick(function () {\n        _this4.$refs.addAndEditDialogForm.resetFields();\n      });\n    },\n    //修改\n    handleEditClick: function handleEditClick(id) {\n      this.isAdd = false;\n      this.addAndEditDialog = true;\n      this.getDetails(id);\n    },\n    //保存\n    submitForm: function submitForm(formName) {\n      var _this5 = this;\n\n      this.$refs[formName].validate(function (valid) {\n        if (valid) {\n          _this5.request(_this5.api.system.goodsOwner_save, _this5.addAndEditForm).then(function (data) {\n            _this5.$message({\n              type: \"success\",\n              message: \"操作成功\"\n            });\n\n            _this5.addAndEditDialog = false;\n\n            _this5.getTableList();\n          });\n        }\n      });\n    },\n    //滑块开关\n    switchValid: function switchValid(params) {\n      var _this6 = this;\n\n      this.request(this.api.system.goodsOwner_updateValid, params).then(function (data) {\n        _this6.$message({\n          type: \"success\",\n          message: \"状态修改成功！\"\n        });\n      });\n    },\n    //删除仓库\n    handleDeleteClick: function handleDeleteClick(params) {\n      var _this7 = this;\n\n      if (params.used) {\n        this.$message({\n          type: \"error\",\n          message: \"不能删除未停用的货主！\"\n        });\n        return;\n      }\n\n      if (!confirm(\"确定要删除当前行数据么？\")) {\n        return;\n      }\n\n      this.request(this.api.system.goodsOwner_logicDelete, params).then(function (data) {\n        _this7.$message({\n          type: \"success\",\n          message: \"删除货主成功！\"\n        });\n\n        _this7.getTableList();\n      });\n    },\n    // 表格更改条数\n    handleSizeChange: function handleSizeChange(val) {\n      this.filtersData.pageSize = val;\n      this.getTableList();\n    },\n    // 表格更改页数\n    handleCurrentChange: function handleCurrentChange(val) {\n      this.filtersData.pageIndex = val;\n      this.getTableList();\n    }\n  }\n};",{"version":3,"sources":["shipper_list.vue"],"names":[],"mappings":"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","sourcesContent":["<style lang=\"less\" scoped>\r\n  .base{background: #fff;}\r\n</style>\r\n<template>\r\n  <!-- 渠道订单 -->\r\n  <div class=\"base\">\r\n    <!-- table -->\r\n    <div class=\"table\">\r\n      <div class=\"item-cont\">\r\n        <el-button-group>\r\n          <el-button size=\"small\" type=\"primary\" @click=\"openAddClass\">新增</el-button>\r\n        </el-button-group>\r\n      </div>\r\n      <!-- table订单 -->\r\n      <template>\r\n        <el-table :data=\"tableData.data\">\r\n          <el-table-column prop=\"code\" label=\"货主编号\" width=\"100\"></el-table-column>\r\n          <el-table-column prop=\"name\" label=\"货主名称\" min-width=\"100\"></el-table-column>\r\n          <el-table-column prop=\"orgName\" label=\"隶属机构\" min-width=\"100\"></el-table-column>\r\n          <el-table-column prop=\"description\" label=\"备注\" min-width=\"100\"></el-table-column>\r\n          <el-table-column prop=\"updateTime\" label=\"更新时间\" min-width=\"90\">\r\n            <template slot-scope=\"scope\">{{scope.row.updateTime | timestampToTime}}</template>\r\n          </el-table-column>\r\n          <el-table-column prop=\"used\" label=\"启停状态\" width=\"80\">\r\n            <template slot-scope=\"scope\">\r\n              <el-switch\r\n                  v-model=\"scope.row.used\"\r\n                  active-color=\"#13ce66\"\r\n                  @change=\"switchValid(scope.row)\"\r\n                  inactive-color=\"#9d9d9d\">\r\n              </el-switch>\r\n            </template>\r\n          </el-table-column>\r\n          <el-table-column\r\n              fixed=\"right\"\r\n              label-class-name=\"text-center\"\r\n              class-name=\"text-center\"\r\n              label=\"操作\"\r\n              width=\"140\"\r\n          >\r\n            <template slot-scope=\"scope\">\r\n              <el-button @click=\"handleEditClick(scope.row.id)\" type=\"text\" size=\"small\">编辑</el-button>\r\n              <el-button @click=\"handleDeleteClick(scope.row)\" type=\"text\" size=\"small\">删除</el-button>\r\n            </template>\r\n          </el-table-column>\r\n        </el-table>\r\n        <div class=\"block\">\r\n          <el-pagination\r\n              @size-change=\"handleSizeChange\"\r\n              @current-change=\"handleCurrentChange\"\r\n              :current-page=\"tableData.pageIndex\"\r\n              :page-sizes=\"[10,20,30,40,50]\"\r\n              :page-size=\"10\"\r\n              layout=\"total, sizes, prev, pager, next, jumper\"\r\n              :total=\"tableData.totalCount\">\r\n          </el-pagination>\r\n        </div>\r\n      </template>\r\n    </div>\r\n    <!--新增 编辑-->\r\n    <el-dialog :title=\"isAdd ? '新增货主' : '编辑货主'\" :visible.sync=\"addAndEditDialog\" class=\"alarmPopup\" width=\"420px\">\r\n      <el-form :model=\"addAndEditForm\"  :rules=\"rules\"  label-width=\"100px\" size=\"small\" ref=\"addAndEditDialogForm\">\r\n        <el-form-item prop=\"orgId\" label=\"隶属机构：\">\r\n          <organization-select v-model=\"addAndEditForm.orgId\" width-class=\"input-w-2\" ref=\"organization\" :disabled=\"!isAdd\"></organization-select>\r\n        </el-form-item>\r\n        <el-form-item prop=\"code\" label=\"货主编号：\">\r\n          <el-input class=\"input-w-2\" placeholder=\"请输入内容\" v-model=\"addAndEditForm.code\" :disabled=\"!isAdd\"></el-input>\r\n        </el-form-item>\r\n        <el-form-item prop=\"name\" label=\"货主名称：\">\r\n          <el-input class=\"input-w-2\" placeholder=\"请输入内容\" v-model=\"addAndEditForm.name\"></el-input>\r\n        </el-form-item>\r\n        <el-form-item prop=\"used\" label=\"启停状态\" width=\"80\">\r\n          <el-switch v-model=\"addAndEditForm.used\" active-color=\"#13ce66\" inactive-color=\"#9d9d9d\"></el-switch>\r\n        </el-form-item>\r\n        <el-form-item prop=\"description\" label=\"备注：\">\r\n          <el-input class=\"input-w-2\" type=\"textarea\" v-model=\"addAndEditForm.description\"></el-input>\r\n        </el-form-item>\r\n      </el-form>\r\n      <div class=\"item-footer item-right\">\r\n        <el-button size=\"small\" @click=\"addAndEditDialog = false\">取消</el-button>\r\n        <el-button size=\"small\" @click=\"submitForm('addAndEditDialogForm')\" type=\"primary\">确定</el-button>\r\n      </div>\r\n    </el-dialog>\r\n  </div>\r\n</template>\r\n<script>\r\n  import OrganizationSelect from \"@/views/system/components/OrganizationSelect.vue\";\r\n  import { validateNumber } from '@/utils/validate'\r\n  export default {\r\n    name: 'shipper_list',\r\n    components: {\r\n      OrganizationSelect\r\n    },\r\n    data() {\r\n      return {\r\n        filtersData: {\r\n          pageIndex: 1,//当前页码\r\n          pageSize: 10//每页数量\r\n        },\r\n        // 表格数据\r\n        tableData: {},\r\n        // 新增和编辑\r\n        addAndEditDialog: false,\r\n        isAdd: true,\r\n        addAndEditForm: {\r\n          orgId: '',\r\n          description: '',\r\n          code: '',\r\n          name: '',\r\n          used: true\r\n        },\r\n        //验证\r\n        rules: {\r\n          code: [\r\n            { required: true, trigger: \"blur\", validator: validateNumber}\r\n          ],\r\n          name: [\r\n            {required: true, message: \"请输入货主名称\", trigger: \"blur\"}\r\n          ],\r\n          orgId: [\r\n            {required: true, message: \"请选择机构\", trigger: \"change\"}\r\n          ]\r\n        },\r\n      }\r\n    },\r\n    mounted(){\r\n      this.$nextTick(() => {\r\n        this.getTableList()\r\n      })\r\n    },\r\n    activated() {\r\n      this.getTableList();\r\n    },\r\n    methods: {\r\n      //获取列表\r\n      getTableList(){\r\n        this.request(this.api.system.goodsOwner_list,this.filtersData).then(data=>{\r\n          this.tableData =data;\r\n        });\r\n      },\r\n      // 获取详情\r\n      getDetails(id){\r\n        this.request(this.api.system.goodsOwner_get, {id: id}).then(data => {\r\n          this.addAndEditForm = data;\r\n        });\r\n      },\r\n      //新增\r\n      openAddClass() {\r\n        this.isAdd = true;\r\n        this.addAndEditDialog = true;\r\n        this.addAndEditForm = {\r\n          orgId: '',\r\n          description: '',\r\n          code: '',\r\n          name: '',\r\n          used: true\r\n        };\r\n        this.$nextTick(() => {\r\n          this.$refs.addAndEditDialogForm.resetFields();\r\n        })\r\n      },\r\n      //修改\r\n      handleEditClick(id) {\r\n        this.isAdd = false;\r\n        this.addAndEditDialog = true;\r\n        this.getDetails(id)\r\n      },\r\n      //保存\r\n      submitForm(formName) {\r\n        this.$refs[formName].validate(valid => {\r\n          if (valid) {\r\n            this.request(this.api.system.goodsOwner_save, this.addAndEditForm).then(data => {\r\n              this.$message({\r\n                type: \"success\",\r\n                message: \"操作成功\"\r\n              });\r\n              this.addAndEditDialog = false;\r\n              this.getTableList();\r\n            });\r\n          }\r\n        });\r\n      },\r\n      //滑块开关\r\n      switchValid(params){\r\n        this.request(this.api.system.goodsOwner_updateValid,params).then(data=>{\r\n          this.$message({\r\n            type: \"success\",\r\n            message: \"状态修改成功！\"\r\n          });\r\n        })\r\n      },\r\n      //删除仓库\r\n      handleDeleteClick(params) {\r\n        if(params.used){\r\n          this.$message({\r\n            type: \"error\",\r\n            message: \"不能删除未停用的货主！\"\r\n          });\r\n          return;\r\n        }\r\n        if (!confirm(\"确定要删除当前行数据么？\")){\r\n          return;\r\n        }\r\n        this.request(this.api.system.goodsOwner_logicDelete, params).then(data => {\r\n          this.$message({\r\n            type: \"success\",\r\n            message: \"删除货主成功！\"\r\n          });\r\n          this.getTableList();\r\n        });\r\n      },\r\n\r\n      // 表格更改条数\r\n      handleSizeChange(val){\r\n        this.filtersData.pageSize=val;\r\n        this.getTableList();\r\n      },\r\n      // 表格更改页数\r\n      handleCurrentChange(val){\r\n        this.filtersData.pageIndex=val;\r\n        this.getTableList();\r\n      }\r\n    }\r\n  }\r\n</script>\r\n\r\n\r\n\r\n"],"sourceRoot":"src/views/system"}]}
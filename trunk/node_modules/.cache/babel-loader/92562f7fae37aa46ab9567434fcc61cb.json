{"remainingRequest":"C:\\Users\\EDZ\\Desktop\\研发项目\\vue-project\\trunk\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\EDZ\\Desktop\\研发项目\\vue-project\\trunk\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!C:\\Users\\EDZ\\Desktop\\研发项目\\vue-project\\trunk\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\EDZ\\Desktop\\研发项目\\vue-project\\trunk\\src\\views\\fmis\\secretkey\\secretkey.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\EDZ\\Desktop\\研发项目\\vue-project\\trunk\\src\\views\\fmis\\secretkey\\secretkey.vue","mtime":1585053690210},{"path":"C:\\Users\\EDZ\\Desktop\\研发项目\\vue-project\\trunk\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1558492728398},{"path":"C:\\Users\\EDZ\\Desktop\\研发项目\\vue-project\\trunk\\node_modules\\babel-loader\\lib\\index.js","mtime":1558492720858},{"path":"C:\\Users\\EDZ\\Desktop\\研发项目\\vue-project\\trunk\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1558492728398},{"path":"C:\\Users\\EDZ\\Desktop\\研发项目\\vue-project\\trunk\\node_modules\\vue-loader\\lib\\index.js","mtime":1558492728890}],"contextDependencies":[],"result":["import \"core-js/modules/es6.function.name\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport { Encrypt, dEncrypt } from '@/vendor/CryptoJS';\nimport { getToken } from \"@/utils/auth\";\nimport { isvalidPhone } from '@/utils/validate';\nvar token = getToken();\n\nvar validPhone = function validPhone(rule, value, callback) {\n  if (!value) {\n    callback(new Error('请输入手机号码'));\n  } else if (!isvalidPhone(value) && value) {\n    callback(new Error('请输入正确的11位手机号码'));\n  } else {\n    callback();\n  }\n};\n\nexport default {\n  data: function data() {\n    return {\n      fileTag: '未上传',\n      tokenHeaders: {\n        accessToken: token\n      },\n      fileList: [],\n      signData: {\n        id: '',\n        //标识时支付宝还是微信支付 \n        tag: \"11002\",\n        //管理员手机号\n        contactMobile: '',\n        //微信手机号\n        wxMobile: '',\n        //文件路径\n        keyPath: \"\",\n        //标识微信APPID\n        wxAppId: '',\n        //商家号或者PID\n        publicId: \"\",\n        //标识商家号\n        shopNumber: \"\",\n        //标识PID\n        PID: \"\",\n        aliMobile: '',\n        //商户密钥或者应用私钥   \n        privateKey: \"\",\n        //标识商户密钥\n        shopPrivateKey: \"\",\n        //标识应用私钥\n        userPrivateKey: \"\",\n        //标识支付宝APPID\n        aliAppId: '',\n        appid: \"\",\n        //应用公钥  \n        aliPublicKey: '',\n        publicKey: \"\",\n        //支付宝公钥\n        aliUsePayPublicKey: '',\n        aliPayPublicKey: \"\"\n      },\n      typeActiveIndex: '1',\n      wxPayRules: {\n        wxMobile: [{\n          required: true,\n          trigger: \"blur\",\n          validator: validPhone\n        }],\n        wxAppId: [{\n          required: true,\n          message: \"appId不能为空\",\n          trigger: \"blur\"\n        }],\n        shopNumber: [{\n          required: true,\n          message: \"商户号不能为空\",\n          trigger: \"blur\"\n        }],\n        shopPrivateKey: [{\n          required: true,\n          message: \"商家密钥不能为空\",\n          trigger: \"blur\"\n        }],\n        keyPath: [{\n          required: true,\n          message: \"文件不能为空\",\n          trigger: \"change\"\n        }]\n      },\n      aliPayRules: {\n        aliMobile: [{\n          required: true,\n          trigger: \"blur\",\n          validator: validPhone\n        }],\n        aliAppId: [{\n          required: true,\n          message: \"appId不能为空\",\n          trigger: \"blur\"\n        }],\n        PID: [{\n          required: true,\n          message: \"PID不能为空\",\n          trigger: \"blur\"\n        }],\n        userPrivateKey: [{\n          required: true,\n          message: \"应用私钥不能为空\",\n          trigger: \"blur\"\n        }],\n        aliPublicKey: [{\n          required: true,\n          message: \"应用公钥不能为空\",\n          trigger: \"blur\"\n        }],\n        aliUsePayPublicKey: [{\n          required: true,\n          message: \"支付宝公钥不能为空\",\n          trigger: \"blur\"\n        }]\n      }\n    };\n  },\n  mounted: function mounted() {\n    this.getByAssociationData(this.signData.tag);\n  },\n  methods: {\n    getByAssociationData: function getByAssociationData(tag) {\n      var _this = this;\n\n      //得到收款页数据\n      this.request(this.api.financial.financialConfig_getByAssociationId, {\n        tag: tag\n      }).then(function (res) {\n        console.log(res);\n        if (!res) return;\n\n        if (res.tag == '11002') {\n          _this.signData = {\n            id: res.id,\n            tag: res.tag,\n            wxAppId: dEncrypt(res.appid),\n            keyPath: res.keyPath,\n            wxMobile: res.contactMobile,\n            shopNumber: dEncrypt(res.publicId),\n            shopPrivateKey: dEncrypt(res.privateKey)\n          };\n\n          var result = _this.fileList.some(function (item) {\n            if (item.name == _this.signData.keyPath) {\n              return true;\n            }\n          });\n\n          if (result) {\n            console.log(\"已经包含该元素了\");\n          } else {\n            _this.fileList = [];\n\n            _this.fileList.push({\n              name: _this.signData.keyPath\n            });\n\n            _this.fileTag = '已上传';\n          }\n        } else {\n          _this.signData = {\n            id: res.id,\n            tag: res.tag,\n            PID: dEncrypt(res.publicId),\n            userPrivateKey: dEncrypt(res.privateKey),\n            aliMobile: res.contactMobile,\n            aliAppId: dEncrypt(res.appid),\n            aliPublicKey: dEncrypt(res.publicKey),\n            aliUsePayPublicKey: dEncrypt(res.aliPayPublicKey)\n          };\n        }\n      });\n    },\n    //文件上传成功过\n    handleFileSuccess: function handleFileSuccess(res, file) {\n      console.log(res);\n      this.signData.keyPath = res.data;\n      console.log(this.signData.keyPath);\n    },\n    typeActiveSelect: function typeActiveSelect(index) {\n      this.typeActiveIndex = index;\n      this.signData = {};\n      console.log(index);\n\n      switch (index) {\n        case \"1\":\n          //微信支付  \n          this.signData.tag = \"11002\";\n          this.getByAssociationData(this.signData.tag);\n          break;\n\n        case \"2\":\n          //支付宝支付  \n          this.signData.tag = \"11001\";\n          this.getByAssociationData(this.signData.tag);\n          break;\n      }\n    },\n    fileAction: function fileAction() {\n      return this.api.FN_ALLPATH(this.api.financial.financialConfig_uploadCredential);\n    },\n    jieMiBtn: function jieMiBtn() {\n      console.log(\"jimi\");\n      var publicId = dEncrypt(this.signData.publicId);\n      var privateKey = dEncrypt(this.signData.privateKey);\n      console.log(publicId);\n      console.log(privateKey);\n    },\n    //微信支付设置\n    wxPaySaveInputDataBtnClick: function wxPaySaveInputDataBtnClick(formName) {\n      var _this2 = this;\n\n      this.$refs[formName].validate(function (valid) {\n        if (valid) {\n          _this2.signData.appid = Encrypt(_this2.signData.wxAppId);\n          _this2.signData.publicId = Encrypt(_this2.signData.shopNumber);\n          _this2.signData.privateKey = Encrypt(_this2.signData.shopPrivateKey);\n          _this2.signData.contactMobile = _this2.signData.wxMobile;\n\n          _this2.request(_this2.api.financial.financialConfig_paymentConfig, _this2.signData).then(function (res) {\n            console.log(res);\n\n            _this2.$message.success(\"\\u4FDD\\u5B58\\u6210\\u529F\");\n          });\n        } else {\n          console.log('error submit!!');\n          return false;\n        }\n      });\n    },\n    //支付宝支付设置\n    aliPaySaveInputDataBtnClick: function aliPaySaveInputDataBtnClick(formName) {\n      var _this3 = this;\n\n      this.$refs[formName].validate(function (valid) {\n        if (valid) {\n          _this3.signData.publicId = Encrypt(_this3.signData.PID);\n          _this3.signData.privateKey = Encrypt(_this3.signData.userPrivateKey);\n          _this3.signData.appid = Encrypt(_this3.signData.aliAppId);\n          _this3.signData.publicKey = Encrypt(_this3.signData.aliPublicKey);\n          _this3.signData.aliPayPublicKey = Encrypt(_this3.signData.aliUsePayPublicKey);\n          _this3.signData.contactMobile = _this3.signData.aliMobile;\n\n          _this3.request(_this3.api.financial.financialConfig_paymentConfig, _this3.signData).then(function (res) {\n            console.log(res);\n\n            _this3.$message.success(\"\\u4FDD\\u5B58\\u6210\\u529F\");\n          });\n        } else {\n          console.log('error submit!!');\n          return false;\n        }\n      });\n    },\n    beforefileUploadChange: function beforefileUploadChange(file) {\n      console.log(file); //文件上传之前调用做一些拦截限制\n\n      this.fileList = [];\n      this.fileList.push({\n        name: file.name\n      });\n      this.fileTag = \"已上传\";\n    }\n  }\n};",{"version":3,"sources":["secretkey.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\r\n  <div>\r\n    <div class='tab_div' style='font-weight:bold;padding-left:18px;'>\r\n        <el-menu :default-active=\"typeActiveIndex\" text-color=\"#222\" active-text-color=\"#2290e8\" \r\n            mode=\"horizontal\" @select=\"typeActiveSelect\" style='border-bottom:none;'>\r\n            <el-menu-item index=\"1\" style='border-bottom:none;'>微信收款设置</el-menu-item>\r\n            <el-menu-item index=\"2\" style='border-bottom:none;'>支付宝收款设置</el-menu-item>\r\n        </el-menu>\r\n    </div>\r\n    <div class=\"search_div\" v-show=\"typeActiveIndex==1\">\r\n      <el-form ref=\"wxformData\" :model=\"signData\" :rules=\"wxPayRules\" :inline=\"true\" label-width=\"140px\">\r\n        <el-form-item label=\"管理员手机号：\" prop=\"wxMobile\">\r\n          <el-input\r\n            style=\"width:300px;\"\r\n            v-model=\"signData.wxMobile\"\r\n            placeholder=\"请输入手机号\"\r\n          ></el-input>\r\n        </el-form-item><br/>\r\n        <el-form-item label=\"APPID：\" prop=\"wxAppId\">\r\n          <el-input\r\n            style=\"width:300px;\"\r\n            v-model=\"signData.wxAppId\"\r\n            placeholder=\"请输入appid\"\r\n          ></el-input>\r\n        </el-form-item><br/>\r\n        <el-form-item label=\"商家号：\" prop=\"shopNumber\">\r\n          <el-input\r\n            style=\"width:300px;\"\r\n            v-model=\"signData.shopNumber\"\r\n            placeholder=\"请输入商家号\"\r\n          ></el-input>\r\n        </el-form-item><br/>\r\n        <el-form-item label=\"商户密钥：\" prop=\"shopPrivateKey\">\r\n           <el-input\r\n            type=\"textarea\"\r\n            resize='none'\r\n            :rows='3'\r\n            style=\"width:300px;\"\r\n            v-model=\"signData.shopPrivateKey\"\r\n            placeholder=\"请输入32位商户密钥\"\r\n           ></el-input>\r\n        </el-form-item><br/>\r\n        <el-form-item label=\"付款证书：\" prop=\"keyPath\">\r\n          <div class=\"upload-file\">\r\n            <el-upload\r\n              class=\"upload-demo\"\r\n              :action=\"fileAction()\"\r\n              :headers=\"tokenHeaders\"\r\n              name=\"credential\"\r\n              :on-success=\"handleFileSuccess\"\r\n              :on-change=\"beforefileUploadChange\"\r\n              :show-file-list='false'\r\n              >\r\n              <el-button size=\"small\" type=\"primary\">点击上传</el-button>\r\n              <!-- <div slot=\"tip\" class=\"el-upload__tip\">只能上传jpg/png文件，且不超过500kb</div> -->\r\n            </el-upload>\r\n            <span>{{fileTag}}</span>\r\n          </div>\r\n        </el-form-item><br/>\r\n        <el-form-item>\r\n          <el-button type=\"primary\" @click=\"wxPaySaveInputDataBtnClick('wxformData')\" size=\"small\" style=\"margin-left:140px;\">保存</el-button>\r\n          <!-- <el-button type=\"primary\" @click=\"jieMiBtn\" size=\"small\" style=\"margin-left:120px;\">解密</el-button> -->\r\n        </el-form-item>\r\n      </el-form>\r\n    </div>\r\n    <div class=\"search_div\" v-show=\"typeActiveIndex==2\">\r\n      <el-form ref=\"aliformData\" :model=\"signData\" :rules=\"aliPayRules\" :inline=\"true\" label-width=\"140px\">\r\n        <el-form-item label=\"管理员手机号：\" prop=\"aliMobile\">\r\n          <el-input\r\n            style=\"width:300px;\"\r\n            v-model=\"signData.aliMobile\"\r\n            placeholder=\"请输入appid\"\r\n          ></el-input>\r\n        </el-form-item><br/>\r\n        <el-form-item label=\"APPID：\" prop=\"aliAppId\">\r\n          <el-input\r\n            style=\"width:300px;\"\r\n            v-model=\"signData.aliAppId\"\r\n            placeholder=\"请输入appid\"\r\n          ></el-input>\r\n        </el-form-item><br/>\r\n        <el-form-item label=\"PID：\" prop=\"PID\">\r\n          <el-input\r\n            style=\"width:300px;\"\r\n            v-model=\"signData.PID\"\r\n            placeholder=\"请输入PID\"\r\n          ></el-input>\r\n        </el-form-item><br/>\r\n        <el-form-item label=\"应用私钥：\" prop=\"userPrivateKey\">\r\n           <el-input\r\n            :rows='3'\r\n            type=\"textarea\"\r\n            resize='none'\r\n            style=\"width:300px;\"\r\n            v-model=\"signData.userPrivateKey\"\r\n            placeholder=\"请输入应用私钥\"\r\n           ></el-input>\r\n        </el-form-item><br/>\r\n        <el-form-item label=\"应用公钥：\" prop=\"aliPublicKey\">\r\n           <el-input\r\n            type=\"textarea\"\r\n            resize='none'\r\n            :rows='3'\r\n            style=\"width:300px;\"\r\n            v-model=\"signData.aliPublicKey\"\r\n            placeholder=\"请输入应用公钥\"\r\n           ></el-input>\r\n        </el-form-item><br/>\r\n        <el-form-item label=\"支付宝公钥：\" prop=\"aliUsePayPublicKey\">\r\n           <el-input\r\n            type=\"textarea\"\r\n            resize='none'\r\n            :rows='3'\r\n            style=\"width:300px;\"\r\n            v-model=\"signData.aliUsePayPublicKey\"\r\n            placeholder=\"请输入支付宝公钥\"\r\n           ></el-input>\r\n        </el-form-item><br/>\r\n        <el-form-item>\r\n          <el-button type=\"primary\" @click=\"aliPaySaveInputDataBtnClick('aliformData')\" size=\"small\" style=\"margin-left:140px;\">保存</el-button>\r\n        </el-form-item>\r\n      </el-form>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport {Encrypt,dEncrypt} from '@/vendor/CryptoJS'\r\nimport { getToken } from \"@/utils/auth\";\r\nimport {isvalidPhone} from '@/utils/validate'\r\nlet token = getToken(); \r\nlet validPhone=(rule, value,callback)=>{\r\n  if(!value){\r\n    callback(new Error('请输入手机号码'));\r\n  }else if (!isvalidPhone(value) && value){\r\n    callback(new Error('请输入正确的11位手机号码'));\r\n  }else {\r\n    callback();\r\n  }\r\n};\r\nexport default {\r\n  data() {\r\n    return {\r\n      fileTag:'未上传',\r\n      tokenHeaders:{accessToken: token},\r\n      fileList:[],\r\n      signData:{\r\n        id:'',\r\n        //标识时支付宝还是微信支付 \r\n        tag:\"11002\",\r\n        //管理员手机号\r\n        contactMobile:'',\r\n        //微信手机号\r\n        wxMobile:'',\r\n        //文件路径\r\n        keyPath:\"\",\r\n        //标识微信APPID\r\n        wxAppId:'',\r\n        //商家号或者PID\r\n        publicId:\"\",\r\n        //标识商家号\r\n        shopNumber:\"\",   \r\n        //标识PID\r\n        PID:\"\",\r\n        aliMobile:'',\r\n        //商户密钥或者应用私钥   \r\n        privateKey:\"\",\r\n        //标识商户密钥\r\n        shopPrivateKey:\"\",\r\n        //标识应用私钥\r\n        userPrivateKey:\"\",   \r\n        //标识支付宝APPID\r\n        aliAppId:'',\r\n        appid:\"\",\r\n        //应用公钥  \r\n        aliPublicKey:'', \r\n        publicKey:\"\",\r\n        //支付宝公钥\r\n        aliUsePayPublicKey:'',\r\n        aliPayPublicKey:\"\"\r\n      },\r\n      typeActiveIndex:'1',\r\n      wxPayRules:{\r\n        wxMobile:[ { required: true, trigger: \"blur\", validator: validPhone}],\r\n        wxAppId:[{ required: true, message: \"appId不能为空\", trigger: \"blur\" }],\r\n        shopNumber: [{ required: true, message: \"商户号不能为空\", trigger: \"blur\" }],\r\n        shopPrivateKey: [{ required: true, message: \"商家密钥不能为空\", trigger: \"blur\" }],\r\n        keyPath:[{ required: true, message: \"文件不能为空\", trigger: \"change\" }]\r\n      },\r\n      aliPayRules: {\r\n        aliMobile:[ { required: true, trigger: \"blur\", validator: validPhone}],\r\n        aliAppId:[{ required: true, message: \"appId不能为空\", trigger: \"blur\" }],\r\n        PID: [{ required: true, message: \"PID不能为空\", trigger: \"blur\" }],\r\n        userPrivateKey: [{ required: true, message: \"应用私钥不能为空\", trigger: \"blur\" }],\r\n        aliPublicKey:[{ required: true, message: \"应用公钥不能为空\", trigger: \"blur\" }],\r\n        aliUsePayPublicKey: [{ required: true, message: \"支付宝公钥不能为空\", trigger: \"blur\" }],\r\n      },\r\n    };\r\n  },\r\n  mounted() {\r\n    this.getByAssociationData(this.signData.tag)\r\n  },\r\n  methods: {\r\n    getByAssociationData(tag){\r\n      //得到收款页数据\r\n      this.request( this.api.financial.financialConfig_getByAssociationId,{tag:tag}).then(res =>{\r\n        console.log(res);\r\n        if(!res)return\r\n        if(res.tag =='11002'){\r\n          this.signData={\r\n            id:res.id,\r\n            tag:res.tag,\r\n            wxAppId:dEncrypt(res.appid),\r\n            keyPath:res.keyPath,\r\n            wxMobile:res.contactMobile,\r\n            shopNumber:dEncrypt(res.publicId),\r\n            shopPrivateKey:dEncrypt(res.privateKey)\r\n          }\r\n          var result = this.fileList.some(item=>{\r\n            if(item.name==this.signData.keyPath){\r\n              return true \r\n            } \r\n          })\r\n          if(result){\r\n            console.log(\"已经包含该元素了\")\r\n          }else{\r\n            this.fileList=[]\r\n            this.fileList.push({name:this.signData.keyPath});\r\n            this.fileTag='已上传'\r\n          }\r\n        }else{\r\n          this.signData={\r\n            id:res.id,\r\n            tag:res.tag,\r\n            PID:dEncrypt(res.publicId),\r\n            userPrivateKey:dEncrypt(res.privateKey),\r\n            aliMobile:res.contactMobile,\r\n            aliAppId:dEncrypt(res.appid),\r\n            aliPublicKey:dEncrypt(res.publicKey),\r\n            aliUsePayPublicKey:dEncrypt(res.aliPayPublicKey)\r\n          }\r\n        }\r\n      })\r\n    },\r\n    //文件上传成功过\r\n    handleFileSuccess(res, file){\r\n      console.log(res)\r\n      this.signData.keyPath=res.data\r\n      console.log(this.signData.keyPath)\r\n    },\r\n    typeActiveSelect(index){\r\n     this.typeActiveIndex=index\r\n     this.signData={} \r\n     console.log(index)\r\n      switch(index){\r\n        case \"1\":\r\n          //微信支付  \r\n          this.signData.tag=\"11002\";\r\n          this.getByAssociationData(this.signData.tag);\r\n          break;\r\n        case \"2\":\r\n          //支付宝支付  \r\n          this.signData.tag=\"11001\";\r\n          this.getByAssociationData(this.signData.tag);\r\n          break;\r\n      }\r\n    },\r\n    fileAction() {\r\n      return this.api.FN_ALLPATH(this.api.financial.financialConfig_uploadCredential);\r\n    },\r\n    jieMiBtn(){\r\n      console.log(\"jimi\");\r\n      \r\n       var publicId=dEncrypt(this.signData.publicId)\r\n       var privateKey=dEncrypt(this.signData.privateKey)\r\n       console.log(publicId)\r\n       console.log(privateKey)\r\n    },\r\n    //微信支付设置\r\n    wxPaySaveInputDataBtnClick(formName){\r\n      this.$refs[formName].validate((valid) => {\r\n        if (valid) {\r\n          this.signData.appid=Encrypt(this.signData.wxAppId)\r\n          this.signData.publicId=Encrypt(this.signData.shopNumber)\r\n          this.signData.privateKey=Encrypt(this.signData.shopPrivateKey)\r\n          this.signData.contactMobile=this.signData.wxMobile\r\n          this.request(this.api.financial.financialConfig_paymentConfig,this.signData).then(res =>{\r\n            console.log(res)\r\n            this.$message.success(`保存成功`);\r\n          })\r\n        } else {\r\n          console.log('error submit!!');\r\n          return false;\r\n        }\r\n      });\r\n    },\r\n    //支付宝支付设置\r\n    aliPaySaveInputDataBtnClick(formName){\r\n      this.$refs[formName].validate((valid) => {\r\n        if (valid) {\r\n          this.signData.publicId=Encrypt(this.signData.PID)\r\n          this.signData.privateKey=Encrypt(this.signData.userPrivateKey)\r\n          this.signData.appid=Encrypt(this.signData.aliAppId)\r\n          this.signData.publicKey=Encrypt(this.signData.aliPublicKey)\r\n          this.signData.aliPayPublicKey=Encrypt(this.signData.aliUsePayPublicKey)\r\n          this.signData.contactMobile=this.signData.aliMobile\r\n          this.request( this.api.financial.financialConfig_paymentConfig,this.signData).then(res =>{\r\n            console.log(res)\r\n            this.$message.success(`保存成功`);\r\n          })\r\n        } else {\r\n          console.log('error submit!!');\r\n          return false;\r\n        }\r\n      });\r\n    },  \r\n    beforefileUploadChange(file) {\r\n      console.log(file);\r\n      //文件上传之前调用做一些拦截限制\r\n      this.fileList=[]\r\n      this.fileList.push({name:file.name});\r\n      this.fileTag=\"已上传\"\r\n    },\r\n  }\r\n};\r\n</script>\r\n\r\n<style lang=\"less\" scoped>\r\n.store_name_div{\r\n    position:absolute;\r\n    right:42px;\r\n    top:80px;\r\n    color:#222;\r\n    font-weight:bold;\r\n}\r\n.tab_div{\r\n    margin: 0 10px;\r\n    padding:0 32px;\r\n    background-color: #fff;\r\n}\r\n.search_div {\r\n  margin: 0 10px;\r\n  padding-top: 20px;\r\n  background-color: #fff;\r\n  .first-input {\r\n    width: 300px;\r\n  }\r\n}\r\n.amountFount{\r\n  color:red;\r\n}\r\n.table_div {\r\n  margin: 10px;\r\n  background-color: #fff;\r\n  padding-top: 20px;\r\n  padding-left: 10px;\r\n}\r\n.page_div{\r\n  margin-top:20px;\r\n  padding-bottom:10px;\r\n  margin-right:20px;\r\n  display:flex;\r\n  align-items:center;\r\n}\r\n.upload-file{\r\n  display:flex;\r\n  color:#222;\r\n  font-size:15px;\r\n  span {\r\n    margin-left:15px;\r\n  }\r\n}\r\n</style>\r\n\r\n\r\n\r\n"],"sourceRoot":"src/views/fmis/secretkey"}]}
{"remainingRequest":"C:\\Users\\EDZ\\Desktop\\研发项目\\vue-project\\trunk\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\EDZ\\Desktop\\研发项目\\vue-project\\trunk\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!C:\\Users\\EDZ\\Desktop\\研发项目\\vue-project\\trunk\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\EDZ\\Desktop\\研发项目\\vue-project\\trunk\\src\\views\\orders\\business\\purchase\\purchaseOrder_editor.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\EDZ\\Desktop\\研发项目\\vue-project\\trunk\\src\\views\\orders\\business\\purchase\\purchaseOrder_editor.vue","mtime":1572415125101},{"path":"C:\\Users\\EDZ\\Desktop\\研发项目\\vue-project\\trunk\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1558492728398},{"path":"C:\\Users\\EDZ\\Desktop\\研发项目\\vue-project\\trunk\\node_modules\\babel-loader\\lib\\index.js","mtime":1558492720858},{"path":"C:\\Users\\EDZ\\Desktop\\研发项目\\vue-project\\trunk\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1558492728398},{"path":"C:\\Users\\EDZ\\Desktop\\研发项目\\vue-project\\trunk\\node_modules\\vue-loader\\lib\\index.js","mtime":1558492728890}],"contextDependencies":[],"result":["import \"core-js/modules/es6.number.constructor\";\nimport \"core-js/modules/es6.array.find\";\nimport _typeof from \"C:\\\\Users\\\\EDZ\\\\Desktop\\\\\\u7814\\u53D1\\u9879\\u76EE\\\\vue-project\\\\trunk\\\\node_modules\\\\@babel\\\\runtime-corejs2/helpers/esm/typeof\";\nimport \"core-js/modules/es6.regexp.match\";\nimport \"core-js/modules/web.dom.iterable\";\nimport \"core-js/modules/es6.function.name\";\nimport \"regenerator-runtime/runtime\";\nimport _asyncToGenerator from \"C:\\\\Users\\\\EDZ\\\\Desktop\\\\\\u7814\\u53D1\\u9879\\u76EE\\\\vue-project\\\\trunk\\\\node_modules\\\\@babel\\\\runtime-corejs2/helpers/esm/asyncToGenerator\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport codeSet from \"@/components/codeSet\";\nimport treeDept from \"@/components/treeDept\";\nimport { constants } from \"crypto\";\nexport default {\n  components: {\n    codeSet: codeSet,\n    treeDept: treeDept\n  },\n  data: function data() {\n    return {\n      signData: {\n        orderType: \"0301\",\n        //组织机构\n        organizationCode: \"\",\n        organization: \"\",\n        //selectChange\n        //货主\n        goodsOwner: '',\n        //税点\n        tax: \"\",\n        deliveryDate: \"\",\n        //供货商\n        supplier: \"\",\n        //供货商编码\n        supplierCode: \"\",\n        //采购合同号\n        contractSn: \"\",\n        signTime: \"\",\n        //采购备注\n        remarks: \"\",\n        //选择日期\n        createTime: \"\",\n        //支付方式\n        paymentCode: \"\",\n        //商品数据表\n        channelOrderGoodsVOList: null,\n        optionData: [],\n        //实付金额\n        validAmount: '0.00',\n        //扣减原因\n        preferentialRemarks: \"\",\n        //扣减金额\n        preferentialAmount: \"\",\n        //采购商品金额\n        amount: \"\",\n        //采购付款金额\n        actualAmount: \"\",\n        //选项框\n        radio: \"1\"\n      },\n      rules: {\n        tax: [{\n          required: true,\n          message: \"请选择税点\",\n          trigger: \"change\"\n        }],\n        supplier: [{\n          required: true,\n          message: \"供货商不能为空\",\n          trigger: \"change\"\n        }],\n        organization: [{\n          required: true,\n          message: \"组织机构不能为空\",\n          trigger: \"change\"\n        }]\n      },\n      //填写的优惠金额\n      price: \"\",\n      //文本域输入\n      textarea: \"\",\n      orderPrice: \"\",\n      shopRetailPrice: \"\"\n    };\n  },\n  created: function created() {\n    var _this = this;\n\n    //得到组织机构数据\n    this.getWarehouseListData();\n\n    var _type = localStorage.getItem(\"type\") || \"\";\n\n    console.log(_type);\n\n    if (_type == \"add\") {\n      //得到需要编辑的数据\n      this.getEditorData(this.$route.query.orderSn);\n    } else {\n      if (localStorage.getItem(\"localTableData\") == null) {\n        return;\n      }\n\n      console.log(\"channelOrderGoodsVOList\"); //存储填写的信息\n\n      var shopData = localStorage.getItem(\"shopMsgData\");\n      this.$nextTick(function () {\n        _this.signData = JSON.parse(shopData);\n        var amount = localStorage.getItem(\"allShopPrice\");\n        console.log(amount); //赋值订单总金额\n\n        _this.signData.amount = parseFloat(amount).toFixed(2);\n        _this.signData.actualAmount = parseFloat(amount).toFixed(2);\n        _this.signData.channelOrderGoodsVOList = JSON.parse(localStorage.getItem(\"localTableData\"));\n\n        _this.taxPointChange(_this.signData.tax);\n\n        console.log(_this.signData.channelOrderGoodsVOList);\n\n        _this.setOrderShopDataArr();\n      });\n    }\n  },\n  watch: {\n    \"signData.preferentialAmount\": function signDataPreferentialAmount(newPrice) {\n      var actualAmount = this.signData.amount - newPrice;\n      this.signData.actualAmount = actualAmount.toFixed(2);\n    }\n  },\n  filters: {\n    rowType: function rowType(type) {\n      switch (type) {\n        case 1:\n          return \"成衣\";\n          break;\n\n        case 2:\n          return \"样衣\";\n          break;\n      }\n    }\n  },\n  methods: {\n    //得到组织机构数据\n    getWarehouseListData: function () {\n      var _getWarehouseListData = _asyncToGenerator(\n      /*#__PURE__*/\n      regeneratorRuntime.mark(function _callee() {\n        var _this2 = this;\n\n        var info;\n        return regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                _context.next = 2;\n                return this.request(this.api.user.get_userinfo, {}, true);\n\n              case 2:\n                info = _context.sent;\n                console.log(info); //得到部门Id\n\n                this.signData.relationDepId = info.departId;\n                this.request(this.api.user.userCompany_getUserOrgByUserId, {\n                  userId: info.userId,\n                  type: 0\n                }).then(function (data) {\n                  console.log(data); // this.organizationListData=data\n                  //得到机构\n\n                  _this2.signData.organization = data.name; //得到机构code\n\n                  _this2.signData.organizationCode = data.id; //获取货主列表\n\n                  _this2.getGoodsOwnerListData(_this2.signData.organizationCode); //得到供货商数据\n\n\n                  _this2.getSupplierListData(_this2.signData.organizationCode);\n                });\n\n              case 6:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this);\n      }));\n\n      function getWarehouseListData() {\n        return _getWarehouseListData.apply(this, arguments);\n      }\n\n      return getWarehouseListData;\n    }(),\n    //得到供货商数据\n    getSupplierListData: function getSupplierListData(organizationId) {\n      var _this3 = this;\n\n      console.log(246); //cooperation 为true得到有合作的供应商 不传 得到全部的供应商\n\n      this.request(this.api.product.supplier_list, {\n        organizationId: organizationId,\n        cooperation: true\n      }).then(function (data) {\n        console.log(data);\n        _this3.signData.optionData = data.data;\n      });\n    },\n    //获取货主列表\n    getGoodsOwnerListData: function getGoodsOwnerListData(organizationId) {\n      var _this4 = this;\n\n      this.request(this.api.system.goodsOwner_list, {\n        orgId: organizationId\n      }).then(function (data) {\n        console.log(data.data);\n        _this4.signData.goodsOwner = data.data[0].code;\n      });\n    },\n    //设置采购金额\n    setOrderShopDataArr: function setOrderShopDataArr() {\n      var orderData = this.signData.channelOrderGoodsVOList;\n\n      var _that = this;\n\n      if (orderData.length > 0) {\n        orderData.forEach(function (item) {\n          _that.$set(item, \"amount\", (item.purchasePrice * item.num).toFixed(2));\n        });\n      }\n    },\n    //实付金额值改变的事件\n    validAmountValueChangeEvent: function validAmountValueChangeEvent(val) {\n      if (!val) return;\n      var validAmount = val.match(/^\\d*(\\.?\\d{0,2})/g);\n      this.signData.validAmount = validAmount[0];\n    },\n    //价格变化事件\n    priceInputChangeEvent: function priceInputChangeEvent() {\n      console.log(this.price);\n    },\n    //选择支付方式\n    paySelectWay: function paySelectWay(item) {\n      console.log(item);\n    },\n    //点击选择商品\n    selectShopClickEvent: function selectShopClickEvent() {\n      console.log(\"selectShopClickEvent======show_purchaseOrder_shop======236\");\n      this.$router.push({\n        path: \"/show_procureOrder_shop\",\n        name: \"show_procureOrder_shop\",\n        query: {\n          tenantId: this.signData.goodsOwner,\n          organizationName: this.signData.organization\n        }\n      }); //存储填写的信息\n\n      localStorage.setItem(\"shopMsgData\", JSON.stringify(this.signData));\n      localStorage.setItem(\"localTableData\", JSON.stringify(this.signData.channelOrderGoodsVOList));\n    },\n    //得到初始数据\n    getEditorData: function getEditorData(orderSn) {\n      var _this5 = this;\n\n      this.request(this.api.order.channelPurchaseOrder_getByOrderSn, {\n        orderSn: orderSn,\n        pageIndex: '',\n        pageSize: ''\n      }).then(function (data) {\n        console.log(data);\n\n        if (data.tax) {\n          var tmpTax = data.tax * 100;\n          data.tax = tmpTax + \"%\";\n          _this5.signData = data;\n\n          _this5.$set(_this5.signData, 'radio', '2');\n\n          data.channelOrderGoodsVOList.data.forEach(function (item) {\n            _this5.$set(item, 'tax', data.tax);\n          });\n        } else {\n          _this5.signData = data;\n\n          _this5.$set(_this5.signData, 'radio', '1');\n        }\n\n        if (data.channelOrderGoodsVOList.data) {\n          data.channelOrderGoodsVOList.data.forEach(function (item) {\n            if (item.actualAmount) {\n              item.amount = parseFloat(item.actualAmount * item.num).toFixed(2);\n            } else {\n              item.amount = parseFloat(item.purchasePrice * item.num).toFixed(2);\n            }\n          });\n          _this5.signData.channelOrderGoodsVOList = data.channelOrderGoodsVOList.data;\n        }\n\n        var amount = 0;\n\n        _this5.signData.channelOrderGoodsVOList.forEach(function (item) {\n          amount += parseFloat(item.amount);\n        });\n\n        _this5.signData.amount = parseFloat(amount).toFixed(2);\n        _this5.signData.actualAmount = parseFloat(amount).toFixed(2);\n      });\n    },\n    //确认按钮的点击事件\n    primaryBtnClick: function primaryBtnClick() {\n      var _this6 = this;\n\n      this.$refs.formData.validate(function (valid) {\n        if (valid) {\n          // this.signData.organization = this.$refs.treeDept.$refs.input.value;\n          if (_this6.signData.channelOrderGoodsVOList) {\n            _this6.signData.channelOrderGoodsVOList.forEach(function (item) {\n              item.unitPrice = item.purchasePrice;\n            });\n          } else {\n            _this6.$message.error('商品数量不能全部为0');\n\n            return;\n          }\n\n          var validAmount = _this6.signData.validAmount;\n          console.log(_typeof(validAmount));\n\n          if (validAmount == '' && typeof validAmount != 'number' || typeof validAmount == \"undefined\") {\n            _this6.$message.error('请输入实付金额');\n\n            return;\n          } //过滤商品数量\n\n\n          var filterOrderGoodsVOListData = _this6.signData.channelOrderGoodsVOList.filter(function (item) {\n            return item.num && item.num != 0;\n          });\n\n          if (filterOrderGoodsVOListData.length == 0) {\n            _this6.$message.error('采购商品数量不能全部为0');\n\n            return;\n          }\n\n          _this6.signData.channelCode = '04';\n          _this6.signData.channelOrderGoodsVOList = filterOrderGoodsVOListData;\n          console.log(\"primaryBtnClick\");\n\n          if (_this6.signData.tax) {\n            var subTax = _this6.signData.tax.slice(0, _this6.signData.tax.length - 1);\n\n            var taxNum = subTax / 100;\n            _this6.signData.tax = taxNum;\n          }\n\n          _this6.request(_this6.api.order.channelPurchaseOrder_save, _this6.signData).then(function (data) {\n            //此处应该时上传成功后，再删除\n            localStorage.removeItem(\"localTableData\");\n            _this6.signData.channelOrderGoodsVOList = [];\n\n            _this6.$router.go(-1);\n          });\n        } else {\n          return false;\n        }\n      });\n    },\n    //存储供应商编码\n    selectSupplierChange: function selectSupplierChange(val) {\n      var suppliceObj = this.signData.optionData.find(function (item) {\n        return item.name == val;\n      });\n      this.signData.supplierCode = suppliceObj.code;\n    },\n    //取消按钮的点击事件\n    plainBtnClick: function plainBtnClick() {\n      this.$router.go(-1);\n    },\n    //数量检测\n    shopNumberChange: function shopNumberChange(val, row) {\n      console.log(val);\n\n      if (!val) {\n        val = 0;\n      }\n\n      if (row.tax && row.tax != '--') {\n        row.amount = parseFloat(row.actualAmount * val).toFixed(2);\n      } else {\n        row.amount = (row.purchasePrice * val).toFixed(2);\n      }\n\n      var amount = 0;\n      this.signData.channelOrderGoodsVOList.forEach(function (item) {\n        amount += parseFloat(item.amount);\n      });\n      this.signData.amount = parseFloat(amount).toFixed(2);\n\n      if (this.signData.preferentialAmount) {\n        this.signData.actualAmount = parseFloat(amount - Number(this.signData.preferentialAmount)).toFixed(2);\n      } else {\n        this.signData.actualAmount = parseFloat(amount).toFixed(2);\n      } // this.signData.actualAmount = parseFloat(amount).toFixed(2);\n\n    },\n    //税点改变时\n    taxPointChange: function taxPointChange(val) {\n      var _this7 = this;\n\n      console.log(val);\n\n      if (!val) {\n        return;\n      }\n\n      var subVal = val.slice(0, val.length - 1);\n      console.log(subVal);\n\n      if (this.signData.channelOrderGoodsVOList.length > 0) {\n        this.signData.channelOrderGoodsVOList.forEach(function (item) {\n          // item.tax = val;\n          _this7.$set(item, 'tax', val); //含税单价\n\n\n          item.actualAmount = parseFloat(item.purchasePrice * (subVal / 100 + 1)).toFixed(2); //采购金额\n\n          item.amount = parseFloat(item.actualAmount * item.num).toFixed(2);\n        });\n        var amount = 0;\n        this.signData.channelOrderGoodsVOList.forEach(function (item) {\n          amount += parseFloat(item.amount);\n        });\n        this.signData.amount = parseFloat(amount).toFixed(2);\n\n        if (this.signData.preferentialAmount) {\n          this.signData.actualAmount = parseFloat(amount - Number(this.signData.preferentialAmount)).toFixed(2);\n        } else {\n          this.signData.actualAmount = parseFloat(amount).toFixed(2);\n        } // this.signData.actualAmount = parseFloat(amount).toFixed(2);\n\n      }\n    },\n    //采购单价发生变化\n    purchasePriceChange: function purchasePriceChange(val) {\n      console.log(val);\n\n      if (!this.signData.tax) {\n        this.signData.channelOrderGoodsVOList.forEach(function (item) {\n          item.amount = (item.purchasePrice * item.num).toFixed(2);\n        });\n      } else {\n        var selectSubStr = (this.signData.tax.slice(0, this.signData.tax.length - 1) / 100).toFixed(2);\n        var subStr = parseFloat(selectSubStr) + 1;\n        this.signData.channelOrderGoodsVOList.forEach(function (item) {\n          item.actualAmount = (item.purchasePrice * subStr).toFixed(2);\n          item.amount = (item.actualAmount * item.num).toFixed(2);\n        });\n      }\n\n      var amount = 0;\n      this.signData.channelOrderGoodsVOList.forEach(function (item) {\n        amount += parseFloat(item.amount);\n      });\n      this.signData.amount = parseFloat(amount).toFixed(2);\n\n      if (this.signData.preferentialAmount) {\n        this.signData.actualAmount = parseFloat(amount - Number(this.signData.preferentialAmount)).toFixed(2);\n      } else {\n        this.signData.actualAmount = parseFloat(amount).toFixed(2);\n      } // this.signData.actualAmount = parseFloat(amount).toFixed(2);\n\n    },\n    //采购金额发生变化了\n    amountChange: function amountChange(val, row) {\n      console.log(val);\n      console.log(row);\n      if (row.num == 0) return;\n\n      if (this.signData.tax) {\n        var selectVal = (this.signData.tax.slice(0, this.signData.tax.length - 1) / 100).toFixed(2);\n        var subStr = parseFloat(selectVal) + 1;\n        row.actualAmount = (row.amount / row.num).toFixed(2);\n        row.purchasePrice = (row.actualAmount / subStr).toFixed(2);\n      } else {\n        row.purchasePrice = (row.amount / row.num).toFixed(2);\n      }\n\n      var amount = 0;\n      this.signData.channelOrderGoodsVOList.forEach(function (item) {\n        if (!item.amount) {\n          item.amount = \"0.00\";\n        }\n\n        amount += parseFloat(item.amount);\n      });\n      this.signData.amount = parseFloat(amount).toFixed(2);\n\n      if (this.signData.preferentialAmount) {\n        this.signData.actualAmount = parseFloat(amount - Number(this.signData.preferentialAmount)).toFixed(2);\n      } else {\n        this.signData.actualAmount = parseFloat(amount).toFixed(2);\n      } // this.signData.actualAmount = parseFloat(amount).toFixed(2);\n\n    },\n    //含税金额发生改变\n    actualAmountChange: function actualAmountChange(val) {\n      if (this.signData.tax) {\n        var selectVal = parseFloat(this.signData.tax.slice(0, this.signData.tax.length - 1) / 100).toFixed(2);\n        var subStr = parseFloat(selectVal) + 1;\n        val.purchasePrice = parseFloat(val.actualAmount / subStr).toFixed(2);\n        val.amount = parseFloat(val.actualAmount * val.num).toFixed(2);\n      }\n\n      var amount = 0;\n      this.signData.channelOrderGoodsVOList.forEach(function (item) {\n        amount += parseFloat(item.amount);\n      });\n      this.signData.amount = parseFloat(amount).toFixed(2);\n\n      if (this.signData.preferentialAmount) {\n        this.signData.actualAmount = parseFloat(amount - Number(this.signData.preferentialAmount)).toFixed(2);\n      } else {\n        this.signData.actualAmount = parseFloat(amount).toFixed(2);\n      } // this.signData.actualAmount = parseFloat(amount).toFixed(2);\n\n    },\n    //radio改变时触发\n    radioStatusChange: function radioStatusChange(val) {\n      console.log(val);\n\n      if (val == 1) {\n        //radio==否\n        this.signData.tax = \"0\";\n        var amount = 0;\n\n        if (this.signData.channelOrderGoodsVOList.length > 0) {\n          this.signData.channelOrderGoodsVOList.forEach(function (item) {\n            item.tax = '--'; //含税单价\n\n            item.actualAmount = null; //采购金额\n\n            item.amount = (item.purchasePrice * item.num).toFixed(2);\n          });\n        }\n\n        this.signData.channelOrderGoodsVOList.forEach(function (item) {\n          amount += parseFloat(item.amount);\n        });\n        this.signData.amount = parseFloat(amount).toFixed(2);\n\n        if (this.signData.preferentialAmount) {\n          this.signData.actualAmount = parseFloat(amount - Number(this.signData.preferentialAmount)).toFixed(2);\n        } else {\n          this.signData.actualAmount = parseFloat(amount).toFixed(2);\n        }\n      } else {\n        //radio==是\n        this.signData.tax = \"3%\";\n        this.taxPointChange(this.signData.tax);\n      }\n    }\n  }\n};",{"version":3,"sources":["purchaseOrder_editor.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAqPA,OAAA,OAAA,MAAA,sBAAA;AACA,OAAA,QAAA,MAAA,uBAAA;AACA,SAAA,SAAA,QAAA,QAAA;AACA,eAAA;AACA,EAAA,UAAA,EAAA;AACA,IAAA,OAAA,EAAA,OADA;AAEA,IAAA,QAAA,EAAA;AAFA,GADA;AAKA,EAAA,IALA,kBAKA;AACA,WAAA;AACA,MAAA,QAAA,EAAA;AACA,QAAA,SAAA,EAAA,MADA;AAEA;AACA,QAAA,gBAAA,EAAA,EAHA;AAIA,QAAA,YAAA,EAAA,EAJA;AAKA;AACA;AACA,QAAA,UAAA,EAAA,EAPA;AAQA;AACA,QAAA,GAAA,EAAA,EATA;AAUA,QAAA,YAAA,EAAA,EAVA;AAWA;AACA,QAAA,QAAA,EAAA,EAZA;AAaA;AACA,QAAA,YAAA,EAAA,EAdA;AAeA;AACA,QAAA,UAAA,EAAA,EAhBA;AAiBA,QAAA,QAAA,EAAA,EAjBA;AAkBA;AACA,QAAA,OAAA,EAAA,EAnBA;AAoBA;AACA,QAAA,UAAA,EAAA,EArBA;AAsBA;AACA,QAAA,WAAA,EAAA,EAvBA;AAwBA;AACA,QAAA,uBAAA,EAAA,IAzBA;AA0BA,QAAA,UAAA,EAAA,EA1BA;AA2BA;AACA,QAAA,WAAA,EAAA,MA5BA;AA6BA;AACA,QAAA,mBAAA,EAAA,EA9BA;AA+BA;AACA,QAAA,kBAAA,EAAA,EAhCA;AAiCA;AACA,QAAA,MAAA,EAAA,EAlCA;AAmCA;AACA,QAAA,YAAA,EAAA,EApCA;AAqCA;AACA,QAAA,KAAA,EAAA;AAtCA,OADA;AAyCA,MAAA,KAAA,EAAA;AACA,QAAA,GAAA,EAAA,CAAA;AAAA,UAAA,QAAA,EAAA,IAAA;AAAA,UAAA,OAAA,EAAA,OAAA;AAAA,UAAA,OAAA,EAAA;AAAA,SAAA,CADA;AAEA,QAAA,QAAA,EAAA,CACA;AAAA,UAAA,QAAA,EAAA,IAAA;AAAA,UAAA,OAAA,EAAA,SAAA;AAAA,UAAA,OAAA,EAAA;AAAA,SADA,CAFA;AAKA,QAAA,YAAA,EAAA,CACA;AAAA,UAAA,QAAA,EAAA,IAAA;AAAA,UAAA,OAAA,EAAA,UAAA;AAAA,UAAA,OAAA,EAAA;AAAA,SADA;AALA,OAzCA;AAmDA;AACA,MAAA,KAAA,EAAA,EApDA;AAsDA;AACA,MAAA,QAAA,EAAA,EAvDA;AAyDA,MAAA,UAAA,EAAA,EAzDA;AA0DA,MAAA,eAAA,EAAA;AA1DA,KAAA;AA4DA,GAlEA;AAmEA,EAAA,OAnEA,qBAmEA;AAAA;;AACA;AACA,SAAA,oBAAA;;AAEA,QAAA,KAAA,GAAA,YAAA,CAAA,OAAA,CAAA,MAAA,KAAA,EAAA;;AACA,IAAA,OAAA,CAAA,GAAA,CAAA,KAAA;;AACA,QAAA,KAAA,IAAA,KAAA,EAAA;AACA;AACA,WAAA,aAAA,CAAA,KAAA,MAAA,CAAA,KAAA,CAAA,OAAA;AACA,KAHA,MAGA;AACA,UAAA,YAAA,CAAA,OAAA,CAAA,gBAAA,KAAA,IAAA,EAAA;AACA;AACA;;AACA,MAAA,OAAA,CAAA,GAAA,CAAA,yBAAA,EAJA,CAKA;;AACA,UAAA,QAAA,GAAA,YAAA,CAAA,OAAA,CAAA,aAAA,CAAA;AACA,WAAA,SAAA,CAAA,YAAA;AACA,QAAA,KAAA,CAAA,QAAA,GAAA,IAAA,CAAA,KAAA,CAAA,QAAA,CAAA;AACA,YAAA,MAAA,GAAA,YAAA,CAAA,OAAA,CAAA,cAAA,CAAA;AACA,QAAA,OAAA,CAAA,GAAA,CAAA,MAAA,EAHA,CAIA;;AACA,QAAA,KAAA,CAAA,QAAA,CAAA,MAAA,GAAA,UAAA,CAAA,MAAA,CAAA,CAAA,OAAA,CAAA,CAAA,CAAA;AACA,QAAA,KAAA,CAAA,QAAA,CAAA,YAAA,GAAA,UAAA,CAAA,MAAA,CAAA,CAAA,OAAA,CAAA,CAAA,CAAA;AACA,QAAA,KAAA,CAAA,QAAA,CAAA,uBAAA,GAAA,IAAA,CAAA,KAAA,CACA,YAAA,CAAA,OAAA,CAAA,gBAAA,CADA,CAAA;;AAGA,QAAA,KAAA,CAAA,cAAA,CAAA,KAAA,CAAA,QAAA,CAAA,GAAA;;AACA,QAAA,OAAA,CAAA,GAAA,CAAA,KAAA,CAAA,QAAA,CAAA,uBAAA;;AACA,QAAA,KAAA,CAAA,mBAAA;AACA,OAbA;AAcA;AACA,GAlGA;AAmGA,EAAA,KAAA,EAAA;AACA,mCAAA,oCAAA,QAAA,EAAA;AACA,UAAA,YAAA,GAAA,KAAA,QAAA,CAAA,MAAA,GAAA,QAAA;AACA,WAAA,QAAA,CAAA,YAAA,GAAA,YAAA,CAAA,OAAA,CAAA,CAAA,CAAA;AACA;AAJA,GAnGA;AAyGA,EAAA,OAAA,EAAA;AACA,IAAA,OADA,mBACA,IADA,EACA;AACA,cAAA,IAAA;AACA,aAAA,CAAA;AACA,iBAAA,IAAA;AACA;;AACA,aAAA,CAAA;AACA,iBAAA,IAAA;AACA;AANA;AAQA;AAVA,GAzGA;AAqHA,EAAA,OAAA,EAAA;AACA;AACA,IAAA,oBAFA;AAAA;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,uBAGA,KAAA,OAAA,CAAA,KAAA,GAAA,CAAA,IAAA,CAAA,YAAA,EAAA,EAAA,EAAA,IAAA,CAHA;;AAAA;AAGA,gBAAA,IAHA;AAIA,gBAAA,OAAA,CAAA,GAAA,CAAA,IAAA,EAJA,CAKA;;AACA,qBAAA,QAAA,CAAA,aAAA,GAAA,IAAA,CAAA,QAAA;AAEA,qBAAA,OAAA,CAAA,KAAA,GAAA,CAAA,IAAA,CAAA,8BAAA,EAAA;AACA,kBAAA,MAAA,EAAA,IAAA,CAAA,MADA;AAEA,kBAAA,IAAA,EAAA;AAFA,iBAAA,EAGA,IAHA,CAGA,UAAA,IAAA,EAAA;AACA,kBAAA,OAAA,CAAA,GAAA,CAAA,IAAA,EADA,CAEA;AACA;;AACA,kBAAA,MAAA,CAAA,QAAA,CAAA,YAAA,GAAA,IAAA,CAAA,IAAA,CAJA,CAKA;;AACA,kBAAA,MAAA,CAAA,QAAA,CAAA,gBAAA,GAAA,IAAA,CAAA,EAAA,CANA,CAOA;;AACA,kBAAA,MAAA,CAAA,qBAAA,CAAA,MAAA,CAAA,QAAA,CAAA,gBAAA,EARA,CASA;;;AACA,kBAAA,MAAA,CAAA,mBAAA,CAAA,MAAA,CAAA,QAAA,CAAA,gBAAA;AACA,iBAdA;;AARA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;;AAAA;AAAA;AAwBA;AACA,IAAA,mBAzBA,+BAyBA,cAzBA,EAyBA;AAAA;;AACA,MAAA,OAAA,CAAA,GAAA,CAAA,GAAA,EADA,CAEA;;AACA,WAAA,OAAA,CAAA,KAAA,GAAA,CAAA,OAAA,CAAA,aAAA,EAAA;AAAA,QAAA,cAAA,EAAA,cAAA;AAAA,QAAA,WAAA,EAAA;AAAA,OAAA,EAAA,IAAA,CAAA,UAAA,IAAA,EAAA;AACA,QAAA,OAAA,CAAA,GAAA,CAAA,IAAA;AACA,QAAA,MAAA,CAAA,QAAA,CAAA,UAAA,GAAA,IAAA,CAAA,IAAA;AACA,OAHA;AAIA,KAhCA;AAiCA;AACA,IAAA,qBAlCA,iCAkCA,cAlCA,EAkCA;AAAA;;AACA,WAAA,OAAA,CAAA,KAAA,GAAA,CAAA,MAAA,CAAA,eAAA,EAAA;AACA,QAAA,KAAA,EAAA;AADA,OAAA,EAEA,IAFA,CAEA,UAAA,IAAA,EAAA;AACA,QAAA,OAAA,CAAA,GAAA,CAAA,IAAA,CAAA,IAAA;AACA,QAAA,MAAA,CAAA,QAAA,CAAA,UAAA,GAAA,IAAA,CAAA,IAAA,CAAA,CAAA,EAAA,IAAA;AACA,OALA;AAMA,KAzCA;AA0CA;AACA,IAAA,mBA3CA,iCA2CA;AACA,UAAA,SAAA,GAAA,KAAA,QAAA,CAAA,uBAAA;;AACA,UAAA,KAAA,GAAA,IAAA;;AACA,UAAA,SAAA,CAAA,MAAA,GAAA,CAAA,EAAA;AACA,QAAA,SAAA,CAAA,OAAA,CAAA,UAAA,IAAA,EAAA;AACA,UAAA,KAAA,CAAA,IAAA,CACA,IADA,EAEA,QAFA,EAGA,CAAA,IAAA,CAAA,aAAA,GAAA,IAAA,CAAA,GAAA,EAAA,OAAA,CAAA,CAAA,CAHA;AAKA,SANA;AAOA;AACA,KAvDA;AAwDA;AACA,IAAA,2BAzDA,uCAyDA,GAzDA,EAyDA;AACA,UAAA,CAAA,GAAA,EAAA;AACA,UAAA,WAAA,GAAA,GAAA,CAAA,KAAA,CAAA,mBAAA,CAAA;AACA,WAAA,QAAA,CAAA,WAAA,GAAA,WAAA,CAAA,CAAA,CAAA;AACA,KA7DA;AA8DA;AACA,IAAA,qBA/DA,mCA+DA;AACA,MAAA,OAAA,CAAA,GAAA,CAAA,KAAA,KAAA;AACA,KAjEA;AAkEA;AACA,IAAA,YAnEA,wBAmEA,IAnEA,EAmEA;AACA,MAAA,OAAA,CAAA,GAAA,CAAA,IAAA;AACA,KArEA;AAsEA;AACA,IAAA,oBAvEA,kCAuEA;AACA,MAAA,OAAA,CAAA,GAAA,CAAA,4DAAA;AACA,WAAA,OAAA,CAAA,IAAA,CAAA;AACA,QAAA,IAAA,EAAA,yBADA;AAEA,QAAA,IAAA,EAAA,wBAFA;AAGA,QAAA,KAAA,EAAA;AACA,UAAA,QAAA,EAAA,KAAA,QAAA,CAAA,UADA;AAEA,UAAA,gBAAA,EAAA,KAAA,QAAA,CAAA;AAFA;AAHA,OAAA,EAFA,CAUA;;AACA,MAAA,YAAA,CAAA,OAAA,CAAA,aAAA,EAAA,IAAA,CAAA,SAAA,CAAA,KAAA,QAAA,CAAA;AACA,MAAA,YAAA,CAAA,OAAA,CAAA,gBAAA,EAAA,IAAA,CAAA,SAAA,CAAA,KAAA,QAAA,CAAA,uBAAA,CAAA;AACA,KApFA;AAqFA;AACA,IAAA,aAtFA,yBAsFA,OAtFA,EAsFA;AAAA;;AACA,WAAA,OAAA,CAAA,KAAA,GAAA,CAAA,KAAA,CAAA,iCAAA,EAAA;AACA,QAAA,OAAA,EAAA,OADA;AAEA,QAAA,SAAA,EAAA,EAFA;AAGA,QAAA,QAAA,EAAA;AAHA,OAAA,EAIA,IAJA,CAIA,UAAA,IAAA,EAAA;AACA,QAAA,OAAA,CAAA,GAAA,CAAA,IAAA;;AACA,YAAA,IAAA,CAAA,GAAA,EAAA;AACA,cAAA,MAAA,GAAA,IAAA,CAAA,GAAA,GAAA,GAAA;AACA,UAAA,IAAA,CAAA,GAAA,GAAA,MAAA,GAAA,GAAA;AACA,UAAA,MAAA,CAAA,QAAA,GAAA,IAAA;;AACA,UAAA,MAAA,CAAA,IAAA,CAAA,MAAA,CAAA,QAAA,EAAA,OAAA,EAAA,GAAA;;AACA,UAAA,IAAA,CAAA,uBAAA,CAAA,IAAA,CAAA,OAAA,CAAA,UAAA,IAAA,EAAA;AACA,YAAA,MAAA,CAAA,IAAA,CAAA,IAAA,EAAA,KAAA,EAAA,IAAA,CAAA,GAAA;AACA,WAFA;AAGA,SARA,MAQA;AACA,UAAA,MAAA,CAAA,QAAA,GAAA,IAAA;;AACA,UAAA,MAAA,CAAA,IAAA,CAAA,MAAA,CAAA,QAAA,EAAA,OAAA,EAAA,GAAA;AACA;;AACA,YAAA,IAAA,CAAA,uBAAA,CAAA,IAAA,EAAA;AACA,UAAA,IAAA,CAAA,uBAAA,CAAA,IAAA,CAAA,OAAA,CAAA,UAAA,IAAA,EAAA;AACA,gBAAA,IAAA,CAAA,YAAA,EAAA;AACA,cAAA,IAAA,CAAA,MAAA,GAAA,UAAA,CAAA,IAAA,CAAA,YAAA,GAAA,IAAA,CAAA,GAAA,CAAA,CAAA,OAAA,CAAA,CAAA,CAAA;AACA,aAFA,MAEA;AACA,cAAA,IAAA,CAAA,MAAA,GAAA,UAAA,CAAA,IAAA,CAAA,aAAA,GAAA,IAAA,CAAA,GAAA,CAAA,CAAA,OAAA,CAAA,CAAA,CAAA;AACA;AACA,WANA;AAOA,UAAA,MAAA,CAAA,QAAA,CAAA,uBAAA,GAAA,IAAA,CAAA,uBAAA,CAAA,IAAA;AACA;;AACA,YAAA,MAAA,GAAA,CAAA;;AACA,QAAA,MAAA,CAAA,QAAA,CAAA,uBAAA,CAAA,OAAA,CAAA,UAAA,IAAA,EAAA;AACA,UAAA,MAAA,IAAA,UAAA,CAAA,IAAA,CAAA,MAAA,CAAA;AACA,SAFA;;AAGA,QAAA,MAAA,CAAA,QAAA,CAAA,MAAA,GAAA,UAAA,CAAA,MAAA,CAAA,CAAA,OAAA,CAAA,CAAA,CAAA;AACA,QAAA,MAAA,CAAA,QAAA,CAAA,YAAA,GAAA,UAAA,CAAA,MAAA,CAAA,CAAA,OAAA,CAAA,CAAA,CAAA;AACA,OAlCA;AAmCA,KA1HA;AA2HA;AACA,IAAA,eA5HA,6BA4HA;AAAA;;AACA,WAAA,KAAA,CAAA,QAAA,CAAA,QAAA,CAAA,UAAA,KAAA,EAAA;AACA,YAAA,KAAA,EAAA;AACA;AACA,cAAA,MAAA,CAAA,QAAA,CAAA,uBAAA,EAAA;AACA,YAAA,MAAA,CAAA,QAAA,CAAA,uBAAA,CAAA,OAAA,CAAA,UAAA,IAAA,EAAA;AACA,cAAA,IAAA,CAAA,SAAA,GAAA,IAAA,CAAA,aAAA;AACA,aAFA;AAGA,WAJA,MAIA;AACA,YAAA,MAAA,CAAA,QAAA,CAAA,KAAA,CAAA,YAAA;;AACA;AACA;;AACA,cAAA,WAAA,GAAA,MAAA,CAAA,QAAA,CAAA,WAAA;AACA,UAAA,OAAA,CAAA,GAAA,SAAA,WAAA;;AACA,cAAA,WAAA,IAAA,EAAA,IAAA,OAAA,WAAA,IAAA,QAAA,IAAA,OAAA,WAAA,IAAA,WAAA,EAAA;AACA,YAAA,MAAA,CAAA,QAAA,CAAA,KAAA,CAAA,SAAA;;AACA;AACA,WAfA,CAgBA;;;AACA,cAAA,0BAAA,GAAA,MAAA,CAAA,QAAA,CAAA,uBAAA,CAAA,MAAA,CAAA,UAAA,IAAA,EAAA;AACA,mBAAA,IAAA,CAAA,GAAA,IAAA,IAAA,CAAA,GAAA,IAAA,CAAA;AACA,WAFA,CAAA;;AAGA,cAAA,0BAAA,CAAA,MAAA,IAAA,CAAA,EAAA;AACA,YAAA,MAAA,CAAA,QAAA,CAAA,KAAA,CAAA,cAAA;;AACA;AACA;;AACA,UAAA,MAAA,CAAA,QAAA,CAAA,WAAA,GAAA,IAAA;AACA,UAAA,MAAA,CAAA,QAAA,CAAA,uBAAA,GAAA,0BAAA;AACA,UAAA,OAAA,CAAA,GAAA,CAAA,iBAAA;;AACA,cAAA,MAAA,CAAA,QAAA,CAAA,GAAA,EAAA;AACA,gBAAA,MAAA,GAAA,MAAA,CAAA,QAAA,CAAA,GAAA,CAAA,KAAA,CAAA,CAAA,EAAA,MAAA,CAAA,QAAA,CAAA,GAAA,CAAA,MAAA,GAAA,CAAA,CAAA;;AACA,gBAAA,MAAA,GAAA,MAAA,GAAA,GAAA;AACA,YAAA,MAAA,CAAA,QAAA,CAAA,GAAA,GAAA,MAAA;AACA;;AACA,UAAA,MAAA,CAAA,OAAA,CACA,MAAA,CAAA,GAAA,CAAA,KAAA,CAAA,yBADA,EAEA,MAAA,CAAA,QAFA,EAGA,IAHA,CAGA,UAAA,IAAA,EAAA;AACA;AACA,YAAA,YAAA,CAAA,UAAA,CAAA,gBAAA;AACA,YAAA,MAAA,CAAA,QAAA,CAAA,uBAAA,GAAA,EAAA;;AACA,YAAA,MAAA,CAAA,OAAA,CAAA,EAAA,CAAA,CAAA,CAAA;AACA,WARA;AASA,SAzCA,MAyCA;AACA,iBAAA,KAAA;AACA;AACA,OA7CA;AA8CA,KA3KA;AA4KA;AACA,IAAA,oBA7KA,gCA6KA,GA7KA,EA6KA;AACA,UAAA,WAAA,GAAA,KAAA,QAAA,CAAA,UAAA,CAAA,IAAA,CAAA,UAAA,IAAA;AAAA,eAAA,IAAA,CAAA,IAAA,IAAA,GAAA;AAAA,OAAA,CAAA;AACA,WAAA,QAAA,CAAA,YAAA,GAAA,WAAA,CAAA,IAAA;AACA,KAhLA;AAiLA;AACA,IAAA,aAlLA,2BAkLA;AACA,WAAA,OAAA,CAAA,EAAA,CAAA,CAAA,CAAA;AACA,KApLA;AAqLA;AACA,IAAA,gBAtLA,4BAsLA,GAtLA,EAsLA,GAtLA,EAsLA;AACA,MAAA,OAAA,CAAA,GAAA,CAAA,GAAA;;AACA,UAAA,CAAA,GAAA,EAAA;AACA,QAAA,GAAA,GAAA,CAAA;AACA;;AACA,UAAA,GAAA,CAAA,GAAA,IAAA,GAAA,CAAA,GAAA,IAAA,IAAA,EAAA;AACA,QAAA,GAAA,CAAA,MAAA,GAAA,UAAA,CAAA,GAAA,CAAA,YAAA,GAAA,GAAA,CAAA,CAAA,OAAA,CAAA,CAAA,CAAA;AACA,OAFA,MAEA;AACA,QAAA,GAAA,CAAA,MAAA,GAAA,CAAA,GAAA,CAAA,aAAA,GAAA,GAAA,EAAA,OAAA,CAAA,CAAA,CAAA;AACA;;AACA,UAAA,MAAA,GAAA,CAAA;AACA,WAAA,QAAA,CAAA,uBAAA,CAAA,OAAA,CAAA,UAAA,IAAA,EAAA;AACA,QAAA,MAAA,IAAA,UAAA,CAAA,IAAA,CAAA,MAAA,CAAA;AACA,OAFA;AAGA,WAAA,QAAA,CAAA,MAAA,GAAA,UAAA,CAAA,MAAA,CAAA,CAAA,OAAA,CAAA,CAAA,CAAA;;AACA,UAAA,KAAA,QAAA,CAAA,kBAAA,EAAA;AACA,aAAA,QAAA,CAAA,YAAA,GAAA,UAAA,CAAA,MAAA,GAAA,MAAA,CAAA,KAAA,QAAA,CAAA,kBAAA,CAAA,CAAA,CAAA,OAAA,CAAA,CAAA,CAAA;AACA,OAFA,MAEA;AACA,aAAA,QAAA,CAAA,YAAA,GAAA,UAAA,CAAA,MAAA,CAAA,CAAA,OAAA,CAAA,CAAA,CAAA;AACA,OAnBA,CAoBA;;AACA,KA3MA;AA4MA;AACA,IAAA,cA7MA,0BA6MA,GA7MA,EA6MA;AAAA;;AACA,MAAA,OAAA,CAAA,GAAA,CAAA,GAAA;;AACA,UAAA,CAAA,GAAA,EAAA;AACA;AACA;;AACA,UAAA,MAAA,GAAA,GAAA,CAAA,KAAA,CAAA,CAAA,EAAA,GAAA,CAAA,MAAA,GAAA,CAAA,CAAA;AACA,MAAA,OAAA,CAAA,GAAA,CAAA,MAAA;;AACA,UAAA,KAAA,QAAA,CAAA,uBAAA,CAAA,MAAA,GAAA,CAAA,EAAA;AACA,aAAA,QAAA,CAAA,uBAAA,CAAA,OAAA,CAAA,UAAA,IAAA,EAAA;AACA;AACA,UAAA,MAAA,CAAA,IAAA,CAAA,IAAA,EAAA,KAAA,EAAA,GAAA,EAFA,CAGA;;;AACA,UAAA,IAAA,CAAA,YAAA,GAAA,UAAA,CAAA,IAAA,CAAA,aAAA,IAAA,MAAA,GAAA,GAAA,GAAA,CAAA,CAAA,CAAA,CAAA,OAAA,CAAA,CAAA,CAAA,CAJA,CAKA;;AACA,UAAA,IAAA,CAAA,MAAA,GAAA,UAAA,CAAA,IAAA,CAAA,YAAA,GAAA,IAAA,CAAA,GAAA,CAAA,CAAA,OAAA,CAAA,CAAA,CAAA;AACA,SAPA;AAQA,YAAA,MAAA,GAAA,CAAA;AACA,aAAA,QAAA,CAAA,uBAAA,CAAA,OAAA,CAAA,UAAA,IAAA,EAAA;AACA,UAAA,MAAA,IAAA,UAAA,CAAA,IAAA,CAAA,MAAA,CAAA;AACA,SAFA;AAGA,aAAA,QAAA,CAAA,MAAA,GAAA,UAAA,CAAA,MAAA,CAAA,CAAA,OAAA,CAAA,CAAA,CAAA;;AACA,YAAA,KAAA,QAAA,CAAA,kBAAA,EAAA;AACA,eAAA,QAAA,CAAA,YAAA,GAAA,UAAA,CAAA,MAAA,GAAA,MAAA,CAAA,KAAA,QAAA,CAAA,kBAAA,CAAA,CAAA,CAAA,OAAA,CAAA,CAAA,CAAA;AACA,SAFA,MAEA;AACA,eAAA,QAAA,CAAA,YAAA,GAAA,UAAA,CAAA,MAAA,CAAA,CAAA,OAAA,CAAA,CAAA,CAAA;AACA,SAlBA,CAmBA;;AACA;AACA,KAzOA;AA0OA;AACA,IAAA,mBA3OA,+BA2OA,GA3OA,EA2OA;AACA,MAAA,OAAA,CAAA,GAAA,CAAA,GAAA;;AACA,UAAA,CAAA,KAAA,QAAA,CAAA,GAAA,EAAA;AACA,aAAA,QAAA,CAAA,uBAAA,CAAA,OAAA,CAAA,UAAA,IAAA,EAAA;AACA,UAAA,IAAA,CAAA,MAAA,GAAA,CAAA,IAAA,CAAA,aAAA,GAAA,IAAA,CAAA,GAAA,EAAA,OAAA,CAAA,CAAA,CAAA;AACA,SAFA;AAGA,OAJA,MAIA;AACA,YAAA,YAAA,GAAA,CAAA,KAAA,QAAA,CAAA,GAAA,CAAA,KAAA,CAAA,CAAA,EAAA,KAAA,QAAA,CAAA,GAAA,CAAA,MAAA,GAAA,CAAA,IAAA,GAAA,EAAA,OAAA,CAAA,CAAA,CAAA;AACA,YAAA,MAAA,GAAA,UAAA,CAAA,YAAA,CAAA,GAAA,CAAA;AACA,aAAA,QAAA,CAAA,uBAAA,CAAA,OAAA,CAAA,UAAA,IAAA,EAAA;AACA,UAAA,IAAA,CAAA,YAAA,GAAA,CAAA,IAAA,CAAA,aAAA,GAAA,MAAA,EAAA,OAAA,CAAA,CAAA,CAAA;AACA,UAAA,IAAA,CAAA,MAAA,GAAA,CAAA,IAAA,CAAA,YAAA,GAAA,IAAA,CAAA,GAAA,EAAA,OAAA,CAAA,CAAA,CAAA;AACA,SAHA;AAIA;;AACA,UAAA,MAAA,GAAA,CAAA;AACA,WAAA,QAAA,CAAA,uBAAA,CAAA,OAAA,CAAA,UAAA,IAAA,EAAA;AACA,QAAA,MAAA,IAAA,UAAA,CAAA,IAAA,CAAA,MAAA,CAAA;AACA,OAFA;AAGA,WAAA,QAAA,CAAA,MAAA,GAAA,UAAA,CAAA,MAAA,CAAA,CAAA,OAAA,CAAA,CAAA,CAAA;;AACA,UAAA,KAAA,QAAA,CAAA,kBAAA,EAAA;AACA,aAAA,QAAA,CAAA,YAAA,GAAA,UAAA,CAAA,MAAA,GAAA,MAAA,CAAA,KAAA,QAAA,CAAA,kBAAA,CAAA,CAAA,CAAA,OAAA,CAAA,CAAA,CAAA;AACA,OAFA,MAEA;AACA,aAAA,QAAA,CAAA,YAAA,GAAA,UAAA,CAAA,MAAA,CAAA,CAAA,OAAA,CAAA,CAAA,CAAA;AACA,OAvBA,CAwBA;;AACA,KApQA;AAqQA;AACA,IAAA,YAtQA,wBAsQA,GAtQA,EAsQA,GAtQA,EAsQA;AACA,MAAA,OAAA,CAAA,GAAA,CAAA,GAAA;AACA,MAAA,OAAA,CAAA,GAAA,CAAA,GAAA;AACA,UAAA,GAAA,CAAA,GAAA,IAAA,CAAA,EAAA;;AACA,UAAA,KAAA,QAAA,CAAA,GAAA,EAAA;AACA,YAAA,SAAA,GAAA,CAAA,KAAA,QAAA,CAAA,GAAA,CAAA,KAAA,CAAA,CAAA,EAAA,KAAA,QAAA,CAAA,GAAA,CAAA,MAAA,GAAA,CAAA,IAAA,GAAA,EAAA,OAAA,CAAA,CAAA,CAAA;AACA,YAAA,MAAA,GAAA,UAAA,CAAA,SAAA,CAAA,GAAA,CAAA;AACA,QAAA,GAAA,CAAA,YAAA,GAAA,CAAA,GAAA,CAAA,MAAA,GAAA,GAAA,CAAA,GAAA,EAAA,OAAA,CAAA,CAAA,CAAA;AACA,QAAA,GAAA,CAAA,aAAA,GAAA,CAAA,GAAA,CAAA,YAAA,GAAA,MAAA,EAAA,OAAA,CAAA,CAAA,CAAA;AACA,OALA,MAKA;AACA,QAAA,GAAA,CAAA,aAAA,GAAA,CAAA,GAAA,CAAA,MAAA,GAAA,GAAA,CAAA,GAAA,EAAA,OAAA,CAAA,CAAA,CAAA;AACA;;AACA,UAAA,MAAA,GAAA,CAAA;AACA,WAAA,QAAA,CAAA,uBAAA,CAAA,OAAA,CAAA,UAAA,IAAA,EAAA;AACA,YAAA,CAAA,IAAA,CAAA,MAAA,EAAA;AACA,UAAA,IAAA,CAAA,MAAA,GAAA,MAAA;AACA;;AACA,QAAA,MAAA,IAAA,UAAA,CAAA,IAAA,CAAA,MAAA,CAAA;AACA,OALA;AAMA,WAAA,QAAA,CAAA,MAAA,GAAA,UAAA,CAAA,MAAA,CAAA,CAAA,OAAA,CAAA,CAAA,CAAA;;AACA,UAAA,KAAA,QAAA,CAAA,kBAAA,EAAA;AACA,aAAA,QAAA,CAAA,YAAA,GAAA,UAAA,CAAA,MAAA,GAAA,MAAA,CAAA,KAAA,QAAA,CAAA,kBAAA,CAAA,CAAA,CAAA,OAAA,CAAA,CAAA,CAAA;AACA,OAFA,MAEA;AACA,aAAA,QAAA,CAAA,YAAA,GAAA,UAAA,CAAA,MAAA,CAAA,CAAA,OAAA,CAAA,CAAA,CAAA;AACA,OAxBA,CAyBA;;AACA,KAhSA;AAiSA;AACA,IAAA,kBAlSA,8BAkSA,GAlSA,EAkSA;AACA,UAAA,KAAA,QAAA,CAAA,GAAA,EAAA;AACA,YAAA,SAAA,GAAA,UAAA,CAAA,KAAA,QAAA,CAAA,GAAA,CAAA,KAAA,CAAA,CAAA,EAAA,KAAA,QAAA,CAAA,GAAA,CAAA,MAAA,GAAA,CAAA,IAAA,GAAA,CAAA,CAAA,OAAA,CAAA,CAAA,CAAA;AACA,YAAA,MAAA,GAAA,UAAA,CAAA,SAAA,CAAA,GAAA,CAAA;AACA,QAAA,GAAA,CAAA,aAAA,GAAA,UAAA,CAAA,GAAA,CAAA,YAAA,GAAA,MAAA,CAAA,CAAA,OAAA,CAAA,CAAA,CAAA;AACA,QAAA,GAAA,CAAA,MAAA,GAAA,UAAA,CAAA,GAAA,CAAA,YAAA,GAAA,GAAA,CAAA,GAAA,CAAA,CAAA,OAAA,CAAA,CAAA,CAAA;AACA;;AACA,UAAA,MAAA,GAAA,CAAA;AACA,WAAA,QAAA,CAAA,uBAAA,CAAA,OAAA,CAAA,UAAA,IAAA,EAAA;AACA,QAAA,MAAA,IAAA,UAAA,CAAA,IAAA,CAAA,MAAA,CAAA;AACA,OAFA;AAGA,WAAA,QAAA,CAAA,MAAA,GAAA,UAAA,CAAA,MAAA,CAAA,CAAA,OAAA,CAAA,CAAA,CAAA;;AACA,UAAA,KAAA,QAAA,CAAA,kBAAA,EAAA;AACA,aAAA,QAAA,CAAA,YAAA,GAAA,UAAA,CAAA,MAAA,GAAA,MAAA,CAAA,KAAA,QAAA,CAAA,kBAAA,CAAA,CAAA,CAAA,OAAA,CAAA,CAAA,CAAA;AACA,OAFA,MAEA;AACA,aAAA,QAAA,CAAA,YAAA,GAAA,UAAA,CAAA,MAAA,CAAA,CAAA,OAAA,CAAA,CAAA,CAAA;AACA,OAhBA,CAiBA;;AACA,KApTA;AAqTA;AACA,IAAA,iBAtTA,6BAsTA,GAtTA,EAsTA;AACA,MAAA,OAAA,CAAA,GAAA,CAAA,GAAA;;AACA,UAAA,GAAA,IAAA,CAAA,EAAA;AACA;AACA,aAAA,QAAA,CAAA,GAAA,GAAA,GAAA;AACA,YAAA,MAAA,GAAA,CAAA;;AACA,YAAA,KAAA,QAAA,CAAA,uBAAA,CAAA,MAAA,GAAA,CAAA,EAAA;AACA,eAAA,QAAA,CAAA,uBAAA,CAAA,OAAA,CAAA,UAAA,IAAA,EAAA;AACA,YAAA,IAAA,CAAA,GAAA,GAAA,IAAA,CADA,CAEA;;AACA,YAAA,IAAA,CAAA,YAAA,GAAA,IAAA,CAHA,CAIA;;AACA,YAAA,IAAA,CAAA,MAAA,GAAA,CAAA,IAAA,CAAA,aAAA,GAAA,IAAA,CAAA,GAAA,EAAA,OAAA,CAAA,CAAA,CAAA;AACA,WANA;AAOA;;AACA,aAAA,QAAA,CAAA,uBAAA,CAAA,OAAA,CAAA,UAAA,IAAA,EAAA;AACA,UAAA,MAAA,IAAA,UAAA,CAAA,IAAA,CAAA,MAAA,CAAA;AACA,SAFA;AAGA,aAAA,QAAA,CAAA,MAAA,GAAA,UAAA,CAAA,MAAA,CAAA,CAAA,OAAA,CAAA,CAAA,CAAA;;AACA,YAAA,KAAA,QAAA,CAAA,kBAAA,EAAA;AACA,eAAA,QAAA,CAAA,YAAA,GAAA,UAAA,CAAA,MAAA,GAAA,MAAA,CAAA,KAAA,QAAA,CAAA,kBAAA,CAAA,CAAA,CAAA,OAAA,CAAA,CAAA,CAAA;AACA,SAFA,MAEA;AACA,eAAA,QAAA,CAAA,YAAA,GAAA,UAAA,CAAA,MAAA,CAAA,CAAA,OAAA,CAAA,CAAA,CAAA;AACA;AACA,OAtBA,MAsBA;AACA;AACA,aAAA,QAAA,CAAA,GAAA,GAAA,IAAA;AACA,aAAA,cAAA,CAAA,KAAA,QAAA,CAAA,GAAA;AACA;AACA;AAnVA;AArHA,CAAA","sourcesContent":["<template>\r\n  <div>\r\n    <div class=\"middle\">\r\n      <span>基本信息</span>\r\n      <div class=\"input-div\">\r\n        <el-form\r\n          ref=\"formData\"\r\n          :inline=\"true\"\r\n          :model=\"signData\"\r\n          label-width=\"120px\"\r\n          :rules=\"rules\"\r\n          class=\"demo-ruleForm\"\r\n        >\r\n          <div class=\"data-div\">\r\n            <div>\r\n              <el-form-item label=\"组织机构：\" prop=\"organization\">\r\n                <el-input v-model=\"signData.organization\" disabled></el-input>\r\n              </el-form-item>\r\n            </div>\r\n            <div>\r\n              <el-form-item label=\"供应商：\" prop=\"supplier\">\r\n                <el-select\r\n                  disabled\r\n                  @change=\"selectSupplierChange\"\r\n                  v-model=\"signData.supplier\"\r\n                  placeholder=\"请选择\"\r\n                >\r\n                  <el-option\r\n                    v-for=\"item in signData.optionData\"\r\n                    :label=\"item.name\"\r\n                    :key=\"item.id\"\r\n                    :value=\"item.name\"\r\n                  ></el-option>\r\n                </el-select>\r\n                <!-- <code-set v-model=\"signData.supplier\" code=\"COM003\"/> -->\r\n              </el-form-item>\r\n            </div>\r\n            <div>\r\n              <el-form-item label=\"采购合同号：\" prop>\r\n                <el-input placeholder=\"请输入内容\" v-model=\"signData.contractSn\"></el-input>\r\n              </el-form-item>\r\n            </div>\r\n          </div>\r\n\r\n          <div class=\"middle-data-div\">\r\n            <div>\r\n              <el-form-item label=\"交货日期：\" prop>\r\n                <el-date-picker v-model=\"signData.deliveryTime\" type=\"date\" placeholder=\"选择日期\"></el-date-picker>\r\n              </el-form-item>\r\n            </div>\r\n\r\n            <div>\r\n              <el-form-item label=\"合同签订日期：\" prop>\r\n                <el-date-picker v-model=\"signData.signTime\" type=\"date\" placeholder=\"选择日期\"></el-date-picker>\r\n              </el-form-item>\r\n            </div>\r\n          </div>\r\n\r\n          <div class=\"last-data-div\">\r\n            <div class=\"el-form-item\">\r\n              <el-form-item label=\"是否按税点采购：\" label-width=\"140px\">\r\n                <el-radio v-model=\"signData.radio\" label=\"1\" @change='radioStatusChange'>否</el-radio>\r\n                <el-radio v-model=\"signData.radio\" label=\"2\" @change='radioStatusChange'>是</el-radio>\r\n                <!-- <el-form-item label=\"税点：\" label-width=\"60px\"> -->\r\n                <span style='margin-right:10px;'>税点</span>\r\n                  <el-select\r\n                    @change=\"taxPointChange\"\r\n                    :disabled=\"signData.radio==1\"\r\n                    v-model=\"signData.tax\"\r\n                    placeholder=\"请选择\"\r\n                  >\r\n                    <el-option label=\"3%\" value=\"3%\"></el-option>\r\n                    <el-option label=\"13%\" value=\"13%\"></el-option>\r\n                  </el-select>\r\n                </el-form-item>\r\n              <!-- </el-form-item> -->\r\n            </div>\r\n          </div>\r\n        </el-form>\r\n      </div>\r\n\r\n      <div class=\"table-view\">\r\n        <div class=\"title-div\">\r\n          <span>商品信息</span>\r\n          <span @click=\"selectShopClickEvent\">选择商品</span>\r\n        </div>\r\n        <div class=\"table-div\">\r\n          <el-table\r\n            :data=\"signData.channelOrderGoodsVOList\"\r\n            style=\"width: 100%\"\r\n            header-row-class-name=\"item-table-header\"\r\n          >\r\n            <el-table-column prop=\"productCode\" label=\"商品款号\" width></el-table-column>\r\n            <el-table-column prop=\"code\" label=\"商品货号\" width align=\"center\"></el-table-column>\r\n            <el-table-column label=\"商品图片\" width align=\"center\">\r\n              <template slot-scope=\"scope\">\r\n                <img :src=\"scope.row.image\" style=\"width:32px;height:32px;\" />\r\n              </template>\r\n            </el-table-column>\r\n            <el-table-column prop=\"name\" label=\"商品名称\" width align=\"center\"></el-table-column>\r\n            <el-table-column prop=\"type\" label=\"商品类型\" width align=\"center\">\r\n              <template slot-scope=\"scope\">\r\n                <span>{{scope.row.type?scope.row.type:'--'}}</span>\r\n              </template>\r\n            </el-table-column>\r\n            <el-table-column prop=\"brandName\" label=\"品牌\" width align=\"center\"></el-table-column>\r\n            <el-table-column prop=\"category\" label=\"商品品类\" width align=\"center\">\r\n              <template slot-scope=\"scope\">\r\n                <span>{{scope.row.category?scope.row.category:'--'}}</span>\r\n              </template>\r\n            </el-table-column>\r\n            <el-table-column prop=\"originalCode\" label=\"原始款号\" width align=\"center\">\r\n              <template slot-scope=\"scope\">\r\n                <span>{{scope.row.originalCode?scope.row.originalCode:'--'}}</span>\r\n              </template>\r\n            </el-table-column>\r\n            <el-table-column label=\"规格属性\" width align=\"center\">\r\n              <template slot-scope=\"scope\">\r\n                <span>颜色：{{scope.row.color?scope.row.color:'--'}}</span>\r\n                <br />\r\n                <span>尺寸：{{scope.row.size?scope.row.size:'--'}}</span>\r\n              </template>\r\n            </el-table-column>\r\n            <el-table-column label=\"采购单价\" width align=\"center\">\r\n              <template slot-scope=\"scope\">\r\n                <el-input\r\n                  v-model=\"scope.row.purchasePrice\"\r\n                  placeholder=\"请输入内容\"\r\n                  type=\"number\"\r\n                  @change=\"purchasePriceChange\"\r\n                ></el-input>\r\n              </template>\r\n            </el-table-column>\r\n            <el-table-column prop=\"tax\" label=\"税点\" width align=\"center\">\r\n              <template slot-scope=\"scope\">\r\n                <span>{{scope.row.tax?scope.row.tax:'--'}}</span>\r\n              </template>\r\n            </el-table-column>\r\n            <el-table-column label=\"采购单价(含税)\" width align=\"center\">\r\n              <template  slot-scope=\"scope\">\r\n                <input\r\n                  v-model=\"scope.row.actualAmount\"\r\n                  class=\"actual-amount-input\"\r\n                  type=\"number\"\r\n                  placeholder=\"请输入内容\"\r\n                  @input=\"actualAmountChange(scope.row)\"\r\n                  v-if=\"scope.row.actualAmount\"\r\n                />\r\n                <span v-else>--</span>\r\n              </template>\r\n            </el-table-column>\r\n            <el-table-column label=\"数量\" width=\"200\" align=\"center\">\r\n              <template slot-scope=\"scope\">\r\n                <el-input-number\r\n                  v-model=\"scope.row.num\"\r\n                  @change=\"shopNumberChange($event,scope.row)\"\r\n                  :min=\"0\"\r\n                  v-enter-number\r\n                ></el-input-number>\r\n              </template>\r\n            </el-table-column>\r\n            <el-table-column label=\"采购金额\" width align=\"center\">\r\n              <template slot-scope=\"scope\">\r\n                <el-input\r\n                  v-model=\"scope.row.amount\"\r\n                  placeholder=\"请输入内容\"\r\n                  @input=\"amountChange($event,scope.row)\"\r\n                ></el-input>\r\n              </template>\r\n            </el-table-column>\r\n            <el-table-column label=\"备注\" width align=\"center\">\r\n              <template slot-scope=\"scope\">\r\n                <el-input v-model=\"scope.row.remarks\" placeholder=\"请输入内容\"></el-input>\r\n              </template>\r\n            </el-table-column>\r\n          </el-table>\r\n        </div>\r\n\r\n        <div class=\"money-div\">\r\n          <span>采购商品总金额：￥{{signData.amount?signData.amount:'0.00'}}</span>\r\n          <div class=\"money-content\">\r\n            <span>其他扣减项金额：</span>\r\n            <input\r\n              type=\"text\"\r\n              v-model=\"signData.preferentialRemarks\"\r\n              class=\"input-price\"\r\n              placeholder=\"填写优惠项\"\r\n            />\r\n            <span>￥</span>\r\n            <input\r\n              type=\"number\"\r\n              min=\"0\"\r\n              max=\"100\"\r\n              @change=\"priceInputChangeEvent\"\r\n              class=\"input-price\"\r\n              v-model=\"signData.preferentialAmount\"\r\n              placeholder=\"0.00\"\r\n            />\r\n          </div>\r\n          <span>采购应付金额：￥{{signData.actualAmount?signData.actualAmount:'0.00'}}</span>\r\n        </div>\r\n      </div>\r\n      <div class=\"price-msg\">\r\n        <span>付款信息</span>\r\n        <el-form :inline=\"true\" :model=\"signData\" ref=\"formInlineFrom\" class=\"demo-form-inline\">\r\n          <el-form-item label=\"付款方式：\">\r\n            <code-set v-model=\"signData.paymentCode\" code=\"COM003\" />\r\n          </el-form-item>\r\n          <el-form-item label=\"支付流水号(支付单据)：\">\r\n            <el-input v-model=\"signData.orderTradeNo\" placeholder=\"请输入内容\"></el-input>\r\n          </el-form-item>\r\n          <el-form-item label=\"实付金额：\">\r\n            <el-input type=\"number\" v-model=\"signData.validAmount\" placeholder=\"请输入内容\" @input=\"validAmountValueChangeEvent\"></el-input>\r\n          </el-form-item>\r\n          <el-form-item>\r\n            <div class=\"block\">\r\n              <span class=\"demonstration\">支付时间:</span>\r\n              <el-date-picker v-model=\"signData.createTime\" type=\"date\" placeholder=\"选择日期\"></el-date-picker>\r\n            </div>\r\n          </el-form-item>\r\n        </el-form>\r\n\r\n        <span class=\"other-msg\">其他信息</span>\r\n\r\n        <div class=\"remarks-textarea\">\r\n          <span>采购备注：</span>\r\n          <el-input\r\n            class=\"textarea\"\r\n            type=\"textarea\"\r\n            :rows=\"2\"\r\n            placeholder=\"请输入内容\"\r\n            v-model=\"signData.remarks\"\r\n            resize=\"none\"\r\n          ></el-input>\r\n        </div>\r\n        <div class=\"btn-div\">\r\n          <el-button type=\"primary\" @click=\"primaryBtnClick\" size=\"small\">确认</el-button>\r\n          <el-button plain @click=\"plainBtnClick\" size=\"small\">取消</el-button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport codeSet from \"@/components/codeSet\";\r\nimport treeDept from \"@/components/treeDept\";\r\nimport { constants } from \"crypto\";\r\nexport default {\r\n  components: {\r\n    codeSet,\r\n    treeDept\r\n  },\r\n  data() {\r\n    return {\r\n      signData: {\r\n        orderType: \"0301\",\r\n        //组织机构\r\n        organizationCode: \"\",\r\n        organization: \"\",\r\n        //selectChange\r\n        //货主\r\n        goodsOwner:'',\r\n        //税点\r\n        tax: \"\",\r\n        deliveryDate: \"\",\r\n        //供货商\r\n        supplier: \"\",\r\n        //供货商编码\r\n        supplierCode: \"\",\r\n        //采购合同号\r\n        contractSn: \"\",\r\n        signTime: \"\",\r\n        //采购备注\r\n        remarks: \"\",\r\n        //选择日期\r\n        createTime: \"\",\r\n        //支付方式\r\n        paymentCode: \"\",\r\n        //商品数据表\r\n        channelOrderGoodsVOList: null,\r\n        optionData: [],\r\n        //实付金额\r\n        validAmount:'0.00',\r\n        //扣减原因\r\n        preferentialRemarks: \"\",\r\n        //扣减金额\r\n        preferentialAmount: \"\",\r\n        //采购商品金额\r\n        amount: \"\",\r\n        //采购付款金额\r\n        actualAmount: \"\",\r\n        //选项框\r\n        radio: \"1\"\r\n      },\r\n      rules: {\r\n        tax: [{ required: true, message: \"请选择税点\", trigger: \"change\" }],\r\n        supplier: [\r\n          { required: true, message: \"供货商不能为空\", trigger: \"change\" }\r\n        ],\r\n        organization: [\r\n          { required: true, message: \"组织机构不能为空\", trigger: \"change\" }\r\n        ],\r\n      },\r\n\r\n      //填写的优惠金额\r\n      price: \"\",\r\n\r\n      //文本域输入\r\n      textarea: \"\",\r\n\r\n      orderPrice: \"\",\r\n      shopRetailPrice: \"\"\r\n    };\r\n  },\r\n  created() {\r\n    //得到组织机构数据\r\n    this.getWarehouseListData();\r\n\r\n    let _type = localStorage.getItem(\"type\") || \"\";\r\n    console.log(_type);\r\n    if (_type == \"add\") {\r\n      //得到需要编辑的数据\r\n      this.getEditorData(this.$route.query.orderSn)\r\n    } else {\r\n      if (localStorage.getItem(\"localTableData\") == null) {\r\n        return;\r\n      }\r\n      console.log(\"channelOrderGoodsVOList\")\r\n      //存储填写的信息\r\n      var shopData = localStorage.getItem(\"shopMsgData\");\r\n      this.$nextTick(() => {\r\n        this.signData = JSON.parse(shopData);\r\n        var amount = localStorage.getItem(\"allShopPrice\");\r\n        console.log(amount)\r\n        //赋值订单总金额\r\n        this.signData.amount=parseFloat(amount).toFixed(2)\r\n        this.signData.actualAmount = parseFloat(amount).toFixed(2);\r\n        this.signData.channelOrderGoodsVOList = JSON.parse(\r\n          localStorage.getItem(\"localTableData\")\r\n        );\r\n        this.taxPointChange(this.signData.tax)\r\n        console.log(this.signData.channelOrderGoodsVOList);\r\n        this.setOrderShopDataArr();\r\n      });\r\n    }\r\n  },\r\n  watch: {\r\n    \"signData.preferentialAmount\": function(newPrice) {\r\n      var actualAmount = this.signData.amount - newPrice;\r\n      this.signData.actualAmount=actualAmount.toFixed(2)\r\n    }\r\n  },\r\n  filters: {\r\n    rowType(type) {\r\n      switch (type) {\r\n        case 1:\r\n          return \"成衣\";\r\n          break;\r\n        case 2:\r\n          return \"样衣\";\r\n          break;\r\n      }\r\n    }\r\n  },\r\n  methods: {\r\n    //得到组织机构数据\r\n    async getWarehouseListData() {\r\n      let info = await this.request(this.api.user.get_userinfo, {}, true);\r\n      console.log(info);\r\n      //得到部门Id\r\n      this.signData.relationDepId = info.departId;\r\n\r\n      this.request(this.api.user.userCompany_getUserOrgByUserId, {\r\n        userId: info.userId,\r\n        type: 0\r\n      }).then(data => {\r\n        console.log(data);\r\n        // this.organizationListData=data\r\n        //得到机构\r\n        this.signData.organization = data.name;\r\n        //得到机构code\r\n        this.signData.organizationCode = data.id;\r\n        //获取货主列表\r\n        this.getGoodsOwnerListData(this.signData.organizationCode);\r\n        //得到供货商数据\r\n        this.getSupplierListData(this.signData.organizationCode)\r\n      });\r\n    },\r\n    //得到供货商数据\r\n    getSupplierListData(organizationId) {\r\n      console.log(246);\r\n      //cooperation 为true得到有合作的供应商 不传 得到全部的供应商\r\n      this.request(this.api.product.supplier_list, {organizationId:organizationId,cooperation:true}).then(data => {\r\n        console.log(data);\r\n        this.signData.optionData = data.data;\r\n      });\r\n    },\r\n    //获取货主列表\r\n    getGoodsOwnerListData(organizationId) {\r\n      this.request(this.api.system.goodsOwner_list, {\r\n        orgId: organizationId\r\n      }).then(data => {\r\n        console.log(data.data);\r\n        this.signData.goodsOwner = data.data[0].code;\r\n      });\r\n    },\r\n    //设置采购金额\r\n    setOrderShopDataArr() {\r\n      let orderData = this.signData.channelOrderGoodsVOList;\r\n      let _that = this;\r\n      if (orderData.length > 0) {\r\n        orderData.forEach(item => {\r\n          _that.$set(\r\n            item,\r\n            \"amount\",\r\n            (item.purchasePrice * item.num).toFixed(2)\r\n          );\r\n        });\r\n      }\r\n    },\r\n    //实付金额值改变的事件\r\n    validAmountValueChangeEvent(val){\r\n      if(!val)return\r\n      var validAmount=val.match(/^\\d*(\\.?\\d{0,2})/g)\r\n      this.signData.validAmount=validAmount[0]\r\n    },\r\n    //价格变化事件\r\n    priceInputChangeEvent() {\r\n      console.log(this.price);\r\n    },\r\n    //选择支付方式\r\n    paySelectWay(item) {\r\n      console.log(item);\r\n    },\r\n    //点击选择商品\r\n    selectShopClickEvent() {\r\n      console.log(\"selectShopClickEvent======show_purchaseOrder_shop======236\");\r\n      this.$router.push({\r\n        path: \"/show_procureOrder_shop\",\r\n        name: \"show_procureOrder_shop\",\r\n        query:{\r\n          tenantId:this.signData.goodsOwner,\r\n          organizationName: this.signData.organization,\r\n        }\r\n      });\r\n      //存储填写的信息\r\n      localStorage.setItem(\"shopMsgData\", JSON.stringify(this.signData));\r\n      localStorage.setItem(\"localTableData\",JSON.stringify(this.signData.channelOrderGoodsVOList));\r\n    },\r\n     //得到初始数据\r\n    getEditorData(orderSn) {\r\n      this.request(this.api.order.channelPurchaseOrder_getByOrderSn, {\r\n        orderSn: orderSn,\r\n        pageIndex:'',\r\n        pageSize:''\r\n      }).then(data => {\r\n        console.log(data);\r\n        if(data.tax){\r\n          var tmpTax=data.tax*100\r\n          data.tax=tmpTax+\"%\"\r\n          this.signData=data\r\n          this.$set(this.signData,'radio','2')\r\n          data.channelOrderGoodsVOList.data.forEach(item => {\r\n            this.$set(item,'tax', data.tax)\r\n          });\r\n        }else{\r\n          this.signData=data\r\n          this.$set(this.signData,'radio','1')\r\n        }\r\n        if(data.channelOrderGoodsVOList.data){\r\n            data.channelOrderGoodsVOList.data.forEach(item=>{\r\n                if(item.actualAmount){\r\n                    item.amount=parseFloat(item.actualAmount*item.num).toFixed(2)\r\n                }else{\r\n                    item.amount=parseFloat(item.purchasePrice*item.num).toFixed(2)\r\n                }\r\n            })\r\n         this.signData.channelOrderGoodsVOList=data.channelOrderGoodsVOList.data\r\n        }\r\n        var amount=0\r\n        this.signData.channelOrderGoodsVOList.forEach(item => {\r\n          amount+=parseFloat(item.amount)\r\n        })\r\n        this.signData.amount=parseFloat(amount).toFixed(2)\r\n        this.signData.actualAmount = parseFloat(amount).toFixed(2);\r\n        });\r\n    },\r\n    //确认按钮的点击事件\r\n    primaryBtnClick() {\r\n      this.$refs.formData.validate(valid => {\r\n        if (valid) {\r\n          // this.signData.organization = this.$refs.treeDept.$refs.input.value;\r\n          if (this.signData.channelOrderGoodsVOList) {\r\n            this.signData.channelOrderGoodsVOList.forEach(item => {\r\n              item.unitPrice = item.purchasePrice;\r\n            });\r\n          }else{\r\n            this.$message.error('商品数量不能全部为0');\r\n            return\r\n          }\r\n          let validAmount=this.signData.validAmount;\r\n          console.log(typeof(validAmount) )\r\n          if((validAmount == '' && typeof(validAmount) != 'number') || typeof(validAmount) == \"undefined\"){\r\n            this.$message.error('请输入实付金额');\r\n            return\r\n          }\r\n          //过滤商品数量\r\n          var filterOrderGoodsVOListData=this.signData.channelOrderGoodsVOList.filter(item=>{\r\n            return item.num && item.num!=0\r\n          })\r\n          if(filterOrderGoodsVOListData.length==0){\r\n            this.$message.error('采购商品数量不能全部为0');\r\n            return\r\n          }\r\n          this.signData.channelCode='04'\r\n          this.signData.channelOrderGoodsVOList=filterOrderGoodsVOListData\r\n          console.log(\"primaryBtnClick\");\r\n          if (this.signData.tax) {\r\n            let subTax = this.signData.tax.slice(0, this.signData.tax.length - 1);\r\n            let taxNum = subTax / 100;\r\n            this.signData.tax = taxNum;\r\n          }\r\n          this.request(\r\n            this.api.order.channelPurchaseOrder_save,\r\n            this.signData\r\n          ).then(data => {\r\n            //此处应该时上传成功后，再删除\r\n            localStorage.removeItem(\"localTableData\");\r\n            this.signData.channelOrderGoodsVOList = [];\r\n            this.$router.go(-1);\r\n          });\r\n        } else {\r\n          return false;\r\n        }\r\n      });\r\n    },\r\n    //存储供应商编码\r\n    selectSupplierChange(val) {\r\n      let suppliceObj = this.signData.optionData.find(item => item.name == val);\r\n      this.signData.supplierCode = suppliceObj.code;\r\n    },\r\n    //取消按钮的点击事件\r\n    plainBtnClick() {\r\n      this.$router.go(-1);\r\n    },\r\n    //数量检测\r\n    shopNumberChange(val, row) {\r\n      console.log(val)\r\n      if(!val){\r\n        val=0\r\n      }\r\n      if (row.tax && row.tax!='--') {\r\n        row.amount = parseFloat(row.actualAmount * val).toFixed(2);\r\n      } else {\r\n        row.amount = (row.purchasePrice * val).toFixed(2);\r\n      }\r\n      var amount=0\r\n      this.signData.channelOrderGoodsVOList.forEach(item => {\r\n        amount+=parseFloat(item.amount)\r\n      })\r\n      this.signData.amount=parseFloat(amount).toFixed(2)\r\n      if(this.signData.preferentialAmount){\r\n          this.signData.actualAmount =parseFloat(amount-Number(this.signData.preferentialAmount)).toFixed(2)\r\n        }else{\r\n          this.signData.actualAmount = parseFloat(amount).toFixed(2);\r\n        }\r\n      // this.signData.actualAmount = parseFloat(amount).toFixed(2);\r\n    },\r\n    //税点改变时\r\n    taxPointChange(val) {\r\n      console.log(val)\r\n      if (!val) {\r\n        return;\r\n      }\r\n      let subVal = val.slice(0, val.length - 1);\r\n      console.log(subVal)\r\n      if (this.signData.channelOrderGoodsVOList.length > 0) {\r\n        this.signData.channelOrderGoodsVOList.forEach(item => {\r\n          // item.tax = val;\r\n          this.$set(item,'tax',val)\r\n          //含税单价\r\n          item.actualAmount = parseFloat(item.purchasePrice * (subVal / 100+1)).toFixed(2);\r\n          //采购金额\r\n          item.amount = parseFloat(item.actualAmount * item.num).toFixed(2);\r\n        });\r\n        var amount=0\r\n        this.signData.channelOrderGoodsVOList.forEach(item => {\r\n          amount+=parseFloat(item.amount)\r\n        })\r\n        this.signData.amount=parseFloat(amount).toFixed(2)\r\n        if(this.signData.preferentialAmount){\r\n          this.signData.actualAmount =parseFloat(amount-Number(this.signData.preferentialAmount)).toFixed(2)\r\n        }else{\r\n          this.signData.actualAmount = parseFloat(amount).toFixed(2);\r\n        }\r\n        // this.signData.actualAmount = parseFloat(amount).toFixed(2);\r\n      }\r\n    },\r\n    //采购单价发生变化\r\n    purchasePriceChange(val) {\r\n      console.log(val);\r\n      if (!this.signData.tax) {\r\n        this.signData.channelOrderGoodsVOList.forEach(item => {\r\n          item.amount = (item.purchasePrice * item.num).toFixed(2)\r\n        });\r\n      } else {\r\n          let selectSubStr = (this.signData.tax.slice(0, this.signData.tax.length - 1) / 100).toFixed(2);\r\n          var subStr=parseFloat(selectSubStr)+1\r\n          this.signData.channelOrderGoodsVOList.forEach(item => {\r\n            item.actualAmount =(item.purchasePrice * subStr).toFixed(2);\r\n            item.amount = (item.actualAmount * item.num).toFixed(2)\r\n          });\r\n      }\r\n      var amount=0\r\n      this.signData.channelOrderGoodsVOList.forEach(item => {\r\n        amount+=parseFloat(item.amount)\r\n      })\r\n      this.signData.amount=parseFloat(amount).toFixed(2)\r\n      if(this.signData.preferentialAmount){\r\n          this.signData.actualAmount =parseFloat(amount-Number(this.signData.preferentialAmount)).toFixed(2)\r\n        }else{\r\n          this.signData.actualAmount = parseFloat(amount).toFixed(2);\r\n        }\r\n      // this.signData.actualAmount = parseFloat(amount).toFixed(2);\r\n    },\r\n    //采购金额发生变化了\r\n    amountChange(val, row) {\r\n      console.log(val);\r\n      console.log(row);\r\n    if(row.num==0)return\r\n    if (this.signData.tax) {\r\n        let selectVal = (this.signData.tax.slice(0, this.signData.tax.length - 1) / 100).toFixed(2);\r\n        var subStr=parseFloat(selectVal)+1\r\n        row.actualAmount = (row.amount / row.num).toFixed(2);\r\n        row.purchasePrice = (row.actualAmount / subStr).toFixed(2);\r\n      } else {\r\n        row.purchasePrice = (row.amount / row.num).toFixed(2);\r\n      }\r\n      var amount=0\r\n      this.signData.channelOrderGoodsVOList.forEach(item => {\r\n        if(!item.amount){\r\n          item.amount=\"0.00\"\r\n        }\r\n          amount+=parseFloat(item.amount)\r\n      })\r\n      this.signData.amount=parseFloat(amount).toFixed(2)\r\n      if(this.signData.preferentialAmount){\r\n          this.signData.actualAmount =parseFloat(amount-Number(this.signData.preferentialAmount)).toFixed(2)\r\n        }else{\r\n          this.signData.actualAmount = parseFloat(amount).toFixed(2);\r\n        }\r\n      // this.signData.actualAmount = parseFloat(amount).toFixed(2);\r\n    },\r\n    //含税金额发生改变\r\n    actualAmountChange(val) {\r\n      if (this.signData.tax) {\r\n        let selectVal = parseFloat(this.signData.tax.slice(0,this.signData.tax.length - 1)/100).toFixed(2);\r\n        var subStr=parseFloat(selectVal)+1\r\n        val.purchasePrice = parseFloat(val.actualAmount/subStr).toFixed(2);\r\n        val.amount = parseFloat(val.actualAmount * val.num).toFixed(2);\r\n      }\r\n      var amount=0\r\n      this.signData.channelOrderGoodsVOList.forEach(item => {\r\n        amount+=parseFloat(item.amount)\r\n      })\r\n      this.signData.amount=parseFloat(amount).toFixed(2)\r\n      if(this.signData.preferentialAmount){\r\n          this.signData.actualAmount =parseFloat(amount-Number(this.signData.preferentialAmount)).toFixed(2)\r\n        }else{\r\n          this.signData.actualAmount = parseFloat(amount).toFixed(2);\r\n        }\r\n      // this.signData.actualAmount = parseFloat(amount).toFixed(2);\r\n    },\r\n    //radio改变时触发\r\n    radioStatusChange(val){\r\n      console.log(val)\r\n     if(val==1){\r\n      //radio==否\r\n       this.signData.tax=\"0\"\r\n       var amount=0\r\n      if (this.signData.channelOrderGoodsVOList.length > 0) {\r\n        this.signData.channelOrderGoodsVOList.forEach(item => {\r\n          item.tax = '--';\r\n          //含税单价\r\n          item.actualAmount=null\r\n          //采购金额\r\n          item.amount = (item.purchasePrice * item.num).toFixed(2);\r\n        });\r\n      }\r\n      this.signData.channelOrderGoodsVOList.forEach(item => {\r\n        amount+=parseFloat(item.amount)\r\n      })\r\n      this.signData.amount=parseFloat(amount).toFixed(2)\r\n      if(this.signData.preferentialAmount){\r\n        this.signData.actualAmount =parseFloat(amount-Number(this.signData.preferentialAmount)).toFixed(2)\r\n      }else{\r\n        this.signData.actualAmount = parseFloat(amount).toFixed(2);\r\n      }\r\n     }else{\r\n      //radio==是\r\n      this.signData.tax=\"3%\"\r\n      this.taxPointChange(this.signData.tax)\r\n     }\r\n    }\r\n  }\r\n};\r\n</script>\r\n\r\n<style lang=\"less\" scoped>\r\n/* .treeDept{\r\n backgroun\r\n} */\r\n.input-div {\r\n  .data-div {\r\n    width: 100%;\r\n    display: flex;\r\n    div:first-child {\r\n      margin-right: 120px;\r\n      // flex: 1;\r\n    }\r\n  }\r\n  .middle-data-div {\r\n    width: 100%;\r\n    display: flex;\r\n    div:first-child {\r\n      margin-right: 90px;\r\n      // flex: 1;\r\n    }\r\n  }\r\n  .last-data-div {\r\n    width: 100%;\r\n    display: flex;\r\n    div:first-child {\r\n      margin-right: 110px;\r\n      // flex: 1;\r\n    }\r\n  }\r\n}\r\n.actual-amount-input {\r\n  display: inline-block;\r\n  border: 1px solid #d4d4d4;\r\n  height: 32px;\r\n  width: 100px;\r\n  padding-left: 5px;\r\n  border-radius: 3px;\r\n}\r\n.recoment-input .contentInput {\r\n  display: inline-block;\r\n  width: 300px;\r\n}\r\n.remarks-textarea {\r\n  display: flex;\r\n  align-items: center;\r\n}\r\n.remarks-textarea .textarea {\r\n  display: inline-block;\r\n  width: 300px;\r\n}\r\n.label-style {\r\n  display: inline-block;\r\n  width: 68px;\r\n}\r\n.title {\r\n  background-color: #fff;\r\n  padding: 15px 0 15px 30px;\r\n}\r\n.title > span {\r\n  display: inline-block;\r\n  background-color: #fff;\r\n  margin-left: 3px;\r\n}\r\n.middle {\r\n  background-color: #fff;\r\n  margin: 8px;\r\n  margin-bottom: 0;\r\n  height: 100%;\r\n}\r\n.middle > span {\r\n  display: inline-block;\r\n  margin: 20px 0 30px 30px;\r\n}\r\n.el-form-item__content {\r\n  line-height: 40px;\r\n  /* position: relative; */\r\n  font-size: 14px;\r\n  display: inline-block;\r\n  /* margin-right: 150px; */\r\n  // width: 300px;\r\n  white-space: nowrap;\r\n}\r\n.el-select {\r\n  display: inline-block;\r\n  /* position: relative; */\r\n  width: 130px;\r\n  margin-right: 10px;\r\n}\r\n.table-view {\r\n  /* margin-left: 30px; */\r\n  /* margin-bottom: 20px; */\r\n  padding: 0 30px;\r\n  background-color: #fff;\r\n}\r\n.title-div {\r\n  margin: 20px 0 30px;\r\n}\r\n.title-div span {\r\n  background-color: #409eff;\r\n  padding: 8px 20px;\r\n  color: #fff;\r\n  border-radius: 5px;\r\n}\r\n.title-div span:first-child {\r\n  background-color: #fff;\r\n  color: #222;\r\n  padding: 0 8px;\r\n  margin-right: 40px;\r\n}\r\n.money-div {\r\n  background-color: #fff;\r\n  width: 100%;\r\n  text-align: right;\r\n  padding-right: 30px;\r\n  margin-top: 30px;\r\n}\r\n.input-price {\r\n  display: inline-block;\r\n  padding: 10px;\r\n  width: 100px;\r\n  border-radius: 5px;\r\n}\r\n.money-content {\r\n  margin: 8px 0;\r\n}\r\n.price-msg {\r\n  padding: 30px;\r\n  background-color: #fff;\r\n}\r\n.price-msg > span {\r\n  display: inline-block;\r\n  margin-bottom: 20px;\r\n}\r\n.block {\r\n  display: flex;\r\n}\r\n.block > span {\r\n  display: inline-block;\r\n  margin-right: 10px;\r\n}\r\n\r\n.btn-div {\r\n  margin-left: 70px;\r\n  margin-top: 30px;\r\n}\r\n.division-type {\r\n  widows: 100%;\r\n  // background-color: aquamarine;\r\n  display: flex;\r\n  justify-items: center;\r\n}\r\n</style>\r\n"],"sourceRoot":"src/views/orders/business/purchase"}]}
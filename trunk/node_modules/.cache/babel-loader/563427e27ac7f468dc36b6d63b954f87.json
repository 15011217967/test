{"remainingRequest":"C:\\Users\\EDZ\\Desktop\\研发项目\\vue-project\\trunk\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\EDZ\\Desktop\\研发项目\\vue-project\\trunk\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!C:\\Users\\EDZ\\Desktop\\研发项目\\vue-project\\trunk\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\EDZ\\Desktop\\研发项目\\vue-project\\trunk\\src\\views\\orders\\business\\purchaseReturn\\purchaseReturn_add.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\EDZ\\Desktop\\研发项目\\vue-project\\trunk\\src\\views\\orders\\business\\purchaseReturn\\purchaseReturn_add.vue","mtime":1576295043454},{"path":"C:\\Users\\EDZ\\Desktop\\研发项目\\vue-project\\trunk\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1558492728398},{"path":"C:\\Users\\EDZ\\Desktop\\研发项目\\vue-project\\trunk\\node_modules\\babel-loader\\lib\\index.js","mtime":1558492720858},{"path":"C:\\Users\\EDZ\\Desktop\\研发项目\\vue-project\\trunk\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1558492728398},{"path":"C:\\Users\\EDZ\\Desktop\\研发项目\\vue-project\\trunk\\node_modules\\vue-loader\\lib\\index.js","mtime":1558492728890}],"contextDependencies":[],"result":["import \"core-js/modules/es6.regexp.match\";\nimport \"core-js/modules/es6.number.constructor\";\nimport \"core-js/modules/es6.array.find\";\nimport \"core-js/modules/es6.function.name\";\nimport \"regenerator-runtime/runtime\";\nimport _asyncToGenerator from \"C:\\\\Users\\\\EDZ\\\\Desktop\\\\\\u7814\\u53D1\\u9879\\u76EE\\\\vue-project\\\\trunk\\\\node_modules\\\\@babel\\\\runtime-corejs2/helpers/esm/asyncToGenerator\";\nimport \"core-js/modules/web.dom.iterable\";\nimport _defineProperty from \"C:\\\\Users\\\\EDZ\\\\Desktop\\\\\\u7814\\u53D1\\u9879\\u76EE\\\\vue-project\\\\trunk\\\\node_modules\\\\@babel\\\\runtime-corejs2/helpers/esm/defineProperty\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport codeSet from \"@/components/codeSet\";\nimport treeDept from \"@/components/treeDept\";\nimport division from \"@/components/division\";\nexport default {\n  components: {\n    codeSet: codeSet,\n    treeDept: treeDept,\n    division: division\n  },\n  data: function data() {\n    var _signData;\n\n    return {\n      signData: (_signData = {\n        orderType: '0302',\n        //供应商\n        supplier: '',\n        //部门Id\n        relationDepId: '',\n        //供应商编码\n        supplierCode: '',\n        //退货备注\n        remarks: \"\",\n        //组织机构\n        organizationCode: \"\",\n        organization: '',\n        //退货日期\n        refundTime: \"\",\n        //货主\n        goodsOwner: '',\n        //收货仓库\n        warehouse: \"\",\n        warehouseCode: '',\n        //采退金额\n        amount: '',\n        //折损金额\n        breakageAmount: \"\",\n        //应付金额\n        returnAmount: ''\n      }, _defineProperty(_signData, \"remarks\", ''), _defineProperty(_signData, \"addressId\", \"\"), _defineProperty(_signData, \"provinceName\", \"\"), _defineProperty(_signData, \"provinceCode\", \"\"), _defineProperty(_signData, \"cityName\", \"\"), _defineProperty(_signData, \"cityCode\", \"\"), _defineProperty(_signData, \"areaName\", \"\"), _defineProperty(_signData, \"areaCode\", \"\"), _defineProperty(_signData, \"addressInfo\", \"\"), _defineProperty(_signData, \"logisticsOrderSn\", \"\"), _defineProperty(_signData, \"logisticsCompany\", \"\"), _defineProperty(_signData, \"logisticsCompanyCode\", \"\"), _defineProperty(_signData, \"channelOrderGoodsVOList\", []), _signData),\n      rules: {\n        organization: [{\n          required: true,\n          message: \"请选择组织机构\",\n          trigger: \"change\"\n        }],\n        warehouse: [{\n          required: true,\n          message: \"请选择收货仓库\",\n          trigger: \"change\"\n        }],\n        orderSn: [{\n          required: true,\n          message: \"请选择或输入订单号\",\n          trigger: \"change\"\n        }],\n        logisticsList: [{\n          required: true,\n          message: \"请选择物流公司\",\n          trigger: \"change\"\n        }],\n        addressId: [{\n          required: true,\n          message: \"地址不能为空\",\n          trigger: \"blur\"\n        }],\n        addressInfo: [{\n          required: true,\n          message: \"详细地址不能为空\",\n          trigger: \"blur\"\n        }],\n        name: [{\n          required: true,\n          message: \"商户姓名不能为空\",\n          trigger: \"blur\"\n        }],\n        phone: [{\n          required: true,\n          message: \"联系电话不能为空\",\n          trigger: \"blur\"\n        }],\n        logisticsOrderSn: [{\n          required: true,\n          message: \"物流单号不能为空\",\n          trigger: \"blur\"\n        }],\n        supplier: [{\n          required: true,\n          message: \"供应商不能为空\",\n          trigger: \"change\"\n        }]\n      },\n      //收货仓库--合格的仓库\n      WarehouseCodeData: [],\n      //获取物流数据\n      logisticsListData: [],\n      //标识popover的显示或隐藏\n      visible: false,\n      //得到供应商数据\n      optionData: [],\n      //保存仓库当前的名称\n      tmpWarehouse: \"\",\n      //标识供应商\n      supplierSelect: false,\n      //标识仓库\n      warehouseSelect: false\n    };\n  },\n  mounted: function mounted() {\n    var _this = this;\n\n    var _type = localStorage.getItem(\"type\") || \"\"; //得到组织机构数据\n\n\n    this.getWarehouseListData(); //得到物流数据\n\n    this.getLogisticsList();\n\n    if (_type == \"add\") {\n      localStorage.removeItem(\"localTableData\");\n      localStorage.removeItem(\"shopMsgData\");\n      localStorage.removeItem(\"allShopPrice\");\n      this.signData.channelOrderGoodsVOList = [];\n    } else {\n      var localTableData = localStorage.getItem(\"localTableData\");\n      var shopData = localStorage.getItem(\"shopMsgData\");\n      this.$nextTick(function () {\n        _this.signData = JSON.parse(shopData);\n        _this.signData.channelOrderGoodsVOList = JSON.parse(localTableData);\n\n        if (_this.signData.channelOrderGoodsVOList && _this.signData.channelOrderGoodsVOList.length > 0) {\n          _this.signData.channelOrderGoodsVOList.forEach(function (item) {\n            _this.$set(item, 'returnQuantity', item.num);\n\n            _this.$set(item, 'refundAmount', item.purchasePrice);\n          });\n\n          console.log(_this.signData.channelOrderGoodsVOList);\n        } //赋值订单总金额\n\n\n        var amount = localStorage.getItem(\"allShopPrice\");\n        _this.signData.amount = parseFloat(amount).toFixed(2);\n        _this.signData.returnAmount = parseFloat(amount).toFixed(2); //得到当前的供应商\n\n        _this.tmpSupplier = _this.signData.supplier; //得到当前的仓库名称\n\n        _this.tmpWarehouse = _this.signData.warehouse; //得到仓库数据\n\n        _this.getWarehouseList(_this.signData.organizationCode);\n      });\n    }\n  },\n  watch: {\n    //监听仓库的变化\n    \"signData.warehouse\": function signDataWarehouse(newValue, oldValue) {\n      this.tmpWarehouse = oldValue;\n    },\n    //监听供应商的变化\n    \"signData.supplier\": function signDataSupplier(newValue, oldValue) {\n      this.tmpSupplier = oldValue;\n    },\n    //监听折损价格的变化\n    \"signData.breakageAmount\": function signDataBreakageAmount(newBreakageAmount, oldBreakageAmount) {\n      var returnAmount = this.signData.amount - newBreakageAmount;\n      this.signData.returnAmount = returnAmount.toFixed(2);\n    }\n  },\n  methods: {\n    //得到组织机构数据\n    getWarehouseListData: function () {\n      var _getWarehouseListData = _asyncToGenerator(\n      /*#__PURE__*/\n      regeneratorRuntime.mark(function _callee() {\n        var _this2 = this;\n\n        var info;\n        return regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                _context.next = 2;\n                return this.request(this.api.user.get_userinfo, {}, true);\n\n              case 2:\n                info = _context.sent;\n                console.log(info); //得到部门Id\n\n                this.signData.relationDepId = info.departId;\n                this.request(this.api.user.userCompany_getUserOrgByUserId, {\n                  userId: info.userId,\n                  type: 0\n                }).then(function (data) {\n                  console.log(data); //得到机构\n\n                  _this2.signData.organization = data.name; //得到机构code\n\n                  _this2.signData.organizationCode = data.id; //获取货主列表\n\n                  _this2.getGoodsOwnerListData(_this2.signData.organizationCode); //得到仓库数据\n\n\n                  _this2.getWarehouseList(_this2.signData.organizationCode); //得到供货商数据\n\n\n                  _this2.getSupplierListData(_this2.signData.organizationCode);\n                });\n\n              case 6:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this);\n      }));\n\n      function getWarehouseListData() {\n        return _getWarehouseListData.apply(this, arguments);\n      }\n\n      return getWarehouseListData;\n    }(),\n    //获取货主列表\n    getGoodsOwnerListData: function getGoodsOwnerListData(organizationId) {\n      var _this3 = this;\n\n      this.request(this.api.system.goodsOwner_list, {\n        orgId: organizationId\n      }).then(function (data) {\n        console.log(data.data);\n        _this3.signData.goodsOwner = data.data[0].code;\n      });\n    },\n    //得到物流编码\n    selectLogisticsData: function selectLogisticsData(val) {\n      var logisticsCode = this.logisticsListData.find(function (item) {\n        return item.name == val;\n      }).code;\n      this.signData.logisticsCompanyCode = logisticsCode;\n    },\n    //得到供货商数据\n    getSupplierListData: function getSupplierListData(organizationId) {\n      var _this4 = this;\n\n      console.log(246);\n      this.request(this.api.product.supplier_list, {\n        organizationId: organizationId,\n        cooperation: true\n      }).then(function (data) {\n        console.log(data);\n        _this4.optionData = data.data;\n      });\n    },\n    setDivision: function setDivision(var1) {\n      this.signData.provinceName = var1.province;\n      this.signData.provinceCode = var1.provinceCode;\n      this.signData.cityName = var1.municipality;\n      this.signData.cityCode = var1.municipalityCode;\n      this.signData.areaName = var1.area;\n      this.signData.areaCode = var1.areaCode;\n      this.signData.addressId = var1.divisionId;\n    },\n    //得到仓库列表\n    getWarehouseList: function getWarehouseList(orgId) {\n      var _this5 = this;\n\n      this.request(this.api.warehouse.warehouseBase_warehouse_list, {\n        isValid: true\n      }).then(function (res) {\n        console.log(res);\n        _this5.WarehouseCodeData = res.data;\n      });\n    },\n    //获取物流数据\n    getLogisticsList: function getLogisticsList() {\n      var _this6 = this;\n\n      console.log('getLogisticsList---');\n      this.request(this.api.warehouse.warehouseBase_logistics_list, {\n        isValid: true\n      }).then(function (res) {\n        console.log(res);\n        _this6.logisticsListData = res.data;\n      });\n    },\n    //得到供应商编码\n    selectSupplierData: function selectSupplierData(val) {\n      var _this7 = this;\n\n      if (this.signData.channelOrderGoodsVOList && this.signData.channelOrderGoodsVOList.length > 0) {\n        this.$confirm(\"确认切换吗,切换后需重新选择商品\", \"提示\", {\n          confirmButtonText: \"确定\",\n          cancelButtonText: \"取消\",\n          type: \"warning\"\n        }).then(function () {\n          _this7.signData.channelOrderGoodsVOList = [];\n          localStorage.removeItem(\"localTableData\");\n          _this7.signData.returnAmount = _this7.signData.amount = '';\n          localStorage.removeItem(\"allShopPrice\");\n\n          _this7.getSupplierCode(val);\n        }).catch(function (actions) {\n          _this7.signData.supplier = _this7.tmpSupplier;\n\n          _this7.getSupplierCode(_this7.signData.supplier);\n        });\n      } else {\n        this.getSupplierCode(val);\n      }\n    },\n    //得到供应商code码\n    getSupplierCode: function getSupplierCode(val) {\n      console.log(val);\n      this.supplierSelect = false;\n      var supplierCode = this.optionData.find(function (item) {\n        return item.name == val;\n      }).code;\n      this.signData.supplierCode = supplierCode;\n    },\n    //收货仓库\n    selectwarehouseCodeChange: function selectwarehouseCodeChange(val) {\n      var _this8 = this;\n\n      if (this.signData.channelOrderGoodsVOList && this.signData.channelOrderGoodsVOList.length > 0) {\n        this.$confirm(\"确认切换吗,切换后需重新选择商品\", \"提示\", {\n          confirmButtonText: \"确定\",\n          cancelButtonText: \"取消\",\n          type: \"warning\"\n        }).then(function () {\n          _this8.signData.channelOrderGoodsVOList = [];\n          localStorage.removeItem(\"localTableData\");\n          _this8.signData.returnAmount = _this8.signData.amount = '';\n          localStorage.removeItem(\"allShopPrice\");\n\n          _this8.getWarehouseIdAndCode(val);\n        }).catch(function (actions) {\n          _this8.signData.warehouse = _this8.tmpWarehouse;\n\n          _this8.getWarehouseIdAndCode(_this8.signData.tmpWarehouse);\n        });\n      } else {\n        this.getWarehouseIdAndCode(val);\n      }\n    },\n    //得到仓库编码和id\n    getWarehouseIdAndCode: function getWarehouseIdAndCode(val) {\n      this.warehouseSelect = false;\n      var code = this.WarehouseCodeData.find(function (item) {\n        return item.warehouseName == val;\n      }).warehouseCode;\n      this.signData.warehouseCode = code;\n    },\n    //选择商品的点击事件\n    selectShopClickEvent: function selectShopClickEvent() {\n      if (this.signData.warehouse && this.signData.supplier) {\n        this.supplierSelect = false;\n        this.warehouseSelect = false;\n        this.$router.push({\n          path: '/OS/business/purchaseReturn/purchaseReturn_shop',\n          query: {\n            ownerId: this.signData.goodsOwner,\n            organizationName: this.signData.organization,\n            warehouseId: this.signData.warehouseCode,\n            warehouseName: this.signData.warehouse\n          }\n        }); //存储填写的信息\n\n        localStorage.setItem(\"shopMsgData\", JSON.stringify(this.signData));\n        localStorage.setItem(\"localTableData\", JSON.stringify(this.signData.channelOrderGoodsVOList));\n      } else {\n        if (this.signData.warehouse) {\n          this.warehouseSelect = false;\n        } else {\n          this.warehouseSelect = true;\n        }\n\n        if (this.signData.supplier) {\n          this.supplierSelect = false;\n        } else {\n          this.supplierSelect = true;\n        }\n      }\n    },\n    //监听退货单价的变化\n    refundAmountChange: function refundAmountChange(val) {\n      console.log(val);\n      var amount = 0;\n      this.signData.channelOrderGoodsVOList.forEach(function (item) {\n        amount += item.refundAmount * item.returnQuantity;\n      });\n      this.signData.amount = amount.toFixed(2);\n\n      if (this.signData.breakageAmount) {\n        this.signData.returnAmount = parseFloat(amount - Number(this.signData.breakageAmount)).toFixed(2);\n      } else {\n        this.signData.returnAmount = parseFloat(amount).toFixed(2);\n      } // this.signData.returnAmount = amount.toFixed(2)\n\n    },\n    //优惠金额\n    priceInputChangeEvent: function priceInputChangeEvent(val) {\n      console.log(this.signData.breakageAmount);\n      var breakageAmount = val.target.value.match(/^\\d*(\\.?\\d{0,2})/g);\n      this.signData.breakageAmount = breakageAmount[0];\n    },\n    //监听退货数量的变化\n    returnQuantityChange: function returnQuantityChange(val) {\n      console.log(val);\n      var amount = 0;\n      this.signData.channelOrderGoodsVOList.forEach(function (item) {\n        amount += item.refundAmount * item.returnQuantity;\n      });\n      this.signData.amount = amount.toFixed(2);\n\n      if (this.signData.breakageAmount) {\n        this.signData.returnAmount = parseFloat(amount - Number(this.signData.breakageAmount)).toFixed(2);\n      } else {\n        this.signData.returnAmount = parseFloat(amount).toFixed(2);\n      } // this.signData.returnAmount = amount.toFixed(2)\n\n    },\n    //确认btn的点击事件\n    primaryBtnClick: function primaryBtnClick() {\n      var _this9 = this;\n\n      var self = this;\n      this.$refs.formData.validate(function (valid) {\n        if (valid) {\n          console.log(\"dasdasd\");\n          var channelOrderGoodsVOList = self.signData.channelOrderGoodsVOList.filter(function (item) {\n            return item.returnQuantity != 0;\n          });\n\n          if (channelOrderGoodsVOList.length == 0) {\n            _this9.$message.error('退货商品数量不能全部为0');\n\n            return;\n          }\n\n          _this9.signData.channelOrderGoodsVOList = channelOrderGoodsVOList;\n\n          _this9.request(_this9.api.order.channelRetundOrder_insert, _this9.signData).then(function (data) {\n            console.log(\"270===========\"); //重置\n\n            if (data && data.length) {\n              var html = \"\";\n              data.forEach(function (errItem) {\n                for (var i = 0; i < _this9.signData.channelOrderGoodsVOList.length; i++) {\n                  if (_this9.signData.channelOrderGoodsVOList[i].code == errItem.code) {\n                    if (errItem.qty == 0) {\n                      _this9.signData.channelOrderGoodsVOList.splice(i, 1);\n\n                      html += \"<p>\" + errItem.code + \"：可用库存为0，已删除该商品；</p>\";\n                    } else {\n                      html += \"<p>\" + errItem.code + \"：可用库存不足，已更新为最大值\" + errItem.qty + \"；</p>\";\n                      _this9.signData.channelOrderGoodsVOList[i].availableQuantity = errItem.qty; // this.signData.channelOrderGoodsVOList[i].num = errItem.qty;\n                    }\n\n                    break;\n                  }\n                }\n              });\n\n              _this9.$notify({\n                title: \"提示\",\n                duration: 0,\n                dangerouslyUseHTMLString: true,\n                message: html\n              });\n            } else {\n              _this9.$notify.success({\n                title: \"成功\",\n                message: \"新增成功\"\n              }); //重置\n\n\n              localStorage.removeItem(\"localTableData\");\n\n              _this9.$refs.formData.resetFields();\n\n              _this9.signData.channelOrderGoodsVOList = [];\n\n              _this9.$router.go(-1);\n            }\n          });\n        } else {\n          console.log(\"error submit!!\");\n          return false;\n        }\n      });\n    },\n    //取消btn的点击事件\n    plainBtnClick: function plainBtnClick() {\n      this.$router.go(-1);\n    },\n    //每页条数改变时\n    handleSizeChange: function handleSizeChange(page) {\n      this.signData.pageSize = page;\n    },\n    //当前页改变时\n    handleCurrentChange: function handleCurrentChange(page) {\n      this.signData.pageIndex = page;\n    },\n    //选择Btn的点击事件\n    selectBtnClick: function selectBtnClick(row) {\n      console.log(row);\n    },\n    //搜索\n    gridFormDataSearch: function gridFormDataSearch() {\n      console.log(this.gridTableData.searchKey);\n      console.log(this.gridTableData.channelCodes);\n    },\n    //重置\n    gridFormDataResetFilters: function gridFormDataResetFilters(gridFormData) {\n      this.$refs[gridFormData].resetFields();\n    }\n  }\n};",{"version":3,"sources":["purchaseReturn_add.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\r\n  <div class=\"content\">\r\n    <label>基本信息</label>\r\n    <div class=\"form_div\">\r\n      <el-form\r\n        :model=\"signData\"\r\n        ref=\"formData\"\r\n        :inline=\"true\"\r\n        :rules=\"rules\"\r\n        class=\"demo-form-inline\"\r\n      >\r\n        <div class=\"input-div\">\r\n          <div>\r\n          <el-form-item label=\"组织机构：\" prop=\"organization\">\r\n            <el-input v-model=\"signData.organization\" disabled></el-input>\r\n          </el-form-item>\r\n          <br />\r\n          <el-form-item label=\"供应商：\" prop=\"supplier\" style=\"width:350px;padding-left:15px;\">\r\n              <el-select\r\n                :class=\"supplierSelect?'disableSelect':''\"\r\n                @change=\"selectSupplierData\"\r\n                v-model=\"signData.supplier\"\r\n                placeholder=\"请选择\"\r\n              >\r\n                <el-option\r\n                  v-for=\"item in optionData\"\r\n                  :label=\"item.name\"\r\n                  :key=\"item.id\"\r\n                  :value=\"item.name\"\r\n                ></el-option>\r\n              </el-select>\r\n          </el-form-item>\r\n           <br />\r\n          <el-form-item label=\"退货地址：\" prop=\"addressId\">\r\n            <division @set-division=\"setDivision\" v-model=\"signData.addressId\"></division>\r\n          </el-form-item>\r\n           <br />\r\n          <el-form-item label=\"物流公司：\">\r\n            <el-select\r\n              @change=\"selectLogisticsData\"\r\n              v-model=\"signData.logisticsCompany\"\r\n              placeholder=\"请选择物流公司\"\r\n            >\r\n              <el-option\r\n                v-for=\"item in logisticsListData\"\r\n                :label=\"item.name\"\r\n                :key=\"item.id\"\r\n                :value=\"item.name\"\r\n              ></el-option>\r\n            </el-select>\r\n          </el-form-item>\r\n        </div>\r\n        <div>\r\n            <el-form-item label=\"退货日期：\" style=\"width:350px;padding-left:10px;\">\r\n              <el-date-picker v-model=\"signData.refundTime\" type=\"date\" placeholder=\"选择日期\"></el-date-picker>\r\n            </el-form-item>\r\n            <br />\r\n            <el-form-item label=\"出库仓库：\" prop=\"warehouse\">\r\n              <el-select\r\n                :class=\"warehouseSelect?'disableSelect':''\"\r\n                @change=\"selectwarehouseCodeChange\"\r\n                v-model=\"signData.warehouse\"\r\n                placeholder=\"请选择仓库\"\r\n              >\r\n                <el-option\r\n                  v-for=\"item in WarehouseCodeData\"\r\n                  :label=\"item.warehouseName\"\r\n                  :key=\"item.id\"\r\n                  :value=\"item.warehouseName\"\r\n                ></el-option>\r\n              </el-select>\r\n            </el-form-item>\r\n            <br />\r\n            <el-form-item label=\"详细地址：\" prop=\"addressInfo\">\r\n              <el-input v-model=\"signData.addressInfo\" placeholder=\"请输入内容\"></el-input>\r\n            </el-form-item>\r\n            <br />\r\n            <el-form-item label=\"物流单号：\" style=\"width:350px;padding-left:10px;\">\r\n              <el-input v-model=\"signData.logisticsOrderSn\" placeholder=\"请输入内容\"></el-input>\r\n            </el-form-item>\r\n        </div>\r\n       </div>\r\n      </el-form>\r\n      <div class=\"table_msg\">\r\n        <div class=\"title_span\">\r\n          <span>商品信息</span>\r\n          <span class=\"select_shop_title\" @click=\"selectShopClickEvent\">选择商品</span>\r\n        </div>\r\n        <div class=\"table_div\">\r\n          <el-table\r\n            :data=\"signData.channelOrderGoodsVOList\"\r\n            stripe\r\n            style=\"width: 100%\"\r\n            header-row-class-name=\"item-table-header\"\r\n            max-height=\"400\"\r\n          >\r\n            <el-table-column prop=\"productCode\" label=\"商品款号\" width=\"180\"></el-table-column>\r\n            <el-table-column prop=\"code\" label=\"商品货号\" width=\"180\"></el-table-column>\r\n            <el-table-column prop=\"image\" label=\"商品图片\">\r\n              <template slot-scope=\"scope\">\r\n               <img :src=\"scope.row.image\" style=\"width:32px;height:32px;\"/>\r\n              </template>\r\n            </el-table-column>\r\n            <el-table-column prop=\"name\" label=\"商品名称\" width=\"180\"></el-table-column>\r\n            <el-table-column prop=\"type\" label=\"商品类型\" width=\"180\">\r\n              <template slot-scope=\"scope\">\r\n                {{scope.row.type?scope.row.type:'--'}}\r\n              </template>\r\n            </el-table-column>\r\n            <el-table-column prop=\"brandName\" label=\"品牌\">\r\n              <template slot-scope=\"scope\">\r\n                {{scope.row.brandName?scope.row.brandName:'--'}}\r\n              </template>\r\n            </el-table-column>\r\n            <el-table-column prop=\"fullCateName\" label=\"商品品类\" width=\"180\"></el-table-column>\r\n            <el-table-column label=\"规格属性\" width=\"180\">\r\n              <template slot-scope=\"scope\">\r\n                <span>颜色：{{scope.row.color}}</span>\r\n                <br />\r\n                <span>尺寸：{{scope.row.size}}</span>\r\n              </template>\r\n            </el-table-column>\r\n            <el-table-column prop=\"refundAmount\" label=\"采购退货单价\" width=\"120\" align=\"center\">\r\n              <template slot-scope=\"scope\">\r\n                <div class=\"tag_div\">\r\n                  <span>￥</span>\r\n                  <el-input\r\n                    @input=\"refundAmountChange\"\r\n                    min=\"0\"\r\n                    max=\"9\"\r\n                    type=\"number\"\r\n                    v-model=\"scope.row.refundAmount\"\r\n                    placeholder=\"请输入\"\r\n                  ></el-input>\r\n                </div>\r\n              </template>\r\n            </el-table-column>\r\n            <el-table-column prop=\"returnQuantity\" label=\"退货数量\" width=\"180\" align=\"center\">\r\n              <template slot-scope=\"scope\">\r\n                <el-input-number\r\n                  v-model=\"scope.row.returnQuantity\"\r\n                  @change=\"returnQuantityChange\"\r\n                  :min=\"0\"\r\n                  :max=\"scope.row.availableQuantity\"\r\n                  v-enter-number\r\n                ></el-input-number>\r\n              </template>\r\n            </el-table-column>\r\n          </el-table>\r\n        </div>\r\n        <div class=\"money-div\">\r\n          <span>采退金额：￥{{signData.amount?signData.amount:'0.00'}}</span>\r\n          <div class=\"money-content\">\r\n            <span>折损金额：</span>\r\n            <input type=\"text\" class=\"input-price\" placeholder=\"描述折损\" />\r\n            <span>￥</span>\r\n            <input\r\n              type=\"number\"\r\n              min=\"0\"\r\n              max=\"100\"\r\n              @change=\"priceInputChangeEvent\"\r\n              class=\"input-price\"\r\n              v-model=\"signData.breakageAmount\"\r\n              placeholder=\"0.00\"\r\n              :disabled=\"!signData.amount\"\r\n            />\r\n          </div>\r\n          <span>退款应付金额：￥{{signData.returnAmount?signData.returnAmount:'0.00'}}</span>\r\n        </div>\r\n        <div class=\"remarks-textarea\">\r\n          <span>退货备注：</span>\r\n          <el-input\r\n            class=\"textarea\"\r\n            type=\"textarea\"\r\n            :rows=\"2\"\r\n            placeholder=\"请输入内容\"\r\n            v-model=\"signData.remarks\"\r\n            resize=\"none\"\r\n          ></el-input>\r\n        </div>\r\n        <div class=\"btn-div\">\r\n          <el-button type=\"primary\" @click=\"primaryBtnClick\" size=\"small\">确认</el-button>\r\n          <el-button plain @click=\"plainBtnClick\" size=\"small\">取消</el-button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport codeSet from \"@/components/codeSet\";\r\nimport treeDept from \"@/components/treeDept\";\r\nimport division from \"@/components/division\";\r\nexport default {\r\n  components: {\r\n    codeSet,\r\n    treeDept,\r\n    division\r\n  },\r\n  data() {\r\n    return {\r\n      signData: {\r\n        orderType:'0302',\r\n        //供应商\r\n        supplier:'',\r\n        //部门Id\r\n        relationDepId:'',\r\n        //供应商编码\r\n        supplierCode:'',\r\n        //退货备注\r\n        remarks: \"\",\r\n        //组织机构\r\n        organizationCode: \"\",\r\n        organization:'',\r\n        //退货日期\r\n        refundTime: \"\",\r\n        //货主\r\n        goodsOwner:'',\r\n        //收货仓库\r\n        warehouse: \"\",\r\n        warehouseCode:'',\r\n        //采退金额\r\n        amount:'',\r\n        //折损金额\r\n        breakageAmount: \"\",\r\n        //应付金额\r\n        returnAmount:'',\r\n        //备注\r\n        remarks:'',\r\n        //地址相关\r\n        addressId: \"\",\r\n        provinceName: \"\",\r\n        provinceCode: \"\",\r\n        cityName: \"\",\r\n        cityCode: \"\",\r\n        areaName: \"\",\r\n        areaCode: \"\",\r\n        addressInfo: \"\",\r\n        //物流单号\r\n        logisticsOrderSn: \"\",\r\n        //物流公司\r\n        logisticsCompany: \"\",\r\n        logisticsCompanyCode:\"\",\r\n        //表格数据\r\n        channelOrderGoodsVOList: []\r\n      },\r\n      rules: {\r\n        organization: [\r\n          { required: true, message: \"请选择组织机构\", trigger: \"change\" }\r\n        ],\r\n        warehouse: [\r\n          { required: true, message: \"请选择收货仓库\", trigger: \"change\" }\r\n        ],\r\n        orderSn: [\r\n          { required: true, message: \"请选择或输入订单号\", trigger: \"change\" }\r\n        ],\r\n        logisticsList: [\r\n          { required: true, message: \"请选择物流公司\", trigger: \"change\" }\r\n        ],\r\n        addressId: [\r\n          { required: true, message: \"地址不能为空\", trigger: \"blur\" }\r\n        ],\r\n        addressInfo: [\r\n          { required: true, message: \"详细地址不能为空\", trigger: \"blur\" }\r\n        ],\r\n        name: [\r\n          { required: true, message: \"商户姓名不能为空\", trigger: \"blur\" }\r\n        ],\r\n        phone: [\r\n          { required: true, message: \"联系电话不能为空\", trigger: \"blur\" }\r\n        ],\r\n        logisticsOrderSn: [\r\n          { required: true, message: \"物流单号不能为空\", trigger: \"blur\" }\r\n        ],\r\n        supplier:[\r\n          { required: true, message: \"供应商不能为空\", trigger: \"change\" }\r\n        ]\r\n      },\r\n      //收货仓库--合格的仓库\r\n      WarehouseCodeData: [],\r\n      //获取物流数据\r\n      logisticsListData: [],\r\n      //标识popover的显示或隐藏\r\n      visible: false,\r\n      //得到供应商数据\r\n      optionData:[],\r\n      //保存仓库当前的名称\r\n      tmpWarehouse: \"\",\r\n      //标识供应商\r\n      supplierSelect:false,\r\n      //标识仓库\r\n      warehouseSelect:false,\r\n\r\n    };\r\n  },\r\n  mounted() {\r\n    let _type = localStorage.getItem(\"type\") || \"\";\r\n    //得到组织机构数据\r\n    this.getWarehouseListData();\r\n    //得到物流数据\r\n    this.getLogisticsList();\r\n    if (_type == \"add\") {\r\n      localStorage.removeItem(\"localTableData\");\r\n      localStorage.removeItem(\"shopMsgData\");\r\n      localStorage.removeItem(\"allShopPrice\");\r\n      this.signData.channelOrderGoodsVOList = [];\r\n    } else {\r\n      var localTableData = localStorage.getItem(\"localTableData\");\r\n      var shopData = localStorage.getItem(\"shopMsgData\");\r\n      this.$nextTick(() => {\r\n        this.signData = JSON.parse(shopData);\r\n        this.signData.channelOrderGoodsVOList = JSON.parse(localTableData);\r\n        if(this.signData.channelOrderGoodsVOList && this.signData.channelOrderGoodsVOList.length>0){\r\n          this.signData.channelOrderGoodsVOList.forEach(item=>{\r\n            this.$set(item,'returnQuantity',item.num)\r\n            this.$set(item,'refundAmount',item.purchasePrice)\r\n          })\r\n          console.log( this.signData.channelOrderGoodsVOList);\r\n        }\r\n        //赋值订单总金额\r\n        var amount = localStorage.getItem(\"allShopPrice\");\r\n        this.signData.amount=parseFloat(amount).toFixed(2)\r\n        this.signData.returnAmount = parseFloat(amount).toFixed(2);\r\n        //得到当前的供应商\r\n        this.tmpSupplier=this.signData.supplier\r\n        //得到当前的仓库名称\r\n        this.tmpWarehouse = this.signData.warehouse;\r\n        //得到仓库数据\r\n        this.getWarehouseList(this.signData.organizationCode);\r\n      });\r\n    }\r\n  },\r\n  watch: {\r\n    //监听仓库的变化\r\n    \"signData.warehouse\": function(newValue, oldValue) {\r\n      this.tmpWarehouse = oldValue;\r\n    },\r\n    //监听供应商的变化\r\n    \"signData.supplier\": function(newValue, oldValue) {\r\n      this.tmpSupplier = oldValue;\r\n    },\r\n    //监听折损价格的变化\r\n    \"signData.breakageAmount\":function(newBreakageAmount,oldBreakageAmount){\r\n      var returnAmount = this.signData.amount - newBreakageAmount;\r\n      this.signData.returnAmount = returnAmount.toFixed(2)\r\n    }\r\n  },\r\n  methods: {\r\n    //得到组织机构数据\r\n    async getWarehouseListData() {\r\n      let info = await this.request(this.api.user.get_userinfo, {}, true);\r\n      console.log(info);\r\n      //得到部门Id\r\n      this.signData.relationDepId = info.departId;\r\n\r\n      this.request(this.api.user.userCompany_getUserOrgByUserId, {\r\n        userId: info.userId,\r\n        type: 0\r\n      }).then(data => {\r\n        console.log(data);\r\n        //得到机构\r\n        this.signData.organization = data.name;\r\n        //得到机构code\r\n        this.signData.organizationCode = data.id;\r\n        //获取货主列表\r\n        this.getGoodsOwnerListData(this.signData.organizationCode);\r\n        //得到仓库数据\r\n        this.getWarehouseList(this.signData.organizationCode);\r\n        //得到供货商数据\r\n        this.getSupplierListData(this.signData.organizationCode)\r\n      });\r\n    },\r\n    //获取货主列表\r\n    getGoodsOwnerListData(organizationId) {\r\n      this.request(this.api.system.goodsOwner_list, {\r\n        orgId: organizationId\r\n      }).then(data => {\r\n        console.log(data.data);\r\n        this.signData.goodsOwner = data.data[0].code;\r\n      });\r\n    },\r\n    //得到物流编码\r\n    selectLogisticsData(val) {\r\n      var logisticsCode = this.logisticsListData.find(\r\n        item => item.name == val\r\n      ).code;\r\n      this.signData.logisticsCompanyCode = logisticsCode;\r\n    },\r\n    //得到供货商数据\r\n    getSupplierListData(organizationId) {\r\n      console.log(246);\r\n      this.request(this.api.product.supplier_list, {organizationId:organizationId,cooperation:true}).then(data => {\r\n        console.log(data);\r\n        this.optionData = data.data;\r\n      });\r\n    },\r\n    setDivision(var1) {\r\n      this.signData.provinceName = var1.province;\r\n      this.signData.provinceCode = var1.provinceCode;\r\n      this.signData.cityName = var1.municipality;\r\n      this.signData.cityCode = var1.municipalityCode;\r\n      this.signData.areaName = var1.area;\r\n      this.signData.areaCode = var1.areaCode;\r\n      this.signData.addressId = var1.divisionId;\r\n    },\r\n    //得到仓库列表\r\n    getWarehouseList(orgId) {\r\n      this.request(this.api.warehouse.warehouseBase_warehouse_list, {\r\n        isValid: true\r\n      }).then(res => {\r\n        console.log(res);\r\n        this.WarehouseCodeData = res.data;\r\n      });\r\n    },\r\n    //获取物流数据\r\n    getLogisticsList() {\r\n      console.log('getLogisticsList---')\r\n      this.request(this.api.warehouse.warehouseBase_logistics_list , {isValid:true}).then(res => {\r\n        console.log(res);\r\n        this.logisticsListData = res.data;\r\n      });\r\n    },\r\n    //得到供应商编码\r\n    selectSupplierData(val){\r\n      if(this.signData.channelOrderGoodsVOList && this.signData.channelOrderGoodsVOList.length>0){\r\n        this.$confirm(\"确认切换吗,切换后需重新选择商品\", \"提示\", {\r\n          confirmButtonText: \"确定\",\r\n          cancelButtonText: \"取消\",\r\n          type: \"warning\"\r\n        }).then(()=>{\r\n          this.signData.channelOrderGoodsVOList=[]\r\n          localStorage.removeItem(\"localTableData\");\r\n          this.signData.returnAmount = this.signData.amount = '';\r\n          localStorage.removeItem(\"allShopPrice\")\r\n          this.getSupplierCode(val)\r\n        }).catch(actions=>{\r\n          this.signData.supplier=this.tmpSupplier\r\n          this.getSupplierCode(this.signData.supplier);\r\n        })\r\n      }else{\r\n        this.getSupplierCode(val)\r\n      }\r\n\r\n    },\r\n    //得到供应商code码\r\n    getSupplierCode(val){\r\n      console.log(val)\r\n      this.supplierSelect=false\r\n      var supplierCode = this.optionData.find(item => item.name == val).code;\r\n      this.signData.supplierCode = supplierCode;\r\n    },\r\n    //收货仓库\r\n    selectwarehouseCodeChange(val) {\r\n      if(this.signData.channelOrderGoodsVOList && this.signData.channelOrderGoodsVOList.length>0){\r\n        this.$confirm(\"确认切换吗,切换后需重新选择商品\", \"提示\", {\r\n          confirmButtonText: \"确定\",\r\n          cancelButtonText: \"取消\",\r\n          type: \"warning\"\r\n        }).then(()=>{\r\n          this.signData.channelOrderGoodsVOList=[]\r\n          localStorage.removeItem(\"localTableData\");\r\n          this.signData.returnAmount = this.signData.amount = '';\r\n          localStorage.removeItem(\"allShopPrice\")\r\n          this.getWarehouseIdAndCode(val)\r\n        }).catch(actions=>{\r\n          this.signData.warehouse=this.tmpWarehouse\r\n          this.getWarehouseIdAndCode(this.signData.tmpWarehouse);\r\n        })\r\n      }else{\r\n        this.getWarehouseIdAndCode(val)\r\n      }\r\n\r\n    },\r\n    //得到仓库编码和id\r\n    getWarehouseIdAndCode(val) {\r\n      this.warehouseSelect=false\r\n      var code = this.WarehouseCodeData.find(item => item.warehouseName == val).warehouseCode;\r\n      this.signData.warehouseCode = code;\r\n    },\r\n    //选择商品的点击事件\r\n    selectShopClickEvent() {\r\n      if(this.signData.warehouse && this.signData.supplier){\r\n        this.supplierSelect=false\r\n        this.warehouseSelect=false\r\n        this.$router.push({\r\n          path:'/OS/business/purchaseReturn/purchaseReturn_shop',\r\n          query: {\r\n            ownerId:this.signData.goodsOwner,\r\n            organizationName: this.signData.organization,\r\n            warehouseId: this.signData.warehouseCode,\r\n            warehouseName: this.signData.warehouse\r\n          }\r\n        })\r\n        //存储填写的信息\r\n        localStorage.setItem(\"shopMsgData\", JSON.stringify(this.signData));\r\n        localStorage.setItem(\"localTableData\",JSON.stringify(this.signData.channelOrderGoodsVOList));\r\n      }else{\r\n        if(this.signData.warehouse){\r\n          this.warehouseSelect=false\r\n        }else{\r\n          this.warehouseSelect=true\r\n        }\r\n        if(this.signData.supplier){\r\n          this.supplierSelect=false\r\n        }else{\r\n          this.supplierSelect=true\r\n        }\r\n      }\r\n    },\r\n    //监听退货单价的变化\r\n    refundAmountChange(val){\r\n      console.log(val)\r\n      var amount = 0;\r\n      this.signData.channelOrderGoodsVOList.forEach(item => {\r\n        amount += item.refundAmount * item.returnQuantity;\r\n      });\r\n      this.signData.amount=amount.toFixed(2)\r\n      if(this.signData.breakageAmount){\r\n          this.signData.returnAmount =parseFloat(amount-Number(this.signData.breakageAmount)).toFixed(2)\r\n        }else{\r\n          this.signData.returnAmount = parseFloat(amount).toFixed(2);\r\n        }\r\n      // this.signData.returnAmount = amount.toFixed(2)\r\n    },\r\n    //优惠金额\r\n    priceInputChangeEvent(val) {\r\n      console.log(this.signData.breakageAmount);\r\n      var breakageAmount=val.target.value.match(/^\\d*(\\.?\\d{0,2})/g)\r\n      this.signData.breakageAmount=breakageAmount[0]\r\n    },\r\n    //监听退货数量的变化\r\n    returnQuantityChange(val) {\r\n      console.log(val)\r\n      var amount = 0;\r\n      this.signData.channelOrderGoodsVOList.forEach(item => {\r\n        amount += item.refundAmount * item.returnQuantity;\r\n      });\r\n      this.signData.amount=amount.toFixed(2)\r\n       if(this.signData.breakageAmount){\r\n          this.signData.returnAmount =parseFloat(amount-Number(this.signData.breakageAmount)).toFixed(2)\r\n        }else{\r\n          this.signData.returnAmount = parseFloat(amount).toFixed(2);\r\n        }\r\n      // this.signData.returnAmount = amount.toFixed(2)\r\n    },\r\n    //确认btn的点击事件\r\n    primaryBtnClick() {\r\n      var self=this\r\n      this.$refs.formData.validate(valid => {\r\n        if (valid) {\r\n          console.log(\"dasdasd\");\r\n          let channelOrderGoodsVOList = self.signData.channelOrderGoodsVOList.filter(item => {\r\n            return item.returnQuantity != 0;\r\n          });\r\n          if(channelOrderGoodsVOList.length==0){\r\n            this.$message.error('退货商品数量不能全部为0');\r\n            return\r\n          }\r\n          this.signData.channelOrderGoodsVOList=channelOrderGoodsVOList\r\n          this.request(\r\n            this.api.order.channelRetundOrder_insert,\r\n            this.signData\r\n          ).then(data => {\r\n            console.log(\"270===========\");\r\n            //重置\r\n             if (data && data.length) {\r\n              let html = \"\";\r\n              data.forEach(errItem => {\r\n                for (let i = 0; i <  this.signData.channelOrderGoodsVOList.length; i++) {\r\n                  if ( this.signData.channelOrderGoodsVOList[i].code == errItem.code) {\r\n                    if (errItem.qty == 0) {\r\n                      this.signData.channelOrderGoodsVOList.splice(i, 1);\r\n                      html += \"<p>\" + errItem.code + \"：可用库存为0，已删除该商品；</p>\";\r\n                    } else {\r\n                      html += \"<p>\" + errItem.code + \"：可用库存不足，已更新为最大值\" + errItem.qty + \"；</p>\";\r\n                      this.signData.channelOrderGoodsVOList[i].availableQuantity = errItem.qty;\r\n                      // this.signData.channelOrderGoodsVOList[i].num = errItem.qty;\r\n                    }\r\n                    break;\r\n                  }\r\n                }\r\n              });\r\n              this.$notify({\r\n                title: \"提示\",\r\n                duration: 0,\r\n                dangerouslyUseHTMLString: true,\r\n                message: html\r\n              });\r\n            } else {\r\n              this.$notify.success({ title: \"成功\", message: \"新增成功\" });  \r\n              //重置\r\n              localStorage.removeItem(\"localTableData\");\r\n              this.$refs.formData.resetFields();\r\n              this.signData.channelOrderGoodsVOList = [];\r\n              this.$router.go(-1)\r\n            }    \r\n          });\r\n        } else {\r\n          console.log(\"error submit!!\");\r\n          return false;\r\n        }\r\n      });\r\n    },\r\n    //取消btn的点击事件\r\n    plainBtnClick() {\r\n      this.$router.go(-1);\r\n    },\r\n    //每页条数改变时\r\n    handleSizeChange(page) {\r\n      this.signData.pageSize = page;\r\n    },\r\n    //当前页改变时\r\n    handleCurrentChange(page) {\r\n      this.signData.pageIndex = page;\r\n    },\r\n    //选择Btn的点击事件\r\n    selectBtnClick(row) {\r\n      console.log(row);\r\n    },\r\n    //搜索\r\n    gridFormDataSearch() {\r\n      console.log(this.gridTableData.searchKey)\r\n      console.log(this.gridTableData.channelCodes)\r\n    },\r\n    //重置\r\n    gridFormDataResetFilters(gridFormData) {\r\n      this.$refs[gridFormData].resetFields();\r\n    }\r\n  }\r\n};\r\n</script>\r\n\r\n<style lang=\"less\" scoped>\r\n.disableSelect /deep/ .el-input .el-input__inner{\r\n  border: 1px solid red;\r\n}\r\n.input-div {\r\n  width: 100%;\r\n  display: flex;\r\n  flex-direction: row;\r\n}\r\n.content {\r\n  background-color: #fff;\r\n  padding: 20px;\r\n  .form_div {\r\n    margin-top: 20px;\r\n  }\r\n  .order_div {\r\n    position: relative;\r\n    line-height: 15px;\r\n    .select_order_label {\r\n      display: inline-block;\r\n      width: 35px;\r\n      text-align: center;\r\n      position: absolute;\r\n      right: -40px;\r\n      top: 0;\r\n      color: #409eff;\r\n    }\r\n  }\r\n  .tag_div {\r\n    display: flex;\r\n    align-items: center;\r\n  }\r\n  .table_msg {\r\n    margin-top: 10px;\r\n    .select_shop_title {\r\n      margin-left: 40px;\r\n      background-color: #409eff;\r\n      padding: 8px 10px;\r\n      color: #fff;\r\n      border-radius: 5px;\r\n    }\r\n  }\r\n  .table_div {\r\n    margin-top: 30px;\r\n  }\r\n  .money-div {\r\n    background-color: #fff;\r\n    width: 100%;\r\n    text-align: right;\r\n    padding-right: 30px;\r\n    margin-top: 30px;\r\n    .input-price {\r\n      display: inline-block;\r\n      padding: 10px;\r\n      width: 100px;\r\n      border-radius: 5px;\r\n    }\r\n    .money-content {\r\n      margin: 10px 0;\r\n    }\r\n  }\r\n  .remarks-textarea {\r\n    margin-top: 20px;\r\n    .textarea {\r\n      display: inline-block;\r\n      width: 300px;\r\n    }\r\n  }\r\n  .btn-div {\r\n    margin-left: 70px;\r\n    margin-top: 30px;\r\n  }\r\n}\r\n</style>\r\n\r\n"],"sourceRoot":"src/views/orders/business/purchaseReturn"}]}
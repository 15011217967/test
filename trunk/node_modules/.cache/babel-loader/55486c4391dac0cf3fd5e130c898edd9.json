{"remainingRequest":"C:\\Users\\EDZ\\Desktop\\研发项目\\vue-project\\trunk\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\EDZ\\Desktop\\研发项目\\vue-project\\trunk\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!C:\\Users\\EDZ\\Desktop\\研发项目\\vue-project\\trunk\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\EDZ\\Desktop\\研发项目\\vue-project\\trunk\\src\\views\\product\\version\\upgrade_details.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\EDZ\\Desktop\\研发项目\\vue-project\\trunk\\src\\views\\product\\version\\upgrade_details.vue","mtime":1572415123975},{"path":"C:\\Users\\EDZ\\Desktop\\研发项目\\vue-project\\trunk\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1558492728398},{"path":"C:\\Users\\EDZ\\Desktop\\研发项目\\vue-project\\trunk\\node_modules\\babel-loader\\lib\\index.js","mtime":1558492720858},{"path":"C:\\Users\\EDZ\\Desktop\\研发项目\\vue-project\\trunk\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1558492728398},{"path":"C:\\Users\\EDZ\\Desktop\\研发项目\\vue-project\\trunk\\node_modules\\vue-loader\\lib\\index.js","mtime":1558492728890}],"contextDependencies":[],"result":["import \"core-js/modules/es6.array.find\";\nimport \"core-js/modules/es6.regexp.to-string\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport { validatDwnloadUrl } from \"@/utils/validate\";\nexport default {\n  data: function data() {\n    return {\n      filtersData: {\n        description: \"\",\n        version: \"\",\n        versionId: \"\",\n        type: \"\",\n        forcedUpgrade: null,\n        downloadUrl: '',\n        upgradeScope: ''\n      },\n      typeListData: [{\n        name: 'Android'\n      }, {\n        name: 'iOS'\n      }],\n      forcedUpgradeOpts: [{\n        name: '强制',\n        type: true\n      }, {\n        name: '可选',\n        type: false\n      }],\n      upgradeScopeOpts: [{\n        name: '全部',\n        type: 'all'\n      }],\n      versionListData: [],\n      showDisabled: false,\n      editDisabled: false,\n      _type: \"\",\n      _id: \"\",\n      rules: {\n        //规则验证\n        type: [{\n          required: true,\n          message: \"请选择操作系统\",\n          trigger: \"change\"\n        }],\n        version: [{\n          required: true,\n          message: \"请选择版本号\",\n          trigger: \"change\"\n        }],\n        forcedUpgrade: [{\n          required: true,\n          message: \"请选择升级形式\",\n          trigger: \"change\"\n        }],\n        upgradeScope: [{\n          required: true,\n          message: \"请选择升级范围\",\n          trigger: \"change\"\n        }],\n        downloadUrl: [{\n          required: true,\n          message: \"请输入升级地址\",\n          trigger: \"blur\"\n        }, {\n          validator: validatDwnloadUrl,\n          trigger: \"blur\"\n        }]\n      } //分类使用\n\n    };\n  },\n  created: function created() {\n    this.init();\n    this.getQueryparams();\n  },\n  methods: {\n    init: function init() {\n      this.filtersData = {\n        description: \"\",\n        version: \"\",\n        versionId: \"\",\n        type: \"\",\n        forcedUpgrade: null,\n        downloadUrl: '',\n        upgradeScope: ''\n      };\n    },\n    //获取上页面参数\n    getQueryparams: function getQueryparams() {\n      this._type = this.$route.query.type;\n      this._id = this.$route.query.id;\n      var itemStatus = this._type;\n\n      switch (itemStatus.toString()) {\n        case \"add\":\n          //新增\n          this.editDisabled = false;\n          this.showDisabled = false;\n          break;\n\n        case \"edit\":\n          //修改\n          this.editDisabled = true;\n          this.showDisabled = false;\n          this.getEchoDisplayData();\n          break;\n\n        case \"show\":\n          //查看\n          this.editDisabled = true;\n          this.showDisabled = true;\n          this.getEchoDisplayData();\n          break;\n      }\n    },\n    //切换处理\n    handleTypeChange: function handleTypeChange(item) {\n      this.filtersData.version = '';\n      this.filtersData.versionId = '';\n      this.getVersionList(item);\n    },\n    getVersionList: function getVersionList(item) {\n      var _this = this;\n\n      this.request(this.api.version.applicationVersion_list, {\n        type: item\n      }).then(function (data) {\n        var _data = data.data;\n        console.log(_data);\n        _this.versionListData = _data;\n      });\n    },\n    //版本号发生改变时 获取版本号ID 并赋值\n    handleVersionGet: function handleVersionGet(e) {\n      var obj = this.versionListData.find(function (item) {\n        return item.version == e;\n      });\n      this.filtersData.versionId = obj.id;\n    },\n    //提交\n    submitForm: function submitForm(formName) {\n      var _this2 = this;\n\n      this.$refs[formName].validate(function (valid) {\n        if (valid) {\n          _this2.request(_this2.api.version.applicationVersionControl_save, _this2.filtersData).then(function (res) {\n            _this2.$message.success(\"保存成功\");\n\n            setTimeout(function () {\n              _this2.routerback();\n            }, 500);\n          });\n        } else {\n          return false;\n        }\n      });\n    },\n    //回显\n    getEchoDisplayData: function getEchoDisplayData() {\n      var _this3 = this;\n\n      this.request(this.api.version.applicationVersionControl_get, {\n        id: this._id\n      }).then(function (res) {\n        _this3.filtersData = res;\n\n        _this3.getVersionList(res.type);\n      });\n    },\n    //后退\n    routerback: function routerback() {\n      this.$router.go(-1);\n    }\n  }\n};",{"version":3,"sources":["upgrade_details.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\r\n  <div>\r\n    <el-form :rules=\"rules\" label-width=\"110px\" :model=\"filtersData\" size=\"small\" ref=\"filtersForm\">\r\n      <div class=\"tlogy-item\">\r\n        <el-form-item prop=\"type\" label=\"操作系统：\">\r\n          <el-select\r\n            placeholder=\"请选择\"\r\n            class=\"input-w-2\"\r\n            :disabled=\"showDisabled\"\r\n            :value=\"filtersData.type\"\r\n            v-model=\"filtersData.type\"\r\n            @change=\"handleTypeChange\"\r\n          >\r\n            <el-option\r\n              v-for=\"item in typeListData\"\r\n              :key=\"item.name\"\r\n              :label=\"item.name\"\r\n              :value=\"item.name\"\r\n            ></el-option>\r\n          </el-select>\r\n        </el-form-item>\r\n         <el-form-item prop=\"version\" label=\"升级版本：\">\r\n          <el-select\r\n            @change=\"handleVersionGet\"\r\n            :placeholder=\"!!filtersData.type ? '请选择':'请先选择操作系统'\"\r\n            class=\"input-w-2\"\r\n            :disabled=\"showDisabled || !filtersData.type\"\r\n            :value=\"filtersData.version\"\r\n            v-model=\"filtersData.version\"\r\n          >\r\n            <el-option\r\n              v-for=\"item in versionListData\"\r\n              :key=\"item.version\"\r\n              :label=\"item.version\"\r\n              :value=\"item.version\"\r\n            ></el-option>\r\n          </el-select>\r\n        </el-form-item>\r\n         <el-form-item prop=\"forcedUpgrade\" label=\"升级形式：\">\r\n          <el-select\r\n            placeholder=\"请选择\"\r\n            class=\"input-w-2\"\r\n            :disabled=\"showDisabled\"\r\n            :value=\"filtersData.forcedUpgrade\"\r\n            v-model=\"filtersData.forcedUpgrade\"\r\n          >\r\n            <el-option\r\n              v-for=\"item in forcedUpgradeOpts\"\r\n              :key=\"item.type\"\r\n              :label=\"item.name\"\r\n              :value=\"item.type\"\r\n            ></el-option>\r\n          </el-select>\r\n        </el-form-item>\r\n         <el-form-item prop=\"upgradeScope\" label=\"升级范围：\">\r\n          <el-select\r\n            placeholder=\"请选择\"\r\n            class=\"input-w-2\"\r\n            :disabled=\"showDisabled\"\r\n            :value=\"filtersData.upgradeScope\"\r\n            v-model=\"filtersData.upgradeScope\"\r\n          >\r\n            <el-option\r\n              v-for=\"item in upgradeScopeOpts\"\r\n              :key=\"item.type\"\r\n              :label=\"item.name\"\r\n              :value=\"item.type\"\r\n            ></el-option>\r\n          </el-select>\r\n        </el-form-item>\r\n        <el-form-item prop=\"downloadUrl\" label=\"升级URL：\">\r\n          <el-input\r\n            :disabled=\"showDisabled\"\r\n            v-model=\"filtersData.downloadUrl\"\r\n            class=\"input-w-2\"\r\n            placeholder=\"http://或https://\"\r\n          ></el-input>\r\n        </el-form-item>\r\n        <el-form-item prop=\"description\" label=\"升级提示：\">\r\n          <el-input\r\n            type=\"textarea\"\r\n            class=\"input-w-2\"\r\n            autosize\r\n            :disabled=\"showDisabled\"\r\n            placeholder=\"请输入内容\"\r\n            v-model=\"filtersData.description\"\r\n          ></el-input>\r\n        </el-form-item>\r\n         <div class=\"item-footer\">\r\n          <el-button\r\n            v-if=\"_type == 'add'\"\r\n            size=\"small\"\r\n            @click=\"submitForm('filtersForm')\"\r\n            type=\"primary\"\r\n          >确定</el-button>\r\n          <el-button\r\n            v-else-if=\"_type == 'edit'\"\r\n            size=\"small\"\r\n            @click=\"submitForm('filtersForm')\"\r\n            type=\"primary\"\r\n          >修改</el-button>\r\n          <el-button size=\"small\" @click=\"routerback('filtersForm')\">取消</el-button>\r\n        </div>\r\n      </div>\r\n    </el-form>\r\n  </div>\r\n</template>\r\n<script>\r\nimport { validatDwnloadUrl } from \"@/utils/validate\";\r\nexport default {\r\n  data() {\r\n    return {\r\n      filtersData: {\r\n        description: \"\",\r\n        version: \"\",\r\n        versionId:\"\",\r\n        type:\"\",\r\n        forcedUpgrade:null,\r\n        downloadUrl:'',\r\n        upgradeScope:'',\r\n      },\r\n      typeListData:[{name:'Android'},{name:'iOS'}],\r\n      forcedUpgradeOpts:[{name:'强制',type:true},{name:'可选',type:false}],\r\n      upgradeScopeOpts:[{name:'全部',type:'all'}],\r\n      versionListData:[],\r\n      showDisabled: false,\r\n      editDisabled: false,\r\n      _type: \"\",\r\n      _id: \"\",\r\n      rules: {\r\n        //规则验证\r\n        type: [\r\n          { required: true, message: \"请选择操作系统\", trigger: \"change\" }\r\n        ],\r\n        version: [{ required: true, message: \"请选择版本号\", trigger: \"change\" }],\r\n        forcedUpgrade: [\r\n          { required: true, message: \"请选择升级形式\", trigger: \"change\" }\r\n        ],\r\n         upgradeScope: [\r\n          { required: true, message: \"请选择升级范围\", trigger: \"change\" }\r\n        ],\r\n        downloadUrl: [\r\n          { required: true, message: \"请输入升级地址\", trigger: \"blur\" },\r\n           { validator: validatDwnloadUrl, trigger: \"blur\" }\r\n        ],\r\n      },\r\n      //分类使用\r\n    };\r\n  },\r\n  created() {\r\n    this.init();\r\n    this.getQueryparams();\r\n  },\r\n  methods: {\r\n    init(){\r\n      this.filtersData= {\r\n        description: \"\",\r\n        version: \"\",\r\n        versionId:\"\",\r\n        type:\"\",\r\n        forcedUpgrade:null,\r\n        downloadUrl:'',\r\n        upgradeScope:'',\r\n      };\r\n    },\r\n    //获取上页面参数\r\n    getQueryparams() {\r\n      this._type = this.$route.query.type;\r\n      this._id = this.$route.query.id;\r\n      let itemStatus = this._type;\r\n      switch (itemStatus.toString()) {\r\n        case \"add\": //新增\r\n          this.editDisabled = false;\r\n          this.showDisabled = false;\r\n          break;\r\n        case \"edit\": //修改\r\n          this.editDisabled = true;\r\n          this.showDisabled = false;\r\n          this.getEchoDisplayData();\r\n          break;\r\n        case \"show\": //查看\r\n          this.editDisabled = true;\r\n          this.showDisabled = true;\r\n          this.getEchoDisplayData();\r\n          break;\r\n      }\r\n    },\r\n    //切换处理\r\n    handleTypeChange(item){\r\n      this.filtersData.version='';\r\n      this.filtersData.versionId='';\r\n      this.getVersionList(item);\r\n    },\r\n    getVersionList(item){\r\n      this.request(this.api.version.applicationVersion_list, {type:item}).then(data => {\r\n        let _data = data.data;\r\n        console.log(_data);\r\n        this.versionListData= _data;\r\n      });\r\n    },\r\n    //版本号发生改变时 获取版本号ID 并赋值\r\n    handleVersionGet(e){\r\n      let obj =this.versionListData.find(item => item.version == e );\r\n      this.filtersData.versionId=obj.id;\r\n    },\r\n    //提交\r\n    submitForm(formName) {\r\n      this.$refs[formName].validate(valid => {\r\n        if (valid) {\r\n          this.request(\r\n            this.api.version.applicationVersionControl_save,\r\n            this.filtersData\r\n          ).then(res => {\r\n            this.$message.success(\"保存成功\");\r\n            setTimeout(() => {\r\n              this.routerback();\r\n            }, 500);\r\n          });\r\n        } else {\r\n          return false;\r\n        }\r\n      });\r\n    },\r\n\r\n    //回显\r\n    getEchoDisplayData() {\r\n      this.request(this.api.version.applicationVersionControl_get, {\r\n        id: this._id\r\n      }).then(res => {\r\n          this.filtersData=res;\r\n          this.getVersionList(res.type)\r\n      });\r\n    },\r\n    //后退\r\n    routerback() {\r\n      this.$router.go(-1);\r\n    }\r\n  }\r\n\r\n};\r\n</script>\r\n<style lang=\"less\" scoped>\r\n.tlogy-item {\r\n  background-color: #ffffff;\r\n  margin: 10px;\r\n  padding: 10px;\r\n}\r\n\r\n</style>\r\n"],"sourceRoot":"src/views/product/version"}]}
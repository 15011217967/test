{"remainingRequest":"C:\\Users\\EDZ\\Desktop\\研发项目\\vue-project\\trunk\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\EDZ\\Desktop\\研发项目\\vue-project\\trunk\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!C:\\Users\\EDZ\\Desktop\\研发项目\\vue-project\\trunk\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\EDZ\\Desktop\\研发项目\\vue-project\\trunk\\src\\views\\collocation\\components\\GoodsTable.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\EDZ\\Desktop\\研发项目\\vue-project\\trunk\\src\\views\\collocation\\components\\GoodsTable.vue","mtime":1573089144333},{"path":"C:\\Users\\EDZ\\Desktop\\研发项目\\vue-project\\trunk\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1558492728398},{"path":"C:\\Users\\EDZ\\Desktop\\研发项目\\vue-project\\trunk\\node_modules\\babel-loader\\lib\\index.js","mtime":1558492720858},{"path":"C:\\Users\\EDZ\\Desktop\\研发项目\\vue-project\\trunk\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1558492728398},{"path":"C:\\Users\\EDZ\\Desktop\\研发项目\\vue-project\\trunk\\node_modules\\vue-loader\\lib\\index.js","mtime":1558492728890}],"contextDependencies":[],"result":["import \"core-js/modules/es6.regexp.replace\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport ImagePopover from \"@/views/collocation/components/ImagePopover\";\nimport { numberPrice } from \"@/utils/validate\";\nexport default {\n  name: '',\n  props: {\n    // 是否为0是删除及是否需要计算总价\n    isDel: {\n      type: Boolean,\n      default: false\n    },\n    // 表格数据\n    tableData: {\n      type: Array\n    }\n  },\n  // 数据\n  data: function data() {\n    return {\n      showTableData: [],\n      formData: {\n        pageIndex: 1,\n        pageSize: 10\n      }\n    };\n  },\n  // 组件\n  components: {\n    ImagePopover: ImagePopover\n  },\n  // 初始化数据\n  mounted: function mounted() {\n    var _this = this;\n\n    this.$nextTick(function () {\n      _this.getShowTableData();\n    });\n  },\n  // 方法\n  methods: {\n    // 获取显示数据\n    getShowTableData: function getShowTableData() {\n      if (this.isDel) {\n        if (this.tableData.length <= 10) {\n          this.showTableData = this.tableData;\n        }\n\n        if (this.tableData.length > 10) {\n          this.showTableData = this.tableData.slice((this.formData.pageIndex - 1) * this.formData.pageSize, this.formData.pageIndex * this.formData.pageSize);\n        }\n      } else {\n        this.showTableData = this.tableData;\n      }\n    },\n    // 数量点击改变\n    handleChange: function handleChange(scope) {\n      var _this2 = this;\n\n      // 重新计算总价\n      if (this.isDel) {\n        this.$nextTick(function () {\n          _this2.$parent.checkedTotalPrice();\n        });\n\n        if (scope.row.quantity == 0) {\n          this.$confirm('配货量为0时，将删除该商品', '提示', {\n            confirmButtonText: '确认',\n            cancelButtonText: '取消',\n            showClose: false\n          }).then(function () {\n            _this2.tableData.splice(scope.$index + (_this2.formData.pageIndex - 1) * _this2.formData.pageSize, 1);\n\n            if (_this2.showTableData.length === 1 && _this2.formData.pageIndex > 1) {\n              _this2.formData.pageIndex = _this2.formData.pageIndex - 1;\n            }\n\n            _this2.getShowTableData();\n          }).catch(function () {\n            scope.row.quantity = 1;\n\n            _this2.$nextTick(function () {\n              _this2.$parent.checkedTotalPrice();\n            });\n          });\n        }\n      }\n    },\n    // 数量输入改变\n    handleInput: function handleInput($event, scope) {\n      var _this3 = this;\n\n      this.$nextTick(function () {\n        var val = $event.target.value;\n        scope.row.quantity = val.replace(/[^\\d.]/g, '');\n\n        _this3.handleChange(scope);\n      });\n    },\n    // 单价改变\n    purchasePriceChange: function purchasePriceChange($event, row) {\n      var _this4 = this;\n\n      var val = $event.target.value;\n\n      if (!val) {\n        $event.target.value = 0;\n        row.purchasePrice = $event.target.value;\n        return;\n      }\n\n      numberPrice($event);\n      row.purchasePrice = $event.target.value;\n      this.$nextTick(function () {\n        _this4.$parent.checkedTotalPrice();\n      });\n    },\n    // 表格更改条数\n    handleSizeChange: function handleSizeChange(val) {\n      this.formData.pageSize = val;\n      this.formData.pageIndex = 1;\n      this.getShowTableData();\n    },\n    // 表格更改页数\n    handleCurrentChange: function handleCurrentChange(val) {\n      this.formData.pageIndex = val;\n      this.getShowTableData();\n    }\n  },\n  // 计算属性\n  computed: {},\n  // 监听数据变化\n  watch: {}\n};",{"version":3,"sources":["GoodsTable.vue"],"names":[],"mappings":"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","sourcesContent":["<style lang=\"less\" scoped>\r\n  .goods-table{\r\n    .pagination{margin-top: 20px;}\r\n  }\r\n</style>\r\n<template>\r\n  <div class=\"goods-table\">\r\n    <el-table :data=\"showTableData\" style=\"width: 100%\">\r\n      <el-table-column prop=\"productCode\" label=\"商品款号\" :show-overflow-tooltip=\"true\"></el-table-column>\r\n      <el-table-column prop=\"code\" label=\"商品货号\" :show-overflow-tooltip=\"true\"></el-table-column>\r\n      <el-table-column prop=\"name\" label=\"名称\" :show-overflow-tooltip=\"true\"></el-table-column>\r\n      <el-table-column label=\"商品图片\">\r\n        <template slot-scope=\"scope\">\r\n          <image-popover :img-src=\"scope.row.image\"></image-popover>\r\n        </template>\r\n      </el-table-column>\r\n      <el-table-column prop=\"color\" label=\"颜色\"></el-table-column>\r\n      <el-table-column prop=\"size\" label=\"尺码\"></el-table-column>\r\n      <el-table-column prop=\"brandName\" label=\"品牌\" :show-overflow-tooltip=\"true\"></el-table-column>\r\n      <el-table-column prop=\"retailPrice\" label=\"吊牌价\"></el-table-column>\r\n      <el-table-column label=\"配货单价\" v-if=\"isDel\" width=\"100\">\r\n        <template slot-scope=\"scope\">\r\n          <el-input v-model=\"scope.row.purchasePrice\" placeholder=\"请输入\" size=\"mini\" @input.native=\"purchasePriceChange($event, scope.row)\"></el-input>\r\n        </template>\r\n      </el-table-column>\r\n      <el-table-column prop=\"availableQuantity\" label=\"库存量\"></el-table-column>\r\n      <el-table-column label=\"数量\" width=\"150\">\r\n        <template slot-scope=\"scope\">\r\n          <el-input-number v-model=\"scope.row.quantity\" @input.native=\"handleInput($event, scope)\" :min=\"0\" :max=\"scope.row.availableQuantity\" label=\"选择的数量\" size=\"mini\" :key=\"scope.row.id\" @change=\"handleChange(scope)\"></el-input-number>\r\n        </template>\r\n      </el-table-column>\r\n    </el-table>\r\n    <div class=\"pagination\" v-if=\"isDel && tableData.length > 0\">\r\n      <el-pagination @size-change=\"handleSizeChange\" @current-change=\"handleCurrentChange\" :page-sizes=\"[10, 20, 30, 40]\" layout=\"total, sizes, prev, pager, next, jumper\" :total=\"tableData.length\" :page-size=\"formData.pageSize\" :current-page=\"formData.pageIndex\">\r\n      </el-pagination>\r\n    </div>\r\n  </div>\r\n</template>\r\n<script>\r\n  import ImagePopover from \"@/views/collocation/components/ImagePopover\";\r\n  import { numberPrice } from \"@/utils/validate\";\r\n  export default {\r\n    name: '',\r\n    props: {\r\n      // 是否为0是删除及是否需要计算总价\r\n      isDel: {\r\n        type: Boolean,\r\n        default: false\r\n      },\r\n      // 表格数据\r\n      tableData: {\r\n        type: Array\r\n      }\r\n    },\r\n    // 数据\r\n    data() {\r\n      return {\r\n        showTableData: [],\r\n        formData: {\r\n          pageIndex: 1,\r\n          pageSize: 10\r\n        }\r\n\r\n      }\r\n    },\r\n    // 组件\r\n    components: {\r\n      ImagePopover\r\n    },\r\n    // 初始化数据\r\n    mounted() {\r\n      this.$nextTick(() => {\r\n        this.getShowTableData();\r\n      })\r\n    },\r\n    // 方法\r\n    methods: {\r\n      // 获取显示数据\r\n      getShowTableData(){\r\n        if(this.isDel){\r\n          if(this.tableData.length <= 10){\r\n            this.showTableData = this.tableData\r\n          }\r\n          if(this.tableData.length > 10){\r\n            this.showTableData = this.tableData.slice((this.formData.pageIndex - 1) * this.formData.pageSize, this.formData.pageIndex * this.formData.pageSize )\r\n          }\r\n        }else {\r\n          this.showTableData = this.tableData\r\n        }\r\n      },\r\n      // 数量点击改变\r\n      handleChange(scope){\r\n        // 重新计算总价\r\n        if(this.isDel){\r\n          this.$nextTick(()=>{\r\n            this.$parent.checkedTotalPrice();\r\n          });\r\n          if(scope.row.quantity == 0){\r\n            this.$confirm('配货量为0时，将删除该商品', '提示', {\r\n              confirmButtonText: '确认',\r\n              cancelButtonText: '取消',\r\n              showClose:false\r\n            }).then(() => {\r\n              this.tableData.splice(scope.$index + (this.formData.pageIndex - 1) * this.formData.pageSize, 1);\r\n              if(this.showTableData.length === 1 && this.formData.pageIndex > 1){\r\n                this.formData.pageIndex = this.formData.pageIndex -1;\r\n              }\r\n              this.getShowTableData();\r\n            }).catch(() => {\r\n              scope.row.quantity = 1;\r\n              this.$nextTick(()=>{\r\n                this.$parent.checkedTotalPrice();\r\n              })\r\n            });\r\n          }\r\n        }\r\n      },\r\n      // 数量输入改变\r\n      handleInput($event, scope){\r\n        this.$nextTick(()=>{\r\n          let val = $event.target.value;\r\n          scope.row.quantity = val.replace(/[^\\d.]/g,'');\r\n          this.handleChange(scope)\r\n        })\r\n      },\r\n      // 单价改变\r\n      purchasePriceChange($event, row){\r\n        let val = $event.target.value;\r\n        if(!val) {\r\n          $event.target.value = 0;\r\n          row.purchasePrice = $event.target.value;\r\n          return\r\n        }\r\n        numberPrice($event);\r\n        row.purchasePrice = $event.target.value;\r\n        this.$nextTick(()=>{\r\n          this.$parent.checkedTotalPrice();\r\n        })\r\n      },\r\n      // 表格更改条数\r\n      handleSizeChange(val){\r\n        this.formData.pageSize = val;\r\n        this.formData.pageIndex = 1;\r\n        this.getShowTableData();\r\n      },\r\n      // 表格更改页数\r\n      handleCurrentChange(val){\r\n        this.formData.pageIndex=val;\r\n        this.getShowTableData();\r\n      }\r\n    },\r\n    // 计算属性\r\n    computed: {},\r\n    // 监听数据变化\r\n    watch: {}\r\n  }\r\n</script>\r\n"],"sourceRoot":"src/views/collocation/components"}]}
{"remainingRequest":"C:\\Users\\EDZ\\Desktop\\研发项目\\vue-project\\trunk\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\EDZ\\Desktop\\研发项目\\vue-project\\trunk\\src\\store\\modules\\user.js","dependencies":[{"path":"C:\\Users\\EDZ\\Desktop\\研发项目\\vue-project\\trunk\\src\\store\\modules\\user.js","mtime":1572415123469},{"path":"C:\\Users\\EDZ\\Desktop\\研发项目\\vue-project\\trunk\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1558492728398},{"path":"C:\\Users\\EDZ\\Desktop\\研发项目\\vue-project\\trunk\\node_modules\\babel-loader\\lib\\index.js","mtime":1558492720858}],"contextDependencies":[],"result":["import \"regenerator-runtime/runtime\";\nimport _asyncToGenerator from \"C:\\\\Users\\\\EDZ\\\\Desktop\\\\\\u7814\\u53D1\\u9879\\u76EE\\\\vue-project\\\\trunk\\\\node_modules\\\\@babel\\\\runtime-corejs2/helpers/esm/asyncToGenerator\";\nimport _defineProperty from \"C:\\\\Users\\\\EDZ\\\\Desktop\\\\\\u7814\\u53D1\\u9879\\u76EE\\\\vue-project\\\\trunk\\\\node_modules\\\\@babel\\\\runtime-corejs2/helpers/esm/defineProperty\";\n\nvar _state, _mutations, _actions;\n\nimport { getToken, setToken, removeToken } from '@/utils/auth';\nimport * as types from '@/types/userConfig';\nimport * as api from '@/api/user';\nvar user = {\n  state: (_state = {}, _defineProperty(_state, types.STATE_Token, getToken()), _defineProperty(_state, types.STATE_Info, {}), _state),\n  getters: _defineProperty({}, types.GETTER_USERINFO, function (state) {\n    return state[types.STATE_Info];\n  }),\n  mutations: (_mutations = {}, _defineProperty(_mutations, types.FN_SET_TOKEN, function (state, token) {\n    setToken(token);\n    state[types.STATE_Token] = token;\n  }), _defineProperty(_mutations, types.FN_REMOVE_TOKEN, function (state) {\n    removeToken();\n    state[types.STATE_Token] = getToken();\n  }), _defineProperty(_mutations, types.FN_SET_USERINFO, function (state, data) {\n    state[types.STATE_Info] = data;\n  }), _mutations),\n  actions: (_actions = {}, _defineProperty(_actions, types.FN_GET_USERINFO, function () {\n    var _ref2 = _asyncToGenerator(\n    /*#__PURE__*/\n    regeneratorRuntime.mark(function _callee(_ref) {\n      var commit, state, info;\n      return regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              commit = _ref.commit, state = _ref.state;\n              _context.next = 3;\n              return this._vm.request(api.get_userinfo, {}, true);\n\n            case 3:\n              info = _context.sent;\n              commit(types.FN_SET_USERINFO, info);\n\n            case 5:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee, this);\n    }));\n\n    return function (_x) {\n      return _ref2.apply(this, arguments);\n    };\n  }()), _defineProperty(_actions, types.FN_LOGOUT, function (_ref3) {\n    var commit = _ref3.commit;\n    commit(types.FN_REMOVE_TOKEN);\n  }), _actions)\n};\nexport default user;",{"version":3,"sources":["C:\\Users\\EDZ\\Desktop\\研发项目\\vue-project\\trunk\\src\\store\\modules\\user.js"],"names":["getToken","setToken","removeToken","types","api","user","state","STATE_Token","STATE_Info","getters","GETTER_USERINFO","mutations","FN_SET_TOKEN","token","FN_REMOVE_TOKEN","FN_SET_USERINFO","data","actions","FN_GET_USERINFO","commit","_vm","request","get_userinfo","info","FN_LOGOUT"],"mappings":";;;;;;AAAA,SAASA,QAAT,EAAmBC,QAAnB,EAA6BC,WAA7B,QAAgD,cAAhD;AACA,OAAO,KAAKC,KAAZ,MAAuB,oBAAvB;AACA,OAAO,KAAKC,GAAZ,MAAqB,YAArB;AAEA,IAAMC,IAAI,GAAG;AACXC,EAAAA,KAAK,wCACFH,KAAK,CAACI,WADJ,EACkBP,QAAQ,EAD1B,2BAEFG,KAAK,CAACK,UAFJ,EAEiB,EAFjB,UADM;AAKXC,EAAAA,OAAO,sBACJN,KAAK,CAACO,eADF,YACmBJ,KADnB,EAC0B;AAC7B,WAAOA,KAAK,CAACH,KAAK,CAACK,UAAP,CAAZ;AACD,GAHI,CALI;AAUXG,EAAAA,SAAS,gDACNR,KAAK,CAACS,YADA,EACe,UAACN,KAAD,EAAQO,KAAR,EAAkB;AACtCZ,IAAAA,QAAQ,CAACY,KAAD,CAAR;AACAP,IAAAA,KAAK,CAACH,KAAK,CAACI,WAAP,CAAL,GAA2BM,KAA3B;AACD,GAJM,+BAKNV,KAAK,CAACW,eALA,EAKkB,UAACR,KAAD,EAAW;AAClCJ,IAAAA,WAAW;AACXI,IAAAA,KAAK,CAACH,KAAK,CAACI,WAAP,CAAL,GAA2BP,QAAQ,EAAnC;AACD,GARM,+BASNG,KAAK,CAACY,eATA,EASkB,UAACT,KAAD,EAAQU,IAAR,EAAiB;AACxCV,IAAAA,KAAK,CAACH,KAAK,CAACK,UAAP,CAAL,GAA0BQ,IAA1B;AACD,GAXM,cAVE;AAuBXC,EAAAA,OAAO,4CAEEd,KAAK,CAACe,eAFR;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAE2BC,cAAAA,MAF3B,QAE2BA,MAF3B,EAEmCb,KAFnC,QAEmCA,KAFnC;AAAA;AAAA,qBAGc,KAAKc,GAAL,CAASC,OAAT,CAAiBjB,GAAG,CAACkB,YAArB,EAAmC,EAAnC,EAAuC,IAAvC,CAHd;;AAAA;AAGCC,cAAAA,IAHD;AAIHJ,cAAAA,MAAM,CAAChB,KAAK,CAACY,eAAP,EAAwBQ,IAAxB,CAAN;;AAJG;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;AAAA,kCAMJpB,KAAK,CAACqB,SANF,mBAMyB;AAAA,QAAVL,MAAU,SAAVA,MAAU;AAC5BA,IAAAA,MAAM,CAAChB,KAAK,CAACW,eAAP,CAAN;AACD,GARI;AAvBI,CAAb;AAmCA,eAAeT,IAAf","sourcesContent":["import { getToken, setToken, removeToken } from '@/utils/auth'\r\nimport * as types from '@/types/userConfig'\r\nimport * as api from '@/api/user'\r\n\r\nconst user = {\r\n  state: {\r\n    [types.STATE_Token]: getToken(),\r\n    [types.STATE_Info]: {}\r\n  },\r\n  getters: {\r\n    [types.GETTER_USERINFO](state) {\r\n      return state[types.STATE_Info];\r\n    }\r\n  },\r\n  mutations: {\r\n    [types.FN_SET_TOKEN]: (state, token) => {\r\n      setToken(token);\r\n      state[types.STATE_Token] = token\r\n    },\r\n    [types.FN_REMOVE_TOKEN]: (state) => {\r\n      removeToken();\r\n      state[types.STATE_Token] = getToken();\r\n    },\r\n    [types.FN_SET_USERINFO]: (state, data) => {\r\n      state[types.STATE_Info] = data;\r\n    }\r\n  },\r\n  actions: {\r\n    // 登录\r\n    async [types.FN_GET_USERINFO]({ commit, state }) {\r\n      let info = await this._vm.request(api.get_userinfo, {}, true);\r\n      commit(types.FN_SET_USERINFO, info);\r\n    },\r\n    [types.FN_LOGOUT]({ commit }) {\r\n      commit(types.FN_REMOVE_TOKEN);\r\n    }\r\n  }\r\n}\r\n\r\nexport default user\r\n"]}]}
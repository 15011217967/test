{"remainingRequest":"C:\\Users\\EDZ\\Desktop\\研发项目\\vue-project\\trunk\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\EDZ\\Desktop\\研发项目\\vue-project\\trunk\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!C:\\Users\\EDZ\\Desktop\\研发项目\\vue-project\\trunk\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\EDZ\\Desktop\\研发项目\\vue-project\\trunk\\src\\views\\OS\\salesReturn\\ditchReturn\\ditchReturn_add.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\EDZ\\Desktop\\研发项目\\vue-project\\trunk\\src\\views\\OS\\salesReturn\\ditchReturn\\ditchReturn_add.vue","mtime":1585053690098},{"path":"C:\\Users\\EDZ\\Desktop\\研发项目\\vue-project\\trunk\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1558492728398},{"path":"C:\\Users\\EDZ\\Desktop\\研发项目\\vue-project\\trunk\\node_modules\\babel-loader\\lib\\index.js","mtime":1558492720858},{"path":"C:\\Users\\EDZ\\Desktop\\研发项目\\vue-project\\trunk\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1558492728398},{"path":"C:\\Users\\EDZ\\Desktop\\研发项目\\vue-project\\trunk\\node_modules\\vue-loader\\lib\\index.js","mtime":1558492728890}],"contextDependencies":[],"result":["import \"core-js/modules/es6.regexp.match\";\nimport \"core-js/modules/es6.array.find\";\nimport \"core-js/modules/es6.function.name\";\nimport \"regenerator-runtime/runtime\";\nimport _asyncToGenerator from \"C:\\\\Users\\\\EDZ\\\\Desktop\\\\\\u7814\\u53D1\\u9879\\u76EE\\\\vue-project\\\\trunk\\\\node_modules\\\\@babel\\\\runtime-corejs2/helpers/esm/asyncToGenerator\";\nimport \"core-js/modules/web.dom.iterable\";\nimport _defineProperty from \"C:\\\\Users\\\\EDZ\\\\Desktop\\\\\\u7814\\u53D1\\u9879\\u76EE\\\\vue-project\\\\trunk\\\\node_modules\\\\@babel\\\\runtime-corejs2/helpers/esm/defineProperty\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport codeSet from \"@/components/codeSet\";\nimport treeDept from \"@/components/treeDept\";\nexport default {\n  components: {\n    codeSet: codeSet,\n    treeDept: treeDept\n  },\n  data: function data() {\n    var _signData;\n\n    return {\n      signData: (_signData = {\n        //订单类型\n        orderType: '0102',\n        //退货备注\n        remarks: \"\",\n        //总金额\n        amount: '',\n        //网销店铺名称\n        ditchStoreName: '',\n        //网销店铺Id\n        storeId: '',\n        //货主\n        goodsOwner: '',\n        //折损金额金额\n        breakageAmount: \"\",\n        //退款应付金额\n        refundAmount: '',\n        //组织机构id\n        organizationCode: \"\",\n        //组织机构名称\n        organization: '',\n        //退货日期\n        refundTime: \"\",\n        //收货仓库\n        warehouse: \"\",\n        //仓库code\n        warehouseCode: '',\n        //渠道订单号\n        orderSn: \"\",\n        //物流公司\n        logisticsCompany: \"\",\n        //物流公司编码\n        logisticsCompanyCode: '',\n        //退货商户\n        storeName: \"\"\n      }, _defineProperty(_signData, \"storeId\", ''), _defineProperty(_signData, \"mobile\", \"\"), _defineProperty(_signData, \"logisticsOrderSn\", \"\"), _defineProperty(_signData, \"channelOrderGoodsVOList\", []), _signData),\n      rules: {\n        organization: [{\n          required: true,\n          message: \"请选择组织机构\",\n          trigger: \"change\"\n        }],\n        warehouse: [{\n          required: true,\n          message: \"请选择收货仓库\",\n          trigger: \"change\"\n        }],\n        orderSn: [{\n          required: true,\n          message: \"请选择或输入订单号\",\n          trigger: \"change\"\n        }],\n        logisticsCompany: [{\n          required: true,\n          message: \"请选择物流公司\",\n          trigger: \"change\"\n        }],\n        storeName: [{\n          required: true,\n          message: \"商户姓名不能为空\",\n          trigger: \"\"\n        }],\n        ditchStoreName: [{\n          required: true,\n          message: \"商户姓名不能为空\",\n          trigger: \"change\"\n        }],\n        mobile: [{\n          required: true,\n          message: \"联系电话不能为空\",\n          trigger: \"blur\"\n        }],\n        logisticsOrderSn: [{\n          required: true,\n          message: \"物流单号不能为空\",\n          trigger: \"blur\"\n        }]\n      },\n      //收货仓库--合格的仓库\n      WarehouseCodeData: [],\n      //获取物流数据\n      logisticsListData: [],\n      //标识popover的显示或隐藏\n      visible: false,\n      //组织机构数据\n      organizationListData: [],\n      //选择订单table的数据\n      gridTableData: {\n        orderType: '0102',\n        //当前页数\n        pageIndex: 1,\n        //每页要显示的数据条数,默认10条,\n        pageSize: 10,\n        //检索字段\n        searchKey: \"\",\n        //订单来源数据\n        channelCodes: [],\n        //选择订单的数据来源\n        gridData: []\n      },\n      //退货商户状态\n      storeNameStatus: false,\n      //订单号联想时数据\n      orderSnData: [],\n      //店铺数据\n      storeShopData: [],\n      //标识商铺\n      storeSelect: false,\n      //标识商品信息来源\n      shopMsg: true,\n      //选择订单号的总条数\n      selectDataTotalPage: 0\n    };\n  },\n  watch: {\n    //监听订单号\n    \"signData.orderSn\": function signDataOrderSn(newOrderSn, oldOrderSn) {\n      var _this = this;\n\n      if (!newOrderSn) {\n        this.storeNameStatus = false;\n        this.signData.storeName = '';\n        this.signData.mobile = ''; //清空商品信息\n\n        this.signData.channelOrderGoodsVOList = []; //清空联想信息\n\n        this.orderSnData = [];\n      } else {\n        if (!this.orderSnData) {\n          return;\n        }\n\n        this.orderSnData.forEach(function (item) {\n          if (item.orderSn == newOrderSn) {\n            _this.signData.storeName = item.storeName;\n            _this.signData.mobile = item.mobile;\n            _this.signData.orderSn = item.orderSn;\n            _this.visible = false; //标识退货商户状态\n\n            _this.storeNameStatus = true; //根据订单号得到商品数据\n\n            _this.getShopDataByOrderSn(_this.signData.orderSn);\n          }\n        });\n      }\n    },\n    //监听折损价格的变化\n    \"signData.breakageAmount\": function signDataBreakageAmount(newBreakageAmount, oldBreakageAmount) {\n      var refundAmount = this.signData.amount - newBreakageAmount;\n      this.signData.refundAmount = refundAmount.toFixed(2);\n    }\n  },\n  mounted: function mounted() {\n    var _this2 = this;\n\n    var _type = localStorage.getItem(\"type\") || \"\"; //得到组织机构数据\n\n\n    this.getWarehouseListData(); //获取物流数据\n\n    this.getLogisticsList();\n\n    if (_type == \"add\") {\n      localStorage.removeItem(\"localTableData\");\n      localStorage.removeItem(\"shopMsgData\");\n      localStorage.removeItem(\"allShopPrice\");\n      this.signData.channelOrderGoodsVOList = [];\n    } else {\n      var localTableData = localStorage.getItem(\"localTableData\");\n      var shopData = localStorage.getItem(\"shopMsgData\");\n      this.$nextTick(function () {\n        _this2.isDisable = false;\n        _this2.signData = JSON.parse(shopData);\n        _this2.signData.channelOrderGoodsVOList = JSON.parse(localTableData);\n\n        if (_this2.signData.channelOrderGoodsVOList && _this2.signData.channelOrderGoodsVOList.length > 0) {\n          _this2.signData.channelOrderGoodsVOList.forEach(function (item) {\n            item.sellPrice = \"--\"; // item.returnQuantity=item.num\n\n            _this2.shopMsg = false; //增加临时字段，标识是否有修改\n\n            item.tmpQuantity = item.num;\n\n            _this2.$set(item, 'returnQuantity', item.num);\n\n            item.num = \"--\";\n\n            _this2.$set(item, 'refundAmount', '0.00'); // this.$set(item,'returnQuantity',0)\n\n          });\n\n          console.log(_this2.signData.channelOrderGoodsVOList);\n        } //赋值订单总金额\n        // var amount = 0;\n        // amount = localStorage.getItem(\"allShopPrice\");\n        // this.signData.amount=parseFloat(amount).toFixed(2);\n        // this.signData.refundAmount = parseFloat(amount).toFixed(2);\n        //得到当前的仓库名称\n\n\n        _this2.tmpWarehouse = _this2.signData.warehouse; //得到仓库数据\n\n        _this2.getWarehouseList(_this2.signData.organizationId);\n\n        console.log(\"259========1\");\n      });\n    }\n  },\n  methods: {\n    //得到组织机构数据\n    getWarehouseListData: function () {\n      var _getWarehouseListData = _asyncToGenerator(\n      /*#__PURE__*/\n      regeneratorRuntime.mark(function _callee() {\n        var _this3 = this;\n\n        var info;\n        return regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                _context.next = 2;\n                return this.request(this.api.user.get_userinfo, {}, true);\n\n              case 2:\n                info = _context.sent;\n                console.log(info); //得到部门Id\n\n                this.signData.relationDepId = info.departId;\n                this.request(this.api.user.userCompany_getUserOrgByUserId, {\n                  userId: info.userId,\n                  type: 0\n                }).then(function (data) {\n                  console.log(data); //得到机构\n\n                  _this3.signData.organization = data.name; //得到机构code\n\n                  _this3.signData.organizationCode = data.id; //得到机构id\n\n                  _this3.signData.organizationId = data.id; //获取货主列表\n\n                  _this3.getGoodsOwnerListData(_this3.signData.organizationId); //得到店铺数据\n\n\n                  _this3.getShopNameData(_this3.signData.organizationCode); //得到仓库数据\n\n\n                  _this3.getWarehouseList(_this3.signData.organizationId);\n                });\n\n              case 6:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this);\n      }));\n\n      function getWarehouseListData() {\n        return _getWarehouseListData.apply(this, arguments);\n      }\n\n      return getWarehouseListData;\n    }(),\n    //得到店铺数据\n    getShopNameData: function getShopNameData(organizationId) {\n      var _this4 = this;\n\n      // symbol 1--网销 2--渠销\n      this.request(this.api.order.orderStore_orderStoreList, {\n        symbol: 1,\n        organizationCode: organizationId\n      }).then(function (data) {\n        console.log(data);\n        _this4.storeShopData = data;\n      });\n    },\n    storeShopDataChanegEvent: function storeShopDataChanegEvent(val) {\n      console.log(val);\n      this.signData.storeName = '';\n      this.signData.orderSn = '';\n      this.signData.mobile = '';\n      var storeId = this.storeShopData.find(function (item) {\n        return item.storeName == val;\n      }).id;\n      this.signData.storeId = storeId;\n      this.storeSelect = false;\n    },\n    //得到物流编码\n    selectLogisticsData: function selectLogisticsData(val) {\n      var logisticsCode = this.logisticsListData.find(function (item) {\n        return item.name == val;\n      }).code;\n      this.signData.logisticsCompanyCode = logisticsCode;\n    },\n    //获取货主列表\n    getGoodsOwnerListData: function getGoodsOwnerListData(organizationId) {\n      var _this5 = this;\n\n      this.request(this.api.system.goodsOwner_list, {\n        orgId: organizationId\n      }).then(function (data) {\n        console.log(data.data);\n        _this5.signData.goodsOwner = data.data[0].code;\n      });\n    },\n    //得到仓库列表\n    getWarehouseList: function getWarehouseList(orgId) {\n      var _this6 = this;\n\n      this.request(this.api.warehouse.warehouseBase_warehouse_list, {\n        isValid: true\n      }).then(function (res) {\n        console.log(res);\n        _this6.WarehouseCodeData = res.data;\n      });\n    },\n    //获取物流数据\n    getLogisticsList: function getLogisticsList() {\n      var _this7 = this;\n\n      this.request(this.api.warehouse.warehouseBase_logistics_list, {\n        isValid: true\n      }).then(function (res) {\n        console.log(res);\n        _this7.logisticsListData = res.data;\n      });\n    },\n    //得到渠道订单号的数据\n    querySearch: function () {\n      var _querySearch = _asyncToGenerator(\n      /*#__PURE__*/\n      regeneratorRuntime.mark(function _callee2(queryString, cb) {\n        var restaurants;\n        return regeneratorRuntime.wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                console.log(queryString);\n\n                if (!(queryString.length == 0)) {\n                  _context2.next = 3;\n                  break;\n                }\n\n                return _context2.abrupt(\"return\");\n\n              case 3:\n                _context2.next = 5;\n                return this.getOrderSnData(queryString);\n\n              case 5:\n                restaurants = _context2.sent;\n                this.orderSnData = restaurants.data; // 调用 callback 返回建议列表的数据\n\n                cb(restaurants.data);\n\n              case 8:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2, this);\n      }));\n\n      function querySearch(_x, _x2) {\n        return _querySearch.apply(this, arguments);\n      }\n\n      return querySearch;\n    }(),\n    handleSelect: function handleSelect(item) {\n      console.log(item);\n      this.signData.orderSn = item.orderSn;\n      this.signData.storeName = item.storeName;\n      this.signData.mobile = item.mobile; //标识退货商户状态\n\n      this.storeNameStatus = true; //根据订单号得到商品数据\n\n      this.getShopDataByOrderSn(this.signData.orderSn);\n    },\n    //订单号联想数据\n    getOrderSnData: function () {\n      var _getOrderSnData = _asyncToGenerator(\n      /*#__PURE__*/\n      regeneratorRuntime.mark(function _callee3(key) {\n        return regeneratorRuntime.wrap(function _callee3$(_context3) {\n          while (1) {\n            switch (_context3.prev = _context3.next) {\n              case 0:\n                _context3.next = 2;\n                return this.request(this.api.order.channelSaleOrder_getChannelListForRefundOrder, {\n                  orderType: '0101',\n                  searchKey: key\n                }, true);\n\n              case 2:\n                return _context3.abrupt(\"return\", _context3.sent);\n\n              case 3:\n              case \"end\":\n                return _context3.stop();\n            }\n          }\n        }, _callee3, this);\n      }));\n\n      function getOrderSnData(_x3) {\n        return _getOrderSnData.apply(this, arguments);\n      }\n\n      return getOrderSnData;\n    }(),\n    //收货仓库\n    selectwarehouseCodeChange: function selectwarehouseCodeChange(val) {\n      console.log(val);\n      var warehouseId = this.WarehouseCodeData.find(function (item) {\n        return item.warehouseName == val;\n      }).id;\n      var code = this.WarehouseCodeData.find(function (item) {\n        return item.warehouseName == val;\n      }).warehouseCode;\n      this.signData.warehouseCode = code;\n    },\n    //选择订单号的点击事件\n    selectOrderSnClickEvent: function selectOrderSnClickEvent() {\n      var _this8 = this;\n\n      if (!this.signData.storeId) {\n        this.storeSelect = true;\n        return;\n      }\n\n      this.request(this.api.order.channelSaleOrder_getChannelListForRefundOrder, {\n        storeId: this.signData.storeId,\n        orderType: '0101',\n        pageIndex: 1,\n        pageSize: 10\n      }, true).then(function (data) {\n        console.log(data);\n        _this8.shopMsg = true;\n        _this8.gridTableData.gridData = data.data;\n        _this8.selectDataTotalPage = data.totalCount;\n        _this8.visible = true;\n\n        if (_this8.$refs['gridTableForm']) {\n          _this8.$refs['gridTableForm'].resetFields();\n        }\n      });\n    },\n    //选择商品的点击事件\n    selectShopClickEvent: function selectShopClickEvent() {\n      this.$router.push({\n        path: \"/OS/salesReturn/ditchReturn/ditchReturn_shop\",\n        query: {\n          ownerId: \"\",\n          organizationName: this.signData.organization,\n          warehouseName: this.signData.warehouse,\n          warehouseId: this.signData.warehouseCode\n        }\n      }); //存储填写的信息\n\n      localStorage.setItem(\"shopMsgData\", JSON.stringify(this.signData));\n      localStorage.setItem(\"localTableData\", JSON.stringify(this.signData.channelOrderGoodsVOList));\n    },\n    //监听退货数量的变化\n    salesReturnShopNumberChange: function salesReturnShopNumberChange(val) {\n      console.log(val);\n      var amount = 0;\n      this.signData.breakageAmount = '0.00';\n      this.signData.channelOrderGoodsVOList.forEach(function (item) {\n        amount += item.refundAmount * item.returnQuantity;\n      });\n      this.signData.amount = amount.toFixed(2);\n      this.signData.refundAmount = amount.toFixed(2);\n    },\n    //监听退货数量的变化-不带num\n    salesReturnNoNumShopNumberChange: function salesReturnNoNumShopNumberChange(val) {\n      var amount = 0;\n      this.signData.breakageAmount = '0.00';\n      this.signData.channelOrderGoodsVOList.forEach(function (item) {\n        amount += item.refundAmount * item.returnQuantity;\n      });\n      this.signData.amount = amount.toFixed(2);\n      this.signData.refundAmount = amount.toFixed(2);\n    },\n    //监听退货单价的变化\n    salesReturnPriceChange: function salesReturnPriceChange(val) {\n      var amount = 0;\n      this.signData.breakageAmount = '0.00';\n      this.signData.channelOrderGoodsVOList.forEach(function (item) {\n        amount += item.refundAmount * item.returnQuantity;\n      });\n      this.signData.amount = amount.toFixed(2);\n      this.signData.refundAmount = amount.toFixed(2);\n    },\n    //优惠金额\n    priceInputChangeEvent: function priceInputChangeEvent(val) {\n      console.log(this.signData.breakageAmount);\n      var breakageAmount = val.target.value.match(/^\\d*(\\.?\\d{0,2})/g);\n      this.signData.breakageAmount = breakageAmount[0];\n    },\n    //确认btn的点击事件\n    primaryBtnClick: function primaryBtnClick() {\n      var _this9 = this;\n\n      var self = this;\n      this.$refs.ruleForm.validate(function (valid) {\n        if (valid) {\n          console.log(\"dasdasd\");\n          var channelOrderGoodsVOList = self.signData.channelOrderGoodsVOList.filter(function (item) {\n            if (!item.tmpQuantity) {\n              return item.returnQuantity != 0;\n            } else {\n              return item.tmpQuantity != item.returnQuantity && item.returnQuantity != 0;\n            }\n          });\n\n          if (channelOrderGoodsVOList.length == 0) {\n            _this9.$message.error('退货商品数量不能全部为0');\n\n            return;\n          }\n\n          _this9.signData.channelOrderGoodsVOList = channelOrderGoodsVOList;\n\n          _this9.request(_this9.api.order.channelRefundOrder_save, _this9.signData).then(function (data) {\n            console.log(\"270===========\"); //重置\n\n            localStorage.removeItem(\"localTableData\");\n\n            _this9.$refs.ruleForm.resetFields();\n\n            _this9.signData.channelOrderGoodsVOList = [];\n\n            _this9.$router.go(-1);\n          });\n        } else {\n          console.log(\"error submit!!\");\n          return false;\n        }\n      });\n    },\n    //取消btn的点击事件\n    plainBtnClick: function plainBtnClick() {\n      this.$router.go(-1);\n    },\n    //每页条数改变时\n    handleSizeChange: function handleSizeChange(page) {\n      this.signData.gridTableData.pageSize = page;\n      this.gridFormDataSearch();\n    },\n    //当前页改变时\n    handleCurrentChange: function handleCurrentChange(page) {\n      this.signData.gridTableData.pageIndex = page;\n      this.gridFormDataSearch();\n    },\n    //选择Btn的点击事件\n    selectBtnClick: function selectBtnClick(row) {\n      console.log(row);\n      this.signData.storeName = row.storeName;\n      this.signData.mobile = row.mobile;\n      this.signData.orderSn = row.orderSn;\n      this.visible = false; //标识退货商户状态\n\n      this.storeNameStatus = true; //根据订单号得到商品数据\n\n      this.getShopDataByOrderSn(this.signData.orderSn);\n    },\n    //根据订单号得到对应的商品数据\n    getShopDataByOrderSn: function getShopDataByOrderSn(orderSn) {\n      var _this10 = this;\n\n      this.request(this.api.order.channelSaleOrder_get, {\n        orderSn: orderSn,\n        storeId: this.signData.storeId,\n        pageStart: '',\n        pageSize: ''\n      }).then(function (res) {\n        _this10.shopMsg = true;\n        console.log(res);\n        localStorage.removeItem('localTableData');\n        _this10.signData.channelOrderGoodsVOList = res.channelSaleOrderGoodsVOList.data;\n        var allAmount = 0;\n\n        _this10.signData.channelOrderGoodsVOList.forEach(function (item) {\n          _this10.$set(item, 'refundAmount', item.sellPrice); // item.returnQuantity=item.num\n\n\n          allAmount += item.num * item.refundAmount;\n        });\n\n        _this10.signData.amount = allAmount.toFixed(2);\n        _this10.signData.refundAmount = allAmount.toFixed(2);\n      });\n    },\n    //搜索\n    gridFormDataSearch: function gridFormDataSearch() {\n      var _this11 = this;\n\n      this.request(this.api.order.channelRefundOrder_list, this.gridTableData).then(function (res) {\n        _this11.gridTableData.gridData = res.data;\n      });\n    },\n    //重置\n    gridFormDataResetFilters: function gridFormDataResetFilters(gridFormData) {\n      this.$refs[gridFormData].resetFields();\n    },\n    //组织机构改变时的事件\n    getTreeDeptName: function getTreeDeptName(val) {\n      console.log(val);\n    }\n  }\n};",{"version":3,"sources":["ditchReturn_add.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\r\n  <div class=\"content\">\r\n    <label>基本信息</label>\r\n    <div class=\"form_div\">\r\n      <el-form\r\n        :model=\"signData\"\r\n        ref=\"ruleForm\"\r\n        :inline=\"true\"\r\n        :rules=\"rules\"\r\n        class=\"demo-form-inline\"\r\n      >\r\n        <el-row>\r\n          <el-col :span=\"8\">\r\n            <el-form-item label=\"组织机构：\" prop=\"organization\">\r\n                <el-input v-model=\"signData.organization\" disabled></el-input>\r\n            </el-form-item>\r\n            <el-form-item label=\"渠道订单号：\" prop=\"orderSn\">\r\n              <div class=\"order_div\">\r\n                <!-- <el-input v-model=\"signData.orderSn\"></el-input> -->\r\n                <el-autocomplete\r\n                  v-model=\"signData.orderSn\"\r\n                  :fetch-suggestions=\"querySearch\"\r\n                  placeholder=\"请输入内容\"\r\n                  :trigger-on-focus=\"false\"\r\n                  @select=\"handleSelect\"\r\n                  style=\"width:215px;\"\r\n                >\r\n                  <template slot-scope=\"{ item }\">\r\n                    <div class=\"name\">{{ item.orderSn }}</div>\r\n                  </template>\r\n                </el-autocomplete>\r\n                <p\r\n\r\n                  class=\"select_order_label\"\r\n                  @click=\"selectOrderSnClickEvent\"\r\n                >选择订单</p>\r\n              </div>\r\n            </el-form-item>\r\n            <el-form-item label=\"收货仓库：\" prop=\"warehouse\">\r\n              <el-select\r\n                @change=\"selectwarehouseCodeChange\"\r\n                v-model=\"signData.warehouse\"\r\n                placeholder=\"请选择仓库\"\r\n              >\r\n                <el-option\r\n                  v-for=\"item in WarehouseCodeData\"\r\n                  :label=\"item.warehouseName\"\r\n                  :key=\"item.id\"\r\n                  :value=\"item.warehouseName\"\r\n                ></el-option>\r\n              </el-select>\r\n            </el-form-item>\r\n            <el-form-item label=\"物流公司：\" prop=\"logisticsCompany\">\r\n              <el-select\r\n                @change=\"selectLogisticsData\"\r\n                v-model=\"signData.logisticsCompany\"\r\n                placeholder=\"请选择物流公司\"\r\n              >\r\n                <el-option\r\n                  v-for=\"item in logisticsListData\"\r\n                  :label=\"item.name\"\r\n                  :key=\"item.id\"\r\n                  :value=\"item.name\"\r\n                ></el-option>\r\n              </el-select>\r\n            </el-form-item>\r\n          </el-col>\r\n          <el-col :span=\"6\">\r\n            <el-form-item label=\"网销店铺：\" prop=\"ditchStoreName\">\r\n               <el-select :class=\"storeSelect?'disableSelect':''\"\r\n                  v-model=\"signData.ditchStoreName\"\r\n                  @change=\"storeShopDataChanegEvent\"\r\n                  placeholder=\"请选择店铺\"\r\n                >\r\n                  <el-option\r\n                    v-for=\"item in storeShopData\"\r\n                    :label=\"item.storeName\"\r\n                    :key=\"item.id\"\r\n                    :value=\"item.storeName\"\r\n                  ></el-option>\r\n                </el-select>\r\n            </el-form-item>\r\n            <el-form-item label=\"商户姓名：\" prop=\"storeName\">\r\n              <el-input :disabled=\"storeNameStatus\" v-model=\"signData.storeName\" placeholder=\"请输入\"></el-input>\r\n            </el-form-item>\r\n            <el-form-item label=\"客户电话：\" prop=\"mobile\">\r\n              <el-input v-model=\"signData.mobile\" placeholder=\"请输入\"></el-input>\r\n            </el-form-item>\r\n            <el-form-item label=\"物流单号：\" prop=\"logisticsOrderSn\">\r\n              <el-input v-model=\"signData.logisticsOrderSn\" placeholder=\"请输入\"></el-input>\r\n            </el-form-item>\r\n          </el-col>\r\n        </el-row>\r\n      </el-form>\r\n      <div class=\"table_msg\">\r\n        <div class=\"title_span\">\r\n          <span>商品信息</span>\r\n          <span v-show=\"!storeNameStatus\" class=\"select_shop_title\" @click=\"selectShopClickEvent\">选择商品</span>\r\n        </div>\r\n        <div class=\"table_div\">\r\n          <el-table\r\n            :data=\"signData.channelOrderGoodsVOList\"\r\n            stripe\r\n            style=\"width: 100%\"\r\n            header-row-class-name=\"item-table-header\"\r\n            max-height=\"400\"\r\n          >\r\n            <el-table-column prop=\"productCode\" label=\"商品款号\" width=\"180\"></el-table-column>\r\n            <el-table-column prop=\"code\" label=\"商品货号\" width=\"180\"></el-table-column>\r\n            <el-table-column prop=\"image\" label=\"商品图片\">\r\n              <template slot-scope=\"scope\">\r\n                  <image :scr='scope.row.image' style=\"width:32px;height:32px;\"></image>\r\n              </template>\r\n            </el-table-column>\r\n            <el-table-column prop=\"name\" label=\"商品名称\" width=\"180\"></el-table-column>\r\n            <el-table-column prop=\"\" label=\"商品类型\" width=\"180\">\r\n              <template slot-scope=\"scope\">\r\n                <span>颜色：{{scope.row.color}}</span>\r\n                <br />\r\n                <span>尺寸：{{scope.row.size}}</span>\r\n              </template>\r\n            </el-table-column>\r\n            <el-table-column prop=\"brandName\" label=\"品牌\"></el-table-column>\r\n            <el-table-column prop=\"type\" label=\"商品品类\" width=\"180\"></el-table-column>\r\n            <el-table-column label=\"规格属性\" width=\"180\">\r\n              <template slot-scope=\"scope\">\r\n                <span>颜色：{{scope.row.color}}</span>\r\n                <br />\r\n                <span>尺寸：{{scope.row.size}}</span>\r\n              </template>\r\n            </el-table-column>\r\n            <el-table-column prop=\"sellPrice\" label=\"销售单价\">\r\n              <template slot-scope=\"scope\">\r\n                <span v-show=\"scope.row.sellPrice!='--'\">￥{{scope.row.sellPrice}}</span>\r\n                <span v-show=\"scope.row.sellPrice=='--'\">{{scope.row.sellPrice}}</span>\r\n              </template>\r\n            </el-table-column>\r\n            <el-table-column prop=\"refundAmount\" label=\"退货单价\" width=\"120\" align=\"center\">\r\n              <template slot-scope=\"scope\">\r\n                <div class=\"tag_div\">\r\n                  <span>￥</span>\r\n                  <el-input\r\n                    @input=\"salesReturnPriceChange\"\r\n                    min=\"0\"\r\n                    max=\"scope.row.sellPrice\"\r\n                    type=\"number\"\r\n                    v-model=\"scope.row.refundAmount\"\r\n                    placeholder=\"请输入\"\r\n                  ></el-input>\r\n                </div>\r\n              </template>\r\n            </el-table-column>\r\n            <el-table-column prop=\"num\" align=\"center\" label=\"销售数量\"></el-table-column>\r\n            <el-table-column prop=\"returnQuantity\" label=\"退货数量\" width=\"180\" align=\"center\">\r\n              <template slot-scope=\"scope\">\r\n                <el-input-number v-if=\"shopMsg\"\r\n                  v-model=\"scope.row.returnQuantity\"\r\n                  @change=\"salesReturnShopNumberChange(index)\"\r\n                  :min=\"0\"\r\n                  :max=\"scope.row.num\"\r\n                  v-enter-number\r\n                ></el-input-number>\r\n                <el-input-number v-else\r\n                  v-model=\"scope.row.returnQuantity\"\r\n                  @change=\"salesReturnNoNumShopNumberChange\"\r\n                  :min=\"0\"\r\n                  v-enter-number\r\n                ></el-input-number>\r\n              </template>\r\n            </el-table-column>\r\n          </el-table>\r\n        </div>\r\n        <div class=\"money-div\">\r\n          <span>退款金额：￥{{signData.amount?signData.amount:'0.00'}}</span>\r\n          <div class=\"money-content\">\r\n            <span>折损金额：</span>\r\n            <input type=\"text\" class=\"input-price\" placeholder=\"描述折损\" />\r\n            <span>￥</span>\r\n            <input\r\n              type=\"number\"\r\n              min=\"0\"\r\n              max=\"100\"\r\n              @change=\"priceInputChangeEvent\"\r\n              class=\"input-price\"\r\n              v-model=\"signData.breakageAmount\"\r\n              placeholder=\"0.00\"\r\n              :disabled=\"!signData.amount\"\r\n            />\r\n          </div>\r\n          <span>退款应付金额：￥{{signData.refundAmount?signData.refundAmount:'0.00'}}</span>\r\n        </div>\r\n        <div class=\"remarks-textarea\">\r\n          <span>退货备注：</span>\r\n          <el-input\r\n            class=\"textarea\"\r\n            type=\"textarea\"\r\n            :rows=\"2\"\r\n            placeholder=\"请输入内容\"\r\n            v-model=\"signData.remarks\"\r\n            resize=\"none\"\r\n          ></el-input>\r\n        </div>\r\n        <div class=\"btn-div\">\r\n          <el-button type=\"primary\" @click=\"primaryBtnClick\" size=\"small\">确认</el-button>\r\n          <el-button plain @click=\"plainBtnClick\" size=\"small\">取消</el-button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n\r\n    <div>\r\n      <el-dialog title=\"选择退货单\"  :visible.sync=\"visible\">\r\n        <!-- <div style=\"width:100%;display:flex;border-bottom:1px solid #ccc;padding-bottom:8px;\">\r\n          <span style=\"color:#409eff;flex:auto;\">选择退货单</span>\r\n          <i class=\"el-icon-close\" @click=\"visible=false\"></i>\r\n        </div> -->\r\n        <div style=\"border-bottom:1px solid #ccc;margin-bottom:20px;\">\r\n          <el-form\r\n            :model=\"gridTableData\"\r\n            label-width=\"90px\"\r\n            size=\"small\"\r\n            ref=\"gridTableForm\"\r\n            inline\r\n          >\r\n            <el-form-item prop=\"searchKey\" label=\"模糊查询：\">\r\n              <el-input\r\n                class=\"input-w\"\r\n                placeholder=\"定单号/商户名称/联系电话\"\r\n                v-model=\"gridTableData.searchKey\"\r\n              ></el-input>\r\n            </el-form-item>\r\n            <el-form-item prop=\"channelCodes\" label=\"订单来源：\">\r\n              <code-set v-model=\"gridTableData.channelCodes\" code=\"ORD001\" :multiple=\"true\" />\r\n            </el-form-item>\r\n            <el-form-item>\r\n              <el-button @click=\"gridFormDataSearch\" type=\"primary\" plain size=\"small\">搜索</el-button>\r\n              <el-button @click=\"gridFormDataResetFilters('gridTableForm')\" size=\"small\">重置</el-button>\r\n            </el-form-item>\r\n          </el-form>\r\n        </div>\r\n        <el-table\r\n          :data=\"gridTableData.gridData\"\r\n          header-row-class-name=\"item-table-header\"\r\n        >\r\n          <el-table-column prop=\"orderSn\" label=\"订单号\"></el-table-column>\r\n          <el-table-column prop=\"storeName\" label=\"商户姓名\"></el-table-column>\r\n          <el-table-column prop=\"mobile\" label=\"联系电话\"></el-table-column>\r\n          <el-table-column fixed=\"right\" label=\"操作\">\r\n            <template slot-scope=\"scope\">\r\n              <p\r\n                @click=\"selectBtnClick(scope.row)\"\r\n                type=\"text\"\r\n                size=\"small\"\r\n                style=\"color:#409eff\"\r\n              >选择</p>\r\n            </template>\r\n          </el-table-column>\r\n        </el-table>\r\n        <div style=\"margin-top:20px;padding-bottom:10px;margin-right:20px;\">\r\n          <el-pagination\r\n            @size-change=\"handleSizeChange\"\r\n            @current-change=\"handleCurrentChange\"\r\n            :current-page.sync=\"gridTableData.pageIndex\"\r\n            :page-sizes=\"[10, 20, 30, 40]\"\r\n            :page-size=\"gridTableData.pageSize\"\r\n            layout=\"total, sizes, prev, pager, next, jumper\"\r\n            :total=\"selectDataTotalPage\"\r\n          ></el-pagination>\r\n        </div>\r\n      </el-dialog>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport codeSet from \"@/components/codeSet\";\r\nimport treeDept from \"@/components/treeDept\";\r\nexport default {\r\n  components: {\r\n    codeSet,\r\n    treeDept\r\n  },\r\n  data() {\r\n    return {\r\n      signData: {\r\n        //订单类型\r\n        orderType:'0102',\r\n        //退货备注\r\n        remarks: \"\",\r\n        //总金额\r\n        amount:'',\r\n        //网销店铺名称\r\n        ditchStoreName:'',\r\n        //网销店铺Id\r\n        storeId:'',\r\n        //货主\r\n        goodsOwner:'',\r\n        //折损金额金额\r\n        breakageAmount: \"\",\r\n        //退款应付金额\r\n        refundAmount:'',\r\n        //组织机构id\r\n        organizationCode: \"\",\r\n        //组织机构名称\r\n        organization:'',\r\n        //退货日期\r\n        refundTime: \"\",\r\n        //收货仓库\r\n        warehouse: \"\",\r\n        //仓库code\r\n        warehouseCode:'',\r\n        //渠道订单号\r\n        orderSn: \"\",\r\n        //物流公司\r\n        logisticsCompany: \"\",\r\n        //物流公司编码\r\n        logisticsCompanyCode:'',\r\n        //退货商户\r\n        storeName: \"\",\r\n        //商户Id\r\n        storeId:'',\r\n        //联系电话\r\n        mobile: \"\",\r\n        //物流单号\r\n        logisticsOrderSn: \"\",\r\n        //表格数据\r\n        channelOrderGoodsVOList: []\r\n      },\r\n      rules: {\r\n        organization: [\r\n          { required: true, message: \"请选择组织机构\", trigger: \"change\" }\r\n        ],\r\n        warehouse: [\r\n          { required: true, message: \"请选择收货仓库\", trigger: \"change\" }\r\n        ],\r\n        orderSn: [\r\n          { required: true, message: \"请选择或输入订单号\", trigger: \"change\" }\r\n        ],\r\n        logisticsCompany: [\r\n          { required: true, message: \"请选择物流公司\", trigger: \"change\" }\r\n        ],\r\n        storeName: [\r\n          { required: true, message: \"商户姓名不能为空\", trigger: \"\" }\r\n        ],\r\n        ditchStoreName:[\r\n          { required: true, message: \"商户姓名不能为空\", trigger: \"change\" }\r\n        ],\r\n        mobile: [\r\n          { required: true, message: \"联系电话不能为空\", trigger: \"blur\" }\r\n        ],\r\n        logisticsOrderSn: [\r\n          { required: true, message: \"物流单号不能为空\", trigger: \"blur\" }\r\n        ]\r\n      },\r\n      //收货仓库--合格的仓库\r\n      WarehouseCodeData: [],\r\n      //获取物流数据\r\n      logisticsListData: [],\r\n      //标识popover的显示或隐藏\r\n      visible: false,\r\n      //组织机构数据\r\n      organizationListData:[],\r\n      //选择订单table的数据\r\n      gridTableData: {\r\n        orderType:'0102',\r\n        //当前页数\r\n        pageIndex: 1,\r\n        //每页要显示的数据条数,默认10条,\r\n        pageSize: 10,\r\n        //检索字段\r\n        searchKey: \"\",\r\n        //订单来源数据\r\n        channelCodes: [],\r\n        //选择订单的数据来源\r\n        gridData: [],\r\n      },\r\n      //退货商户状态\r\n      storeNameStatus:false,\r\n      //订单号联想时数据\r\n      orderSnData:[],\r\n      //店铺数据\r\n      storeShopData:[],\r\n      //标识商铺\r\n      storeSelect:false,\r\n      //标识商品信息来源\r\n      shopMsg:true,\r\n      //选择订单号的总条数\r\n      selectDataTotalPage:0\r\n    };\r\n  },\r\n   watch: {\r\n    //监听订单号\r\n    \"signData.orderSn\": function(newOrderSn,oldOrderSn) {\r\n       if(!newOrderSn){\r\n        this.storeNameStatus=false\r\n        this.signData.storeName=''\r\n        this.signData.mobile=''\r\n        //清空商品信息\r\n        this.signData.channelOrderGoodsVOList=[]\r\n        //清空联想信息\r\n        this.orderSnData=[]\r\n       }else{\r\n         if(!this.orderSnData){\r\n            return\r\n          }\r\n         this.orderSnData.forEach(item=>{\r\n           if(item.orderSn==newOrderSn){\r\n              this.signData.storeName=item.storeName\r\n              this.signData.mobile=item.mobile\r\n              this.signData.orderSn=item.orderSn\r\n              this.visible=false\r\n              //标识退货商户状态\r\n              this.storeNameStatus=true\r\n              //根据订单号得到商品数据\r\n              this.getShopDataByOrderSn(this.signData.orderSn)\r\n           }\r\n         })\r\n       }\r\n    },\r\n    //监听折损价格的变化\r\n    \"signData.breakageAmount\":function(newBreakageAmount,oldBreakageAmount){\r\n      var refundAmount = this.signData.amount - newBreakageAmount;\r\n      this.signData.refundAmount=refundAmount.toFixed(2)\r\n    },\r\n  },\r\n  mounted() {\r\n    let _type = localStorage.getItem(\"type\") || \"\";\r\n    //得到组织机构数据\r\n    this.getWarehouseListData();\r\n    //获取物流数据\r\n    this.getLogisticsList();\r\n     if (_type == \"add\") {\r\n      localStorage.removeItem(\"localTableData\");\r\n      localStorage.removeItem(\"shopMsgData\");\r\n      localStorage.removeItem(\"allShopPrice\");\r\n      this.signData.channelOrderGoodsVOList = [];\r\n    } else {\r\n      var localTableData = localStorage.getItem(\"localTableData\");\r\n      var shopData = localStorage.getItem(\"shopMsgData\");\r\n      this.$nextTick(() => {\r\n        this.isDisable = false;\r\n        this.signData = JSON.parse(shopData);\r\n        this.signData.channelOrderGoodsVOList = JSON.parse(localTableData);\r\n        if(this.signData.channelOrderGoodsVOList && this.signData.channelOrderGoodsVOList.length>0){\r\n          this.signData.channelOrderGoodsVOList.forEach(item=>{\r\n            item.sellPrice=\"--\";\r\n            // item.returnQuantity=item.num\r\n            this.shopMsg=false\r\n            //增加临时字段，标识是否有修改\r\n            item.tmpQuantity=item.num\r\n            this.$set(item,'returnQuantity',item.num)\r\n            item.num=\"--\"\r\n            this.$set(item,'refundAmount','0.00')\r\n            // this.$set(item,'returnQuantity',0)\r\n          })\r\n          console.log( this.signData.channelOrderGoodsVOList);\r\n        }\r\n        //赋值订单总金额\r\n        // var amount = 0;\r\n        // amount = localStorage.getItem(\"allShopPrice\");\r\n        // this.signData.amount=parseFloat(amount).toFixed(2);\r\n        // this.signData.refundAmount = parseFloat(amount).toFixed(2);\r\n\r\n        //得到当前的仓库名称\r\n        this.tmpWarehouse = this.signData.warehouse;\r\n        //得到仓库数据\r\n        this.getWarehouseList(this.signData.organizationId);\r\n        console.log(\"259========1\");\r\n      });\r\n    }\r\n  },\r\n  methods: {\r\n    //得到组织机构数据\r\n    async getWarehouseListData() {\r\n      let info = await this.request(this.api.user.get_userinfo, {}, true);\r\n      console.log(info);\r\n      //得到部门Id\r\n      this.signData.relationDepId = info.departId;\r\n\r\n      this.request(this.api.user.userCompany_getUserOrgByUserId, {\r\n        userId: info.userId,\r\n        type: 0\r\n      }).then(data => {\r\n        console.log(data);\r\n        //得到机构\r\n        this.signData.organization = data.name;\r\n        //得到机构code\r\n        this.signData.organizationCode = data.id;\r\n        //得到机构id\r\n        this.signData.organizationId = data.id;\r\n        //获取货主列表\r\n        this.getGoodsOwnerListData(this.signData.organizationId);\r\n        //得到店铺数据\r\n        this.getShopNameData(this.signData.organizationCode)\r\n        //得到仓库数据\r\n        this.getWarehouseList(this.signData.organizationId);\r\n      });\r\n    },\r\n    //得到店铺数据\r\n    getShopNameData(organizationId) {\r\n      // symbol 1--网销 2--渠销\r\n      this.request(\r\n        this.api.order.orderStore_orderStoreList,\r\n        {\r\n          symbol: 1,\r\n          organizationCode:organizationId ,\r\n        },\r\n      ).then(data=>{\r\n        console.log(data)\r\n        this.storeShopData=data\r\n      })\r\n    },\r\n     storeShopDataChanegEvent(val){\r\n       console.log(val)\r\n      this.signData.storeName=''\r\n      this.signData.orderSn=''\r\n      this.signData.mobile=''\r\n      var storeId=this.storeShopData.find(item=>item.storeName==val).id\r\n      this.signData.storeId=storeId\r\n      this.storeSelect=false\r\n    },\r\n    //得到物流编码\r\n    selectLogisticsData(val) {\r\n      var logisticsCode = this.logisticsListData.find(\r\n        item => item.name == val\r\n      ).code;\r\n      this.signData.logisticsCompanyCode = logisticsCode;\r\n    },\r\n    //获取货主列表\r\n    getGoodsOwnerListData(organizationId) {\r\n      this.request(this.api.system.goodsOwner_list, {\r\n        orgId: organizationId\r\n      }).then(data => {\r\n        console.log(data.data);\r\n        this.signData. goodsOwner = data.data[0].code;\r\n      });\r\n    },\r\n    //得到仓库列表\r\n    getWarehouseList(orgId) {\r\n      this.request(this.api.warehouse.warehouseBase_warehouse_list, {\r\n        isValid: true\r\n      }).then(res => {\r\n        console.log(res);\r\n        this.WarehouseCodeData = res.data;\r\n      });\r\n    },\r\n    //获取物流数据\r\n    getLogisticsList() {\r\n      this.request(this.api.warehouse.warehouseBase_logistics_list, {isValid:true}).then(res => {\r\n        console.log(res);\r\n        this.logisticsListData = res.data;\r\n      });\r\n    },\r\n    //得到渠道订单号的数据\r\n    async querySearch(queryString, cb) {\r\n      console.log(queryString)\r\n      if (queryString.length == 0) {\r\n        return;\r\n      }\r\n      //得到渠道订单号联想数据\r\n      var restaurants = await this.getOrderSnData(queryString);\r\n      this.orderSnData=restaurants.data\r\n      // 调用 callback 返回建议列表的数据\r\n      cb(restaurants.data);\r\n    },\r\n    handleSelect(item) {\r\n      console.log(item);\r\n      this.signData.orderSn = item.orderSn;\r\n      this.signData.storeName=item.storeName\r\n      this.signData.mobile=item.mobile\r\n      //标识退货商户状态\r\n      this.storeNameStatus=true\r\n      //根据订单号得到商品数据\r\n      this.getShopDataByOrderSn(this.signData.orderSn)\r\n    },\r\n    //订单号联想数据\r\n    async getOrderSnData(key) {\r\n      // symbol 1--网销 2--渠销\r\n      return await this.request(\r\n        this.api.order.channelSaleOrder_getChannelListForRefundOrder,\r\n        {\r\n          orderType:'0101',\r\n          searchKey: key\r\n        },\r\n        true\r\n      );\r\n    },\r\n    //收货仓库\r\n    selectwarehouseCodeChange(val) {\r\n      console.log(val);\r\n      var warehouseId = this.WarehouseCodeData.find(item => item.warehouseName == val).id;\r\n      var code = this.WarehouseCodeData.find(item => item.warehouseName == val).warehouseCode;\r\n      this.signData.warehouseCode = code;\r\n    },\r\n    //选择订单号的点击事件\r\n    selectOrderSnClickEvent() {\r\n      if(!this.signData.storeId){\r\n        this.storeSelect=true\r\n        return\r\n      }\r\n      this.request(this.api.order.channelSaleOrder_getChannelListForRefundOrder,{\r\n        storeId:this.signData.storeId,\r\n        orderType:'0101',\r\n        pageIndex:1,\r\n        pageSize:10\r\n      },\r\n      true).then(data=>{\r\n       console.log(data)\r\n       this.shopMsg=true\r\n       this.gridTableData.gridData=data.data\r\n       this.selectDataTotalPage=data.totalCount\r\n\r\n       this.visible=true\r\n       if(this.$refs['gridTableForm']){\r\n        this.$refs['gridTableForm'].resetFields();\r\n       }\r\n      })\r\n    },\r\n    //选择商品的点击事件\r\n    selectShopClickEvent() {\r\n      this.$router.push({\r\n        path: \"/OS/salesReturn/ditchReturn/ditchReturn_shop\",\r\n        query:{\r\n          ownerId:\"\",\r\n          organizationName: this.signData.organization,\r\n          warehouseName: this.signData.warehouse,\r\n          warehouseId: this.signData.warehouseCode,\r\n        }\r\n      });\r\n      //存储填写的信息\r\n      localStorage.setItem(\"shopMsgData\", JSON.stringify(this.signData));\r\n      localStorage.setItem(\"localTableData\",JSON.stringify(this.signData.channelOrderGoodsVOList));\r\n    },\r\n    //监听退货数量的变化\r\n    salesReturnShopNumberChange(val) {\r\n      console.log(val);\r\n      var amount = 0;\r\n      this.signData.breakageAmount='0.00'\r\n      this.signData.channelOrderGoodsVOList.forEach(item => {\r\n        amount += item.refundAmount * item.returnQuantity;\r\n      });\r\n      this.signData.amount=amount.toFixed(2);\r\n      this.signData.refundAmount = amount.toFixed(2);\r\n    },\r\n    //监听退货数量的变化-不带num\r\n    salesReturnNoNumShopNumberChange(val){\r\n      var amount = 0;\r\n      this.signData.breakageAmount='0.00'\r\n      this.signData.channelOrderGoodsVOList.forEach(item => {\r\n        amount += item.refundAmount * item.returnQuantity;\r\n      });\r\n      this.signData.amount=amount.toFixed(2);\r\n      this.signData.refundAmount = amount.toFixed(2);\r\n    },\r\n    //监听退货单价的变化\r\n    salesReturnPriceChange(val){\r\n      var amount = 0;\r\n      this.signData.breakageAmount='0.00'\r\n      this.signData.channelOrderGoodsVOList.forEach(item => {\r\n        amount += item.refundAmount * item.returnQuantity;\r\n      });\r\n      this.signData.amount=amount.toFixed(2);\r\n      this.signData.refundAmount = amount.toFixed(2);\r\n    },\r\n    //优惠金额\r\n    priceInputChangeEvent(val) {\r\n      console.log(this.signData.breakageAmount);\r\n      var breakageAmount=val.target.value.match(/^\\d*(\\.?\\d{0,2})/g)\r\n      this.signData.breakageAmount=breakageAmount[0]\r\n    },\r\n    //确认btn的点击事件\r\n    primaryBtnClick() {\r\n      var self=this\r\n      this.$refs.ruleForm.validate(valid => {\r\n        if (valid) {\r\n          console.log(\"dasdasd\");\r\n          let channelOrderGoodsVOList = self.signData.channelOrderGoodsVOList.filter(item => {\r\n            if(!item.tmpQuantity){\r\n              return item.returnQuantity != 0;\r\n            }else{\r\n              return item.tmpQuantity !=item.returnQuantity && item.returnQuantity !=0;\r\n            }\r\n          });\r\n          if(channelOrderGoodsVOList.length==0){\r\n            this.$message.error('退货商品数量不能全部为0');\r\n            return\r\n          }\r\n          this.signData.channelOrderGoodsVOList=channelOrderGoodsVOList\r\n          this.request(\r\n            this.api.order.channelRefundOrder_save,\r\n            this.signData\r\n          ).then(data => {\r\n            console.log(\"270===========\");\r\n            //重置\r\n            localStorage.removeItem(\"localTableData\");\r\n            this.$refs.ruleForm.resetFields();\r\n            this.signData.channelOrderGoodsVOList = [];\r\n            this.$router.go(-1)\r\n          });\r\n        } else {\r\n          console.log(\"error submit!!\");\r\n          return false;\r\n        }\r\n      });\r\n    },\r\n    //取消btn的点击事件\r\n    plainBtnClick() {\r\n      this.$router.go(-1);\r\n    },\r\n    //每页条数改变时\r\n    handleSizeChange(page) {\r\n      this.signData.gridTableData.pageSize= page;\r\n      this.gridFormDataSearch()\r\n    },\r\n    //当前页改变时\r\n    handleCurrentChange(page) {\r\n      this.signData.gridTableData.pageIndex = page;\r\n      this.gridFormDataSearch()\r\n    },\r\n    //选择Btn的点击事件\r\n    selectBtnClick(row) {\r\n      console.log(row);\r\n      this.signData.storeName=row.storeName\r\n      this.signData.mobile=row.mobile\r\n      this.signData.orderSn=row.orderSn\r\n      this.visible=false\r\n      //标识退货商户状态\r\n      this.storeNameStatus=true\r\n      //根据订单号得到商品数据\r\n      this.getShopDataByOrderSn(this.signData.orderSn)\r\n    },\r\n    //根据订单号得到对应的商品数据\r\n    getShopDataByOrderSn(orderSn){\r\n      this.request(this.api.order.channelSaleOrder_get,{orderSn:orderSn,storeId:this.signData.storeId,pageStart:'',pageSize:''}).then(res=>{\r\n      this.shopMsg=true\r\n      console.log(res)\r\n      localStorage.removeItem('localTableData')\r\n      this.signData.channelOrderGoodsVOList=res.channelSaleOrderGoodsVOList.data;\r\n      var allAmount=0\r\n      this.signData.channelOrderGoodsVOList.forEach(item=>{\r\n        this.$set(item,'refundAmount',item.sellPrice)\r\n        // item.returnQuantity=item.num\r\n        allAmount+=item.num*item.refundAmount\r\n      })\r\n      this.signData.amount=allAmount.toFixed(2);\r\n      this.signData.refundAmount=allAmount.toFixed(2);\r\n    })\r\n    },\r\n    //搜索\r\n    gridFormDataSearch() {\r\n       this.request(this.api.order.channelRefundOrder_list, this.gridTableData).then(\r\n        res => {\r\n          this.gridTableData.gridData=res.data\r\n        }\r\n      );\r\n    },\r\n    //重置\r\n    gridFormDataResetFilters(gridFormData) {\r\n      this.$refs[gridFormData].resetFields();\r\n    },\r\n    //组织机构改变时的事件\r\n    getTreeDeptName(val) {\r\n      console.log(val)\r\n    }\r\n  }\r\n};\r\n</script>\r\n\r\n<style lang=\"less\" scoped>\r\n.content {\r\n  background-color: #fff;\r\n  padding: 20px;\r\n  .form_div {\r\n    margin-top: 20px;\r\n  }\r\n  .order_div {\r\n    position: relative;\r\n    line-height: 15px;\r\n    .select_order_label {\r\n      display: inline-block;\r\n      width: 35px;\r\n      text-align: center;\r\n      position: absolute;\r\n      right: -40px;\r\n      top: 0;\r\n      color: #409eff;\r\n    }\r\n  }\r\n  .disableSelect /deep/ .el-input .el-input__inner{\r\n    border: 1px solid red;\r\n  }\r\n  .tag_div {\r\n    display: flex;\r\n    align-items: center;\r\n  }\r\n  .table_msg {\r\n    margin-top: 10px;\r\n    .select_shop_title {\r\n      margin-left: 40px;\r\n      background-color: #409eff;\r\n      padding: 8px 10px;\r\n      color: #fff;\r\n      border-radius: 5px;\r\n    }\r\n  }\r\n  .table_div {\r\n    margin-top: 30px;\r\n  }\r\n  .money-div {\r\n    background-color: #fff;\r\n    width: 100%;\r\n    text-align: right;\r\n    padding-right: 30px;\r\n    margin-top: 30px;\r\n    .input-price {\r\n      display: inline-block;\r\n      padding: 10px;\r\n      width: 100px;\r\n      border-radius: 5px;\r\n    }\r\n    .money-content {\r\n      margin: 10px 0;\r\n    }\r\n  }\r\n  .remarks-textarea {\r\n    margin-top: 20px;\r\n    .textarea {\r\n      display: inline-block;\r\n      width: 300px;\r\n    }\r\n  }\r\n  .btn-div {\r\n    margin-left: 70px;\r\n    margin-top: 30px;\r\n  }\r\n}\r\n</style>\r\n\r\n"],"sourceRoot":"src/views/OS/salesReturn/ditchReturn"}]}
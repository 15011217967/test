{"remainingRequest":"C:\\Users\\EDZ\\Desktop\\研发项目\\vue-project\\trunk\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\EDZ\\Desktop\\研发项目\\vue-project\\trunk\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!C:\\Users\\EDZ\\Desktop\\研发项目\\vue-project\\trunk\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\EDZ\\Desktop\\研发项目\\vue-project\\trunk\\src\\views\\goods\\Goods.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\EDZ\\Desktop\\研发项目\\vue-project\\trunk\\src\\views\\goods\\Goods.vue","mtime":1572415123665},{"path":"C:\\Users\\EDZ\\Desktop\\研发项目\\vue-project\\trunk\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1558492728398},{"path":"C:\\Users\\EDZ\\Desktop\\研发项目\\vue-project\\trunk\\node_modules\\babel-loader\\lib\\index.js","mtime":1558492720858},{"path":"C:\\Users\\EDZ\\Desktop\\研发项目\\vue-project\\trunk\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1558492728398},{"path":"C:\\Users\\EDZ\\Desktop\\研发项目\\vue-project\\trunk\\node_modules\\vue-loader\\lib\\index.js","mtime":1558492728890}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport Pagination from \"../../components/Pagination\";\nimport treeDept from \"@/components/treeDept\";\nimport treePerson from '@/components/treePerson';\nexport default {\n  data: function data() {\n    return {\n      selTree: \"1.4.1\",\n      selTree2: \"UA0001\",\n      nshow: true,\n      //switch开启\n      fshow: false,\n      //switch关闭\n      loading: false,\n      //是显示加载\n      editFormVisible: false,\n      //控制编辑页面显示与隐藏\n      title: \"添加\",\n      editForm: {\n        deptId: \"\",\n        deptName: \"\",\n        deptNo: \"\",\n        accessToken: localStorage.getItem(\"accessToken\")\n      },\n      // rules表单验证\n      rules: {\n        deptName: [{\n          required: true,\n          message: \"请输入部门名称\",\n          trigger: \"blur\"\n        }],\n        deptNo: [{\n          required: true,\n          message: \"请输入部门代码\",\n          trigger: \"blur\"\n        }]\n      },\n      formInline: {\n        page: 1,\n        limit: 10,\n        varLable: \"\",\n        varName: \"\",\n        accessToken: localStorage.getItem(\"accessToken\")\n      },\n      // 删除部门\n      seletedata: {\n        ids: \"\",\n        accessToken: localStorage.getItem(\"accessToken\")\n      },\n      userparm: [],\n      //搜索权限\n      listData: [],\n      //用户数据\n      // 分页参数\n      pageparm: {\n        currentPage: 1,\n        pageSize: 10,\n        total: 10\n      }\n    };\n  },\n  // 注册组件\n  components: {\n    Pagination: Pagination,\n    treeDept: treeDept,\n    treePerson: treePerson\n  },\n\n  /**\r\n   * 数据发生改变\r\n   */\n\n  /**\r\n   * 创建完毕\r\n   */\n  created: function created() {\n    this.getdata(this.formInline);\n  },\n  watch: {\n    selTree: function selTree(val) {\n      console.log(val);\n    }\n  },\n\n  /**\r\n   * 里面的方法只有被调用才会执行\r\n   */\n  methods: {\n    // 获取公司列表\n    getdata: function getdata(parameter) {\n      this.loading = true; // 模拟数据开始\n\n      var res = {\n        code: 0,\n        msg: null,\n        count: 5,\n        data: [{\n          addUser: null,\n          editUser: null,\n          addTime: 1521062371000,\n          editTime: 1526700200000,\n          deptId: 2,\n          deptName: \"XX分公司\",\n          deptNo: \"1\",\n          parentId: 1\n        }, {\n          addUser: null,\n          editUser: null,\n          addTime: 1521063247000,\n          editTime: 1526652291000,\n          deptId: 3,\n          deptName: \"上海测试\",\n          deptNo: \"02\",\n          parentId: 1\n        }, {\n          addUser: null,\n          editUser: null,\n          addTime: 1526349555000,\n          editTime: 1526349565000,\n          deptId: 12,\n          deptName: \"1\",\n          deptNo: \"11\",\n          parentId: 1\n        }, {\n          addUser: null,\n          editUser: null,\n          addTime: 1526373178000,\n          editTime: 1526373178000,\n          deptId: 13,\n          deptName: \"5\",\n          deptNo: \"5\",\n          parentId: 1\n        }, {\n          addUser: null,\n          editUser: null,\n          addTime: 1526453107000,\n          editTime: 1526453107000,\n          deptId: 17,\n          deptName: \"v\",\n          deptNo: \"v\",\n          parentId: 1\n        }]\n      };\n      this.loading = false;\n      this.listData = res.data;\n      this.pageparm.currentPage = this.formInline.page;\n      this.pageparm.pageSize = this.formInline.limit;\n      this.pageparm.total = res.count; // 模拟数据结束\n\n      /***\r\n       * 调用接口，注释上面模拟数据 取消下面注释\r\n       */\n      // deptList(parameter)\n      //   .then(res => {\n      //     this.loading = false\n      //     if (res.success == false) {\n      //       this.$message({\n      //         type: 'info',\n      //         message: res.msg\n      //       })\n      //     } else {\n      //       this.listData = res.data\n      //       // 分页赋值\n      //       this.pageparm.currentPage = this.formInline.page\n      //       this.pageparm.pageSize = this.formInline.limit\n      //       this.pageparm.total = res.count\n      //     }\n      //   })\n      //   .catch(err => {\n      //     this.loading = false\n      //     this.$message.error('菜单加载失败，请稍后再试！')\n      //   })\n    },\n    // 分页插件事件\n    callFather: function callFather(parm) {\n      this.formInline.page = parm.currentPage;\n      this.formInline.limit = parm.pageSize;\n      this.getdata(this.formInline);\n    },\n    // 搜索事件\n    search: function search() {\n      this.getdata(this.formInline);\n    },\n    //显示编辑界面\n    handleEdit: function handleEdit(index, row) {\n      this.editFormVisible = true;\n\n      if (row != undefined && row != \"undefined\") {\n        this.title = \"修改\";\n        this.editForm.deptId = row.deptId;\n        this.editForm.deptName = row.deptName;\n        this.editForm.deptNo = row.deptNo;\n      } else {\n        this.title = \"添加\";\n        this.editForm.deptId = \"\";\n        this.editForm.deptName = \"\";\n        this.editForm.deptNo = \"\";\n      }\n    },\n    // 编辑、增加页面保存方法\n    submitForm: function submitForm(editData) {\n      var _this = this;\n\n      this.$refs[editData].validate(function (valid) {\n        if (valid) {\n          deptSave(_this.editForm).then(function (res) {\n            _this.editFormVisible = false;\n            _this.loading = false;\n\n            if (res.success) {\n              _this.getdata(_this.formInline);\n\n              _this.$message({\n                type: \"success\",\n                message: \"公司保存成功！\"\n              });\n            } else {\n              _this.$message({\n                type: \"info\",\n                message: res.msg\n              });\n            }\n          }).catch(function (err) {\n            _this.editFormVisible = false;\n            _this.loading = false;\n\n            _this.$message.error(\"公司保存失败，请稍后再试！\");\n          });\n        } else {\n          return false;\n        }\n      });\n    },\n    // 删除公司\n    deleteUser: function deleteUser(index, row) {\n      var _this2 = this;\n\n      this.$confirm(\"确定要删除吗?\", \"信息\", {\n        confirmButtonText: \"确定\",\n        cancelButtonText: \"取消\",\n        type: \"warning\"\n      }).then(function () {\n        deptDelete(row.deptId).then(function (res) {\n          if (res.success) {\n            _this2.$message({\n              type: \"success\",\n              message: \"公司已删除!\"\n            });\n\n            _this2.getdata(_this2.formInline);\n          } else {\n            _this2.$message({\n              type: \"info\",\n              message: res.msg\n            });\n          }\n        }).catch(function (err) {\n          _this2.loading = false;\n\n          _this2.$message.error(\"公司删除失败，请稍后再试！\");\n        });\n      }).catch(function () {\n        _this2.$message({\n          type: \"info\",\n          message: \"已取消删除\"\n        });\n      });\n    },\n    // 关闭编辑、增加弹出框\n    closeDialog: function closeDialog() {\n      this.editFormVisible = false;\n    }\n  }\n};",{"version":3,"sources":["Goods.vue"],"names":[],"mappings":"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","sourcesContent":["/**\r\n * 基础菜单 商品管理\r\n */\r\n<template>\r\n  <div>\r\n    <!-- 面包屑导航 -->\r\n    <el-breadcrumb separator-class=\"el-icon-arrow-right\">\r\n      <el-breadcrumb-item :to=\"{ path: '/' }\">首页</el-breadcrumb-item>\r\n      <el-breadcrumb-item>商品管理</el-breadcrumb-item>\r\n    </el-breadcrumb>\r\n    <!-- 搜索筛选 -->\r\n    <el-form :inline=\"true\" :model=\"formInline\" class=\"user-search\">\r\n      <el-form-item label=\"搜索：\">\r\n        <el-input size=\"small\" v-model=\"formInline.deptName\" placeholder=\"输入部门名称\"></el-input>\r\n      </el-form-item>\r\n      <el-form-item label>\r\n        <el-input size=\"small\" v-model=\"formInline.deptNo\" placeholder=\"输入部门代码\"></el-input>\r\n      </el-form-item>\r\n      <el-form-item label=\"选择机构: \">\r\n        <tree-dept type=\"0\" v-model=\"selTree\"></tree-dept>\r\n      </el-form-item>\r\n      <el-form-item label=\"选择人员: \">\r\n        <tree-person v-model=\"selTree2\"></tree-person>\r\n      </el-form-item>\r\n      <el-form-item>\r\n        <el-button size=\"small\" type=\"primary\" plain icon=\"el-icon-search\" @click=\"search\">搜索</el-button>\r\n        <el-button size=\"small\" type=\"primary\" icon=\"el-icon-plus\" @click=\"handleEdit()\">添加</el-button>\r\n      </el-form-item>\r\n    </el-form>\r\n    <!--列表-->\r\n    <el-table\r\n      size=\"small\"\r\n      :data=\"listData\"\r\n      highlight-current-row\r\n      v-loading=\"loading\"\r\n      border\r\n      element-loading-text=\"拼命加载中\"\r\n      style=\"width: 100%;\"\r\n    >\r\n      <el-table-column align=\"center\" type=\"selection\" width=\"60\"></el-table-column>\r\n      <el-table-column sortable prop=\"deptName\" label=\"部门名称\" width=\"300\"></el-table-column>\r\n      <el-table-column sortable prop=\"deptNo\" label=\"部门代码\" width=\"300\">\r\n        <template slot-scope=\"scope\">{{\"CEN001\"|codeToName}}</template>\r\n      </el-table-column>\r\n      <el-table-column sortable prop=\"editTime\" label=\"修改时间\" width=\"300\">\r\n        <template slot-scope=\"scope\">\r\n          <div>{{scope.row.editTime|timestampToTime}}</div>\r\n        </template>\r\n      </el-table-column>\r\n      <el-table-column sortable prop=\"editUser\" label=\"修改人\" width=\"300\"></el-table-column>\r\n      <el-table-column align=\"center\" label=\"操作\" min-width=\"300\">\r\n        <template slot-scope=\"scope\">\r\n          <el-button size=\"small\" @click=\"handleEdit(scope.$index, scope.row)\">编辑</el-button>\r\n          <el-button size=\"small\" type=\"danger\" @click=\"deleteUser(scope.$index, scope.row)\">删除</el-button>\r\n        </template>\r\n      </el-table-column>\r\n    </el-table>\r\n    <!-- 分页组件 -->\r\n    <Pagination v-bind:child-msg=\"pageparm\" @callFather=\"callFather\"></Pagination>\r\n    <!-- 编辑界面 -->\r\n    <el-dialog :title=\"title\" :visible.sync=\"editFormVisible\" width=\"30%\" @click=\"closeDialog\">\r\n      <el-form label-width=\"120px\" :model=\"editForm\" :rules=\"rules\" ref=\"editForm\">\r\n        <el-form-item label=\"部门名称\" prop=\"deptName\">\r\n          <el-input\r\n            size=\"small\"\r\n            v-model=\"editForm.deptName\"\r\n            auto-complete=\"off\"\r\n            placeholder=\"请输入部门名称\"\r\n          ></el-input>\r\n        </el-form-item>\r\n        <el-form-item label=\"部门代码\" prop=\"deptNo\">\r\n          <el-input\r\n            size=\"small\"\r\n            v-model=\"editForm.deptNo\"\r\n            auto-complete=\"off\"\r\n            placeholder=\"请输入部门代码\"\r\n          ></el-input>\r\n        </el-form-item>\r\n      </el-form>\r\n      <div slot=\"footer\" class=\"dialog-footer\">\r\n        <el-button size=\"small\" @click=\"closeDialog\">取消</el-button>\r\n        <el-button\r\n          size=\"small\"\r\n          type=\"primary\"\r\n          :loading=\"loading\"\r\n          class=\"title\"\r\n          @click=\"submitForm('editForm')\"\r\n        >保存</el-button>\r\n      </div>\r\n    </el-dialog>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport Pagination from \"../../components/Pagination\";\r\nimport treeDept from \"@/components/treeDept\";\r\nimport treePerson from '@/components/treePerson'\r\nexport default {\r\n  data() {\r\n    return {\r\n      selTree: \"1.4.1\",\r\n      selTree2: \"UA0001\",\r\n      nshow: true, //switch开启\r\n      fshow: false, //switch关闭\r\n      loading: false, //是显示加载\r\n      editFormVisible: false, //控制编辑页面显示与隐藏\r\n      title: \"添加\",\r\n      editForm: {\r\n        deptId: \"\",\r\n        deptName: \"\",\r\n        deptNo: \"\",\r\n        accessToken: localStorage.getItem(\"accessToken\")\r\n      },\r\n      // rules表单验证\r\n      rules: {\r\n        deptName: [\r\n          { required: true, message: \"请输入部门名称\", trigger: \"blur\" }\r\n        ],\r\n        deptNo: [{ required: true, message: \"请输入部门代码\", trigger: \"blur\" }]\r\n      },\r\n      formInline: {\r\n        page: 1,\r\n        limit: 10,\r\n        varLable: \"\",\r\n        varName: \"\",\r\n        accessToken: localStorage.getItem(\"accessToken\")\r\n      },\r\n      // 删除部门\r\n      seletedata: {\r\n        ids: \"\",\r\n        accessToken: localStorage.getItem(\"accessToken\")\r\n      },\r\n      userparm: [], //搜索权限\r\n      listData: [], //用户数据\r\n      // 分页参数\r\n      pageparm: {\r\n        currentPage: 1,\r\n        pageSize: 10,\r\n        total: 10\r\n      }\r\n    };\r\n  },\r\n  // 注册组件\r\n  components: {\r\n    Pagination,\r\n    treeDept,\r\n    treePerson\r\n  },\r\n  /**\r\n   * 数据发生改变\r\n   */\r\n\r\n  /**\r\n   * 创建完毕\r\n   */\r\n  created() {\r\n    this.getdata(this.formInline);\r\n  },\r\n  watch: {\r\n    selTree(val) {\r\n      console.log(val);\r\n    }\r\n  },\r\n  /**\r\n   * 里面的方法只有被调用才会执行\r\n   */\r\n  methods: {\r\n    // 获取公司列表\r\n    getdata(parameter) {\r\n      this.loading = true;\r\n      // 模拟数据开始\r\n      let res = {\r\n        code: 0,\r\n        msg: null,\r\n        count: 5,\r\n        data: [\r\n          {\r\n            addUser: null,\r\n            editUser: null,\r\n            addTime: 1521062371000,\r\n            editTime: 1526700200000,\r\n            deptId: 2,\r\n            deptName: \"XX分公司\",\r\n            deptNo: \"1\",\r\n            parentId: 1\r\n          },\r\n          {\r\n            addUser: null,\r\n            editUser: null,\r\n            addTime: 1521063247000,\r\n            editTime: 1526652291000,\r\n            deptId: 3,\r\n            deptName: \"上海测试\",\r\n            deptNo: \"02\",\r\n            parentId: 1\r\n          },\r\n          {\r\n            addUser: null,\r\n            editUser: null,\r\n            addTime: 1526349555000,\r\n            editTime: 1526349565000,\r\n            deptId: 12,\r\n            deptName: \"1\",\r\n            deptNo: \"11\",\r\n            parentId: 1\r\n          },\r\n          {\r\n            addUser: null,\r\n            editUser: null,\r\n            addTime: 1526373178000,\r\n            editTime: 1526373178000,\r\n            deptId: 13,\r\n            deptName: \"5\",\r\n            deptNo: \"5\",\r\n            parentId: 1\r\n          },\r\n          {\r\n            addUser: null,\r\n            editUser: null,\r\n            addTime: 1526453107000,\r\n            editTime: 1526453107000,\r\n            deptId: 17,\r\n            deptName: \"v\",\r\n            deptNo: \"v\",\r\n            parentId: 1\r\n          }\r\n        ]\r\n      };\r\n      this.loading = false;\r\n      this.listData = res.data;\r\n      this.pageparm.currentPage = this.formInline.page;\r\n      this.pageparm.pageSize = this.formInline.limit;\r\n      this.pageparm.total = res.count;\r\n      // 模拟数据结束\r\n\r\n      /***\r\n       * 调用接口，注释上面模拟数据 取消下面注释\r\n       */\r\n      // deptList(parameter)\r\n      //   .then(res => {\r\n      //     this.loading = false\r\n      //     if (res.success == false) {\r\n      //       this.$message({\r\n      //         type: 'info',\r\n      //         message: res.msg\r\n      //       })\r\n      //     } else {\r\n      //       this.listData = res.data\r\n      //       // 分页赋值\r\n      //       this.pageparm.currentPage = this.formInline.page\r\n      //       this.pageparm.pageSize = this.formInline.limit\r\n      //       this.pageparm.total = res.count\r\n      //     }\r\n      //   })\r\n      //   .catch(err => {\r\n      //     this.loading = false\r\n      //     this.$message.error('菜单加载失败，请稍后再试！')\r\n      //   })\r\n    },\r\n    // 分页插件事件\r\n    callFather(parm) {\r\n      this.formInline.page = parm.currentPage;\r\n      this.formInline.limit = parm.pageSize;\r\n      this.getdata(this.formInline);\r\n    },\r\n    // 搜索事件\r\n    search() {\r\n      this.getdata(this.formInline);\r\n    },\r\n    //显示编辑界面\r\n    handleEdit: function(index, row) {\r\n      this.editFormVisible = true;\r\n      if (row != undefined && row != \"undefined\") {\r\n        this.title = \"修改\";\r\n        this.editForm.deptId = row.deptId;\r\n        this.editForm.deptName = row.deptName;\r\n        this.editForm.deptNo = row.deptNo;\r\n      } else {\r\n        this.title = \"添加\";\r\n        this.editForm.deptId = \"\";\r\n        this.editForm.deptName = \"\";\r\n        this.editForm.deptNo = \"\";\r\n      }\r\n    },\r\n    // 编辑、增加页面保存方法\r\n    submitForm(editData) {\r\n      this.$refs[editData].validate(valid => {\r\n        if (valid) {\r\n          deptSave(this.editForm)\r\n            .then(res => {\r\n              this.editFormVisible = false;\r\n              this.loading = false;\r\n              if (res.success) {\r\n                this.getdata(this.formInline);\r\n                this.$message({\r\n                  type: \"success\",\r\n                  message: \"公司保存成功！\"\r\n                });\r\n              } else {\r\n                this.$message({\r\n                  type: \"info\",\r\n                  message: res.msg\r\n                });\r\n              }\r\n            })\r\n            .catch(err => {\r\n              this.editFormVisible = false;\r\n              this.loading = false;\r\n              this.$message.error(\"公司保存失败，请稍后再试！\");\r\n            });\r\n        } else {\r\n          return false;\r\n        }\r\n      });\r\n    },\r\n    // 删除公司\r\n    deleteUser(index, row) {\r\n      this.$confirm(\"确定要删除吗?\", \"信息\", {\r\n        confirmButtonText: \"确定\",\r\n        cancelButtonText: \"取消\",\r\n        type: \"warning\"\r\n      })\r\n        .then(() => {\r\n          deptDelete(row.deptId)\r\n            .then(res => {\r\n              if (res.success) {\r\n                this.$message({\r\n                  type: \"success\",\r\n                  message: \"公司已删除!\"\r\n                });\r\n                this.getdata(this.formInline);\r\n              } else {\r\n                this.$message({\r\n                  type: \"info\",\r\n                  message: res.msg\r\n                });\r\n              }\r\n            })\r\n            .catch(err => {\r\n              this.loading = false;\r\n              this.$message.error(\"公司删除失败，请稍后再试！\");\r\n            });\r\n        })\r\n        .catch(() => {\r\n          this.$message({\r\n            type: \"info\",\r\n            message: \"已取消删除\"\r\n          });\r\n        });\r\n    },\r\n    // 关闭编辑、增加弹出框\r\n    closeDialog() {\r\n      this.editFormVisible = false;\r\n    }\r\n  }\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.user-search {\r\n  margin-top: 20px;\r\n}\r\n.userRole {\r\n  width: 100%;\r\n}\r\n</style>\r\n\r\n\r\n"],"sourceRoot":"src/views/goods"}]}
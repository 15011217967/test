{"remainingRequest":"C:\\Users\\EDZ\\Desktop\\研发项目\\vue-project\\trunk\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\EDZ\\Desktop\\研发项目\\vue-project\\trunk\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!C:\\Users\\EDZ\\Desktop\\研发项目\\vue-project\\trunk\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\EDZ\\Desktop\\研发项目\\vue-project\\trunk\\src\\views\\product\\components\\commondity_description.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\EDZ\\Desktop\\研发项目\\vue-project\\trunk\\src\\views\\product\\components\\commondity_description.vue","mtime":1572415123942},{"path":"C:\\Users\\EDZ\\Desktop\\研发项目\\vue-project\\trunk\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1558492728398},{"path":"C:\\Users\\EDZ\\Desktop\\研发项目\\vue-project\\trunk\\node_modules\\babel-loader\\lib\\index.js","mtime":1558492720858},{"path":"C:\\Users\\EDZ\\Desktop\\研发项目\\vue-project\\trunk\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1558492728398},{"path":"C:\\Users\\EDZ\\Desktop\\研发项目\\vue-project\\trunk\\node_modules\\vue-loader\\lib\\index.js","mtime":1558492728890}],"contextDependencies":[],"result":["import _toConsumableArray from \"C:\\\\Users\\\\EDZ\\\\Desktop\\\\\\u7814\\u53D1\\u9879\\u76EE\\\\vue-project\\\\trunk\\\\node_modules\\\\@babel\\\\runtime-corejs2/helpers/esm/toConsumableArray\";\nimport \"core-js/modules/es6.array.find-index\";\nimport \"core-js/modules/es6.function.name\";\nimport \"core-js/modules/es6.array.find\";\nimport \"core-js/modules/es6.array.sort\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//引入拖动模块功能\nimport draggable from \"vuedraggable\"; //引入图片组件\n\nimport DialogUpImg from \"./dialog_video_upImg.vue\"; //视频播放组件\n\nimport VideoPlayView from \"./videoPlay.vue\"; //视频库组件\n\nimport DialogVideo from \"./dialog_video_list.vue\";\nvar productImages = []; //产品图片列表\n\nvar removeProductImagesList = []; //删除的产品图片列表\n\nvar productVideos = []; //产品视频列表\n\nvar removeProductVideoList = []; //删除的产品视频列表\n\nexport default {\n  name: \"commondityDescription\",\n  display: \"Transitions\",\n  order: 7,\n  data: function data() {\n    return {\n      //主图视频\n      isMainVideo: false,\n      //主图视频数据\n      mainVideoForm: {},\n      //全屏视频\n      isFullScreenVideo: false,\n      //全屏视频列表\n      fullScreenVideoList: [],\n      //父组件传来的全部数据\n      parentForm: {},\n      //图片拖动组件\n      drag: false,\n      masterImgList: [],\n      //主图列表\n      masterImgStatus: true,\n      //详情图片\n      detailImgList: [],\n      detailImgStatus: true,\n      dialogImgVisible: false,\n      dialogImageUrl: \"\",\n      isShow: false\n    }; // 主图：MASTER_IMAGE\n    // 详情：DETAIL_IMAGE\n    // 主视频：MASTER_VIDEO\n    // 全屏视频：FULL_SCREEN_VIDEO\n  },\n  created: function created() {\n    this.init();\n  },\n  methods: {\n    init: function init() {\n      productImages = [];\n      removeProductImagesList = [];\n      productVideos = []; //产品视频列表\n\n      removeProductVideoList = []; //删除的产品视频列表\n\n      this.isShow = false;\n    },\n\n    /**\r\n     * @description:  从父级获取数据 如果走了此方法说明是回显\r\n     * @param {obj} 整个数据\r\n     * @return:\r\n     */\n    videoImgPropInit: function videoImgPropInit(params) {\n      var isShow = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n      this.init();\n      this.isShow = isShow;\n      var parentForm = params; //放入数据\n\n      productImages = parentForm.productImages || []; //产品图片列表\n\n      productVideos = parentForm.productVideos || []; //产品视频列表\n      //找出主图\n\n      var masterImg = productImages.filter(function (item) {\n        return item.type == \"MASTER_IMAGE\";\n      });\n      this.masterImgList = masterImg.sort(function (a, b) {\n        return a.sort - b.sort;\n      }); //找出详情图\n\n      var detailImg = productImages.filter(function (item) {\n        return item.type == \"DETAIL_IMAGE\";\n      });\n      this.detailImgList = detailImg.sort(function (a, b) {\n        return a.sort - b.sort;\n      }); //找出主图视频\n\n      this.mainVideoForm = productVideos.find(function (item) {\n        return item.type == \"MASTER_VIDEO\";\n      }) || {};\n      this.isMainVideo = true; //找出全屏视频\n\n      var fullScreenVideo = productVideos.filter(function (item) {\n        return item.type == \"FULL_SCREEN_VIDEO\";\n      });\n      this.fullScreenVideoList = fullScreenVideo.sort(function (a, b) {\n        return a.sort - b.sort;\n      });\n    },\n    //主图视频\n    addMainPictureVideo: function addMainPictureVideo() {\n      this.$refs.dialogVideoRef.propInit(\"main\");\n    },\n    //全屏视频\n    addFullScreenVideo: function addFullScreenVideo() {\n      var fullScreenVideoList = this.$common.deepCopy(this.fullScreenVideoList);\n      this.$refs.dialogVideoRef.propInit(\"fullScreen\", fullScreenVideoList);\n      fullScreenVideoList = null;\n    },\n    //主图调用返回数据\n    mainHandle: function mainHandle(params) {\n      this.isMainVideo = true;\n\n      var _params = this.$common.deepCopy(params);\n\n      this.mainVideoForm = {\n        cover: _params.cover,\n        videoName: _params.name,\n        url: _params.url,\n        videoId: _params.id,\n        type: \"MASTER_VIDEO\"\n      }; //数据\n\n      productVideos.push(this.mainVideoForm);\n      this.heandleSetParentVideoData();\n      _params = null;\n    },\n    //全屏视频返回的数据\n    fullScreenHandle: function fullScreenHandle(params) {\n      this.isFullScreenVideo = true;\n\n      var _params = this.$common.deepCopy(params);\n\n      var obj = {\n        cover: _params.cover,\n        videoName: _params.name,\n        url: _params.url,\n        videoId: _params.id,\n        type: \"FULL_SCREEN_VIDEO\",\n        sort: \"\"\n      };\n      this.fullScreenVideoList.push(obj);\n\n      for (var i = 0; i < this.fullScreenVideoList.length; i++) {\n        this.fullScreenVideoList[i].sort = i + 1;\n      } //数据\n\n\n      productVideos.push(obj);\n      this.heandleSetParentVideoData();\n      _params = null;\n    },\n    //主图视频删除\n    mainVideoRemove: function mainVideoRemove(item) {\n      //有的话说明是后台返回的单独处理 //只有一个视频\n      if (!!item.id) {\n        item.status = 9;\n        removeProductVideoList.push(item);\n        var index = productVideos.findIndex(function (elem) {\n          return elem.videoId == item.videoId;\n        });\n        productVideos.splice(index, 1);\n        this.mainVideoForm = {};\n        this.isMainVideo = false;\n        this.heandleSetParentVideoData();\n      } else {\n        //没有ID说明是新增的 删除就行\n        var productIndex = productVideos.findIndex(function (elem) {\n          return elem.videoId == item.videoId;\n        });\n        productVideos.splice(productIndex, 1);\n        this.mainVideoForm = {};\n        this.isMainVideo = false;\n        this.heandleSetParentVideoData();\n      }\n    },\n    //全屏视频删除\n    fullScreenRemove: function fullScreenRemove(item) {\n      //有的话说明是后台返回的单独处理\n      if (!!item.id) {\n        item.status = 9;\n        removeProductVideoList.push(item);\n        var index = productVideos.findIndex(function (elem) {\n          return elem.videoId == item.videoId;\n        });\n        productVideos.splice(index, 1);\n\n        var _index = this.fullScreenVideoList.findIndex(function (elem) {\n          return elem.videoId == item.videoId;\n        });\n\n        this.fullScreenVideoList.splice(_index, 1);\n        this.heandleSetParentVideoData();\n      } else {\n        //没有ID说明是新增的 删除就行\n        var productIndex = productVideos.findIndex(function (elem) {\n          return elem.videoId == item.videoId;\n        });\n        productVideos.splice(productIndex, 1);\n\n        var _index2 = this.fullScreenVideoList.findIndex(function (elem) {\n          return elem.videoId == item.videoId;\n        });\n\n        this.fullScreenVideoList.splice(_index2, 1);\n        this.heandleSetParentVideoData();\n      }\n    },\n    //处理视频给父组件传参\n    heandleSetParentVideoData: function heandleSetParentVideoData() {\n      var list = this.$common.deepCopy(productVideos);\n      var deleteList = this.$common.deepCopy(removeProductVideoList);\n      var arr = [].concat(_toConsumableArray(list), _toConsumableArray(deleteList));\n      this.$emit(\"setParentVideoList\", arr);\n      list = null, deleteList = null, arr = null;\n    },\n    //视频播放\n    videoPlay: function videoPlay(_url) {\n      this.$refs.videoRef.videoInit(_url);\n    },\n    //下面是图片处理\n    //处理从图片传回来的图片\n    heandleMasterImg: function heandleMasterImg(params) {\n      var obj = {\n        url: params.imageUrl,\n        imageId: params.id,\n        imageName: params.name,\n        type: \"MASTER_IMAGE\",\n        sort: \"\"\n      };\n      this.masterImgList.push(obj);\n\n      for (var i = 0; i < this.masterImgList.length; i++) {\n        this.masterImgList[i].sort = i + 1;\n      } //数据\n\n\n      productImages.push(obj);\n      this.heandleSetParentImgData();\n    },\n    //处理商品详情 返回的图片\n    heandledetailImg: function heandledetailImg(params) {\n      var obj = {\n        url: params.imageUrl,\n        imageId: params.id,\n        imageName: params.name,\n        type: \"DETAIL_IMAGE\",\n        sort: \"\"\n      };\n      this.detailImgList.push(obj);\n\n      for (var i = 0; i < this.detailImgList.length; i++) {\n        this.detailImgList[i].sort = i + 1;\n      } //数据\n\n\n      productImages.push(obj);\n      this.heandleSetParentImgData();\n    },\n    sort: function sort(list) {\n      list = list.sort(function (a, b) {\n        return a.sort - b.sort;\n      });\n    },\n    //主图删除了\n    masterImgRemove: function masterImgRemove(item) {\n      //有的话说明是后台返回的单独处理\n      if (!!item.id) {\n        item.status = 9;\n        removeProductImagesList.push(item);\n        var index = this.masterImgList.findIndex(function (elem) {\n          return elem.imageId == item.imageId;\n        });\n        this.masterImgList.splice(index, 1);\n        this.heandleSetParentImgData();\n      } else {\n        //没有ID说明是新增的 删除就行\n        var productIndex = productImages.findIndex(function (elem) {\n          return elem.imageId == item.imageId;\n        });\n        productImages.splice(productIndex, 1);\n\n        var _index3 = this.masterImgList.findIndex(function (elem) {\n          return elem.imageId == item.imageId;\n        });\n\n        this.masterImgList.splice(_index3, 1);\n        this.heandleSetParentImgData();\n        this.request(this.api.content.basePicture_deleteOssImage, {\n          imageUrl: item.url\n        });\n      }\n    },\n    //详情图删除了\n    detailImgRemove: function detailImgRemove(item) {\n      //有的话说明是后台返回的单独处理\n      if (!!item.id) {\n        item.status = 9;\n        removeProductImagesList.push(item);\n        var index = this.detailImgList.findIndex(function (elem) {\n          return elem.imageId == item.imageId;\n        });\n        this.detailImgList.splice(index, 1);\n        this.heandleSetParentImgData();\n      } else {\n        //没有ID说明是新增的 删除就行\n        var productIndex = productImages.findIndex(function (elem) {\n          return elem.imageId == item.imageId;\n        });\n        productImages.splice(productIndex, 1);\n\n        var _index4 = this.detailImgList.findIndex(function (elem) {\n          return elem.imageId == item.imageId;\n        });\n\n        this.detailImgList.splice(_index4, 1);\n        this.heandleSetParentImgData();\n        this.request(this.api.content.basePicture_deleteOssImage, {\n          imageUrl: item.url\n        });\n      }\n    },\n    //主图被移动了\n    masterImgChange: function masterImgChange() {\n      for (var i = 0; i < this.masterImgList.length; i++) {\n        this.masterImgList[i].sort = i + 1;\n      }\n\n      this.heandleSetParentImgData();\n    },\n    //详情发生移动了\n    detailImgChange: function detailImgChange() {\n      for (var i = 0; i < this.detailImgList.length; i++) {\n        this.detailImgList[i].sort = i + 1;\n      }\n\n      this.heandleSetParentImgData();\n    },\n    //处理图片给父组件传参\n    heandleSetParentImgData: function heandleSetParentImgData() {\n      var list = this.$common.deepCopy(productImages);\n      var deleteList = this.$common.deepCopy(removeProductImagesList);\n      var arr = [].concat(_toConsumableArray(list), _toConsumableArray(deleteList));\n      this.$emit(\"setParentImgList\", arr);\n      list = null, deleteList = null, arr = null;\n    },\n    handlePictureCardPreview: function handlePictureCardPreview(url) {\n      //预览图片时调用\n      this.dialogImageUrl = url;\n      this.dialogImgVisible = true;\n    }\n  },\n  watch: {\n    masterImgList: function masterImgList() {\n      if (this.masterImgList.length >= 5) {\n        this.masterImgStatus = false;\n      } else {\n        this.masterImgStatus = true;\n      }\n    },\n    detailImgList: function detailImgList() {\n      if (this.detailImgList.length >= 15) {\n        this.detailImgStatus = false;\n      } else {\n        this.detailImgStatus = true;\n      }\n    }\n  },\n  computed: {\n    dragOptions: function dragOptions() {\n      return {\n        animation: 200,\n        group: \"description\",\n        disabled: false,\n        ghostClass: \"ghost\"\n      };\n    }\n  },\n  components: {\n    VideoPlayView: VideoPlayView,\n    DialogVideo: DialogVideo,\n    DialogUpImg: DialogUpImg,\n    draggable: draggable\n  }\n};",{"version":3,"sources":["commondity_description.vue"],"names":[],"mappings":"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","sourcesContent":["<!--\r\n * @Description: 商品详情 =>商品描述\r\n * @Author: elephant\r\n * @Date: 2019-08-12 17:11:01\r\n * @LastEditTime: 2019-08-23 20:43:26\r\n * @LastEditors: \r\n -->\r\n<template>\r\n  <div>\r\n    <!-- 商品主图 -->\r\n    <div class=\"desc-wrap\">\r\n      <h5>商品主图：</h5>\r\n      <dl class=\"full-video-wrap\">\r\n        <dt class=\"paroduct-img-wrap\">\r\n          <draggable\r\n            class=\"paroduct-img-group\"\r\n            tag=\"ul\"\r\n            v-model=\"masterImgList\"\r\n            v-bind=\"dragOptions\"\r\n            @start=\"drag = true\"\r\n            @end=\"drag = false\"\r\n            @change=\"masterImgChange\"\r\n          >\r\n            <transition-group type=\"transition\">\r\n              <li\r\n                class=\"img-group-item main-img-wh\"\r\n                v-for=\"element in masterImgList\"\r\n                :key=\"element.url\"\r\n              >\r\n                <el-image class=\"view-img\" :src=\"element.url\" fit=\"contain\"></el-image>\r\n                <div class=\"hide-box\">\r\n                  <i @click=\"handlePictureCardPreview(element.url)\" class=\"show el-icon-zoom-in\"></i>\r\n                  <i v-if=\"!isShow\" @click=\"masterImgRemove(element)\" class=\"delete el-icon-delete\"></i>\r\n                </div>\r\n              </li>\r\n            </transition-group>\r\n          </draggable>\r\n          <dialog-up-img\r\n            v-if=\"!isShow\"\r\n            class=\"main-up-wrap\"\r\n            @setParentMasterImg=\"heandleMasterImg\"\r\n            :upIsShow=\"masterImgStatus\"\r\n            imgType=\"MASTER_IMAGE\"\r\n            ref=\"dialogUpImgRef\"\r\n          ></dialog-up-img>\r\n        </dt>\r\n        <dd v-show=\"!isShow\" class=\"mt-10\">最多上传5张主图，比列为3:4，每张大小不超过5M；拖动图片可移动图片位置</dd>\r\n      </dl>\r\n    </div>\r\n    <!-- 商品主图END -->\r\n    <!-- 主图视频 -->\r\n    <div class=\"desc-wrap mt-10\">\r\n      <h5>主图视频：</h5>\r\n      <dl>\r\n        <dt class=\"upload-video\">\r\n          <div v-if=\"Object.keys(mainVideoForm).length !== 0\" class=\"video-wrap main-video-wh\">\r\n            <el-image class=\"view-img\" :src=\"mainVideoForm.cover\" fit=\"contain\"></el-image>\r\n            <div class=\"abs-cont\">\r\n              <i\r\n                v-if=\"!isShow\"\r\n                @click.stop=\"mainVideoRemove(mainVideoForm)\"\r\n                class=\"remove el-icon-delete\"\r\n              ></i>\r\n              <i @click.stop=\"videoPlay(mainVideoForm.url)\" class=\"play el-icon-video-play\"></i>\r\n            </div>\r\n          </div>\r\n          <nav v-show=\"!isShow\" v-else @click=\"addMainPictureVideo\" class=\"btn-wrap main-img-wh\">\r\n            <i class=\"el-icon-plus\"></i>\r\n          </nav>\r\n        </dt>\r\n        <dd v-show=\"!isShow\" class=\"mt-10\">只能上传单个视频，建议比例为3：4，大小不超过20M</dd>\r\n      </dl>\r\n    </div>\r\n    <!-- 主图视频END -->\r\n    <!-- 全屏视频 -->\r\n    <div class=\"desc-wrap mt-10\">\r\n      <h5>全屏视频：</h5>\r\n      <dl class=\"full-video-wrap\">\r\n        <dt class=\"upload-video\">\r\n          <div v-if=\"fullScreenVideoList.length > 0\" class=\"full-video\">\r\n            <div\r\n              class=\"video-wrap full-video-wh mr-20\"\r\n              v-for=\"(item,index) in fullScreenVideoList\"\r\n              :key=\"index\"\r\n            >\r\n              <el-image class=\"view-img\" :src=\"item.cover\" fit=\"contain\"></el-image>\r\n              <div class=\"abs-cont\">\r\n                <i\r\n                  v-if=\"!isShow\"\r\n                  @click.stop=\"fullScreenRemove(item)\"\r\n                  class=\"remove el-icon-delete\"\r\n                ></i>\r\n                <i @click.stop=\"videoPlay(item.url)\" class=\"play el-icon-video-play\"></i>\r\n              </div>\r\n            </div>\r\n          </div>\r\n          <nav\r\n            v-if=\"fullScreenVideoList.length < 5\"\r\n            v-show=\"!isShow\"\r\n            @click=\"addFullScreenVideo\"\r\n            class=\"btn-wrap detail-video-wh\"\r\n          >\r\n            <i class=\"el-icon-plus\"></i>\r\n          </nav>\r\n        </dt>\r\n        <dd v-show=\"!isShow\" class=\"mt-10\">可以上传5个视频，建议比例为9：16，每个大小不超过20M</dd>\r\n      </dl>\r\n    </div>\r\n    <!-- 全屏视频END -->\r\n    <!-- 商品详情 -->\r\n    <div class=\"desc-wrap\">\r\n      <h5>商品详情：</h5>\r\n      <dl class=\"full-video-wrap\">\r\n        <dt class=\"paroduct-img-wrap\">\r\n          <draggable\r\n            class=\"paroduct-img-group\"\r\n            tag=\"ul\"\r\n            v-model=\"detailImgList\"\r\n            v-bind=\"dragOptions\"\r\n            @start=\"drag = true\"\r\n            @end=\"drag = false\"\r\n            @change=\"detailImgChange\"\r\n          >\r\n            <transition-group type=\"transition\">\r\n              <li\r\n                class=\"img-group-item detail-img-wh\"\r\n                v-for=\"element in detailImgList\"\r\n                :key=\"element.url\"\r\n              >\r\n                <el-image class=\"view-img\" :src=\"element.url\" fit=\"contain\"></el-image>\r\n                <div class=\"hide-box\">\r\n                  <i @click=\"handlePictureCardPreview(element.url)\" class=\"show el-icon-zoom-in\"></i>\r\n                  <i v-if=\"!isShow\" @click=\"detailImgRemove(element)\" class=\"delete el-icon-delete\"></i>\r\n                </div>\r\n              </li>\r\n            </transition-group>\r\n          </draggable>\r\n          <dialog-up-img\r\n            v-if=\"!isShow\"\r\n            class=\"details-up-wrap\"\r\n            @setParentDetailImg=\"heandledetailImg\"\r\n            :upIsShow=\"detailImgStatus\"\r\n            imgType=\"DETAIL_IMAGE\"\r\n            ref=\"dialogUpImgRef\"\r\n          ></dialog-up-img>\r\n        </dt>\r\n        <dd v-show=\"!isShow\" class=\"mt-10\">单张大小不超过5M，最多不超过15张，拖动可更改排序，点击可查看完整图片</dd>\r\n      </dl>\r\n    </div>\r\n    <!-- 商品详情END -->\r\n    <!-- 视频组件 -->\r\n    <video-play-view ref=\"videoRef\"></video-play-view>\r\n    <!-- 视频列表组件 -->\r\n    <dialog-video\r\n      @parentMainHandle=\"mainHandle\"\r\n      @parentFullScreenHandle=\"fullScreenHandle\"\r\n      @parentVideoPlay=\"videoPlay\"\r\n      ref=\"dialogVideoRef\"\r\n    ></dialog-video>\r\n    <!-- 图片预览 -->\r\n    <el-dialog :visible.sync=\"dialogImgVisible\" append-to-body>\r\n      <img width=\"100%\" :src=\"dialogImageUrl\" alt />\r\n    </el-dialog>\r\n  </div>\r\n</template>\r\n<script>\r\n//引入拖动模块功能\r\nimport draggable from \"vuedraggable\";\r\n//引入图片组件\r\nimport DialogUpImg from \"./dialog_video_upImg.vue\";\r\n//视频播放组件\r\nimport VideoPlayView from \"./videoPlay.vue\";\r\n//视频库组件\r\nimport DialogVideo from \"./dialog_video_list.vue\";\r\nlet productImages = []; //产品图片列表\r\nlet removeProductImagesList = []; //删除的产品图片列表\r\nlet productVideos = []; //产品视频列表\r\nlet removeProductVideoList = []; //删除的产品视频列表\r\nexport default {\r\n  name: \"commondityDescription\",\r\n  display: \"Transitions\",\r\n  order: 7,\r\n  data() {\r\n    return {\r\n      //主图视频\r\n      isMainVideo: false,\r\n      //主图视频数据\r\n      mainVideoForm: {},\r\n      //全屏视频\r\n      isFullScreenVideo: false,\r\n      //全屏视频列表\r\n      fullScreenVideoList: [],\r\n      //父组件传来的全部数据\r\n      parentForm: {},\r\n      //图片拖动组件\r\n      drag: false,\r\n      masterImgList: [], //主图列表\r\n      masterImgStatus: true,\r\n      //详情图片\r\n      detailImgList: [],\r\n      detailImgStatus: true,\r\n      dialogImgVisible: false,\r\n      dialogImageUrl: \"\",\r\n      isShow: false\r\n    };\r\n    // 主图：MASTER_IMAGE\r\n    // 详情：DETAIL_IMAGE\r\n    // 主视频：MASTER_VIDEO\r\n    // 全屏视频：FULL_SCREEN_VIDEO\r\n  },\r\n  created() {\r\n    this.init();\r\n  },\r\n  methods: {\r\n    init() {\r\n      productImages = [];\r\n      removeProductImagesList = [];\r\n      productVideos = []; //产品视频列表\r\n      removeProductVideoList = []; //删除的产品视频列表\r\n      this.isShow = false;\r\n    },\r\n    /**\r\n     * @description:  从父级获取数据 如果走了此方法说明是回显\r\n     * @param {obj} 整个数据\r\n     * @return:\r\n     */\r\n    videoImgPropInit(params, isShow = false) {\r\n      this.init();\r\n      this.isShow = isShow;\r\n      let parentForm = params;\r\n      //放入数据\r\n      productImages = parentForm.productImages || []; //产品图片列表\r\n      productVideos = parentForm.productVideos || []; //产品视频列表\r\n      //找出主图\r\n      let masterImg = productImages.filter(item => item.type == \"MASTER_IMAGE\");\r\n      this.masterImgList = masterImg.sort((a, b) => a.sort - b.sort);\r\n      //找出详情图\r\n      let detailImg = productImages.filter(item => item.type == \"DETAIL_IMAGE\");\r\n      this.detailImgList = detailImg.sort((a, b) => a.sort - b.sort);\r\n      //找出主图视频\r\n      this.mainVideoForm =\r\n        productVideos.find(item => item.type == \"MASTER_VIDEO\") || {};\r\n      this.isMainVideo = true;\r\n      //找出全屏视频\r\n      let fullScreenVideo = productVideos.filter(\r\n        item => item.type == \"FULL_SCREEN_VIDEO\"\r\n      );\r\n      this.fullScreenVideoList = fullScreenVideo.sort(\r\n        (a, b) => a.sort - b.sort\r\n      );\r\n    },\r\n    //主图视频\r\n    addMainPictureVideo() {\r\n      this.$refs.dialogVideoRef.propInit(\"main\");\r\n    },\r\n    //全屏视频\r\n    addFullScreenVideo() {\r\n      let fullScreenVideoList = this.$common.deepCopy(this.fullScreenVideoList);\r\n      this.$refs.dialogVideoRef.propInit(\"fullScreen\", fullScreenVideoList);\r\n      fullScreenVideoList = null;\r\n    },\r\n    //主图调用返回数据\r\n    mainHandle(params) {\r\n      this.isMainVideo = true;\r\n      let _params = this.$common.deepCopy(params);\r\n      this.mainVideoForm = {\r\n        cover: _params.cover,\r\n        videoName: _params.name,\r\n        url: _params.url,\r\n        videoId: _params.id,\r\n        type: \"MASTER_VIDEO\"\r\n      };\r\n      //数据\r\n      productVideos.push(this.mainVideoForm);\r\n      this.heandleSetParentVideoData();\r\n      _params = null;\r\n    },\r\n\r\n    //全屏视频返回的数据\r\n    fullScreenHandle(params) {\r\n      this.isFullScreenVideo = true;\r\n      let _params = this.$common.deepCopy(params);\r\n      let obj = {\r\n        cover: _params.cover,\r\n        videoName: _params.name,\r\n        url: _params.url,\r\n        videoId: _params.id,\r\n        type: \"FULL_SCREEN_VIDEO\",\r\n        sort: \"\"\r\n      };\r\n      this.fullScreenVideoList.push(obj);\r\n      for (let i = 0; i < this.fullScreenVideoList.length; i++) {\r\n        this.fullScreenVideoList[i].sort = i + 1;\r\n      }\r\n      //数据\r\n      productVideos.push(obj);\r\n      this.heandleSetParentVideoData();\r\n      _params = null;\r\n    },\r\n    //主图视频删除\r\n    mainVideoRemove(item) {\r\n      //有的话说明是后台返回的单独处理 //只有一个视频\r\n      if (!!item.id) {\r\n        item.status = 9;\r\n        removeProductVideoList.push(item);\r\n        let index = productVideos.findIndex(\r\n          elem => elem.videoId == item.videoId\r\n        );\r\n        productVideos.splice(index, 1);\r\n        this.mainVideoForm = {};\r\n        this.isMainVideo = false;\r\n        this.heandleSetParentVideoData();\r\n      } else {\r\n        //没有ID说明是新增的 删除就行\r\n        let productIndex = productVideos.findIndex(\r\n          elem => elem.videoId == item.videoId\r\n        );\r\n        productVideos.splice(productIndex, 1);\r\n        this.mainVideoForm = {};\r\n        this.isMainVideo = false;\r\n        this.heandleSetParentVideoData();\r\n      }\r\n    },\r\n    //全屏视频删除\r\n    fullScreenRemove(item) {\r\n      //有的话说明是后台返回的单独处理\r\n      if (!!item.id) {\r\n        item.status = 9;\r\n        removeProductVideoList.push(item);\r\n        let index = productVideos.findIndex(\r\n          elem => elem.videoId == item.videoId\r\n        );\r\n        productVideos.splice(index, 1);\r\n        let _index = this.fullScreenVideoList.findIndex(\r\n          elem => elem.videoId == item.videoId\r\n        );\r\n        this.fullScreenVideoList.splice(_index, 1);\r\n        this.heandleSetParentVideoData();\r\n      } else {\r\n        //没有ID说明是新增的 删除就行\r\n        let productIndex = productVideos.findIndex(\r\n          elem => elem.videoId == item.videoId\r\n        );\r\n        productVideos.splice(productIndex, 1);\r\n        let index = this.fullScreenVideoList.findIndex(\r\n          elem => elem.videoId == item.videoId\r\n        );\r\n        this.fullScreenVideoList.splice(index, 1);\r\n        this.heandleSetParentVideoData();\r\n      }\r\n    },\r\n    //处理视频给父组件传参\r\n    heandleSetParentVideoData() {\r\n      let list = this.$common.deepCopy(productVideos);\r\n      let deleteList = this.$common.deepCopy(removeProductVideoList);\r\n      let arr = [...list, ...deleteList];\r\n      this.$emit(\"setParentVideoList\", arr);\r\n      (list = null), (deleteList = null), (arr = null);\r\n    },\r\n    //视频播放\r\n    videoPlay(_url) {\r\n      this.$refs.videoRef.videoInit(_url);\r\n    },\r\n    //下面是图片处理\r\n    //处理从图片传回来的图片\r\n    heandleMasterImg(params) {\r\n      let obj = {\r\n        url: params.imageUrl,\r\n        imageId: params.id,\r\n        imageName: params.name,\r\n        type: \"MASTER_IMAGE\",\r\n        sort: \"\"\r\n      };\r\n      this.masterImgList.push(obj);\r\n      for (let i = 0; i < this.masterImgList.length; i++) {\r\n        this.masterImgList[i].sort = i + 1;\r\n      }\r\n      //数据\r\n      productImages.push(obj);\r\n      this.heandleSetParentImgData();\r\n    },\r\n    //处理商品详情 返回的图片\r\n    heandledetailImg(params) {\r\n      let obj = {\r\n        url: params.imageUrl,\r\n        imageId: params.id,\r\n        imageName: params.name,\r\n        type: \"DETAIL_IMAGE\",\r\n        sort: \"\"\r\n      };\r\n      this.detailImgList.push(obj);\r\n      for (let i = 0; i < this.detailImgList.length; i++) {\r\n        this.detailImgList[i].sort = i + 1;\r\n      }\r\n      //数据\r\n      productImages.push(obj);\r\n      this.heandleSetParentImgData();\r\n    },\r\n\r\n    sort(list) {\r\n      list = list.sort((a, b) => a.sort - b.sort);\r\n    },\r\n    //主图删除了\r\n    masterImgRemove(item) {\r\n      //有的话说明是后台返回的单独处理\r\n      if (!!item.id) {\r\n        item.status = 9;\r\n        removeProductImagesList.push(item);\r\n        let index = this.masterImgList.findIndex(\r\n          elem => elem.imageId == item.imageId\r\n        );\r\n        this.masterImgList.splice(index, 1);\r\n        this.heandleSetParentImgData();\r\n      } else {\r\n        //没有ID说明是新增的 删除就行\r\n        let productIndex = productImages.findIndex(\r\n          elem => elem.imageId == item.imageId\r\n        );\r\n        productImages.splice(productIndex, 1);\r\n        let index = this.masterImgList.findIndex(\r\n          elem => elem.imageId == item.imageId\r\n        );\r\n        this.masterImgList.splice(index, 1);\r\n        this.heandleSetParentImgData();\r\n         this.request(this.api.content.basePicture_deleteOssImage, {imageUrl:item.url});\r\n      }\r\n    },\r\n    //详情图删除了\r\n    detailImgRemove(item) {\r\n      //有的话说明是后台返回的单独处理\r\n      if (!!item.id) {\r\n        item.status = 9;\r\n        removeProductImagesList.push(item);\r\n        let index = this.detailImgList.findIndex(\r\n          elem => elem.imageId == item.imageId\r\n        );\r\n        this.detailImgList.splice(index, 1);\r\n        this.heandleSetParentImgData();\r\n      } else {\r\n        //没有ID说明是新增的 删除就行\r\n        let productIndex = productImages.findIndex(\r\n          elem => elem.imageId == item.imageId\r\n        );\r\n        productImages.splice(productIndex, 1);\r\n        let index = this.detailImgList.findIndex(\r\n          elem => elem.imageId == item.imageId\r\n        );\r\n        this.detailImgList.splice(index, 1);\r\n        this.heandleSetParentImgData();\r\n        this.request(this.api.content.basePicture_deleteOssImage, {imageUrl:item.url});\r\n      }\r\n    },\r\n    //主图被移动了\r\n    masterImgChange() {\r\n      for (let i = 0; i < this.masterImgList.length; i++) {\r\n        this.masterImgList[i].sort = i + 1;\r\n      }\r\n      this.heandleSetParentImgData();\r\n    },\r\n    //详情发生移动了\r\n    detailImgChange() {\r\n      for (let i = 0; i < this.detailImgList.length; i++) {\r\n        this.detailImgList[i].sort = i + 1;\r\n      }\r\n      this.heandleSetParentImgData();\r\n    },\r\n    //处理图片给父组件传参\r\n    heandleSetParentImgData() {\r\n      let list = this.$common.deepCopy(productImages);\r\n      let deleteList = this.$common.deepCopy(removeProductImagesList);\r\n      let arr = [...list, ...deleteList];\r\n      this.$emit(\"setParentImgList\", arr);\r\n      (list = null), (deleteList = null), (arr = null);\r\n    },\r\n\r\n    handlePictureCardPreview(url) {\r\n      //预览图片时调用\r\n      this.dialogImageUrl = url;\r\n      this.dialogImgVisible = true;\r\n    }\r\n  },\r\n  watch: {\r\n    masterImgList() {\r\n      if (this.masterImgList.length >= 5) {\r\n        this.masterImgStatus = false;\r\n      } else {\r\n        this.masterImgStatus = true;\r\n      }\r\n    },\r\n    detailImgList() {\r\n      if (this.detailImgList.length >= 15) {\r\n        this.detailImgStatus = false;\r\n      } else {\r\n        this.detailImgStatus = true;\r\n      }\r\n    }\r\n  },\r\n  computed: {\r\n    dragOptions() {\r\n      return {\r\n        animation: 200,\r\n        group: \"description\",\r\n        disabled: false,\r\n        ghostClass: \"ghost\"\r\n      };\r\n    }\r\n  },\r\n  components: {\r\n    VideoPlayView,\r\n    DialogVideo,\r\n    DialogUpImg,\r\n    draggable\r\n  }\r\n};\r\n</script>\r\n<style lang=\"less\" scoped>\r\n// 外部\r\n.desc-wrap {\r\n  display: flex;\r\n  width: 100%;\r\n  justify-content: flex-start;\r\n  flex-wrap: wrap;\r\n  > h5 {\r\n    font-size: 14px;\r\n    font-weight: 100;\r\n    width: 80px;\r\n    flex: 0 0 auto;\r\n    margin-top: 20px;\r\n  }\r\n  .full-video-wrap {\r\n    flex-wrap: wrap ;\r\n    min-width: 500px;\r\n    flex: 1;\r\n  }\r\n}\r\n.full-video {\r\n  display: flex;\r\n  justify-content: flex-start;\r\n}\r\n\r\n//图片\r\n.paroduct-img-wrap {\r\n  display: flex;\r\n  flex-wrap: wrap ;\r\n  justify-content: flex-start;\r\n  width: 100%;\r\n}\r\n.paroduct-img-group {\r\n  > span {\r\n    display: flex;\r\n    flex-wrap: wrap ;\r\n    justify-content: flex-start;\r\n  }\r\n  .img-group-item {\r\n    position: relative;\r\n\r\n    border-radius: 3px;\r\n    border: 1px solid #c0ccda;\r\n    margin: 10px 10px 0 0;\r\n    transition: all 0.5s ease-in-out;\r\n  }\r\n\r\n  .img-group-item:hover .hide-box {\r\n    display: flex;\r\n  }\r\n  .hide-box {\r\n    position: absolute;\r\n    left: 0;\r\n    top: 0;\r\n    background-color: rgba(0, 0, 0, 0.4);\r\n    width: 100%;\r\n    height: 100%;\r\n    border-radius: 3px;\r\n    border: 1px solid rgba(0, 0, 0, 0.4);\r\n    display: none;\r\n    justify-content: space-around;\r\n    cursor: move;\r\n    align-items: center;\r\n    .show {\r\n      font-size: 26px;\r\n      color: #ffffff;\r\n      cursor: pointer;\r\n    }\r\n    .delete {\r\n      font-size: 26px;\r\n      color: #ffffff;\r\n      cursor: pointer;\r\n    }\r\n  }\r\n}\r\n.flip-list-move {\r\n  transition: transform 0.5s;\r\n}\r\n.no-move {\r\n  transition: transform 0s;\r\n}\r\n.ghost {\r\n  opacity: 0.5;\r\n  background: #c8ebfb;\r\n}\r\n.list-group {\r\n  min-height: 20px;\r\n}\r\n.list-group-item {\r\n  cursor: move;\r\n}\r\n.list-group-item i {\r\n  cursor: pointer;\r\n}\r\n\r\n// 主图视频\r\n.upload-video {\r\n  display: flex;\r\n  justify-content: flex-start;\r\n  .btn-wrap {\r\n    border: 1px dashed #c0ccda;\r\n    border-radius: 6px;\r\n    text-align: center;\r\n    cursor: pointer;\r\n\r\n    i {\r\n      font-size: 28px;\r\n      color: #8c939d;\r\n    }\r\n  }\r\n  .full-video-wh {\r\n    width: 120px;\r\n    height: 200px;\r\n  }\r\n  .main-video-wh {\r\n    width: 120px;\r\n    height: 150px;\r\n  }\r\n  .video-wrap {\r\n    position: relative;\r\n\r\n    border: 1px solid #c0ccda;\r\n    border-radius: 6px;\r\n    text-align: center;\r\n\r\n    cursor: pointer;\r\n\r\n    img,\r\n    video {\r\n      width: 100%;\r\n      height: 100%;\r\n    }\r\n    .abs-cont {\r\n      width: 100%;\r\n      height: 100%;\r\n      position: absolute;\r\n      left: 0;\r\n      top: -1px;\r\n      font-size: 12px;\r\n      color: #ffffff;\r\n      padding: 4px 2px 4px 4px;\r\n      border-radius: 6px;\r\n      background-color: rgba(0, 0, 0, 0.4);\r\n      display: none;\r\n      transition: all 0.5s cubic-bezier(0.4, 0, 0.2, 1);\r\n      .remove {\r\n        position: absolute;\r\n        right: 10px;\r\n        bottom: 10px;\r\n        cursor: pointer;\r\n        font-size: 18px;\r\n      }\r\n      .play {\r\n        position: absolute;\r\n        left: 35%;\r\n        top: 35%;\r\n        cursor: pointer;\r\n        font-size: 40px;\r\n      }\r\n    }\r\n  }\r\n  .video-wrap:hover .abs-cont {\r\n    display: block;\r\n  }\r\n}\r\n.view-img {\r\n  width: 100%;\r\n  height: 100%;\r\n  border-radius: 4px;\r\n}\r\n\r\n.main-up-wrap /deep/ .btn-wrap {\r\n  height: 150px;\r\n  line-height: 150px;\r\n}\r\n.details-up-wrap /deep/ .btn-wrap {\r\n  width: 240px;\r\n  height: 320px;\r\n  line-height: 320px;\r\n}\r\n.main-img-wh {\r\n  width: 120px;\r\n  height: 150px;\r\n  line-height: 150px;\r\n}\r\n.detail-video-wh {\r\n  width: 120px;\r\n  height: 200px;\r\n  line-height: 200px;\r\n}\r\n.detail-img-wh {\r\n  width: 240px;\r\n  height: 320px;\r\n  line-height: 320px;\r\n}\r\n</style>\r\n"],"sourceRoot":"src/views/product/components"}]}
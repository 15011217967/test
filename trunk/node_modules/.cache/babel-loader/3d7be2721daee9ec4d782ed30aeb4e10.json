{"remainingRequest":"C:\\Users\\EDZ\\Desktop\\研发项目\\vue-project\\trunk\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\EDZ\\Desktop\\研发项目\\vue-project\\trunk\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!C:\\Users\\EDZ\\Desktop\\研发项目\\vue-project\\trunk\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\EDZ\\Desktop\\研发项目\\vue-project\\trunk\\src\\views\\content\\operate\\components\\LinkDialog.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\EDZ\\Desktop\\研发项目\\vue-project\\trunk\\src\\views\\content\\operate\\components\\LinkDialog.vue","mtime":1572415123539},{"path":"C:\\Users\\EDZ\\Desktop\\研发项目\\vue-project\\trunk\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1558492728398},{"path":"C:\\Users\\EDZ\\Desktop\\研发项目\\vue-project\\trunk\\node_modules\\babel-loader\\lib\\index.js","mtime":1558492720858},{"path":"C:\\Users\\EDZ\\Desktop\\研发项目\\vue-project\\trunk\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1558492728398},{"path":"C:\\Users\\EDZ\\Desktop\\研发项目\\vue-project\\trunk\\node_modules\\vue-loader\\lib\\index.js","mtime":1558492728890}],"contextDependencies":[],"result":["import \"core-js/modules/es6.function.name\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport PageTable from '@/views/content/components/PageTable';\nimport { timestampToTime } from '@/utils/util';\nexport default {\n  props: {\n    // 选中回调\n    callback: {\n      type: Function\n    },\n    // 选中的\n    checkLinkList: {\n      type: Array\n    }\n  },\n  // 数据\n  data: function data() {\n    return {\n      // 父级需要的参数\n      formData: {\n        title: '',\n        url: '',\n        linkType: '',\n        linkTypeName: '',\n        detailsType: '',\n        detailsTypeName: ''\n      },\n      // 显示隐藏\n      linkDialog: false,\n      // 商品链接 menu选中的\n      commodityActiveIndex: '',\n      // tabs默认选中的\n      activeName: '',\n      // 表格数据\n      tableData: {},\n      // 内容列表参数\n      contentFormData: {\n        title: '',\n        contentType: '',\n        pageIndex: 1,\n        pageSize: 10\n      },\n      // 商品列表参数\n      commodityFormData: {\n        valid: true,\n        searchWords: '',\n        pageIndex: 1,\n        pageSize: 10\n      },\n      // 链接类型\n      linkTypeList: [{\n        name: '内容',\n        type: '1',\n        value: 'content'\n      }, {\n        name: '商品',\n        type: '2',\n        value: 'commodity'\n      }],\n      // 内容类型\n      contentTypeList: [{\n        name: '文章',\n        type: '4'\n      }, {\n        name: '图集',\n        type: '3'\n      }, {\n        name: '小视频',\n        type: '2'\n      }, {\n        name: '视频',\n        type: '1'\n      }],\n      // 商品类型\n      commodityTypeList: [{\n        name: '定制单品',\n        type: '5'\n      }, {\n        name: '定制套装',\n        type: '6'\n      }, {\n        name: '标准商品',\n        type: '7'\n      }],\n      tableLoading: false\n    };\n  },\n  // 组件\n  components: {\n    PageTable: PageTable\n  },\n  // 初始化数据\n  mounted: function mounted() {\n    this.$nextTick(function () {// 获取商品数据\n    });\n  },\n  // 方法\n  methods: {\n    init: function init() {\n      this.activeName = this.linkTypeList[0].value;\n      this.formData = {\n        url: '',\n        linkType: this.linkTypeList[0].type,\n        linkTypeName: this.linkTypeList[0].name,\n        detailsType: this.contentTypeList[0].type,\n        detailsTypeName: this.contentTypeList[0].name\n      };\n      this.contentFormData = {\n        title: '',\n        contentType: this.contentTypeList[0].type,\n        pageIndex: 1,\n        pageSize: 10\n      }, this.getContentTableData();\n    },\n    // 获取内容数据\n    getContentTableData: function getContentTableData() {\n      var _this = this;\n\n      this.tableLoading = true;\n      this.$nextTick(function () {\n        _this.request(_this.api.contentCore.content_pass_list, _this.contentFormData).then(function (data) {\n          _this.tableDataInit(data.data);\n\n          _this.tableData = data;\n          _this.tableLoading = false;\n        });\n      });\n    },\n    // 获取商品链接表格数据\n    getCommodityTableData: function getCommodityTableData() {\n      var _this2 = this;\n\n      this.tableLoading = true;\n      this.$nextTick(function () {\n        // 定制单品\n        if (_this2.commodityActiveIndex == '5') {\n          _this2.request(_this2.api.product.customizedProduct_list, _this2.commodityFormData).then(function (data) {\n            _this2.tableDataInit(data.data);\n\n            _this2.tableData = data;\n            _this2.tableLoading = false;\n          });\n        } // 定制套装\n\n\n        if (_this2.commodityActiveIndex == '6') {\n          _this2.request(_this2.api.product.customizedSet_list, _this2.commodityFormData).then(function (data) {\n            _this2.tableDataInit(data.data);\n\n            _this2.tableData = data;\n            _this2.tableLoading = false;\n          });\n        } // 标准商品\n\n\n        if (_this2.commodityActiveIndex == '7') {\n          _this2.request(_this2.api.product.product_listProduct, _this2.commodityFormData).then(function (data) {\n            _this2.tableDataInit(data.data);\n\n            _this2.tableData = data;\n            _this2.tableLoading = false;\n          });\n        }\n      });\n    },\n    // 初始化\n    tableDataInit: function tableDataInit(data) {\n      if (this.checkLinkList && this.checkLinkList.length) {\n        for (var i = 0; i < this.checkLinkList.length; i++) {\n          for (var n = 0; n < data.length; n++) {\n            if (data[n].id === this.checkLinkList[i].url || data[n].contentId === this.checkLinkList[i].url) {\n              data[n]._flag = true;\n            }\n          }\n        }\n      }\n    },\n    // 内容选中\n    contentCheckItem: function contentCheckItem(row) {\n      this.formData.url = row.contentId;\n      this.formData.title = row.title;\n      this.$set(this.checkLinkList, 0, JSON.parse(JSON.stringify(this.formData)));\n      this.linkDialog = false;\n    },\n    // 商品选中\n    commodityCheckItem: function commodityCheckItem(row) {\n      this.formData.url = row.id;\n      this.formData.title = row.name;\n      this.$set(this.checkLinkList, 0, JSON.parse(JSON.stringify(this.formData)));\n      this.linkDialog = false;\n    },\n    // 一级切换\n    handleClick: function handleClick(tab, event) {\n      var type = tab.$attrs.type;\n      var name = tab.label;\n\n      if (type === '1') {\n        this.contentFormData.contentType = this.contentTypeList[0].type;\n        this.contentFormData.pageIndex = 1;\n        this.getContentTableData();\n        this.contentFormData.title = '';\n        this.formData.detailsType = this.contentTypeList[0].type;\n        this.formData.detailsTypeName = this.contentTypeList[0].name;\n      }\n\n      if (type === '2') {\n        this.commodityActiveIndex = this.commodityTypeList[0].type;\n        this.commodityFormData.pageIndex = 1;\n        this.getCommodityTableData();\n        this.commodityFormData.searchWords = '';\n        this.formData.detailsType = this.commodityTypeList[0].type;\n        this.formData.detailsTypeName = this.commodityTypeList[0].name;\n      }\n\n      this.formData.linkType = type;\n      this.formData.linkTypeName = name;\n    },\n    // 内容类型切换\n    contentActiveSelect: function contentActiveSelect(index, indexPath, event) {\n      var name = event.$el.innerText;\n      this.contentFormData.pageIndex = 1;\n      this.contentFormData.title = '';\n      this.contentFormData.contentType = index;\n      this.formData.detailsType = index;\n      this.formData.detailsTypeName = name;\n      this.getContentTableData();\n    },\n    // 商品类型切换\n    commodityHandleSelect: function commodityHandleSelect(index, indexPath, event) {\n      var name = event.$el.innerText;\n      this.commodityFormData.pageIndex = 1;\n      this.commodityFormData.searchWords = '';\n      this.commodityActiveIndex = index;\n      this.formData.detailsType = index;\n      this.formData.detailsTypeName = name;\n      this.getCommodityTableData();\n    }\n  },\n  // 计算属性\n  computed: {},\n  // 监听数据变化\n  watch: {}\n};",{"version":3,"sources":["LinkDialog.vue"],"names":[],"mappings":"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","sourcesContent":["<style lang=\"less\" scoped>\r\n  @import \"../../style/contentPublic.less\";\r\n  .table-img{height: 30px;}\r\n  .form-data{position: absolute;right: 20px;top: 4px;}\r\n</style>\r\n<template>\r\n  <!--添加链接-->\r\n  <el-dialog title=\"选择链接\" :visible.sync=\"linkDialog\" width=\"60%\" :close-on-click-modal=\"false\">\r\n    <div class=\"page-public\"  v-loading=\"tableLoading\">\r\n      <el-tabs v-model=\"activeName\" class=\"tabs\" type=\"card\" @tab-click=\"handleClick\">\r\n        <el-tab-pane label=\"内容\" name=\"content\" type=\"1\">\r\n          <el-menu :default-active=\"contentFormData.contentType\" class=\"el-menu-demo\" mode=\"horizontal\" @select=\"contentActiveSelect\">\r\n            <el-menu-item :index=\"item.type\" v-for=\"item in contentTypeList\" :key=\"item.type\">{{ item.name }}</el-menu-item>\r\n            <div class=\"form-data\">\r\n              <el-form :inline=\"true\" :model=\"contentFormData\" class=\"demo-form-inline\" size=\"small\" ref=\"form\">\r\n                <el-form-item label=\"\">\r\n                  <el-input v-model=\"contentFormData.title\" placeholder=\"内容标题\" suffix-icon=\"el-icon-search\" @keyup.13.native=\"getContentTableData\"></el-input>\r\n                </el-form-item>\r\n                <el-form-item>\r\n                  <el-button type=\"primary\" @click=\"getContentTableData\" size=\"small\" plain>搜索</el-button>\r\n                  <el-button @click=\"contentFormData.title = ''\" size=\"small\" plain>重置</el-button>\r\n                </el-form-item>\r\n              </el-form>\r\n            </div>\r\n          </el-menu>\r\n        </el-tab-pane>\r\n        <el-tab-pane label=\"商品\" name=\"commodity\" type=\"2\">\r\n          <el-menu :default-active=\"commodityActiveIndex\" class=\"el-menu-demo\" mode=\"horizontal\" @select=\"commodityHandleSelect\">\r\n            <el-menu-item :index=\"item.type\" v-for=\"item in commodityTypeList\" :key=\"item.type\">{{ item.name }}</el-menu-item>\r\n            <div class=\"form-data\">\r\n              <el-form :inline=\"true\" :model=\"commodityFormData\" class=\"demo-form-inline\" size=\"small\" ref=\"form\">\r\n                <el-form-item label=\"\">\r\n                  <el-input v-model=\"commodityFormData.searchWords\" placeholder=\"商品名称\" suffix-icon=\"el-icon-search\" @keyup.13.native=\"getCommodityTableData\"></el-input>\r\n                </el-form-item>\r\n                <el-form-item>\r\n                  <el-button type=\"primary\" @click=\"getCommodityTableData\" size=\"small\" plain>搜索</el-button>\r\n                  <el-button @click=\"commodityFormData.searchWords = ''\" size=\"small\" plain>重置</el-button>\r\n                </el-form-item>\r\n              </el-form>\r\n            </div>\r\n          </el-menu>\r\n        </el-tab-pane>\r\n      </el-tabs>\r\n      <!--内容表格-->\r\n      <page-table :get-data=\"getContentTableData\" :table-data=\"tableData\" :form-data=\"contentFormData\" v-if=\"activeName === 'content'\">\r\n        <el-table :data=\"tableData.data\" style=\"width: 100%\" height=\"334\">\r\n          <el-table-column prop=\"title\" label=\"内容标题\"></el-table-column>\r\n          <el-table-column label=\"封面\">\r\n            <template slot-scope=\"scope\">\r\n              <img :src=\"scope.row.coverList[0].url\" alt=\"\" class=\"table-img\" v-if=\"scope.row.coverList\">\r\n            </template>\r\n          </el-table-column>\r\n          <el-table-column prop=\"retailPrice\" label=\"发布时间\">\r\n            <template slot-scope=\"scope\">\r\n              {{ scope.row.createTime | timestampToTime}}\r\n            </template>\r\n          </el-table-column>\r\n          <el-table-column label=\"操作\" width=\"160\">\r\n            <template slot-scope=\"scope\">\r\n              <el-button type=\"text\" size=\"small\" @click=\"contentCheckItem(scope.row)\" :disabled=\"scope.row._flag\">添加</el-button>\r\n            </template>\r\n          </el-table-column>\r\n        </el-table>\r\n      </page-table>\r\n      <!--商品表格-->\r\n      <page-table :get-data=\"getCommodityTableData\" :table-data=\"tableData\" :form-data=\"commodityFormData\" v-if=\"activeName === 'commodity'\">\r\n        <el-table :data=\"tableData.data\" style=\"width: 100%\" height=\"334\">\r\n          <el-table-column prop=\"name\" label=\"商品名称\"></el-table-column>\r\n          <el-table-column label=\"商品图片\">\r\n            <template slot-scope=\"scope\">\r\n              <img :src=\"scope.row.image\" alt=\"\" class=\"table-img\">\r\n            </template>\r\n          </el-table-column>\r\n          <el-table-column prop=\"retailPrice\" label=\"销售价格\">\r\n            <template slot-scope=\"scope\">\r\n              ￥{{ scope.row.retailPrice ||  scope.row.minPrice}}\r\n            </template>\r\n          </el-table-column>\r\n          <el-table-column label=\"操作\" width=\"160\">\r\n            <template slot-scope=\"scope\">\r\n              <el-button type=\"text\" size=\"small\" @click=\"commodityCheckItem(scope.row)\" :disabled=\"scope.row._flag\">添加</el-button>\r\n            </template>\r\n          </el-table-column>\r\n        </el-table>\r\n      </page-table>\r\n    </div>\r\n  </el-dialog>\r\n\r\n</template>\r\n<script>\r\n  import PageTable from '@/views/content/components/PageTable'\r\n  import { timestampToTime } from '@/utils/util'\r\n  export default {\r\n    props:{\r\n      // 选中回调\r\n      callback: {\r\n        type: Function\r\n      },\r\n      // 选中的\r\n      checkLinkList: {\r\n        type: Array\r\n      }\r\n    },\r\n    // 数据\r\n    data() {\r\n      return {\r\n        // 父级需要的参数\r\n        formData: {\r\n          title: '',\r\n          url: '',\r\n          linkType: '',\r\n          linkTypeName: '',\r\n          detailsType: '',\r\n          detailsTypeName: ''\r\n        },\r\n        // 显示隐藏\r\n        linkDialog: false,\r\n        // 商品链接 menu选中的\r\n        commodityActiveIndex: '',\r\n        // tabs默认选中的\r\n        activeName: '',\r\n        // 表格数据\r\n        tableData: {},\r\n        // 内容列表参数\r\n        contentFormData:{\r\n          title: '',\r\n          contentType: '',\r\n          pageIndex: 1,\r\n          pageSize: 10\r\n        },\r\n        // 商品列表参数\r\n        commodityFormData:{\r\n          valid: true,\r\n          searchWords: '',\r\n          pageIndex: 1,\r\n          pageSize: 10\r\n        },\r\n        // 链接类型\r\n        linkTypeList: [\r\n          {name: '内容', type: '1', value: 'content'},\r\n          {name: '商品', type: '2', value: 'commodity'}\r\n        ],\r\n        // 内容类型\r\n        contentTypeList: [\r\n          {name: '文章', type: '4'},\r\n          {name: '图集', type: '3'},\r\n          {name: '小视频', type: '2'},\r\n          {name: '视频', type: '1'}\r\n        ],\r\n        // 商品类型\r\n        commodityTypeList: [\r\n          {name: '定制单品', type: '5'},\r\n          {name: '定制套装', type: '6'},\r\n          {name: '标准商品', type: '7'}\r\n        ],\r\n        tableLoading: false\r\n      }\r\n    },\r\n    // 组件\r\n    components: {\r\n      PageTable\r\n    },\r\n    // 初始化数据\r\n    mounted() {\r\n      this.$nextTick(() => {\r\n        // 获取商品数据\r\n\r\n      })\r\n    },\r\n    // 方法\r\n    methods: {\r\n      init(){\r\n        this.activeName = this.linkTypeList[0].value\r\n        this.formData =  {\r\n          url: '',\r\n          linkType: this.linkTypeList[0].type,\r\n          linkTypeName: this.linkTypeList[0].name,\r\n          detailsType: this.contentTypeList[0].type,\r\n          detailsTypeName: this.contentTypeList[0].name\r\n        }\r\n        this.contentFormData = {\r\n          title: '',\r\n          contentType: this.contentTypeList[0].type,\r\n          pageIndex: 1,\r\n          pageSize: 10\r\n        },\r\n        this.getContentTableData()\r\n      },\r\n      // 获取内容数据\r\n      getContentTableData(){\r\n        this.tableLoading = true\r\n        this.$nextTick(() => {\r\n          this.request(this.api.contentCore.content_pass_list, this.contentFormData).then(data => {\r\n            this.tableDataInit(data.data)\r\n            this.tableData = data\r\n            this.tableLoading = false\r\n          });\r\n        })\r\n      },\r\n      // 获取商品链接表格数据\r\n      getCommodityTableData(){\r\n        this.tableLoading = true\r\n        this.$nextTick(() => {\r\n          // 定制单品\r\n          if(this.commodityActiveIndex == '5'){\r\n            this.request(this.api.product.customizedProduct_list, this.commodityFormData).then(data => {\r\n              this.tableDataInit(data.data)\r\n              this.tableData = data\r\n              this.tableLoading = false\r\n            });\r\n          }\r\n          // 定制套装\r\n          if(this.commodityActiveIndex == '6'){\r\n            this.request(this.api.product.customizedSet_list, this.commodityFormData).then(data => {\r\n              this.tableDataInit(data.data)\r\n              this.tableData = data\r\n              this.tableLoading = false\r\n            });\r\n          }\r\n          // 标准商品\r\n          if(this.commodityActiveIndex == '7'){\r\n            this.request(this.api.product.product_listProduct, this.commodityFormData).then(data => {\r\n              this.tableDataInit(data.data)\r\n              this.tableData = data\r\n              this.tableLoading = false\r\n            });\r\n          }\r\n        })\r\n\r\n      },\r\n      // 初始化\r\n      tableDataInit(data){\r\n        if(this.checkLinkList && this.checkLinkList.length){\r\n          for(let i = 0; i < this.checkLinkList.length; i++){\r\n            for(let n = 0; n < data.length; n++){\r\n              if(data[n].id === this.checkLinkList[i].url || data[n].contentId === this.checkLinkList[i].url){\r\n                data[n]._flag = true\r\n              }\r\n            }\r\n          }\r\n        }\r\n      },\r\n      // 内容选中\r\n      contentCheckItem(row){\r\n        this.formData.url = row.contentId\r\n        this.formData.title = row.title\r\n        this.$set(this.checkLinkList, 0, JSON.parse(JSON.stringify(this.formData)))\r\n        this.linkDialog = false\r\n    },\r\n      // 商品选中\r\n      commodityCheckItem(row){\r\n        this.formData.url = row.id\r\n        this.formData.title = row.name\r\n        this.$set(this.checkLinkList, 0, JSON.parse(JSON.stringify(this.formData)))\r\n        this.linkDialog = false\r\n      },\r\n      // 一级切换\r\n      handleClick(tab, event){\r\n        const type = tab.$attrs.type\r\n        const name = tab.label\r\n        if(type === '1'){\r\n          this.contentFormData.contentType = this.contentTypeList[0].type\r\n          this.contentFormData.pageIndex = 1\r\n          this.getContentTableData()\r\n          this.contentFormData.title = ''\r\n          this.formData.detailsType = this.contentTypeList[0].type\r\n          this.formData.detailsTypeName = this.contentTypeList[0].name\r\n        }\r\n        if(type === '2'){\r\n          this.commodityActiveIndex = this.commodityTypeList[0].type\r\n          this.commodityFormData.pageIndex = 1\r\n          this.getCommodityTableData()\r\n          this.commodityFormData.searchWords = ''\r\n          this.formData.detailsType = this.commodityTypeList[0].type\r\n          this.formData.detailsTypeName = this.commodityTypeList[0].name\r\n        }\r\n        this.formData.linkType = type\r\n        this.formData.linkTypeName = name\r\n      },\r\n      // 内容类型切换\r\n      contentActiveSelect(index,indexPath,event){\r\n        const name = event.$el.innerText\r\n        this.contentFormData.pageIndex = 1\r\n        this.contentFormData.title = ''\r\n        this.contentFormData.contentType = index\r\n        this.formData.detailsType = index\r\n        this.formData.detailsTypeName = name\r\n        this.getContentTableData()\r\n      },\r\n      // 商品类型切换\r\n      commodityHandleSelect(index,indexPath,event){\r\n        const name = event.$el.innerText\r\n        this.commodityFormData.pageIndex = 1\r\n        this.commodityFormData.searchWords = ''\r\n        this.commodityActiveIndex = index\r\n        this.formData.detailsType = index\r\n        this.formData.detailsTypeName = name\r\n        this.getCommodityTableData()\r\n      }\r\n    },\r\n    // 计算属性\r\n    computed: {},\r\n    // 监听数据变化\r\n    watch: {}\r\n  }\r\n</script>\r\n"],"sourceRoot":"src/views/content/operate/components"}]}